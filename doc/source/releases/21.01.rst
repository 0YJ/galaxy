
.. to_doc

21.01
===============================

.. announce_start

Enhancements
-------------------------------

* History panel rewrite (available in the UI as a beta option).
  `Pull Request 8441`_
* Add workflow invocation detail component.
  `Pull Request 10976`_
* Allow organizing the panel via EDAM ontology annotations.  
  (thanks to `@hexylena <https://github.com/hexylena>`__).
  `Pull Request 10592`_
* Various substantial improvements to data library user interface 
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10204`_, `Pull Request 11099`_,
  `Pull Request 10557`_, `Pull Request 10558`_
* Script for finding missing db indexes
  `Pull Request 10350`_
* Implement Galaxy database model schema rendering script.
  `Pull Request 10571`_
* Allow configuration of activation email message.
  `Pull Request 10959`_
* UI & API for Supporting Best Practice Workflows
  `Pull Request 10988`_
* Implement edit & upgrade subworkflow buttons in workflow editor.
  `Pull Request 11032`_
* Allow Galaxy page creation from a workflow invocation report.
  `Pull Request 10241`_
* Implement user-facing objectstore metadata.
  `Pull Request 10233`_
* Allow embedding visualizations in new markdown-based Galaxy pages.
  `Pull Request 10288`_
* Fixes and improvements to favorited tools in the tool panel.
  `Pull Request 10955`_, `Pull Request 9873`_
* iRODS data migration script
  (thanks to `@kxk302 <https://github.com/kxk302>`__).
  `Pull Request 10125`_
* Add the OpenSeadragon viewer and extend datatypes for deep zoom images
  (thanks to `@gregvonkuster <https://github.com/gregvonkuster>`__).
  `Pull Request 10756`_, `Pull Request 11017`_, `Pull Request 10546`_
* Add gfa2 datatype
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10270`_
* Add nifti1 and nifti2 datatype
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 11020`_
* Add tck and trk datatype
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 11021`_
* Add gifti datatype
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 11028`_
* Add ome.tiff datatype
  (thanks to `@qiagu <https://github.com/qiagu>`__).
  `Pull Request 10349`_
* Add datatype converters for various MD filetypes
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10757`_
* Add Apache Parquet datatype
  `Pull Request 11047`_
* Add msf datatype
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11084`_
* Allow the "Apply Rules" tool to attach tags to output datasets.
  `Pull Request 10382`_
* Implement mypy type checking for the Galaxy Python backend.
  `Pull Request 11009`_, `Pull Request 11037`_,
  `Pull Request 11022`_, `Pull Request 11007`_
* Allow setting file download filename_pattern by client.
  `Pull Request 11108`_
* Add FastAPI migration of licenses endpoints
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 11056`_
* Improvements to workflow imports from GA4GH TRS servers
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10805`_, `Pull Request 10619`_
* Enhancements for galaxy-tool-test script.
  `Pull Request 10620`_, `Pull Request 10779`_
* Speedup xml replacement when loading tools.
  `Pull Request 10804`_
* Update askomics interactive tool to 4.1.1
  (thanks to `@abretaud <https://github.com/abretaud>`__).
  `Pull Request 10878`_
* Allow empty file uploads
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 11079`_
* Disable dataset edit button after the dataset has been deleted
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10589`_
* Implement expression tool for picking non-null values for CWL-style merging of
  conditional branches in native Galaxy workflows.
  `Pull Request 10712`_
* Add workflow tests for some newer workflow features.
  `Pull Request 10478`_, `Pull Request 10669`_
* wait_for_invocation should take in an assert_ok flag like other wait methods.
  `Pull Request 10668`_
* Add and document API for publishing and tagging workflows
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10748`_
* Allow relative paths when staging jobs (e.g. with planemo run)
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10886`_
* Various small cleanups and improvements to the workflow editor and migrations toward
  Vue.
  `Pull Request 10999`_, `Pull Request 11001`_, `Pull Request 11024`_,
  `Pull Request 10769`_, `Pull Request 11036`_, `Pull Request 11042`_
*  Replace StreamBall, replace tarballs with zip
  `Pull Request 10919`_
* Simplify JobInformation and DatasetInformation components
  `Pull Request 10980`_
* Set undesired execution hosts to avoid in LSF
  (thanks to `@pcm32 <https://github.com/pcm32>`__).
  `Pull Request 10260`_
* Limit CPUs used in docker containers
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10373`_
* Adding nodeSelector to K8S runner job pod spec
  (thanks to `@almahmoud <https://github.com/almahmoud>`__).
  `Pull Request 10380`_
* Cache container resolution during job execution
  `Pull Request 10451`_
* Support stopping Interactive Tools without deleting their outputs
  `Pull Request 10497`_
* Override some k8s runner params with destination params
  (thanks to `@almahmoud <https://github.com/almahmoud>`__).
  `Pull Request 10520`_
* Improve database operation job submission performance
  `Pull Request 10539`_
* Don't specify default bind type for singularity
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10625`_
* Python 3 - Convert a bunch of Bunchs to string Enums
  `Pull Request 11027`_
* Allow extra job metadata to be specified for k8s
  (thanks to `@nuwang <https://github.com/nuwang>`__).
  `Pull Request 11078`_
* Implement quota interface - with better logic isolation and unit tests.
  `Pull Request 10212`_
* When compiling dynamic installation confs, ensure location is actually writeable
  `Pull Request 10387`_
* Display minutes in admin jobs cutoff
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10493`_
* Display user disk usage in admin user panel
  `Pull Request 10666`_
* Allow TRS servers to not be defined
  (thanks to `@selten <https://github.com/selten>`__).
  `Pull Request 10817`_
* Drop ``legacy_eager_objectstore_initialization`` config option.
  `Pull Request 10828`_
* Clarify ``master_api_key`` intended use
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11067`
* Allow InteractiveTools to use path-based proxying when ``requires_domain=False``.
  `Pull Request 8596`_
* Add warning for non-existing tool version
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10139`_
* set up confirmation page for new custos/oidc users
  (thanks to `@juleengraham <https://github.com/juleengraham>`__).
  `Pull Request 10198`_
* Add script to diff two release config files.
  (thanks to `@hexylena <https://github.com/hexylena>`__).
  `Pull Request 10258`_
* Tiny upload optimization for uploads.
  `Pull Request 10316`_
* Allow files config to use keyed dict with ids as dict key.
  `Pull Request 10326`_
* vuefy dataset information
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10327`_
* Allow 'planemo run' to stage in existing datasets without reuploading
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10334`_
* Vuefy Job information
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10353`_
* Adds Visualization options to Markdown Editor
  `Pull Request 10404`_
* Update authnz to include Azure as IDP
  (thanks to `@cginmn <https://github.com/cginmn>`__).
  `Pull Request 10413`_
* Let python-irodsclient session manage connections
  (thanks to `@kxk302 <https://github.com/kxk302>`__).
  `Pull Request 10437`_
* Document workflow classes
  (thanks to `@brinkmanlab <https://github.com/brinkmanlab>`__).
  `Pull Request 10471`_
* Autofocus upload name in upload dialog
  `Pull Request 10487`_
* Update link for Galaxy configuration file in Galaxy debug document
  (thanks to `@kxk302 <https://github.com/kxk302>`__).
  `Pull Request 10488`_
* Revise style of radio button groups to improve visibility
  `Pull Request 10489`_
* Add update time to workflow version selector in workflow editor
  `Pull Request 10492`_
* Add missing documentation for macro elements in XSD
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 10495`_
* Add guidelines for proper commit messages
  `Pull Request 10498`_
* Move upload button below Tool panel header, increase size, add label
  `Pull Request 10499`_
* Use dataset selector in rules input dialog.
  `Pull Request 10505`_
* Add enumeration restriction to detect_errors
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 10510`_
* Simpler API for getting user API key
  `Pull Request 10522`_
* Add S3 plugin for remote files browser
  `Pull Request 10523`_
*  informative error message on /api/authenticate/baseauth
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10524`_
* Add more tags to Github.
  `Pull Request 10525`_
* More comments for rapid testing optional galaxy.files stuff.
  `Pull Request 10526`_
* 'copy to clipboard' button on datasets
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10529`_
* Add awesome-galaxy repo link to docs
  (thanks to `@innovate-invent <https://github.com/innovate-invent>`__).
  `Pull Request 10530`_
* Generate path resolution note for sample file, docs
  `Pull Request 10537`_
* Allow admins to add an additional custom logo to the masthead
  `Pull Request 10540`_
* Improve performance of copying HDAs and HDCAs
  `Pull Request 10549`_
* Update to new LTS nodejs version
  `Pull Request 10565`_
* Document data manager repository layout
  (thanks to `@brinkmanlab <https://github.com/brinkmanlab>`__).
  `Pull Request 10573`_
* Set uwsgi's honour-stdin option when in debug mode
  `Pull Request 10577`_
* Make extract wf action more visible
  (thanks to `@hexylena <https://github.com/hexylena>`__).
  `Pull Request 10583`_
* pgcleanup can redirect logging to stdout
  (thanks to `@gmauro <https://github.com/gmauro>`__).
  `Pull Request 10594`_
* Remove IUC conda channel from default configuration
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10608`_
* Document toolshed repository response object
  (thanks to `@brinkmanlab <https://github.com/brinkmanlab>`__).
  `Pull Request 10633`_
* Rev cwltool to 3.0.20201109103151
  `Pull Request 10658`_
* Full Python dependencies update
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10660`_
* Migrate API tests to GitHub workflow
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10674`_
* Added dockerfile [biohackathon]
  (thanks to `@nuwang <https://github.com/nuwang>`__).
  `Pull Request 10681`_
* Harden, formalize 'null' handling around boolean tool parameters
  `Pull Request 10694`_
* Improve visibility of upload button
  `Pull Request 10696`_
* Allow expression tools to output copies of input HDAs.
  `Pull Request 10700`_
* Update ftp document for rounds=100000
  (thanks to `@linnil1 <https://github.com/linnil1>`__).
  `Pull Request 10701`_
* Null handling and optional values for integers, floats, and text params.
  `Pull Request 10703`_
* Re-sync galaxy.tool_util.cwl with CWL branch of Galaxy.
  `Pull Request 10716`_
* Upgrade syntax using ``pyupgrade --py36-plus``
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10751`_
* Revision of sharing component, adds url copy to clipboard feature
  `Pull Request 10754`_
* list functionality changes with profile in xsd
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10798`_
* Don't cancel other selenium steps, if one step fails
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10801`_
* extension lookup with lower case extension
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10803`_
* Fix Library Folder performance
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10807`_
* Add GitHub workflow to build docs
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10811`_
* Maintainance Bot with GithubActions
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10813`_
* document optional default for multiple in xsd
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10819`_
* Implement read-only conda resolver (alternative)
  `Pull Request 10822`_
* Improved error handling in API Interactor
  `Pull Request 10833`_
* Add <filter> inline python example for "select" type
  (thanks to `@tensionhead <https://github.com/tensionhead>`__).
  `Pull Request 10838`_
* Use `github-script` action for maintenance_bot job too
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10844`_
* Unit testing and optimization for creating private roles and dataset sharing.
  `Pull Request 10845`_
* Always expand tool about section if metadata is available
  `Pull Request 10847`_
* Switch out tag image
  (thanks to `@astrovsky01 <https://github.com/astrovsky01>`__).
  `Pull Request 10853`_
* Run CI labeler on reopened PRs, but skip if area labels are present
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10861`_
* Allow build_list inputs to be optional
  (thanks to `@brinkmanlab <https://github.com/brinkmanlab>`__).
  `Pull Request 10863`_
* Report galaxy URL in tool test script, optionally publish history
  `Pull Request 10879`_
* Dynamic select parameters: also allow to choose legal options by name
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10880`_
* More improvements to tool test scripting.
  `Pull Request 10908`_
* Add screenshot decorators to selenium tests
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10911`_
* Add version tab which links to release notes to help tab
  (thanks to `@astrovsky01 <https://github.com/astrovsky01>`__).
  `Pull Request 10960`_
* API support for history import/export from/to galaxy.files plugins
  `Pull Request 10993`_
* Check Python typing for galaxy-containers and galaxy-tool-util during CI.
  `Pull Request 11000`_
* Update locale.js
  (thanks to `@shenweiyan <https://github.com/shenweiyan>`__).
  `Pull Request 11011`_
* Implementing highlighting and scrolling to nodes in canvas from lint panel.
  `Pull Request 11025`_
* Document how parameters in sections are referenced
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 11026`_
* Upload test results as artifact in case of failure
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11030`_
* Remove migration logic that will never be used now.
  `Pull Request 11038`_
* More type annotation fixes.
  `Pull Request 11039`_
* Support complex markers in `run_tests.sh`
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11045`_
* Optimized binary datatype sniffing for various binary datatypes.
  `Pull Request 11049`_
* Revise user experience for history import and export.
  `Pull Request 11054`_
* Move framework tests to GitHub workflows + lint test tools
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11055`_
* add validation for collection parameters
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 11063`_
* Verify behavior of non-existent from_work_dir outputs.
  `Pull Request 11073`_
* Show OpenAPI documentation for API tags
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 11083`_
* Documentation for Writing Tests
  `Pull Request 11088`_
* Update coverage documentation in run_tests.sh
  `Pull Request 11102`_
* Make minor improvements, add ToC
  `Pull Request 11104`_
* Persist scroll/url information, in chrome, firefox
  (thanks to `@hexylena <https://github.com/hexylena>`__).
  `Pull Request 11290`_
* Improve API test for datatype change
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 10272`_
* Datatypes refactoring
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10279`_
* Drop unnecessary list casting in Anndata datatype
  `Pull Request 10296`_
* Drop unused helpers in web.framework.helpers
  `Pull Request 10345`_
* Drop support for retired Python 3.5
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10368`_
* Make ``MetadataCollection`` a proper mapping
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10374`_
* Typos and semantic fixes for iRODS object store
  (thanks to `@trel <https://github.com/trel>`__).
  `Pull Request 10423`_
* K8s runner typo: job_destinantion->job_destination
  (thanks to `@almahmoud <https://github.com/almahmoud>`__).
  `Pull Request 10501`_
* Drop communication server
  `Pull Request 10514`_
* Worfklow typo fix in styling
  `Pull Request 10580`_
* Refactor logic for workflow_step.input_type into model.
  `Pull Request 10657`_
* Rename flake8 ignorelist
  `Pull Request 10702`_
* Refactor more generally useful Selenium code into reusable library code.
  `Pull Request 10783`_
* Rely on emails to determine GitLab users
  (thanks to `@selten <https://github.com/selten>`__).
  `Pull Request 10830`_
* Convert datasets.set_edit to modern decorator, reuse manager.
  `Pull Request 10854`_
* Make model somewhat compatible with sqlalchemy-1.4
  `Pull Request 10856`_
* Run maintenance bot only once
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10858`_
* Replace usage of mkstemp with NamedTemporaryFile
  `Pull Request 10862`_
* Small edits objectstore code.
  `Pull Request 10867`_
* Remove trans from stream_dataset_collection()
  `Pull Request 10907`_
* Use "email_from" value from schema for tool error report email
  `Pull Request 10956`_
* Beta History initial load optimization (a.k.a. Added many data providers)
  `Pull Request 10971`_
* drop migration hack from htcondor
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 10991`_
* Remove unused tag_outputs workflow controller action.
  `Pull Request 11040`_
* Drop 'unreachable'-ish showWarnings method in workflow editor.
  `Pull Request 11041`_
* Sync vuex to galaxy
  `Pull Request 11071`_
* Build FastAPI app in a single location
  `Pull Request 11074`_

Fixes
-------------------------------

* Hide purged datasets from visualizations
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10483`_
* Fix reference error in MVP client application
  (thanks to `@tmcgowan <https://github.com/tmcgowan>`__).
  `Pull Request 10782`_
* Fix for GTF sniffer
  (thanks to `@mtekman <https://github.com/mtekman>`__).
  `Pull Request 10588`_
* Fix AnnData datatype peek
  (thanks to `@mtekman <https://github.com/mtekman>`__).
  `Pull Request 10986`_
* Remove mutatable arguments from Pythn function calls
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 10998`_, `Pull Request 11003`_, `Pull Request 11006`_
* Disable tool cache if there is a problem.
  `Pull Request 10808`_
* Put new toolshed tools in existing tool panel sections if the ID matches.
  `Pull Request 10984`_
* Add checks to workflow toolbox, avoid displaying empty sections.
  `Pull Request 10363`_
* Filter duplicate workflow output labels when initializing workflow step outputs.
  `Pull Request 10432`_
* Properly scale workflow node coordinates before saving workflow.
  `Pull Request 10511`_
* Fix changing versions in workflow editor.
  `Pull Request 10516`_
* Fix currently failing Selenium tests, move to GitHub workflow.
  `Pull Request 10755`_
* Don't preload editor mako with hidden workflows.
  `Pull Request 10759`_
* Fix generation of BCO `object_id` and `etag`
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10964`_
* Record invocation_step outputs as appropriate.
  `Pull Request 10970`_
* Fix workflow parameter text value restriction when connected to select and text parameter.
  `Pull Request 10975`_
* Convert deprecated `log.warn()`` calls to ``log.warning()``
  (thanks to `@bgruening <https://github.com/bgruening>`__).
  `Pull Request 10996`_
* Misc fixes
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11029`_
* Maintain expanded state of JobStep during polling
  `Pull Request 11144`_
* Fix tool version switch in workflow editor
  `Pull Request 11257`_
* Fix populated state for empty collections
  `Pull Request 11312`_
* Fix Workflow report markdown lost upon renaming the workflow
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 11317`_
* Bump client axios dependency from 0.19.2 to 0.21.1.
  `Pull Request 11053`_
* Improved exception handling for missing job parameter field.
  `Pull Request 10298`_
* Ensure `requirements` in a `DependenciesDescription` is a `ToolRequirements`
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11044`_
* Allow specifying remote Pulsar app configuration external to job destination
  attributes to prevent persisting connection secrets.
  `Pull Request 11254`_, `Pull Request 11256`_, `Pull Request 11261`_
* Restore the ability to pull containers from admin menu.
  `Pull Request 10814`_
* Fix error in admin panel when creating new quota
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 11277`_
* Fix quota meter style.
  `Pull Request 10299`_
* Fix pytest breakage in package testing.
  `Pull Request 10320`_
* Add test for ``data_column`` parameter referring to non-tabular data (bed) and fix bug
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 10365`_
* Fix assigning default value to variables in ``run_test_wrapper.sh``
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10381`_
* Fix handling of collection element identifiers in history panel.
  `Pull Request 10427`_
* Fix report's library function call in ``dataset_info.mako``.
  `Pull Request 10476`_
* Fix drag and drop highlighting in tool form for data inputs.
  `Pull Request 10494`_
* Display consistent format for job runtime
  (thanks to `@kxk302 <https://github.com/kxk302>`__).
  `Pull Request 10504`_
* Modified list-of-pairs to copy datasets as hidden
  (thanks to `@assuntad23 <https://github.com/assuntad23>`__).
  `Pull Request 10508`_
* Fix search info popup to become hidden on click away
  (thanks to `@astrovsky01 <https://github.com/astrovsky01>`__).
  `Pull Request 10512`_
* Disable upload option in default data dialog since history panel is not always available
  `Pull Request 10533`_
* Fix ``ObjectUploadTarget`` handling in tool util staging code.
  `Pull Request 10650`_
* Fix link to job config sample in docs
  (thanks to `@galaxyproject <https://github.com/galaxyproject>`__).
  `Pull Request 10673`_
* Produce a clean list of dataset instances if not datasets in collection.
  `Pull Request 10676`_
* Add ``refresh_time`` to iRODS configuration, so that connections older than refresh_time are re-created.
  (thanks to `@kxk302 <https://github.com/kxk302>`__).
  `Pull Request 10698`_
* Cleanup announce samples.
  `Pull Request 10762`_
* Fix admin job configuration example links
  (thanks to `@RichardJActon <https://github.com/RichardJActon>`__).
  `Pull Request 10771`_
* Fix collectl plugin for Python 3.
  `Pull Request 10775`_
* Improve update handling for switches, use es6 and listento functions.
  `Pull Request 10785`_
* Fix list of cached Docker images not getting updated.
  `Pull Request 10796`_
* Small fixes to history panel.
  `Pull Request 10802`_
* Fix vue-unit test in toolsview.test.js
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10812`_
* Various bugfixes for reloading the toolbox.
  `Pull Request 10818`_
* Cast ``ncores`` to str for ``subprocess.call()``
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10825`_
* Test cases and fix for config option ``new_user_dataset_access_role_default_private``.
  `Pull Request 10834`_
* Fix label verifier in Github Maintenance Bot
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 10836`_
* Move new config files samples to `lib/galaxy/config/sample/`
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10842`_
* Fix mulled unit test.
  `Pull Request 10857`_
* Fixes to Github action for building documentation
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10866`_
* Import `Mapping` from `collection.abc`
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10872`_
* Update lxml for CVE-2020-27783
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10882`_
* Update ``Makefile`` target and verbiage for Jest.
  `Pull Request 10910`_
* Allow YAML list format for config options.
  `Pull Request 10945`_
* Bump tensorflow Python dependency from 2.3.1 to 2.4.0.
  `Pull Request 10946`_
* Added handler for history options menu webhook
  (thanks to `@kjetilkl <https://github.com/kjetilkl>`__).
  `Pull Request 10949`_
* Remove extra word in login confirmation.
  `Pull Request 10952`_
* Various documentation fixes
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 10963`_
* Fix tool validation for empty files in certain scenarios.
  `Pull Request 10981`_
* Overwrite uwsgi default py-call-osafterfork.
  `Pull Request 10983`_
* Small improvements to package structure to try to get ``galaxy-app`` closer to working.
  `Pull Request 11010`_
* Fix change feed.
  `Pull Request 11018`_
* Pass ``job`` to ``setup_external_metadata()`` in ``SetMetadataToolAction.execute_via_app()``
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11031`_
* Document min, max, and optional for data parameters
  (thanks to `@bernt-matthias <https://github.com/bernt-matthias>`__).
  `Pull Request 11061`_
* Add empty preferences attribute to BootstrapAdminUser
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 11062`_
* Make YAML tool parser parse ``expect_failure``.
  `Pull Request 11072`_
* Fix type column in library folder
  (thanks to `@OlegZharkov <https://github.com/OlegZharkov>`__).
  `Pull Request 11093`_
* Fix spurious "Select" button in upload.
  `Pull Request 11096`_
* Cleanup a variety of sphinx warnings and update lib structure.
  `Pull Request 11097`_, `Pull Request 11103`_
* Don't use copy when serializing JSON in ``safe_dumps``.
  `Pull Request 11169`_
* Reduce authnz exception exposure.
  `Pull Request 11212`_
* Fix arguments in ``create_api_key``
  (thanks to `@davelopez <https://github.com/davelopez>`__).
  `Pull Request 11243`_
* Routing fixes for username path components and username validation fixes.
  `Pull Request 11260`_
* Update Python dependency pulsar-galaxy-lib to 0.14.1.
  `Pull Request 11279`_
* Fix integration tests on CI to deploy postgresql and rabbitmq in Kubernetes
  for robustness.
  `Pull Request 11314`_
* Submit ``input_format`` to tools API in payload not as a parameter
  (thanks to `@simonbray <https://github.com/simonbray>`__).
  `Pull Request 11332`_
* Fix command line building when using interpreter
  (thanks to `@nsoranzo <https://github.com/nsoranzo>`__).
  `Pull Request 11343`_

.. include:: 21.01_prs.rst

