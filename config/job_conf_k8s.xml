<?xml version="1.0"?>
<!-- A sample job config for sketching the k8s use case with shared fs -->
<job_conf>
    <plugins>
        <plugin id="local" type="runner" load="galaxy.jobs.runners.local:LocalJobRunner" workers="4"/>
        <plugin id="k8s" type="runner" load="galaxy.jobs.runners.kubernetes:kubernetes">
            <param id="k8s_config_path">/path/to/kubeconfig</param>
            <param id="k8s_persistent_volume_claim_name">galaxy_pvc</param>
            <!-- The following mount path needs to be the initial part of the "file_path" and "new_file_path" paths
            set in universe_wsgi.ini (or equivalent general galaxy config file).
            -->
            <param id="k8s_persistent_volume_claim_mount_path">/mnt/glusterfs</param>
            <param id="k8s_namespace">galaxy-instanceA</param>
            <!-- Allows pods to retry up to this number of times, before marking the Job as failed -->
            <param id="k8s_pod_retrials">4</param>
        </plugin>
    </plugins>
    <handlers>
        <handler id="main"/>
    </handlers>
    <destinations>
        <destination id="local" runner="local"/>
        <destination id="blankfilter-container" runner="k8s">
            <param id="repo">docker-registry.local:6000</param>
            <param id="owner">fatcat</param>
            <param id="image">blankfilter</param>
            <param id="tag">latest</param>
            <param id="container_port_80">8080</param>
            <param id="max_pod_retrials">3</param>
        </destination>
    </destinations>
    <tools>
        <!-- Tools can be configured to use specific destinations or handlers,
             identified by either the "id" or "tags" attribute.  If assigned to
             a tag, a handler or destination that matches that tag will be
             chosen at random.
         -->
        <tool id="foo" handler="trackster_handler">
            <param id="source">trackster</param>
        </tool>
        <tool id="bar" destination="dynamic"/>
        <!-- Next example defines resource group to insert into tool interface
             and pass to dynamic destination (as resource_params argument). -->
        <tool id="longbar" destination="dynamic" resources="all" />
        <tool id="baz" handler="special_handlers" destination="bigmem"/>
        <tool id="blankfilter" destination="blankfilter-container"/>
    </tools>
</job_conf>
