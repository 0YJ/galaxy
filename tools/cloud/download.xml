<?xml version="1.0"?>

<tool id="download_to_cloud" name="Download dataset" version="0.1.0" workflow_compatible="false">
    <description>
        to Cloud
    </description>
    <requirements>
        <requirement type="package" version="0.3.3">cloudbridge</requirement>
    </requirements>
    <command interpreter="python">
        download.py
            --filename=$filename
            --provider=${connection.provider}
            --credentials_file=$credentials_file
            --credentials_a_access_key=$access_key
            --credentials_a_secret_key=$secret_key
            --credentials_m_subscription_id=$subscription_id
            --credentials_m_client_id=$client_id
            --credentials_m_secret=$secret
            --credentials_m_tenant=$tenant
            --credentials_o_username=$username
            --credentials_o_password=$password
            --credentials_o_auth_url=$auth_url
            --credentials_o_project_name=$project_name
            --credentials_o_project_domain_name=$project_domain_name
            --credentials_o_user_domain_name=$user_domain_name
            --bucket=$bucket
            --object_label=$object_label
            --overwrite_existing=$overwrite_existing
    </command>
    <inputs>
        <param name="filename" type="data" label="Datasets to be downloaded to a cloud-based storage:" />
        <conditional name="connection">
            <param name="provider" type="select" label="Cloud-Based Storage Provider">
                <option value="aws">Amazon Simple Storage Service (S3)</option>
                <option value="azure">Microsoft Azure Blob Storage</option>
                <option value="openstack">OpenStack Object Storage (Swift)</option>
            </param>
            <when value="aws">
                <param name="access_key" label="Access key" type="text"/>
                <param name="secret_key" label="Secret key" type="text"/>
            </when>
            <when value="azure">
                <param name="subscription_id" label="Subscription ID" type="text"/>
                <param name="client_id" label="Client ID" type="text"/>
                <param name="secret" label="Secret" type="text"/>
                <param name="tenant" label="Tenant" type="text"/>
            </when>
            <when value="openstack">
                <param name="username" label="Username" type="text"/>
                <param name="password" label="Password" type="text"/>
                <param name="auth_url" label="Auth URL" type="text"/>
                <param name="project_name" label="Project Name" type="text"/>
                <param name="project_domain_name" label="Project Domain Name" type="text"/>
                <param name="user_domain_name" label="User Domain Name" type="text"/>
            </when>
        </conditional>
        <param name="credentials_file" type="hidden" label="Credentials File" />
        <param name="bucket" type="text" label="Bucket" />
        <param name="object_label" type="text" label="Object Label" />
        <param name="overwrite_existing" type="boolean" label="overwrite_existing" />
    </inputs>
    <outputs>
        <data name="output" type="data" label="Output file"/>
    </outputs>
    <help>

**What it does**

Downloads a dataset from Galaxy to a cloud-based storage.

    </help>
</tool>