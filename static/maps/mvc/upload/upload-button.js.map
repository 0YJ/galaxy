{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["define","View","Backbone","extend","initialize","options","Model","self","tooltip","icon","label","percentage","status","onunload","onclick","this","_template","set","$","setElement","model","render","$progress","window","listenTo","get","attributes","on","e","placement","$el","removeClass","title","addClass","css","width"],"mappings":"YACAA,WAAY,WA8CR,OAASC,KA/CbC,SAAAD,KAAAE,QACQC,WAAI,SAAWC,GACfJ,GAAOC,GAAAA,IACPE,MAAAA,MAAYC,GAAAA,EAAUA,OAAU,GAAAH,UAAAI,OACxBC,KAAJ,YACAC,QAAaH,8CACTI,MAAc,YACdD,WAAc,EACdE,OAAc,GACdC,SAJwD,aAKxDC,QALwD,eAMxDC,IAAAA,GACAC,KAAAA,WAAcC,KAAAC,aAP0CD,KAQzDE,UARHF,KAAAG,EAAA,iBASAH,KAAKI,SAALJ,KAAiBK,MAAKJ,SAAtBD,KAAAM,OAAAN,MACAA,KAAKO,SACLJ,EAAAK,QAAKC,GAAU,eAAY,WAC3B,MAAAjB,GAAAa,MAAAK,IAAA,iBAIHJ,OAnB2B,WAsBxB,GADIhB,GAAAU,KAAAK,MAAWM,UACfX,MAAIR,IAAAA,IAAO,SAAXoB,GAAA,QAAA,SAAAC,GAAAvB,EAAAS,QAAAc,KACIvB,SAAee,MAAMM,KAAAA,MAAzBD,IAAA,WAAAI,UAAA,WACAd,KAAKe,UAASC,cAA+CjB,SAAR,gBACjCkB,SAAYZ,6BACjBW,SACU,IADVA,EACAE,QAAU,gBACA5B,EAAAO,QA5BDsB,KAAAC,MAAA9B,EAAAM,WAAA,OAmCxBK,UAAQ,WAQX,MAAA","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["/** View for upload/progress bar button */\ndefine( [], function() {\n    var View = Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model({\n                icon        : 'fa-upload',\n                tooltip     : 'Download from URL or upload files from disk',\n                label       : 'Load Data',\n                percentage  : 0,\n                status      : '',\n                onunload    : function(){},\n                onclick     : function(){}\n            }).set( options );\n            this.setElement( this._template() );\n            this.$progress = this.$( '.progress-bar' );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n            $( window ).on( 'beforeunload', function() {\n                return self.model.get( 'onunload' )();\n            });\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.off( 'click' ).on( 'click', function( e ) { options.onclick( e ) } )\n                    .tooltip( { title: this.model.get('tooltip'), placement: 'bottom' } );\n            this.$progress.removeClass()\n                          .addClass( 'progress-bar' )\n                          .addClass( 'progress-bar-notransition' )\n                          .addClass( options.status != '' && 'progress-bar-' + options.status )\n                          .css( { width : options.percentage + '%' } );\n        },\n\n        /** Template */\n        _template: function() {\n            return  '<div class=\"upload-button\">' +\n                        '<div class=\"progress\">' +\n                            '<div class=\"progress-bar\"/>' +\n                            '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n                                '<span class=\"fa fa-upload\"/>' +\n                            '</a>' +\n                        '</div>' +\n                    '</div>';\n        }\n    });\n    return { View : View };\n});\n"]}