{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["View","Backbone","extend","initialize","options","self","this","model","icon","tooltip","label","percentage","status","onunload","_template","onclick","$","set","render","setElement","window","$progress","listenTo","attributes","$el","e","title","get","placement","removeClass","addClass","css","width"],"mappings":"oEAEA,IAAIA,KAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KAJnBA,KAAAC,MAMaH,GAAWA,EAAQG,OAJrBN,IAAAA,SAAcC,OACTM,KAAA,YACJH,QAAJ,8CACKE,MACAH,YAEGI,WAAM,EACNC,OAAS,GACTC,SAAO,aACPC,QAJe,eAKfC,IAAAA,GACAC,KAAAA,WAAUP,KAAAQ,aACVC,KAAAA,UAAST,KAAAU,EAAA,iBAPMV,KAQhBW,SARHX,KAFJC,MAAA,SAAAD,KAAAY,OAAAZ,MAWAA,KAAKa,SACLH,EAAAI,QAAKC,GAAAA,eAAmB,WACxB,OAAKC,EAASf,MAAKA,IAAO,WAArBe,MAIJJ,OAFD,WAlBwB,IAyBpBd,EAAUE,KAAKC,MAAMgB,WAF7BL,KAAQM,IACAnB,IAAAA,SACAD,GAAAA,QAAU,SAAWmB,GACzBnB,EACSW,QADTU,KAKKhB,SACGiB,MAAOpB,KAAKC,MAAUoB,IAAA,WACtBC,UAAW,WAEnBtB,KAAKe,UAnCmBQ,cAqCnBC,SAAS,gBAMlBA,SAAA,6BACAhB,SAAsB,IAAXV,EAAAQ,QAAW,gBAAAR,EAAAQ,QAClBmB,KACIC,MAAA5B,EAAAO,WACA,OAHRG,UAAW,WACP,MACI,sOAWKd,KAAMA","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["/** View for upload/progress bar button */\n\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                icon: \"fa-upload\",\n                tooltip: \"Download from URL or upload files from disk\",\n                label: \"Load Data\",\n                percentage: 0,\n                status: \"\",\n                onunload: function() {},\n                onclick: function() {}\n            }).set(options);\n        this.setElement(this._template());\n        this.$progress = this.$(\".progress-bar\");\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n        $(window).on(\"beforeunload\", function() {\n            return self.model.get(\"onunload\")();\n        });\n    },\n\n    render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.$el\n            .off(\"click\")\n            .on(\"click\", function(e) {\n                options.onclick(e);\n            })\n            .tooltip({\n                title: this.model.get(\"tooltip\"),\n                placement: \"bottom\"\n            });\n        this.$progress\n            .removeClass()\n            .addClass(\"progress-bar\")\n            .addClass(\"progress-bar-notransition\")\n            .addClass(options.status != \"\" && \"progress-bar-\" + options.status)\n            .css({ width: options.percentage + \"%\" });\n    },\n\n    /** Template */\n    _template: function() {\n        return (\n            '<div class=\"upload-button\">' +\n            '<div class=\"progress\">' +\n            '<div class=\"progress-bar\"/>' +\n            '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n            '<span class=\"fa fa-upload\"/>' +\n            \"</a>\" +\n            \"</div>\" +\n            \"</div>\"\n        );\n    }\n});\nexport default { View: View };\n"]}