{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["define","View","Backbone","extend","initialize","options","self","this","model","Model","icon","tooltip","label","percentage","status","onunload","onclick","set","setElement","_template","$progress","$","listenTo","render","window","on","get","attributes","$el","off","e","title","placement","removeClass","addClass","css","width"],"mappings":"AACAA,UAAY,WA8CR,OAASC,KA7CEC,SAASD,KAAKE,QACrBC,WAAY,SAAUC,GAClB,GAAIC,GAAOC,IACXA,MAAKC,MAAQH,GAAWA,EAAQG,OAAS,GAAIN,UAASO,OAClDC,KAAc,YACdC,QAAc,8CACdC,MAAc,YACdC,WAAc,EACdC,OAAc,GACdC,SAAc,aACdC,QAAc,eACfC,IAAKZ,GACRE,KAAKW,WAAYX,KAAKY,aACtBZ,KAAKa,UAAYb,KAAKc,EAAG,iBACzBd,KAAKe,SAAUf,KAAKC,MAAO,SAAUD,KAAKgB,OAAQhB,MAClDA,KAAKgB,SACLF,EAAGG,QAASC,GAAI,eAAgB,WAC5B,MAAOnB,GAAKE,MAAMkB,IAAK,iBAI/BH,OAAQ,WACJ,GACIlB,GAAUE,KAAKC,MAAMmB,UACzBpB,MAAKqB,IAAIC,IAAK,SAAUJ,GAAI,QAAS,SAAUK,GAAMzB,EAAQW,QAASc,KAC7DnB,SAAWoB,MAAOxB,KAAKC,MAAMkB,IAAI,WAAYM,UAAW,WACjEzB,KAAKa,UAAUa,cACAC,SAAU,gBACVA,SAAU,6BACVA,SAA4B,IAAlB7B,EAAQS,QAAgB,gBAAkBT,EAAQS,QAC5DqB,KAAOC,MAAQ/B,EAAQQ,WAAa,OAIvDM,UAAW,WACP,MAAQ","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["/** View for upload/progress bar button */\ndefine( [], function() {\n    var View = Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model({\n                icon        : 'fa-upload',\n                tooltip     : 'Download from URL or upload files from disk',\n                label       : 'Load Data',\n                percentage  : 0,\n                status      : '',\n                onunload    : function(){},\n                onclick     : function(){}\n            }).set( options );\n            this.setElement( this._template() );\n            this.$progress = this.$( '.progress-bar' );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n            $( window ).on( 'beforeunload', function() {\n                return self.model.get( 'onunload' )();\n            });\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.off( 'click' ).on( 'click', function( e ) { options.onclick( e ) } )\n                    .tooltip( { title: this.model.get('tooltip'), placement: 'bottom' } );\n            this.$progress.removeClass()\n                          .addClass( 'progress-bar' )\n                          .addClass( 'progress-bar-notransition' )\n                          .addClass( options.status != '' && 'progress-bar-' + options.status )\n                          .css( { width : options.percentage + '%' } );\n        },\n\n        /** Template */\n        _template: function() {\n            return  '<div class=\"upload-button\">' +\n                        '<div class=\"progress\">' +\n                            '<div class=\"progress-bar\"/>' +\n                            '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n                                '<span class=\"fa fa-upload\"/>' +\n                            '</a>' +\n                        '</div>' +\n                    '</div>';\n        }\n    });\n    return { View : View };\n});\n"]}