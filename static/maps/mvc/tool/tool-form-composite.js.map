{"version":3,"file":"tool-form-composite.js","sources":["../../../src/mvc/tool/tool-form-composite.js"],"names":["define","Utils","Deferred","Ui","Form","FormData","ToolFormBase","Modal","View","Backbone","extend","initialize","options","this","modal","parent","Galaxy","model","Model","deferred","setElement","$","addClass","append","$message","$header","$history","$parameters","$steps","$el","_configure","render","_handleWorkflowParameter","value","callback","wp_name","self","_isWorkflowParameter","wp_inputs","label","name","type","color","wp_count","style","links","forms","steps","parms","_","each","get","step","i","emit","debug","merge","index","parseInt","icon","help","description","annotation","citations","collapsible","collapsed","_isDataStep","sustain_version","sustain_repeats","sustain_conditionals","narrow","text_enable","text_disable","cls_enable","cls_disable","errors","messages","initial_errors","visitInputs","inputs","input","output_connections","output_connection","sub_step","step_id","input_step_id","push","j","connections_by_name","connection","input_name","step_linked","output_name","wp_input","wp_linked","backdrop","post_job_actions","pja","action_arguments","arg","step_type","data_resolved","context","is_data_input","indexOf","data_ref","length","is_workflow","__class__","flavor","optional","isEmpty","collapsible_value","collapsible_preview","reset","_renderHeader","_renderMessage","_renderParameters","_renderHistory","_renderStep","execute","execute_btn","unwait","set","wait_text","percentage","Button","title","cls","wait","onclick","_execute","empty","Label","Message","message","status","persistent","wp_form","onchange","input_list","input_def","_refreshStep","_append","form","current","promise","portlet","html","reduce","memo","short_str","link","_resolve","setTimeout","ready","resolve","field","field_list","data","match","new_value","undefined","values","source_step","create","v","multiple","wp_field","trigger","history_form","test_param","cases","job_def","new_history_name","replacement_params","validated","job_inputs","job_input_id","input_value","input_id","highlight","_enabled","request","url","root","id","success","response","_templateSuccess","currHistoryPanel","refreshContents","error","err_data","step_related_errors","error_messages","matchResponse","show","body","_templateError","err_msg","buttons","Close","hide","complete","$container","enabled","enable","disable","String","substring","sanitize","lst","isArray","startsWith","text","invocation","$invocation","history","attr","outputs","output","hid","JSON","stringify"],"mappings":"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"}