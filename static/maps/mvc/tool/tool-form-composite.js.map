{"version":3,"file":"tool-form-composite.js","sources":["../../../src/mvc/tool/tool-form-composite.js"],"names":["define","Utils","Deferred","Ui","Form","FormData","ToolFormBase","Modal","View","Backbone","extend","initialize","options","this","modal","parent","Galaxy","model","Model","deferred","setElement","$","addClass","append","$message","$header","$history","$parameters","$steps","$el","_configure","render","_handleWorkflowParameter","value","callback","wp_name","self","_isWorkflowParameter","wp_inputs","label","name","type","color","wp_count","style","links","forms","steps","parms","_","each","get","step","i","emit","debug","merge","index","parseInt","icon","help","description","annotation","citations","collapsible","collapsed","_isDataStep","sustain_version","sustain_repeats","sustain_conditionals","narrow","text_enable","text_disable","cls_enable","cls_disable","errors","messages","initial_errors","visitInputs","inputs","input","output_connections","output_connection","sub_step","step_id","input_step_id","push","j","connections_by_name","connection","input_name","step_linked","output_name","wp_input","wp_linked","backdrop","post_job_actions","pja","action_arguments","arg","step_type","data_resolved","context","is_data_input","indexOf","data_ref","length","is_workflow","__class__","flavor","optional","isEmpty","collapsible_value","collapsible_preview","reset","_renderHeader","_renderMessage","_renderParameters","_renderHistory","_renderStep","execute","execute_btn","unwait","Button","title","cls","wait","wait_text","onclick","_execute","empty","Label","Message","message","status","persistent","wp_form","onchange","input_list","input_def","_refreshStep","_append","form","current","promise","portlet","html","reduce","memo","short_str","link","_resolve","setTimeout","ready","resolve","field","field_list","data","match","new_value","undefined","values","source_step","create","v","multiple","wp_field","trigger","history_form","test_param","cases","job_def","new_history_name","replacement_params","validated","job_inputs","job_input_id","input_value","input_id","highlight","_enabled","request","url","root","id","success","response","_templateSuccess","currHistoryPanel","refreshContents","error","err_data","step_related_errors","error_messages","matchResponse","show","body","_templateError","err_msg","buttons","Close","hide","complete","$container","enabled","enable","disable","String","substring","sanitize","lst","isArray","startsWith","text","invocation","$invocation","history","attr","outputs","output","hid","JSON","stringify"],"mappings":"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"}