{"version":3,"sources":["mvc/library/library-dataset-view.js"],"names":["LibraryDatasetView","Backbone","View","extend","el","model","options","defaults","edit_mode","events","click .toolbtn_modify_dataset","click .toolbtn_cancel_modifications","click .toolbtn-download-dataset","click .toolbtn-import-dataset","click .copy-link-to-clipboard","click .toolbtn_save_permissions","select_extension","list_extensions","auto","id","text","description","list_genomes","initialize","this","_","fetchDataset","_libraryModel2","default","Item","self","fetchExtAndGenomes","fetch","success","show_permissions","showPermissions","show_version","fetchVersion","render","error","response","responseJSON","onclick","libraries","library_router","back","_toastr2","Galaxy","remove","template","$","html","item","templateDataset","tooltip","ldda_id","ldda","Ldda","urlRoot","renderVersion","err_msg","get","$el","renderSelectBoxes","genome_build","file_ext","downloadDataset","url","data","ld_ids","processDownload","method","param","each","pair","split","inputs","info","appendTo","importIntoHistory","refreshUserHistoriesList","modal","body","buttons","Import","templateBulkImportInModal","show","Close","histories","models","importCurrentIntoHistory","hide","callback","window","GalaxyHistories","warning","location","root","disableButton","new_history_name","post","enableButton","val","processImportToHistory","name","done","new_history","historyItem","always","getJSON","history_id","jQuery","save","content","source","templateDatasetPermissions","fetched_permissions","set","is_unrestricted","is_admin","config","_serializeRoles","selected_roles","undefined","access_dataset_roles","length","selector","modifySelectObject","initialData","is_admin_user","_generate_select_options","select_options","minimumInputLength","formatResult","role","initSelection","role_list","element","i","replace","container","_uiSelect2","dataType","quietMillis","q","page_limit","page","modify_item_roles","manageSelectObject","results","manage_dataset_roles","multiple","placeholder","new_name","ld","is_changed","type","formatSelection","new_genome_build","select_genome","new_ext","copyToClipboard","dataset_view","find","join","patch","term","total","roles","more","prompt","makeDatasetPrivate","new_info","select2","_extractIds","roles_list","ids_list","accessSelectObject","manage_ids","e","preventDefault","href","history","lastIndexOf","substr","key","description_url","fail","removeDatasetRestrictions","current_ext","current_genome","value","css","access_ids[]","access_ids","manage_ids[]","modify_ids[]","modify_ids","_utils2","datatypes","templateModifyDataset","push","extension","sort","a","b","unshift","genomes","templateVersion"],"mappings":"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lB,IAAA,IAAAtB,KAAAsB,EACAjL,EAAAR,aACAmL,MAgDAtL,GAAA4L,EAAAtB,GAAA,GAEGrK,KAjEX2L,EAAAtB,GAAA,KAqEJpG,EAAAA,aAA2BsH,KACd1J,SAAAA,EAAAA,GAAAA,OAED2J,EAAAzL,GACA0L,EAAA1L,GAAA,EAAAyL,EAAAzL,GAAA0L,EAAA1L,IAAA,EAAA,QAzgBZ4C,kBAAmB,SAASzD,GAKxB,IAAIwB,EAAON,KACPsK,EAAiB,IACjBD,EAAc,YACK,IAAZvL,SAC6B,IAAzBA,EAAQ0D,eACf8H,EAAiBxL,EAAQ0D,mBAEG,IAArB1D,EAAQ2D,WACf4H,EAAcvL,EAAQ2D,WAG9BzC,KAAKuI,cAAgB,IAAIlB,EAAAjH,QAAW1B,MAChC8L,IAAK,wBACL5H,KAAMtC,EAAKR,aACXsH,UAAW9G,EAAKgC,IAAIqG,KAAK,0BACzB4B,MAAOD,IAEXtK,KAAKR,iBAAmB,IAAI6H,EAAAjH,QAAW1B,MACnC8L,IAAK,2BACL5H,KAAMtC,EAAKb,gBACX2H,UAAW9G,EAAKgC,IAAIqG,KAAK,6BACzB4B,MAAOF,KAIfxI,gBAAiB,WACb,OAAO5B,EAAEwB,UAGD,wCACA,6BACA,0KACA,uCACA,iBACA,YACA,mLACA,mCACA,mBACA,YACA,2CACA,2KACA,qCACA,eACA,YACA,UACA,2CACA,uFACA,8KACA,oCACA,oBACA,YACA,OACA,UACA,SAGA,0BACA,6EACA,4DACA,uCACA,2GACA,iBACA,gFACA,UACA,YACA,QAEA,2CACA,QACA,2JACA,SACA,UAGA,8BACA,2DACA,OACA,oHACA,6CACA,QACA,oCACA,OACA,iCACA,iDACA,QACA,UACA,wCACA,OACA,oCACA,qDACA,QACA,UACA,qCACA,OACA,4BACA,kDACA,QACA,UACA,yCACA,OACA,2CACA,sDACA,QACA,UACA,uCACA,OACA,mCACA,oDACA,QACA,UACA,+CACA,OACA,kCACA,wEACA,QACA,UACA,kDACA,OACA,qCACA,2EACA,QACA,UACA,4CACA,OACA,yCACA,qEACA,QACA,UACA,iDACA,OACA,oCACA,0EACA,QACA,UACA,mCACA,OACA,+BACA,4DACA,QACA,UACA,sCACA,OACA,mCACA,+DACA,QACA,UACA,qCACA,OACA,kCACA,8DACA,QACA,UACA,gCACA,OACA,4BACA,yDACA,QACA,UACA,2CACA,OACA,4BACA,yDACA,QACA,UACA,4CACA,OACA,6BACA,0DACA,QACA,UACA,WAEA,sCACA,8BACA,qBACA,0CACA,SACA,UAEA,sCACA,+BACA,qBACA,0CACA,SACA,UAEA,QACA,qBACA,SACA,SAEA,wCACA,QACA,6BACA,OACA,iEACA,wKACA,WACA,OACA,SACA,UAEA,SAEA,UACFmH,KAAK,MAIf4C,gBAAiB,WACb,OAAOvL,EAAEwB,UAGD,wCACA,6BACA,2EACA,qJACA,+CACA,uBACA,YACA,MACA,SAGA,0BACA,6EACA,4DACA,uCACA,2GACA,iBACA,gFACA,UACA,YACA,QAEA,8HAEA,8BACA,2DACA,OACA,2EACA,6CACA,QACA,oCACA,OACA,iCACA,iDACA,QACA,UACA,wCACA,OACA,oCACA,qDACA,QACA,UACA,qCACA,OACA,4BACA,kDACA,QACA,UACA,yCACA,OACA,2CACA,sDACA,QACA,UACA,uCACA,OACA,mCACA,oDACA,QACA,UACA,+CACA,OACA,kCACA,wEACA,QACA,UACA,kDACA,OACA,qCACA,2EACA,QACA,UACA,4CACA,OACA,yCACA,qEACA,QACA,UACA,iDACA,OACA,oCACA,0EACA,QACA,UACA,mCACA,OACA,+BACA,4DACA,QACA,UACA,sCACA,OACA,2CACA,+DACA,QACA,UACA,qCACA,OACA,iDACA,8DACA,QACA,UACA,gCACA,OACA,4BACA,yDACA,QACA,UACA,WACA,QACA,qBACA,SACA,SAEA,SAEA,UACFmH,KAAK,MAIfoC,sBAAuB,WACnB,OAAO/K,EAAEwB,UAGD,wCACA,6BACA,kLACA,oCACA,eACA,YACA,8KACA,uCACA,aACA,YACA,SAGA,0BACA,6EACA,4DACA,uCACA,2GACA,iBACA,gFACA,UACA,YACA,QAEA,8BACA,2DACA,OACA,oHACA,oIACA,QACA,OACA,iCACA,OACA,0EACA,QACA,QACA,OACA,oCACA,OACA,oEACA,QACA,QACA,OACA,4BACA,kDACA,QACA,OACA,2CACA,sDACA,QACA,OACA,mCACA,oDACA,QACA,mBACA,kCACA,wEACA,QACA,qCACA,yDACA,2EACA,iBACA,+BACA,UACA,QACA,OACA,yCACA,qEACA,QACA,OACA,oCACA,0EACA,QACA,OACA,+BACA,4DACA,QACA,OACA,mCACA,+DACA,QACA,OACA,yCACA,8IACA,QAEA,gCACA,OACA,4BACA,yDACA,QACA,UACA,WACA,QACA,qBACA,SACA,SACA,SAEA,UACFmH,KAAK,MAIfjD,2BAA4B,WACxB,OAAO1F,EAAEwB,UAGD,wCACA,6BACA,2EACA,mJACA,qCACA,wBACA,YACA,MACA,SAGA,0BACA,6EACA,4DACA,uCACA,2GACA,iBACA,gFACA,UACA,YACA,QAEA,sDACA,oCACA,wBACA,yKACA,iBACA,+IACA,UACA,SACA,8BACA,uCACA,kDACA,mEACA,8KACA,QACA,uCACA,+LACA,4CACA,yHACA,iBACA,oGACA,UACA,6CACA,mEACA,iDACA,qFACA,mGACA,mGACA,SACA,4DACA,mEACA,iDACA,sLACA,SACA,iLACA,uCACA,aACA,YACA,SAEA,UACFmH,KAAK,MAIf/E,0BAA2B,WACvB,OAAO5D,EAAEwB,UAED,QACA,mCACA,mBACA,qHACA,8CACA,mGACA,YACA,YACA,SACA,mCACA,kBACA,4GACA,WACA,SACA,UACFmH,KAAK,mBAMfpK,mBAAoBA","file":"../../../scripts/mvc/library/library-dataset-view.js","sourcesContent":["import mod_toastr from \"libs/toastr\";\nimport mod_library_model from \"mvc/library/library-model\";\nimport mod_utils from \"utils/utils\";\nimport mod_select from \"mvc/ui/ui-select\";\nvar LibraryDatasetView = Backbone.View.extend({\n    el: \"#center\",\n\n    model: null,\n\n    options: {},\n\n    defaults: {\n        edit_mode: false\n    },\n\n    events: {\n        \"click .toolbtn_modify_dataset\": \"enableModification\",\n        \"click .toolbtn_cancel_modifications\": \"render\",\n        \"click .toolbtn-download-dataset\": \"downloadDataset\",\n        \"click .toolbtn-import-dataset\": \"importIntoHistory\",\n        \"click .copy-link-to-clipboard\": \"copyToClipboard\",\n        \"click .make-private\": \"makeDatasetPrivate\",\n        \"click .remove-restrictions\": \"removeDatasetRestrictions\",\n        \"click .toolbtn_save_permissions\": \"savePermissions\",\n        \"click .toolbtn_save_modifications\": \"saveModifications\"\n    },\n\n    // genome select\n    select_genome: null,\n\n    // extension select\n    select_extension: null,\n\n    // extension types\n    list_extensions: [],\n\n    // datatype placeholder for extension auto-detection\n    auto: {\n        id: \"auto\",\n        text: \"Auto-detect\",\n        description:\n            \"This system will try to detect the file type automatically.\" +\n            \" If your file is not detected properly as one of the known formats,\" +\n            \" it most likely means that it has some format problems (e.g., different\" +\n            \" number of columns on different rows). You can still coerce the system\" +\n            \" to set your data to the format you think it should be.\" +\n            \" You can also upload compressed files, which will automatically be decompressed.\"\n    },\n\n    // genomes\n    list_genomes: [],\n\n    initialize: function(options) {\n        this.options = _.extend(this.options, options);\n        this.fetchExtAndGenomes();\n        if (this.options.id) {\n            this.fetchDataset();\n        }\n    },\n\n    fetchDataset: function(options) {\n        this.options = _.extend(this.options, options);\n        this.model = new mod_library_model.Item({\n            id: this.options.id\n        });\n        var self = this;\n        this.model.fetch({\n            success: function() {\n                if (self.options.show_permissions) {\n                    self.showPermissions();\n                } else if (self.options.show_version) {\n                    self.fetchVersion();\n                } else {\n                    self.render();\n                }\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(\n                        `${response.responseJSON\n                            .err_msg} Click this to go back.`,\n                        \"\",\n                        {\n                            onclick: function() {\n                                Galaxy.libraries.library_router.back();\n                            }\n                        }\n                    );\n                } else {\n                    mod_toastr.error(\n                        \"An error occurred. Click this to go back.\",\n                        \"\",\n                        {\n                            onclick: function() {\n                                Galaxy.libraries.library_router.back();\n                            }\n                        }\n                    );\n                }\n            }\n        });\n    },\n\n    render: function(options) {\n        this.options = _.extend(this.options, options);\n        $(\".tooltip\").remove();\n        var template = this.templateDataset();\n        this.$el.html(template({ item: this.model }));\n        $(\".peek\").html(this.model.get(\"peek\"));\n        $(\"#center [data-toggle]\").tooltip();\n    },\n\n    fetchVersion: function(options) {\n        this.options = _.extend(this.options, options);\n        var self = this;\n        if (!this.options.ldda_id) {\n            this.render();\n            mod_toastr.error(\n                \"Library dataset version requested but no id provided.\"\n            );\n        } else {\n            this.ldda = new mod_library_model.Ldda({\n                id: this.options.ldda_id\n            });\n            this.ldda.url = `${this.ldda.urlRoot +\n                this.model.id}/versions/${this.ldda.id}`;\n            this.ldda.fetch({\n                success: function() {\n                    self.renderVersion();\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(response.responseJSON.err_msg);\n                    } else {\n                        mod_toastr.error(\"An error occurred.\");\n                    }\n                }\n            });\n        }\n    },\n\n    renderVersion: function() {\n        $(\".tooltip\").remove();\n        var template = this.templateVersion();\n        this.$el.html(template({ item: this.model, ldda: this.ldda }));\n        $(\".peek\").html(this.ldda.get(\"peek\"));\n    },\n\n    enableModification: function() {\n        $(\".tooltip\").remove();\n        var template = this.templateModifyDataset();\n        this.$el.html(template({ item: this.model }));\n        this.renderSelectBoxes({\n            genome_build: this.model.get(\"genome_build\"),\n            file_ext: this.model.get(\"file_ext\")\n        });\n        $(\".peek\").html(this.model.get(\"peek\"));\n        $(\"#center [data-toggle]\").tooltip();\n    },\n\n    downloadDataset: function() {\n        var url = `${Galaxy.root}api/libraries/datasets/download/uncompressed`;\n        var data = { ld_ids: this.id };\n        this.processDownload(url, data);\n    },\n\n    processDownload: function(url, data, method) {\n        //url and data options required\n        if (url && data) {\n            //data can be string of parameters or array/object\n            data = typeof data == \"string\" ? data : $.param(data);\n            //split params into form inputs\n            var inputs = \"\";\n            $.each(data.split(\"&\"), function() {\n                var pair = this.split(\"=\");\n                inputs += `<input type=\"hidden\" name=\"${pair[0]}\" value=\"${pair[1]}\" />`;\n            });\n            //send request\n            $(\n                `<form action=\"${url}\" method=\"${method ||\n                    \"post\"}\">${inputs}</form>`\n            )\n                .appendTo(\"body\")\n                .submit()\n                .remove();\n\n            mod_toastr.info(\"Your download will begin soon.\");\n        }\n    },\n\n    importIntoHistory: function() {\n        this.refreshUserHistoriesList(self => {\n            var template = self.templateBulkImportInModal();\n            self.modal = Galaxy.modal;\n            self.modal.show({\n                closing_events: true,\n                title: \"Import into History\",\n                body: template({ histories: self.histories.models }),\n                buttons: {\n                    Import: function() {\n                        self.importCurrentIntoHistory();\n                    },\n                    Close: function() {\n                        Galaxy.modal.hide();\n                    }\n                }\n            });\n        });\n    },\n\n    refreshUserHistoriesList: function(callback) {\n        var self = this;\n        this.histories = new mod_library_model.GalaxyHistories();\n        this.histories.fetch({\n            success: function(histories) {\n                if (histories.length === 0) {\n                    mod_toastr.warning(\n                        \"You have to create history first. Click this to do so.\",\n                        \"\",\n                        {\n                            onclick: function() {\n                                window.location = Galaxy.root;\n                            }\n                        }\n                    );\n                } else {\n                    callback(self);\n                }\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occurred.\");\n                }\n            }\n        });\n    },\n\n    importCurrentIntoHistory: function() {\n        this.modal.disableButton(\"Import\");\n        var new_history_name = this.modal.$(\"input[name=history_name]\").val();\n        var self = this;\n        if (new_history_name !== \"\") {\n            $.post(`${Galaxy.root}api/histories`, {\n                name: new_history_name\n            })\n                .done(new_history => {\n                    self.processImportToHistory(new_history.id);\n                })\n                .fail((xhr, status, error) => {\n                    mod_toastr.error(\"An error occurred.\");\n                })\n                .always(() => {\n                    self.modal.enableButton(\"Import\");\n                });\n        } else {\n            var history_id = $(this.modal.$el)\n                .find(\"select[name=dataset_import_single] option:selected\")\n                .val();\n            this.processImportToHistory(history_id);\n            this.modal.enableButton(\"Import\");\n        }\n    },\n\n    processImportToHistory: function(history_id) {\n        var historyItem = new mod_library_model.HistoryItem();\n        historyItem.url = `${historyItem.urlRoot + history_id}/contents`;\n        // set the used history as current so user will see the last one\n        // that he imported into in the history panel on the 'analysis' page\n        jQuery.getJSON(`${Galaxy.root}history/set_as_current?id=${history_id}`);\n        // save the dataset into selected history\n        historyItem.save(\n            { content: this.id, source: \"library\" },\n            {\n                success: function() {\n                    Galaxy.modal.hide();\n                    mod_toastr.success(\n                        \"Dataset imported. Click this to start analyzing it.\",\n                        \"\",\n                        {\n                            onclick: function() {\n                                window.location = Galaxy.root;\n                            }\n                        }\n                    );\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(\n                            `Dataset not imported. ${response.responseJSON\n                                .err_msg}`\n                        );\n                    } else {\n                        mod_toastr.error(\n                            \"An error occured. Dataset not imported. Please try again.\"\n                        );\n                    }\n                }\n            }\n        );\n    },\n\n    showPermissions: function(options) {\n        var template = this.templateDatasetPermissions();\n        var self = this;\n        this.options = _.extend(this.options, options);\n        $(\".tooltip\").remove();\n        if (this.options.fetched_permissions !== undefined) {\n            if (\n                this.options.fetched_permissions.access_dataset_roles.length ===\n                0\n            ) {\n                this.model.set({ is_unrestricted: true });\n            } else {\n                this.model.set({ is_unrestricted: false });\n            }\n        }\n        this.$el.html(\n            template({\n                item: this.model,\n                is_admin: Galaxy.config.is_admin_user\n            })\n        );\n        $.get(\n            `${Galaxy.root}api/libraries/datasets/${self.id}/permissions?scope=current`\n        )\n            .done(fetched_permissions => {\n                self.prepareSelectBoxes({\n                    fetched_permissions: fetched_permissions,\n                    is_admin: Galaxy.config.is_admin_user\n                });\n            })\n            .fail(() => {\n                mod_toastr.error(\n                    \"An error occurred while attempting to fetch dataset permissions.\"\n                );\n            });\n        $(\"#center [data-toggle]\").tooltip();\n        $(\"#center\").css(\"overflow\", \"auto\");\n    },\n\n    _serializeRoles: function(role_list) {\n        var selected_roles = [];\n        for (var i = 0; i < role_list.length; i++) {\n            // Replace the : and , in role's name since these are select2 separators for initialData\n            selected_roles.push(\n                `${role_list[i][1]}:${role_list[i][0]\n                    .replace(\":\", \" \")\n                    .replace(\",\", \" &\")}`\n            );\n        }\n        return selected_roles;\n    },\n\n    prepareSelectBoxes: function(options) {\n        this.options = _.extend(this.options, options);\n        this.accessSelectObject = new mod_select.View(\n            this._generate_select_options({\n                selector: \"access_perm\",\n                initialData: this._serializeRoles(\n                    this.options.fetched_permissions.access_dataset_roles\n                )\n            })\n        );\n        this.modifySelectObject = new mod_select.View(\n            this._generate_select_options({\n                selector: \"modify_perm\",\n                initialData: this._serializeRoles(\n                    this.options.fetched_permissions.modify_item_roles\n                )\n            })\n        );\n        this.manageSelectObject = new mod_select.View(\n            this._generate_select_options({\n                selector: \"manage_perm\",\n                initialData: this._serializeRoles(\n                    this.options.fetched_permissions.manage_dataset_roles\n                )\n            })\n        );\n    },\n\n    _generate_select_options: function(options) {\n        var select_options = {\n            minimumInputLength: 0,\n            multiple: true,\n            placeholder: \"Click to select a role\",\n            formatResult: function roleFormatResult(role) {\n                return `${role.name} type: ${role.type}`;\n            },\n            formatSelection: function roleFormatSelection(role) {\n                return role.name;\n            },\n            initSelection: function(element, callback) {\n                // the input tag has a value attribute preloaded that points to a preselected role's id\n                // this function resolves that id attribute to an object that select2 can render\n                // using its formatResult renderer - that way the role name is shown preselected\n                var data = [];\n                $(element.val().split(\",\")).each(function() {\n                    var item = this.split(\":\");\n                    data.push({\n                        id: item[0],\n                        name: item[1]\n                    });\n                });\n                callback(data);\n            },\n            dropdownCssClass: \"bigdrop\" // apply css that makes the dropdown taller\n        };\n        select_options.container = this.$el.find(`#${options.selector}`);\n        select_options.css = options.selector;\n        select_options.initialData = options.initialData.join(\",\");\n        select_options.ajax = {\n            url: `${Galaxy.root}api/libraries/datasets/${this\n                .id}/permissions?scope=available`,\n            dataType: \"json\",\n            quietMillis: 100,\n            data: function(term, page) {\n                // page is the one-based page number tracked by Select2\n                return {\n                    q: term, //search term\n                    page_limit: 10, // page size, should be same as used in 'more' variable below\n                    page: page // page number\n                };\n            },\n            results: function(data, page) {\n                var more = page * 10 < data.total; // whether or not there are more results available\n                // notice we return the value of more so Select2 knows if more results can be loaded\n                return { results: data.roles, more: more };\n            }\n        };\n        return select_options;\n    },\n\n    /**\n   * Save the changes made to the library dataset.\n   */\n    saveModifications: function(options) {\n        var is_changed = false;\n        var ld = this.model;\n        var new_name = this.$el.find(\".input_dataset_name\").val();\n        if (typeof new_name !== \"undefined\" && new_name !== ld.get(\"name\")) {\n            if (new_name.length > 0) {\n                ld.set(\"name\", new_name);\n                is_changed = true;\n            } else {\n                mod_toastr.warning(\n                    \"Library dataset name has to be at least 1 character long.\"\n                );\n                return;\n            }\n        }\n        var new_info = this.$el.find(\".input_dataset_misc_info\").val();\n        if (\n            typeof new_info !== \"undefined\" &&\n            new_info !== ld.get(\"misc_info\")\n        ) {\n            ld.set(\"misc_info\", new_info);\n            is_changed = true;\n        }\n        var new_genome_build = this.select_genome.$el.select2(\"data\").id;\n        if (\n            typeof new_genome_build !== \"undefined\" &&\n            new_genome_build !== ld.get(\"genome_build\")\n        ) {\n            ld.set(\"genome_build\", new_genome_build);\n            is_changed = true;\n        }\n        var new_ext = this.select_extension.$el.select2(\"data\").id;\n        if (typeof new_ext !== \"undefined\" && new_ext !== ld.get(\"file_ext\")) {\n            ld.set(\"file_ext\", new_ext);\n            is_changed = true;\n        }\n        var dataset_view = this;\n        if (is_changed) {\n            ld.save(null, {\n                patch: true,\n                success: function(ld) {\n                    dataset_view.render();\n                    mod_toastr.success(\"Changes to library dataset saved.\");\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(response.responseJSON.err_msg);\n                    } else {\n                        mod_toastr.error(\n                            \"An error occured while attempting to update the library dataset.\"\n                        );\n                    }\n                }\n            });\n        } else {\n            dataset_view.render();\n            mod_toastr.info(\"Nothing has changed.\");\n        }\n    },\n\n    copyToClipboard: function(e) {\n        e.preventDefault();\n        var href = Backbone.history.location.href;\n        if (href.lastIndexOf(\"/permissions\") !== -1) {\n            href = href.substr(0, href.lastIndexOf(\"/permissions\"));\n        }\n        window.prompt(\"Copy to clipboard: Ctrl+C, Enter\", href);\n    },\n\n    makeDatasetPrivate: function() {\n        var self = this;\n        $.post(\n            `${Galaxy.root}api/libraries/datasets/${self.id}/permissions?action=make_private`\n        )\n            .done(fetched_permissions => {\n                self.model.set({ is_unrestricted: false });\n                self.showPermissions({\n                    fetched_permissions: fetched_permissions\n                });\n                mod_toastr.success(\"The dataset is now private to you.\");\n            })\n            .fail(() => {\n                mod_toastr.error(\n                    \"An error occurred while attempting to make dataset private.\"\n                );\n            });\n    },\n\n    removeDatasetRestrictions: function() {\n        var self = this;\n        $.post(\n            `${Galaxy.root}api/libraries/datasets/${self.id}/permissions?action=remove_restrictions`\n        )\n            .done(fetched_permissions => {\n                self.model.set({ is_unrestricted: true });\n                self.showPermissions({\n                    fetched_permissions: fetched_permissions\n                });\n                mod_toastr.success(\n                    \"Access to this dataset is now unrestricted.\"\n                );\n            })\n            .fail(() => {\n                mod_toastr.error(\n                    \"An error occurred while attempting to make dataset unrestricted.\"\n                );\n            });\n    },\n\n    /**\n   * Extract the role ids from Select2 elements's 'data'\n   */\n    _extractIds: function(roles_list) {\n        var ids_list = [];\n        for (var i = roles_list.length - 1; i >= 0; i--) {\n            ids_list.push(roles_list[i].id);\n        }\n        return ids_list;\n    },\n\n    /**\n   * Save the permissions for roles entered in the select boxes.\n   */\n    savePermissions: function(event) {\n        var self = this;\n        var access_ids = this._extractIds(\n            this.accessSelectObject.$el.select2(\"data\")\n        );\n        var manage_ids = this._extractIds(\n            this.manageSelectObject.$el.select2(\"data\")\n        );\n        var modify_ids = this._extractIds(\n            this.modifySelectObject.$el.select2(\"data\")\n        );\n        $.post(\n            `${Galaxy.root}api/libraries/datasets/${self.id}/permissions?action=set_permissions`,\n            {\n                \"access_ids[]\": access_ids,\n                \"manage_ids[]\": manage_ids,\n                \"modify_ids[]\": modify_ids\n            }\n        )\n            .done(fetched_permissions => {\n                self.showPermissions({\n                    fetched_permissions: fetched_permissions\n                });\n                mod_toastr.success(\"Permissions saved.\");\n            })\n            .fail(() => {\n                mod_toastr.error(\n                    \"An error occurred while attempting to set dataset permissions.\"\n                );\n            });\n    },\n\n    /**\n   * If needed request all extensions and/or genomes from Galaxy\n   * and save them in sorted arrays.\n   */\n    fetchExtAndGenomes: function() {\n        var self = this;\n        if (this.list_genomes.length == 0) {\n            mod_utils.get({\n                url: `${Galaxy.root}api/datatypes?extension_only=False`,\n                success: function(datatypes) {\n                    for (var key in datatypes) {\n                        self.list_extensions.push({\n                            id: datatypes[key].extension,\n                            text: datatypes[key].extension,\n                            description: datatypes[key].description,\n                            description_url: datatypes[key].description_url\n                        });\n                    }\n                    self.list_extensions.sort(\n                        (a, b) => (a.id > b.id ? 1 : a.id < b.id ? -1 : 0)\n                    );\n                    self.list_extensions.unshift(self.auto);\n                }\n            });\n        }\n        if (this.list_extensions.length == 0) {\n            mod_utils.get({\n                url: `${Galaxy.root}api/genomes`,\n                success: function(genomes) {\n                    for (var key in genomes) {\n                        self.list_genomes.push({\n                            id: genomes[key][1],\n                            text: genomes[key][0]\n                        });\n                    }\n                    self.list_genomes.sort(\n                        (a, b) => (a.id > b.id ? 1 : a.id < b.id ? -1 : 0)\n                    );\n                }\n            });\n        }\n    },\n\n    renderSelectBoxes: function(options) {\n        // This won't work properly unlesss we already have the data fetched.\n        // See this.fetchExtAndGenomes()\n        // TODO switch to common resources:\n        // https://trello.com/c/dIUE9YPl/1933-ui-common-resources-and-data-into-galaxy-object\n        var self = this;\n        var current_genome = \"?\";\n        var current_ext = \"auto\";\n        if (typeof options !== \"undefined\") {\n            if (typeof options.genome_build !== \"undefined\") {\n                current_genome = options.genome_build;\n            }\n            if (typeof options.file_ext !== \"undefined\") {\n                current_ext = options.file_ext;\n            }\n        }\n        this.select_genome = new mod_select.View({\n            css: \"dataset-genome-select\",\n            data: self.list_genomes,\n            container: self.$el.find(\"#dataset_genome_select\"),\n            value: current_genome\n        });\n        this.select_extension = new mod_select.View({\n            css: \"dataset-extension-select\",\n            data: self.list_extensions,\n            container: self.$el.find(\"#dataset_extension_select\"),\n            value: current_ext\n        });\n    },\n\n    templateDataset: function() {\n        return _.template(\n            [\n                // CONTAINER START\n                '<div class=\"library_style_container\">',\n                '<div id=\"library_toolbar\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download dataset\" class=\"btn btn-default toolbtn-download-dataset primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-download\"></span>',\n                \"&nbsp;Download\",\n                \"</button>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Import dataset into history\" class=\"btn btn-default toolbtn-import-dataset primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-book\"></span>',\n                \"&nbsp;to History\",\n                \"</button>\",\n                '<% if (item.get(\"can_user_modify\")) { %>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Modify library item\" class=\"btn btn-default toolbtn_modify_dataset primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-pencil\"></span>',\n                \"&nbsp;Modify\",\n                \"</button>\",\n                \"<% } %>\",\n                '<% if (item.get(\"can_user_manage\")) { %>',\n                '<a href=\"#folders/<%- item.get(\"folder_id\") %>/datasets/<%- item.id %>/permissions\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Manage permissions\" class=\"btn btn-default toolbtn_change_permissions primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-group\"></span>',\n                \"&nbsp;Permissions\",\n                \"</button>\",\n                \"</a>\",\n                \"<% } %>\",\n                \"</div>\",\n\n                // BREADCRUMBS\n                '<ol class=\"breadcrumb\">',\n                '<li><a title=\"Return to the list of libraries\" href=\"#\">Libraries</a></li>',\n                '<% _.each(item.get(\"full_path\"), function(path_item) { %>',\n                \"<% if (path_item[0] != item.id) { %>\",\n                '<li><a title=\"Return to this folder\" href=\"#/folders/<%- path_item[0] %>\"><%- path_item[1] %></a> </li> ',\n                \"<% } else { %>\",\n                '<li class=\"active\"><span title=\"You are here\"><%- path_item[1] %></span></li>',\n                \"<% } %>\",\n                \"<% }); %>\",\n                \"</ol>\",\n\n                '<% if (item.get(\"is_unrestricted\")) { %>',\n                \"<div>\",\n                'This dataset is unrestricted so everybody with the link can access it. Just share <span class=\"copy-link-to-clipboard\"><a href=\"\"a>this page</a></span>.',\n                \"</div>\",\n                \"<% } %>\",\n\n                // TABLE START\n                '<div class=\"dataset_table\">',\n                '<table class=\"grid table table-striped table-condensed\">',\n                \"<tr>\",\n                '<th class=\"dataset-first-column\" scope=\"row\" id=\"id_row\" data-id=\"<%= _.escape(item.get(\"ldda_id\")) %>\">Name</th>',\n                '<td><%= _.escape(item.get(\"name\")) %></td>',\n                \"</tr>\",\n                '<% if (item.get(\"file_ext\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Data type</th>',\n                '<td><%= _.escape(item.get(\"file_ext\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"genome_build\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Genome build</th>',\n                '<td><%= _.escape(item.get(\"genome_build\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"file_size\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Size</th>',\n                '<td><%= _.escape(item.get(\"file_size\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"date_uploaded\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Date uploaded (UTC)</th>',\n                '<td><%= _.escape(item.get(\"date_uploaded\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"uploaded_by\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Uploaded by</th>',\n                '<td><%= _.escape(item.get(\"uploaded_by\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"metadata_data_lines\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Data Lines</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_data_lines\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"metadata_comment_lines\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Comment Lines</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_comment_lines\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"metadata_columns\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Number of Columns</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_columns\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"metadata_column_types\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Column Types</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_column_types\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"message\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Message</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"message\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"misc_blurb\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Misc. blurb</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"misc_blurb\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"misc_info\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Misc. info</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"misc_info\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"tags\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Tags</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"tags\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if ( item.get(\"uuid\") !== \"ok\" ) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">UUID</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"uuid\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if ( item.get(\"state\") !== \"ok\" ) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">State</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"state\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                \"</table>\",\n\n                '<% if (item.get(\"job_stderr\")) { %>',\n                \"<h4>Job Standard Error</h4>\",\n                '<pre class=\"code\">',\n                '<%= _.escape(item.get(\"job_stderr\")) %>',\n                \"</pre>\",\n                \"<% } %>\",\n\n                '<% if (item.get(\"job_stdout\")) { %>',\n                \"<h4>Job Standard Output</h4>\",\n                '<pre class=\"code\">',\n                '<%= _.escape(item.get(\"job_stdout\")) %>',\n                \"</pre>\",\n                \"<% } %>\",\n\n                \"<div>\",\n                '<pre class=\"peek\">',\n                \"</pre>\",\n                \"</div>\",\n\n                '<% if (item.get(\"has_versions\")) { %>',\n                \"<div>\",\n                \"<h3>Expired versions:</h3>\",\n                \"<ul>\",\n                '<% _.each(item.get(\"expired_versions\"), function(version) { %>',\n                '<li><a title=\"See details of this version\" href=\"#folders/<%- item.get(\"folder_id\") %>/datasets/<%- item.id %>/versions/<%- version[0] %>\"><%- version[1] %></a></li>',\n                \"<% }) %>\",\n                \"<ul>\",\n                \"</div>\",\n                \"<% } %>\",\n                // TABLE END\n                \"</div>\",\n                // CONTAINER END\n                \"</div>\"\n            ].join(\"\")\n        );\n    },\n\n    templateVersion: function() {\n        return _.template(\n            [\n                // CONTAINER START\n                '<div class=\"library_style_container\">',\n                '<div id=\"library_toolbar\">',\n                '<a href=\"#folders/<%- item.get(\"folder_id\") %>/datasets/<%- item.id %>\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Go to latest dataset\" class=\"btn btn-default primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-caret-left fa-lg\"></span>',\n                \"&nbsp;Latest dataset\",\n                \"</button>\",\n                \"<a>\",\n                \"</div>\",\n\n                // BREADCRUMBS\n                '<ol class=\"breadcrumb\">',\n                '<li><a title=\"Return to the list of libraries\" href=\"#\">Libraries</a></li>',\n                '<% _.each(item.get(\"full_path\"), function(path_item) { %>',\n                \"<% if (path_item[0] != item.id) { %>\",\n                '<li><a title=\"Return to this folder\" href=\"#/folders/<%- path_item[0] %>\"><%- path_item[1] %></a> </li> ',\n                \"<% } else { %>\",\n                '<li class=\"active\"><span title=\"You are here\"><%- path_item[1] %></span></li>',\n                \"<% } %>\",\n                \"<% }); %>\",\n                \"</ol>\",\n\n                '<div class=\"alert alert-warning\">This is an expired version of the library dataset: <%= _.escape(item.get(\"name\")) %></div>',\n                // DATASET START\n                '<div class=\"dataset_table\">',\n                '<table class=\"grid table table-striped table-condensed\">',\n                \"<tr>\",\n                '<th scope=\"row\" id=\"id_row\" data-id=\"<%= _.escape(ldda.id) %>\">Name</th>',\n                '<td><%= _.escape(ldda.get(\"name\")) %></td>',\n                \"</tr>\",\n                '<% if (ldda.get(\"file_ext\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Data type</th>',\n                '<td><%= _.escape(ldda.get(\"file_ext\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"genome_build\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Genome build</th>',\n                '<td><%= _.escape(ldda.get(\"genome_build\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"file_size\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Size</th>',\n                '<td><%= _.escape(ldda.get(\"file_size\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"date_uploaded\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Date uploaded (UTC)</th>',\n                '<td><%= _.escape(ldda.get(\"date_uploaded\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"uploaded_by\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Uploaded by</th>',\n                '<td><%= _.escape(ldda.get(\"uploaded_by\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"metadata_data_lines\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Data Lines</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"metadata_data_lines\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"metadata_comment_lines\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Comment Lines</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"metadata_comment_lines\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"metadata_columns\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Number of Columns</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"metadata_columns\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"metadata_column_types\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Column Types</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"metadata_column_types\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"message\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Message</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"message\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"misc_blurb\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Miscellaneous blurb</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"misc_blurb\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (ldda.get(\"misc_info\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Miscellaneous information</th>',\n                '<td scope=\"row\"><%= _.escape(ldda.get(\"misc_info\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                '<% if (item.get(\"tags\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Tags</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"tags\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                \"</table>\",\n                \"<div>\",\n                '<pre class=\"peek\">',\n                \"</pre>\",\n                \"</div>\",\n                // DATASET END\n                \"</div>\",\n                // CONTAINER END\n                \"</div>\"\n            ].join(\"\")\n        );\n    },\n\n    templateModifyDataset: function() {\n        return _.template(\n            [\n                // CONTAINER START\n                '<div class=\"library_style_container\">',\n                '<div id=\"library_toolbar\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Cancel modifications\" class=\"btn btn-default toolbtn_cancel_modifications primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-times\"></span>',\n                \"&nbsp;Cancel\",\n                \"</button>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Save modifications\" class=\"btn btn-default toolbtn_save_modifications primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-floppy-o\"></span>',\n                \"&nbsp;Save\",\n                \"</button>\",\n                \"</div>\",\n\n                // BREADCRUMBS\n                '<ol class=\"breadcrumb\">',\n                '<li><a title=\"Return to the list of libraries\" href=\"#\">Libraries</a></li>',\n                '<% _.each(item.get(\"full_path\"), function(path_item) { %>',\n                \"<% if (path_item[0] != item.id) { %>\",\n                '<li><a title=\"Return to this folder\" href=\"#/folders/<%- path_item[0] %>\"><%- path_item[1] %></a> </li> ',\n                \"<% } else { %>\",\n                '<li class=\"active\"><span title=\"You are here\"><%- path_item[1] %></span></li>',\n                \"<% } %>\",\n                \"<% }); %>\",\n                \"</ol>\",\n\n                '<div class=\"dataset_table\">',\n                '<table class=\"grid table table-striped table-condensed\">',\n                \"<tr>\",\n                '<th class=\"dataset-first-column\" scope=\"row\" id=\"id_row\" data-id=\"<%= _.escape(item.get(\"ldda_id\")) %>\">Name</th>',\n                '<td><input class=\"input_dataset_name form-control\" type=\"text\" placeholder=\"name\" value=\"<%= _.escape(item.get(\"name\")) %>\"></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Data type</th>',\n                \"<td>\",\n                '<span id=\"dataset_extension_select\" class=\"dataset-extension-select\" />',\n                \"</td>\",\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Genome build</th>',\n                \"<td>\",\n                '<span id=\"dataset_genome_select\" class=\"dataset-genome-select\" />',\n                \"</td>\",\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Size</th>',\n                '<td><%= _.escape(item.get(\"file_size\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Date uploaded (UTC)</th>',\n                '<td><%= _.escape(item.get(\"date_uploaded\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Uploaded by</th>',\n                '<td><%= _.escape(item.get(\"uploaded_by\")) %></td>',\n                \"</tr>\",\n                '<tr scope=\"row\">',\n                '<th scope=\"row\">Data Lines</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_data_lines\")) %></td>',\n                \"</tr>\",\n                '<th scope=\"row\">Comment Lines</th>',\n                '<% if (item.get(\"metadata_comment_lines\") === \"\") { %>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_comment_lines\")) %></td>',\n                \"<% } else { %>\",\n                '<td scope=\"row\">unknown</td>',\n                \"<% } %>\",\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Number of Columns</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_columns\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Column Types</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"metadata_column_types\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Message</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"message\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Misc. blurb</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"misc_blurb\")) %></td>',\n                \"</tr>\",\n                \"<tr>\",\n                '<th scope=\"row\">Misc. information</th>',\n                '<td><input class=\"input_dataset_misc_info form-control\" type=\"text\" placeholder=\"info\" value=\"<%= _.escape(item.get(\"misc_info\")) %>\"></td>',\n                \"</tr>\",\n                //TODO: add functionality to modify tags here\n                '<% if (item.get(\"tags\")) { %>',\n                \"<tr>\",\n                '<th scope=\"row\">Tags</th>',\n                '<td scope=\"row\"><%= _.escape(item.get(\"tags\")) %></td>',\n                \"</tr>\",\n                \"<% } %>\",\n                \"</table>\",\n                \"<div>\",\n                '<pre class=\"peek\">',\n                \"</pre>\",\n                \"</div>\",\n                \"</div>\",\n                // CONTAINER END\n                \"</div>\"\n            ].join(\"\")\n        );\n    },\n\n    templateDatasetPermissions: function() {\n        return _.template(\n            [\n                // CONTAINER START\n                '<div class=\"library_style_container\">',\n                '<div id=\"library_toolbar\">',\n                '<a href=\"#folders/<%- item.get(\"folder_id\") %>/datasets/<%- item.id %>\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Go back to dataset\" class=\"btn btn-default primary-button toolbar-item\" type=\"button\">',\n                '<span class=\"fa fa-file-o\"></span>',\n                \"&nbsp;Dataset Details\",\n                \"</button>\",\n                \"<a>\",\n                \"</div>\",\n\n                // BREADCRUMBS\n                '<ol class=\"breadcrumb\">',\n                '<li><a title=\"Return to the list of libraries\" href=\"#\">Libraries</a></li>',\n                '<% _.each(item.get(\"full_path\"), function(path_item) { %>',\n                \"<% if (path_item[0] != item.id) { %>\",\n                '<li><a title=\"Return to this folder\" href=\"#/folders/<%- path_item[0] %>\"><%- path_item[1] %></a> </li> ',\n                \"<% } else { %>\",\n                '<li class=\"active\"><span title=\"You are here\"><%- path_item[1] %></span></li>',\n                \"<% } %>\",\n                \"<% }); %>\",\n                \"</ol>\",\n\n                '<h1>Dataset: <%= _.escape(item.get(\"name\")) %></h1>',\n                '<div class=\"alert alert-warning\">',\n                \"<% if (is_admin) { %>\",\n                \"You are logged in as an <strong>administrator</strong> therefore you can manage any dataset on this Galaxy instance. Please make sure you understand the consequences.\",\n                \"<% } else { %>\",\n                \"You can assign any number of roles to any of the following permission types. However please read carefully the implications of such actions.\",\n                \"<% } %>\",\n                \"</div>\",\n                '<div class=\"dataset_table\">',\n                \"<h2>Library-related permissions</h2>\",\n                \"<h4>Roles that can modify the library item</h4>\",\n                '<div id=\"modify_perm\" class=\"modify_perm roles-selection\"></div>',\n                '<div class=\"alert alert-info roles-selection\">User with <strong>any</strong> of these roles can modify name, metadata, and other information about this library item.</div>',\n                \"<hr/>\",\n                \"<h2>Dataset-related permissions</h2>\",\n                '<div class=\"alert alert-warning\">Changes made below will affect <strong>every</strong> library item that was created from this dataset and also every history this dataset is part of.</div>',\n                '<% if (!item.get(\"is_unrestricted\")) { %>',\n                '<p>You can <span class=\"remove-restrictions\"><a href=\"\">remove all access restrictions</a></span> on this dataset.</p>',\n                \"<% } else { %>\",\n                '<p>You can <span class=\"make-private\"><a href=\"\">make this dataset private</a></span> to you.</p>',\n                \"<% } %>\",\n                \"<h4>Roles that can access the dataset</h4>\",\n                '<div id=\"access_perm\" class=\"access_perm roles-selection\"></div>',\n                '<div class=\"alert alert-info roles-selection\">',\n                \"User has to have <strong>all these roles</strong> in order to access this dataset.\",\n                \" Users without access permission <strong>cannot</strong> have other permissions on this dataset.\",\n                \" If there are no access roles set on the dataset it is considered <strong>unrestricted</strong>.\",\n                \"</div>\",\n                \"<h4>Roles that can manage permissions on the dataset</h4>\",\n                '<div id=\"manage_perm\" class=\"manage_perm roles-selection\"></div>',\n                '<div class=\"alert alert-info roles-selection\">',\n                \"User with <strong>any</strong> of these roles can manage permissions of this dataset. If you remove yourself you will lose the ability manage this dataset unless you are an admin.\",\n                \"</div>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Save modifications made on this page\" class=\"btn btn-default toolbtn_save_permissions primary-button\" type=\"button\">',\n                '<span class=\"fa fa-floppy-o\"></span>',\n                \"&nbsp;Save\",\n                \"</button>\",\n                \"</div>\",\n                // CONTAINER END\n                \"</div>\"\n            ].join(\"\")\n        );\n    },\n\n    templateBulkImportInModal: function() {\n        return _.template(\n            [\n                \"<div>\",\n                '<div class=\"library-modal-item\">',\n                \"Select history: \",\n                '<select id=\"dataset_import_single\" name=\"dataset_import_single\" style=\"width:50%; margin-bottom: 1em; \" autofocus>',\n                \"<% _.each(histories, function(history) { %>\",\n                '<option value=\"<%= _.escape(history.get(\"id\")) %>\"><%= _.escape(history.get(\"name\")) %></option>',\n                \"<% }); %>\",\n                \"</select>\",\n                \"</div>\",\n                '<div class=\"library-modal-item\">',\n                \"or create new: \",\n                '<input type=\"text\" name=\"history_name\" value=\"\" placeholder=\"name of the new history\" style=\"width:50%;\">',\n                \"</input>\",\n                \"</div>\",\n                \"</div>\"\n            ].join(\"\")\n        );\n    }\n});\n\nexport default {\n    LibraryDatasetView: LibraryDatasetView\n};\n"]}