{"version":3,"sources":["mvc/library/library-library-view.js"],"names":["define","mod_toastr","mod_library_model","mod_select","LibraryView","Backbone","View","extend","el","model","options","events","click .toolbtn_save_permissions","initialize","this","_","id","fetchLibrary","Library","that","fetch","success","show_permissions","showPermissions","render","error","response","responseJSON","err_msg","onclick","Galaxy","libraries","library_router","back","$","remove","template","templateLibrary","$el","html","item","tooltip","shareDataset","info","goBack","undefined","fetched_permissions","access_library_role_list","length","set","is_unrestricted","is_admin","user","isAdmin","templateLibraryPermissions","library","self","get","root","done","prepareSelectBoxes","fail","css","_serializeRoles","role_list","selected_roles","i","push","selected_access_library_roles","selected_add_item_roles","add_library_item_role_list","selected_manage_library_roles","manage_library_role_list","selected_modify_library_roles","modify_library_role_list","accessSelectObject","_createSelectOptions","addSelectObject","manageSelectObject","modifySelectObject","init_data","is_library_access","minimumInputLength","multiple","placeholder","container","find","ajax","url","dataType","quietMillis","data","term","page","q","page_limit","results","more","total","roles","formatResult","role","name","type","formatSelection","initSelection","element","callback","val","split","each","initialData","dropdownCssClass","comingSoon","warning","copyToClipboard","href","history","location","lastIndexOf","substr","window","prompt","makeDatasetPrivate","post","removeDatasetRestrictions","_extractIds","roles_list","ids_list","savePermissions","event","access_ids","select2","add_ids","manage_ids","modify_ids","access_ids[]","add_ids[]","manage_ids[]","modify_ids[]","join"],"mappings":"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","file":"../../../scripts/mvc/library/library-library-view.js","sourcesContent":["define([\n  \"libs/toastr\",\n  \"mvc/library/library-model\",\n  'mvc/ui/ui-select'\n  ],\nfunction(\n        mod_toastr,\n        mod_library_model,\n        mod_select\n        ) {\n\nvar LibraryView = Backbone.View.extend({\n  el: '#center',\n\n  model: null,\n\n  options: {\n\n  },\n\n  events: {\n    \"click .toolbtn_save_permissions\"     :   \"savePermissions\"\n  },\n\n  initialize: function(options){\n    this.options = _.extend(this.options, options);\n    if (this.options.id){\n      this.fetchLibrary();\n    }\n  },\n\n  fetchLibrary: function(options){\n    this.options = _.extend(this.options, options);\n    this.model = new mod_library_model.Library({id:this.options.id});\n    var that = this;\n    this.model.fetch({\n      success: function() {\n        if (that.options.show_permissions){\n            that.showPermissions();\n        } else {\n            that.render();\n        }\n      },\n      error: function(model, response){\n        if (typeof response.responseJSON !== \"undefined\"){\n          mod_toastr.error(response.responseJSON.err_msg + ' Click this to go back.', '', {onclick: function() {Galaxy.libraries.library_router.back();}});\n        } else {\n          mod_toastr.error('An error ocurred. Click this to go back.', '', {onclick: function() {Galaxy.libraries.library_router.back();}});\n        }\n      }\n    });\n  },\n\n  render: function(options){\n    $(\".tooltip\").remove();\n    this.options = _.extend(this.options, options);\n    var template = this.templateLibrary();\n    this.$el.html(template({item: this.model}));\n    $(\"#center [data-toggle]\").tooltip();\n  },\n\n  shareDataset: function(){\n    mod_toastr.info('Feature coming soon.');\n  },\n\n  goBack: function(){\n    Galaxy.libraries.library_router.back();\n  },\n\n  showPermissions: function(options){\n    this.options = _.extend(this.options, options);\n    $(\".tooltip\").remove();\n\n    if (this.options.fetched_permissions !== undefined){\n      if (this.options.fetched_permissions.access_library_role_list.length === 0){\n        this.model.set({is_unrestricted:true});\n      } else{\n        this.model.set({is_unrestricted:false});\n      }\n    }\n    var is_admin = false;\n    if (Galaxy.user){\n      is_admin = Galaxy.user.isAdmin();\n    }\n    var template = this.templateLibraryPermissions();\n    this.$el.html(template({library: this.model, is_admin:is_admin}));\n\n    var self = this;\n    $.get( Galaxy.root + \"api/libraries/\" + self.id + \"/permissions?scope=current\").done(function(fetched_permissions) {\n      self.prepareSelectBoxes({fetched_permissions:fetched_permissions});\n    }).fail(function(){\n        mod_toastr.error('An error occurred while attempting to fetch library permissions.');\n    });\n\n    $(\"#center [data-toggle]\").tooltip();\n    //hack to show scrollbars\n    $(\"#center\").css('overflow','auto');\n  },\n\n  _serializeRoles : function(role_list){\n    var selected_roles = [];\n    for (var i = 0; i < role_list.length; i++) {\n      selected_roles.push(role_list[i][1] + ':' + role_list[i][0]);\n    }\n    return selected_roles;\n  },\n\n  prepareSelectBoxes: function(options){\n    this.options = _.extend(this.options, options);\n    var fetched_permissions = this.options.fetched_permissions;\n    var self = this;\n\n    var selected_access_library_roles = this._serializeRoles(fetched_permissions.access_library_role_list);\n    var selected_add_item_roles = this._serializeRoles(fetched_permissions.add_library_item_role_list);\n    var selected_manage_library_roles = this._serializeRoles(fetched_permissions.manage_library_role_list);\n    var selected_modify_library_roles = this._serializeRoles(fetched_permissions.modify_library_role_list);\n\n    self.accessSelectObject = new mod_select.View(this._createSelectOptions(this, 'access_perm', selected_access_library_roles, true));\n    self.addSelectObject = new mod_select.View(this._createSelectOptions(this, 'add_perm', selected_add_item_roles, false));\n    self.manageSelectObject = new mod_select.View(this._createSelectOptions(this, 'manage_perm', selected_manage_library_roles, false));\n    self.modifySelectObject = new mod_select.View(this._createSelectOptions(this, 'modify_perm', selected_modify_library_roles, false));\n  },\n\n  _createSelectOptions: function(self, id, init_data, is_library_access){\n    is_library_access = is_library_access === true ? is_library_access : false;\n    var select_options = {\n      minimumInputLength: 0,\n      css: id,\n      multiple:true,\n      placeholder: 'Click to select a role',\n      container: self.$el.find('#' + id),\n      ajax: {\n          url: Galaxy.root + \"api/libraries/\" + self.id + \"/permissions?scope=available&is_library_access=\" + is_library_access,\n          dataType: 'json',\n          quietMillis: 100,\n          data: function (term, page) { // page is the one-based page number tracked by Select2\n              return {\n                  q: term, //search term\n                  page_limit: 10, // page size\n                  page: page // page number\n              };\n          },\n          results: function (data, page) {\n              var more = (page * 10) < data.total; // whether or not there are more results available\n              // notice we return the value of more so Select2 knows if more results can be loaded\n              return {results: data.roles, more: more};\n          }\n      },\n      formatResult : function roleFormatResult(role) {\n          return role.name + ' type: ' + role.type;\n      },\n\n      formatSelection: function roleFormatSelection(role) {\n          return role.name;\n      },\n      initSelection: function(element, callback) {\n      // the input tag has a value attribute preloaded that points to a preselected role's id\n      // this function resolves that id attribute to an object that select2 can render\n      // using its formatResult renderer - that way the role name is shown preselected\n          var data = [];\n          $(element.val().split(\",\")).each(function() {\n              var item = this.split(':');\n              data.push({\n                  id: item[0],\n                  name: item[1]\n              });\n          });\n          callback(data);\n      },\n      // initialData: init_data.join(','),\n      initialData: init_data,\n      dropdownCssClass: \"bigdrop\" // apply css that makes the dropdown taller\n    };\n\n    return select_options;\n  },\n\n  comingSoon: function(){\n    mod_toastr.warning('Feature coming soon.');\n  },\n\n  copyToClipboard: function(){\n    var href = Backbone.history.location.href;\n    if (href.lastIndexOf('/permissions') !== -1){\n      href = href.substr(0, href.lastIndexOf('/permissions'));\n    }\n    window.prompt(\"Copy to clipboard: Ctrl+C, Enter\", href);\n  },\n\n  makeDatasetPrivate: function(){\n    var self = this;\n    $.post( Galaxy.root + \"api/libraries/datasets/\" + self.id + \"/permissions?action=make_private\").done(function(fetched_permissions) {\n      self.model.set({is_unrestricted:false});\n      self.showPermissions({fetched_permissions:fetched_permissions})\n      mod_toastr.success('The dataset is now private to you.');\n    }).fail(function(){\n      mod_toastr.error('An error occurred while attempting to make dataset private.');\n    });\n  },\n\n  removeDatasetRestrictions: function(){\n    var self = this;\n    $.post( Galaxy.root + \"api/libraries/datasets/\" + self.id + \"/permissions?action=remove_restrictions\")\n    .done(function(fetched_permissions) {\n      self.model.set({is_unrestricted:true});\n      self.showPermissions({fetched_permissions:fetched_permissions})\n      mod_toastr.success('Access to this dataset is now unrestricted.');\n    })\n    .fail(function(){\n      mod_toastr.error('An error occurred while attempting to make dataset unrestricted.');\n    });\n  },\n\n  _extractIds: function(roles_list){\n    ids_list = [];\n    for (var i = roles_list.length - 1; i >= 0; i--) {\n      ids_list.push(roles_list[i].id);\n    };\n    return ids_list;\n  },\n  savePermissions: function(event){\n    var self = this;\n\n    var access_ids = this._extractIds(this.accessSelectObject.$el.select2('data'));\n    var add_ids = this._extractIds(this.addSelectObject.$el.select2('data'));\n    var manage_ids = this._extractIds(this.manageSelectObject.$el.select2('data'));\n    var modify_ids = this._extractIds(this.modifySelectObject.$el.select2('data'));\n\n    $.post( Galaxy.root + \"api/libraries/\" + self.id + \"/permissions?action=set_permissions\", { 'access_ids[]': access_ids, 'add_ids[]': add_ids, 'manage_ids[]': manage_ids, 'modify_ids[]': modify_ids, } )\n    .done(function(fetched_permissions){\n      //fetch dataset again\n      self.showPermissions({fetched_permissions:fetched_permissions})\n      mod_toastr.success('Permissions saved.');\n    })\n    .fail(function(){\n      mod_toastr.error('An error occurred while attempting to set library permissions.');\n    })\n  },\n\n  templateLibrary : function(){\n    return _.template([\n    '<div class=\"library_style_container\">',\n      '<div id=\"library_toolbar\">',\n        '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Modify library item\" class=\"btn btn-default toolbtn_modify_dataset primary-button\" type=\"button\">',\n          '<span class=\"fa fa-pencil\"/>',\n          '&nbsp;Modify',\n        '</button>',\n        '<a href=\"#folders/<%- item.get(\"folder_id\") %>/datasets/<%- item.id %>/permissions\">',\n          '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Manage permissions\" class=\"btn btn-default toolbtn_change_permissions primary-button\" type=\"button\">',\n            '<span class=\"fa fa-group\"/>',\n            '&nbsp;Permissions',\n          '</button>',\n        '</a>',\n        '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Share dataset\" class=\"btn btn-default toolbtn-share-dataset primary-button\" type=\"button\">',\n          '<span class=\"fa fa-share\"/>',\n          '&nbsp;Share',\n        '</button>',\n      '</div>',\n      '<p>',\n        'This dataset is unrestricted so everybody can access it. Just share the URL of this page. ',\n        '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy to clipboard\" class=\"btn btn-default btn-copy-link-to-clipboard primary-button\" type=\"button\">',\n          '<span class=\"fa fa-clipboard\"/>',\n          '&nbsp;To Clipboard',\n        '</button> ',\n      '</p>',\n      '<div class=\"dataset_table\">',\n        '<table class=\"grid table table-striped table-condensed\">',\n          '<tr>',\n            '<th scope=\"row\" id=\"id_row\" data-id=\"<%= _.escape(item.get(\"ldda_id\")) %>\">',\n              'Name',\n            '</th>',\n            '<td>',\n              '<%= _.escape(item.get(\"name\")) %>',\n            '</td>',\n          '</tr>',\n          '<% if (item.get(\"file_ext\")) { %>',\n            '<tr>',\n              '<th scope=\"row\">Data type</th>',\n              '<td>',\n                '<%= _.escape(item.get(\"file_ext\")) %>',\n              '</td>',\n            '</tr>',\n          '<% } %>',\n        '</table>',\n      '</div>',\n    '</div>',\n    ].join(''));\n  },\n\n  templateLibraryPermissions : function(){\n    return _.template([\n    '<div class=\"library_style_container\">',\n      '<div id=\"library_toolbar\">',\n        '<a href=\"#\">',\n          '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Go back to the list of Libraries\" class=\"btn btn-default primary-button\" type=\"button\">',\n            '<span class=\"fa fa-list\"/>',\n            '&nbsp;Libraries',\n          '</button>',\n        '</a>',\n      '</div>',\n      '<h1>',\n        'Library: <%= _.escape(library.get(\"name\")) %>',\n      '</h1>',\n      '<div class=\"alert alert-warning\">',\n        '<% if (is_admin) { %>',\n          'You are logged in as an <strong>administrator</strong> therefore you can manage any library on this Galaxy instance. Please make sure you understand the consequences.',\n        '<% } else { %>',\n          'You can assign any number of roles to any of the following permission types. However please read carefully the implications of such actions.',\n        '<% }%>',\n      '</div>',\n      '<div class=\"dataset_table\">',\n        '<h2>Library permissions</h2>',\n        '<h4>Roles that can access the library</h4>',\n        '<div id=\"access_perm\" class=\"access_perm roles-selection\"/>',\n        '<div class=\"alert alert-info roles-selection\">',\n          'User with <strong>any</strong> of these roles can access this library. If there are no access roles set on the library it is considered <strong>unrestricted</strong>.',\n        '</div>',\n        '<h4>Roles that can manage permissions on this library</h4>',\n        '<div id=\"manage_perm\" class=\"manage_perm roles-selection\"/>',\n        '<div class=\"alert alert-info roles-selection\">',\n          'User with <strong>any</strong> of these roles can manage permissions on this library (includes giving access).',\n        '</div>',\n        '<h4>Roles that can add items to this library</h4>',\n        '<div id=\"add_perm\" class=\"add_perm roles-selection\"/>',\n        '<div class=\"alert alert-info roles-selection\">',\n          'User with <strong>any</strong> of these roles can add items to this library (folders and datasets).',\n        '</div>',\n        '<h4>Roles that can modify this library</h4>',\n        '<div id=\"modify_perm\" class=\"modify_perm roles-selection\"/>',\n        '<div class=\"alert alert-info roles-selection\">',\n          'User with <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).',\n        '</div>',\n        '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Save modifications made on this page\" class=\"btn btn-default toolbtn_save_permissions primary-button\" type=\"button\">',\n          '<span class=\"fa fa-floppy-o\"/>',\n          '&nbsp;Save',\n        '</button>',\n      '</div>',\n    '</div>',\n    ].join(''));\n  }\n\n});\n\nreturn {\n    LibraryView: LibraryView\n};\n\n});\n"]}