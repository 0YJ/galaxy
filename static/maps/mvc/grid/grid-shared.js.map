{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["_gridView","require","View","Backbone","extend","initialize","options","self","this","setElement","$","model","Model","item","get","title","ajax","url","Galaxy","root","param","success","response","set","render","grid","_gridView2","default","attributes","$el","empty","append","_templateShared","$tmpl","$table","_","shared_by_others","length","display_url","each","it","index","username","slug","escape","toLowerCase"],"mappings":"4IACA,IAAAA,UAAAC,QAAA,mEACIC,KAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXA,KAAKC,WAAWC,EAAE,WAJ1BF,KAAAG,MAAA,IAAAR,SAAAS,MAAAN,GAMQE,KAAKK,KAAOL,KAAKG,MAAMG,IAAI,QAC3BN,KAAKO,MAAQP,KAAKG,MAAMG,IAAI,UAC5BJ,EAAEM,MACEC,IACIC,OAAOC,KATZhB,KAASD,KACJ,IACJK,KAAOI,MAAXG,IAAA,aACKL,IACAE,EAALS,MAAaF,OAAIf,QACjBkB,QAAY,SAAAC,GACPP,EAAAA,aAAuB,EACrBR,EAAAI,MAAAY,IAAAD,GACHL,EACIC,aAUHM,OAAA,WAZE,IAAPC,EAAA,IAAAC,WAAAC,QAAAnB,KAAAG,MAAAiB,YAPwBpB,KAAAqB,IAAAC,QAAAC,OAAAN,EAAAI,KA0BxBrB,KAAKqB,IAAIE,OAAOvB,KAAKwB,oBADrBA,gBAASF,WACT,IAAAvB,EAASwB,KA1BeE,EAAAvB,EAgCpB,YAFAH,KAAOI,MAAXG,IAAA,UACImB,yCASA3B,EAAI4B,KACAvB,MAAAiB,WAOJO,GAAAA,EAAO7B,kBAAQ8B,EAAkBA,iBAAAC,OAAoB,EAAA,CACjD,IAAAH,EAAII,EAOJJ,+IAwBXC,EAAAI,KAAAjC,EAAA8B,iBAAA,SAAAI,EAAAC,GAlFL,IAAAH,EAqFepB,OAAAC,KACLjB,EAAAA,KAhCU,0CACAsC,EAAGE,SACH,SACAF,EAAGG,KACPT,EAAOH,OACH,oBAGIO,EACA,KACAH,EAAES,OAAOJ,EAAGzB,OACZ,gBAGAoB,EAAES,OAAOJ,EAAGE,UACZ,gBAIZT,EAAMF,OAAOG,QAEbD,EAAMF,OACF,MACIvB,KAAKG,MAAMG,IAAI,UAAU+B,cACzB,+BAGZ,OAAOZ,sBAKX/B,KAAMA","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\nimport GridView from \"mvc/grid/grid-view\";\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.setElement($(\"<div/>\"));\n        this.model = new Backbone.Model(options);\n        this.item = this.model.get(\"item\");\n        this.title = this.model.get(\"plural\");\n        $.ajax({\n            url:\n                Galaxy.root +\n                this.item +\n                \"/\" +\n                this.model.get(\"action_id\") +\n                \"?\" +\n                $.param(Galaxy.params),\n            success: function(response) {\n                response[\"dict_format\"] = true;\n                self.model.set(response);\n                self.render();\n            }\n        });\n    },\n\n    render: function() {\n        var grid = new GridView(this.model.attributes);\n        this.$el.empty().append(grid.$el);\n        this.$el.append(this._templateShared());\n    },\n\n    _templateShared: function() {\n        var self = this;\n        var $tmpl = $(\n            \"<div>\" +\n                \"<h2>\" +\n                this.model.get(\"plural\") +\n                \" shared with you by others</h2>\" +\n                \"</div>\"\n        );\n        var options = this.model.attributes;\n        if (options.shared_by_others && options.shared_by_others.length > 0) {\n            var $table = $(\n                '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                    '<tr class=\"header\">' +\n                    \"<th>Title</th>\" +\n                    \"<th>Owner</th>\" +\n                    \"</tr>\" +\n                    \"</table>\"\n            );\n            _.each(options.shared_by_others, function(it, index) {\n                var display_url =\n                    Galaxy.root +\n                    self.item +\n                    \"/display_by_username_and_slug?username=\" +\n                    it.username +\n                    \"&slug=\" +\n                    it.slug;\n                $table.append(\n                    \"<tr>\" +\n                        \"<td>\" +\n                        '<a href=\"' +\n                        display_url +\n                        '\">' +\n                        _.escape(it.title) +\n                        \"</a>\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                        _.escape(it.username) +\n                        \"</td>\" +\n                        \"</tr>\"\n                );\n            });\n            $tmpl.append($table);\n        } else {\n            $tmpl.append(\n                \"No \" +\n                    this.model.get(\"plural\").toLowerCase() +\n                    \" have been shared with you.\"\n            );\n        }\n        return $tmpl;\n    }\n});\n\nexport default {\n    View: View\n};\n"]}