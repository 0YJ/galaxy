{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["View","Backbone","extend","initialize","options","self","this","setElement","$","model","Model","item","get","title","ajax","url","Galaxy","root","param","params","success","response","render","_gridView2","default","attributes","grid","$el","_templateShared","$tmpl","empty","append","shared_by_others","length","$table","_","each","index","display_url","it","username","escape","toLowerCase"],"mappings":"sMAEIA,EAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXA,KAAKC,WAAWC,EAAE,WAClBF,KAAKG,MAAQ,IAAIR,SAASS,MAAMN,GAChCE,KAAKK,KAAOL,KAAKG,MAAMG,IAAI,QAC3BN,KAAKO,MAAQP,KAAKG,MAAMG,IAAI,UAC5BJ,EAAEM,MACEC,IAAQC,OAAOC,KAAOX,KAAKK,KAA3B,IAAmCL,KAAKG,MAAMG,IAC1C,aADJ,IAEKJ,EAAEU,MAAMF,OAAOG,QACpBC,QAAS,SAASC,GACdA,EAAA,aAA0B,EAZ/BpB,EAAAA,MAASD,IAAKE,GACrBC,EAAYmB,aAKRA,OAAA,WACAd,IAAAA,EAAO,IAAAe,EAAAC,QAAAlB,KAAAG,MAAAgB,YACHV,KAAAA,IAAAA,QAAQC,OAAAU,EAAcC,KAGtBP,KAAAA,IAAAA,OAAAA,KAASQ,oBAGLvB,gBAAAA,WACH,IAAAA,EAAAC,KAREuB,EAAPrB,EAAAA,YAPwBF,KAAAG,MAAAG,IA6BhB,UAtBR,yCAcAR,EAAS0B,KAATrB,MAAiBsB,WACjB,GAAA3B,EAAA4B,kBAAqBJ,EAALI,iBAAhBC,OAAA,EAAA,CAtBwB,IAAAC,EAAA1B,EAmChB,+IAOJ2B,EAAAA,KAAEC,EAAKhC,iBAAQ4B,SAAAA,EAAkBK,GAC7B,IAAAC,EAAIA,OAAiBtB,KAErBkB,EAAAA,KAFA,0CAEAK,EAAAC,SAFA,SAIW3B,EAAAA,KAGdqB,EARDH,OAQC,oBACDO,EADC,KACDH,EAAAM,OACGF,EAAA1B,OAFF,gBAISsB,EAAAM,OAAKhC,EACNG,UALR,gBAURiB,EAAAE,OAAAG,QAPOL,EAAME,OAAN,MAWF/B,KAAAA,MATWY,IAAI,UACJ8B,cAHT,+BAMJ,OAAOb,gBAKX7B,KAAMA","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\nimport GridView from \"mvc/grid/grid-view\";\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.setElement($(\"<div/>\"));\n        this.model = new Backbone.Model(options);\n        this.item = this.model.get(\"item\");\n        this.title = this.model.get(\"plural\");\n        $.ajax({\n            url: `${Galaxy.root + this.item}/${this.model.get(\n                \"action_id\"\n            )}?${$.param(Galaxy.params)}`,\n            success: function(response) {\n                response[\"dict_format\"] = true;\n                self.model.set(response);\n                self.render();\n            }\n        });\n    },\n\n    render: function() {\n        var grid = new GridView(this.model.attributes);\n        this.$el.empty().append(grid.$el);\n        this.$el.append(this._templateShared());\n    },\n\n    _templateShared: function() {\n        var self = this;\n        var $tmpl = $(\n            `<div><h2>${this.model.get(\n                \"plural\"\n            )} shared with you by others</h2></div>`\n        );\n        var options = this.model.attributes;\n        if (options.shared_by_others && options.shared_by_others.length > 0) {\n            var $table = $(\n                '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                    '<tr class=\"header\">' +\n                    \"<th>Title</th>\" +\n                    \"<th>Owner</th>\" +\n                    \"</tr>\" +\n                    \"</table>\"\n            );\n            _.each(options.shared_by_others, (it, index) => {\n                var display_url = `${Galaxy.root +\n                    self.item}/display_by_username_and_slug?username=${it.username}&slug=${it.slug}`;\n                $table.append(\n                    `<tr><td><a href=\"${display_url}\">${_.escape(\n                        it.title\n                    )}</a></td><td>${_.escape(it.username)}</td></tr>`\n                );\n            });\n            $tmpl.append($table);\n        } else {\n            $tmpl.append(\n                `No ${this.model\n                    .get(\"plural\")\n                    .toLowerCase()} have been shared with you.`\n            );\n        }\n        return $tmpl;\n    }\n});\n\nexport default {\n    View: View\n};\n"]}