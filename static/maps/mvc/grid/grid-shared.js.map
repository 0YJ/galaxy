{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["View","Backbone","extend","initialize","options","self","this","setElement","$","model","Model","item","get","title","ajax","url","Galaxy","root","params","success","response","set","render","attributes","grid","$el","append","_templateShared","$tmpl","shared_by_others","length","display_url","it","username","slug","$table","_","escape","toLowerCase"],"mappings":"sMAEIA,EAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXA,KAAKC,WAAWC,EAAE,WAClBF,KAAKG,MAAQ,IAAIR,SAASS,MAAMN,GAChCE,KAAKK,KAAOL,KAAKG,MAAMG,IAAI,QAC3BN,KAAKO,MAAQP,KAAKG,MAAMG,IAAI,UAC5BJ,EAAEM,MACEC,IACIC,OAAOC,KACPX,KAAKK,KACL,IACAL,KAAKG,MAAMG,IAAI,aAZpBX,IACPE,EAAAA,MAAYa,OAAAE,QACRC,QAAId,SAAJe,GACAA,EAAA,aAAA,EACAf,EAAKI,MAAQY,IAAIpB,GACjBI,EAAAiB,aAWQF,OAAAA,WACAf,IAAAA,EAAAA,IAAAA,EAAAA,QAAWgB,KAAID,MAAfG,YACAlB,KAAAA,IAAAA,QAAKiB,OAALE,EAAAC,KACHnB,KAAAmB,IAAAC,OAAApB,KAAAqB,oBAUTA,gBAAiB,WANjBL,IAAAA,EAAQhB,KACJsB,EAAIJ,EACJ,YAzBwBlB,KAAAG,MAAAG,IAAA,UAmChB,yCAJRR,EAAIwB,KACAnB,MAAAc,WAMJ,GAAAnB,EAAIA,kBAAqBmB,EAAzBM,iBAAAC,OAAA,EAAA,CACA,IAAI1B,EAAQyB,EACR,+IAiCAD,EAAAA,KAAAA,EAAMF,iBAEOjB,SAAAA,EAAMG,GAGtB,IAAAmB,EACMH,OAAPX,KACHZ,EAAAM,KAlFL,0CAuDoBqB,EA8BLC,SACLjC,SA7BUgC,EAAGE,KACPC,EAAOT,OACH,oBAGIK,EACA,KACAK,EAAEC,OAAOL,EAAGnB,OACZ,gBAGAuB,EAAEC,OAAOL,EAAGC,UACZ,gBAIZL,EAAMF,OAAOS,QAEbP,EAAMF,OACF,MACIpB,KAAKG,MAAMG,IAAI,UAAU0B,cACzB,+BAGZ,OAAOV,gBAKX5B,KAAMA","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\nimport GridView from \"mvc/grid/grid-view\";\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.setElement($(\"<div/>\"));\n        this.model = new Backbone.Model(options);\n        this.item = this.model.get(\"item\");\n        this.title = this.model.get(\"plural\");\n        $.ajax({\n            url:\n                Galaxy.root +\n                this.item +\n                \"/\" +\n                this.model.get(\"action_id\") +\n                \"?\" +\n                $.param(Galaxy.params),\n            success: function(response) {\n                response[\"dict_format\"] = true;\n                self.model.set(response);\n                self.render();\n            }\n        });\n    },\n\n    render: function() {\n        var grid = new GridView(this.model.attributes);\n        this.$el.empty().append(grid.$el);\n        this.$el.append(this._templateShared());\n    },\n\n    _templateShared: function() {\n        var self = this;\n        var $tmpl = $(\n            \"<div>\" +\n                \"<h2>\" +\n                this.model.get(\"plural\") +\n                \" shared with you by others</h2>\" +\n                \"</div>\"\n        );\n        var options = this.model.attributes;\n        if (options.shared_by_others && options.shared_by_others.length > 0) {\n            var $table = $(\n                '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                    '<tr class=\"header\">' +\n                    \"<th>Title</th>\" +\n                    \"<th>Owner</th>\" +\n                    \"</tr>\" +\n                    \"</table>\"\n            );\n            _.each(options.shared_by_others, (it, index) => {\n                var display_url =\n                    Galaxy.root +\n                    self.item +\n                    \"/display_by_username_and_slug?username=\" +\n                    it.username +\n                    \"&slug=\" +\n                    it.slug;\n                $table.append(\n                    \"<tr>\" +\n                        \"<td>\" +\n                        '<a href=\"' +\n                        display_url +\n                        '\">' +\n                        _.escape(it.title) +\n                        \"</a>\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                        _.escape(it.username) +\n                        \"</td>\" +\n                        \"</tr>\"\n                );\n            });\n            $tmpl.append($table);\n        } else {\n            $tmpl.append(\n                \"No \" +\n                    this.model.get(\"plural\").toLowerCase() +\n                    \" have been shared with you.\"\n            );\n        }\n        return $tmpl;\n    }\n});\n\nexport default {\n    View: View\n};\n"]}