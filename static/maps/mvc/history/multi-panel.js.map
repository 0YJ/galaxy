{"version":3,"file":"multi-panel.js","sources":["../../../src/mvc/history/multi-panel.js"],"names":["define","HISTORY_MODEL","HISTORY_VIEW_EDIT","historyCopyDialog","ERROR_MODAL","baseMVC","ajaxQueue","logNamespace","HistoryInnerView","HistoryViewEdit","extend","_scrollDistanceToBottom","SLOP","innerViewHeight","this","$el","children","toArray","map","e","$","outerHeight","reduce","a","c","scrollBottom","scrollTop","innerHeight","distanceToBottom","HistoryViewColumn","Backbone","View","LoggableMixin","_logNamespace","tagName","className","id","model","get","initialize","options","purgeAllowed","_","isUndefined","panel","createPanel","setUpListeners","panelOptions","defaults","dragItems","$scrollContainer","column","once","trigger","setUpPanelListeners","listenTo","rendered","view:expanded view:rendered","view","off","inView","viewLeft","viewRight","columnLeft","offset","left","columnRight","width","$panel","render","speed","undefined","modelData","toJSON","html","template","renderPanel","setUpBehaviors","data","isCurrentHistory","currentHistory","controlsLeftTemplate","history","controlsRightTemplate","join","setElement","$list","before","_renderDropTargetHelp","events","click .switch-to.btn","setAsCurrent","click .delete-history","_delete","done","click .undelete-history","undelete","click .purge-history","confirm","_l","purge","click .copy-history","copy","variable","toString","MultiPanelColumns","log","addClass","columnWidth","borderWidth","columnGap","headerHeight","footerHeight","controlsHeight","perPage","hdaQueue","NamedAjaxQueue","collection","columnMap","columnOptions","historySearch","datasetSearch","setCollection","histories","multipanel","on","fetchMore","stopListening","HistoryCollection","setUpCollectionListeners","createColumns","clear","addModels","models","isArray","forEach","addColumn","error","errorHandler","add","all-fetched","_postFetchAll","new-current","addAsCurrentColumn","set-as-current","setCurrentHistory","change:deleted change:purged","handleDeletedHistory","sort","renderColumns","remove","scrollLeft","oldCurrentColumn","findWhere","height","newCurrentColumn","currentHistoryId","_recalcFirstColumnHeight","includeDeleted","removeColumn","xhr","status","readyState","isString","message","title","errorModal","badGatewayErrorModal","ajaxErrorModal","_ajaxErrorHandler","apply","arguments","create","current","each","createColumn","Galaxy","config","allow_user_dataset_purge","setUpColumnListeners","searchItems","queueHdaFetchDetails","newColumn","queueHdaFetch","widthToRemove","fadeOut","checkColumnsInView","in-view","view:draggable:dragstart","ev","_dropData","JSON","parse","dataTransfer","getData","currentColumnDropTargetOn","view:draggable:dragend","currentColumnDropTargetOff","droptarget:drop","toCopy","filter","json","contents","isCopyable","queue","reverse","content","name","fn","start","fetch","columnMapLength","Object","keys","length","sortedFilteredColumns","filters","sortedColumns","filtered","every","call","sorted","fxSpeed","mainTemplate","isNumber","sortedAndFiltered","$middle","empty","_calcMiddleWidth","appendTo","delegateEvents","allFetched","append","loadingIndicatorTemplate","numColumns","preventStackWidthAdj","active","fetchOptions","silent","ids","values","storage","details","fetchFirst","renderItems","running","haveDetails","progressivelyFetchDetails","_renderEmptyMessage","renderInfo","msg","text","click .done.btn","click .create-new.btn","click #include-deleted","click .order .set-order","click #toggle-deleted","click #toggle-hidden","close","window","location","root","_clickToggleDeletedHistories","toggleDeletedHistories","currentTarget","is","toggleOptionsPopover","show","_clickToggleDeletedDatasets","toggleDeletedDatasets","i","delay","toggleShowDeleted","_clickToggleHiddenDatasets","toggleHiddenDatasets","toggleShowHidden","_chooseOrder","orderKey","orderDescriptions","setOrder","currentHistoryModel","slice","unshift","_scrollLeft","val","_moreOptionsPopover","searchInput","placeholder","onfirstsearch","fetchAll","onsearch","searchFor","matchesAll","onclear","progress","curr","total","deferred","clearSearch","resize","debouncedInView","debounce","viewport","_viewport","checkForEndOfScroll","parent","scroll","popover","container","placement","optionsPopoverTemplate","$firstColumn","first","middleHeight","controlHeight","find","$outerMiddle","right","columnsInView","vp","END_PADDING","scrollRight","currentColumn","dataDropped","dropTargetOn","prototype","dataDrop","dropTarget","columns","update_time","update_time-asc","name-dsc","size","size-asc"],"mappings":"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"}