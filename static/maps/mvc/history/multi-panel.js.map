{"version":3,"file":"multi-panel.js","sources":["../../../src/mvc/history/multi-panel.js"],"names":["define","HISTORY_MODEL","HISTORY_VIEW_EDIT","historyCopyDialog","baseMVC","ajaxQueue","logNamespace","HistoryInnerView","HistoryViewEdit","extend","_renderEmptyMessage","$whereTo","self","this","empty","model","get","shown","$emptyMsg","$emptyMessage","append","emptyMsg","show","searchFor","contents","haveDetails","noneFoundMsg","$","_scrollDistanceToBottom","SLOP","innerViewHeight","$el","children","toArray","map","e","outerHeight","reduce","a","c","scrollBottom","scrollTop","innerHeight","distanceToBottom","HistoryViewColumn","Backbone","View","LoggableMixin","_logNamespace","tagName","className","id","initialize","options","purgeAllowed","_","isUndefined","panel","createPanel","setUpListeners","panelOptions","defaults","dragItems","$scrollContainer","column","once","trigger","setUpPanelListeners","listenTo","rendered","inView","viewLeft","viewRight","columnLeft","offset","left","columnRight","width","$panel","render","speed","undefined","modelData","toJSON","html","template","renderPanel","setUpBehaviors","data","isCurrentHistory","currentHistory","controlsLeftTemplate","history","view","controlsRightTemplate","join","setElement","$list","before","_renderDropTargetHelp","events","click .switch-to.btn","setAsCurrent","click .delete-history","_delete","fail","xhr","status","error","alert","_l","done","click .undelete-history","undelete","click .purge-history","confirm","purge","click .copy-history","copy","variable","toString","MultiPanelColumns","log","addClass","columnWidth","borderWidth","columnGap","headerHeight","footerHeight","controlsHeight","perPage","hdaQueue","NamedAjaxQueue","collection","columnMap","columnOptions","historySearch","datasetSearch","setCollection","histories","multipanel","on","fetchMore","stopListening","HistoryCollection","setUpCollectionListeners","createColumns","clear","addModels","models","console","isArray","forEach","addColumn","_ajaxErrorHandler","add","all-fetched","_postFetchAll","new-current","addAsCurrentColumn","set-as-current","setCurrentHistory","change:deleted change:purged","handleDeletedHistory","sort","renderColumns","remove","scrollLeft","oldCurrentColumn","findWhere","height","newCurrentColumn","currentHistoryId","_recalcFirstColumnHeight","includeDeleted","removeColumn","errArgs","arguments","window","Galaxy","handleErrors","apply","responseText","create","current","each","createColumn","config","allow_user_dataset_purge","setUpColumnListeners","searchItems","queueHdaFetchDetails","newColumn","queueHdaFetch","widthToRemove","fadeOut","checkColumnsInView","in-view","view:draggable:dragstart","ev","_dropData","JSON","parse","dataTransfer","getData","currentColumnDropTargetOn","view:draggable:dragend","currentColumnDropTargetOff","droptarget:drop","toCopy","filter","json","isCopyable","queue","reverse","content","name","fn","start","fetch","columnMapLength","Object","keys","length","sortedFilteredColumns","filters","sortedColumns","filtered","every","call","sorted","fxSpeed","mainTemplate","sortedAndFiltered","$middle","_calcMiddleWidth","appendTo","delegateEvents","renderColumn","allFetched","loadingIndicatorTemplate","numColumns","preventStackWidthAdj","ids","values","storage","fetchOptions","details","fetchFirst","running","renderInfo","msg","text","click .done.btn","click .create-new.btn","click #include-deleted","click .order .set-order","click #toggle-deleted","click #toggle-hidden","close","location","root","_clickToggleDeletedHistories","toggleDeletedHistories","currentTarget","is","toggleOptionsPopover","_clickToggleDeletedDatasets","toggleDeletedDatasets","i","delay","toggleShowDeleted","_clickToggleHiddenDatasets","toggleHiddenDatasets","toggleShowHidden","_chooseOrder","orderKey","orderDescriptions","setOrder","reset","slice","silent","_scrollLeft","val","_moreOptionsPopover","searchInput","placeholder","onfirstsearch","onsearch","matchesAll","onclear","progress","curr","total","deferred","clearSearch","resize","debouncedInView","debounce","viewport","_viewport","checkForEndOfScroll","parent","scroll","popover","container","placement","optionsPopoverTemplate","$firstColumn","first","middleHeight","controlHeight","find","$outerMiddle","right","columnsInView","vp","END_PADDING","scrollRight","currentColumn","dataDropped","dropTargetOn","prototype","dataDrop","dropTarget","columns","update_time","update_time-asc","name-dsc","size","size-asc"],"mappings":"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"}