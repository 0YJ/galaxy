{"version":3,"sources":["mvc/history/hdca-model.js"],"names":["define","DC_MODEL","HISTORY_CONTENT","_l","buildHDCASave","_super","attributes","options","this","isNew","url","urlRoot","get","type","call","hcontentMixin","HistoryContentMixin","ListDC","ListDatasetCollection","PairDC","PairDatasetCollection","ListPairedDC","ListPairedDatasetCollection","ListOfListsDC","ListOfListsDatasetCollection","HistoryListDatasetCollection","extend","defaults","_","clone","prototype","history_content_type","collection_type","model_class","save","toString","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","join"],"mappings":"AAAAA,QACI,kCACA,oCACA,sBACD,SAAUC,EAAUC,EAAiBC,GAExC,YAmBA,SAASC,GAAeC,GACpB,MAAO,UAAgBC,EAAYC,GAO/B,MANIC,MAAKC,UACLF,EAAUA,MACVA,EAAQG,IAAMF,KAAKG,QAAUH,KAAKI,IAAK,cAAiB,YACxDN,EAAaA,MACbA,EAAWO,KAAO,sBAEfR,EAAOS,KAAMN,KAAMF,EAAYC,IAhB9C,GAAIQ,GAAgBb,EAAgBc,oBAChCC,EAAShB,EAASiB,sBAClBC,EAASlB,EAASmB,sBAClBC,EAAepB,EAASqB,4BACxBC,EAAgBtB,EAASuB,4BAuGzB,QACIC,6BApF2BR,EAAOS,OAAQX,GAAgBW,QAG9DC,SAAWC,EAAEF,OAAQE,EAAEC,MAAOZ,EAAOa,UAAUH,WAC3CI,qBAAsB,qBACtBC,gBAAsB,OACtBC,YAAsB,wCAI1BC,KAAO9B,EAAea,EAAOa,UAAUI,MAGvCC,SAAW,WACP,MAAO,UAAYlB,EAAOa,UAAUK,SAASrB,KAAMN,SAuEnD4B,6BA9D2BjB,EAAOO,OAAQX,GAAgBW,QAG9DC,SAAWC,EAAEF,OAAQE,EAAEC,MAAOV,EAAOW,UAAUH,WAC3CI,qBAAsB,qBACtBC,gBAAsB,SACtBC,YAAsB,wCAI1BC,KAAO9B,EAAee,EAAOW,UAAUI,MAGvCC,SAAW,WACP,MAAO,UAAYhB,EAAOW,UAAUK,SAASrB,KAAMN,SAiDnD6B,mCA1CiChB,EAAaK,OAAQX,GAAgBW,QAE1EC,SAAWC,EAAEF,OAAQE,EAAEC,MAAOR,EAAaS,UAAUH,WACjDI,qBAAsB,qBACtBC,gBAAsB,cACtBC,YAAsB,wCAI1BC,KAAO9B,EAAeiB,EAAaS,UAAUI,MAG7CC,SAAW,WACP,MAAO,UAAYd,EAAaS,UAAUK,SAASrB,KAAMN,SA8BzD8B,oCAvBkCf,EAAcG,OAAQX,GAAgBW,QAE5EC,SAAWC,EAAEF,OAAQE,EAAEC,MAAON,EAAcO,UAAUH,WAClDI,qBAAsB,qBACtBC,gBAAsB,YACtBC,YAAsB,wCAI1BC,KAAO9B,EAAemB,EAAcO,UAAUI,MAG9CC,SAAW,WACN,OAAU,uCAAwC3B,KAAKI,IAAK,QAAU,KAAM2B,KAAM","file":"../../../scripts/mvc/history/hdca-model.js","sourcesContent":["define([\n    \"mvc/collection/collection-model\",\n    \"mvc/history/history-content-model\",\n    \"utils/localization\"\n], function( DC_MODEL, HISTORY_CONTENT, _l ){\n\n'use strict';\n\n/*==============================================================================\n\nModels for DatasetCollections contained within a history.\n\nTODO:\n    these might be compactable to one class if some duplication with\n    collection-model is used.\n\n==============================================================================*/\nvar hcontentMixin = HISTORY_CONTENT.HistoryContentMixin,\n    ListDC = DC_MODEL.ListDatasetCollection,\n    PairDC = DC_MODEL.PairDatasetCollection,\n    ListPairedDC = DC_MODEL.ListPairedDatasetCollection,\n    ListOfListsDC = DC_MODEL.ListOfListsDatasetCollection;\n\n//==============================================================================\n/** Override to post to contents route w/o id. */\nfunction buildHDCASave( _super ){\n    return function _save( attributes, options ){\n        if( this.isNew() ){\n            options = options || {};\n            options.url = this.urlRoot + this.get( 'history_id' ) + '/contents';\n            attributes = attributes || {};\n            attributes.type = 'dataset_collection';\n        }\n        return _super.call( this, attributes, options );\n    };\n}\n\n\n//==============================================================================\n/** @class Backbone model for List Dataset Collection within a History.\n */\nvar HistoryListDatasetCollection = ListDC.extend( hcontentMixin ).extend(\n/** @lends HistoryListDatasetCollection.prototype */{\n\n    defaults : _.extend( _.clone( ListDC.prototype.defaults ), {\n        history_content_type: 'dataset_collection',\n        collection_type     : 'list',\n        model_class         : 'HistoryDatasetCollectionAssociation'\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save : buildHDCASave( ListDC.prototype.save ),\n\n    /** String representation. */\n    toString : function(){\n        return 'History' + ListDC.prototype.toString.call( this );\n    }\n});\n\n\n//==============================================================================\n/** @class Backbone model for Pair Dataset Collection within a History.\n *  @constructs\n */\nvar HistoryPairDatasetCollection = PairDC.extend( hcontentMixin ).extend(\n/** @lends HistoryPairDatasetCollection.prototype */{\n\n    defaults : _.extend( _.clone( PairDC.prototype.defaults ), {\n        history_content_type: 'dataset_collection',\n        collection_type     : 'paired',\n        model_class         : 'HistoryDatasetCollectionAssociation'\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save : buildHDCASave( PairDC.prototype.save ),\n\n    /** String representation. */\n    toString : function(){\n        return 'History' + PairDC.prototype.toString.call( this );\n    }\n});\n\n\n//==============================================================================\n/** @class Backbone model for List of Pairs Dataset Collection within a History. */\nvar HistoryListPairedDatasetCollection = ListPairedDC.extend( hcontentMixin ).extend({\n\n    defaults : _.extend( _.clone( ListPairedDC.prototype.defaults ), {\n        history_content_type: 'dataset_collection',\n        collection_type     : 'list:paired',\n        model_class         : 'HistoryDatasetCollectionAssociation'\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save : buildHDCASave( ListPairedDC.prototype.save ),\n\n    /** String representation. */\n    toString : function(){\n        return 'History' + ListPairedDC.prototype.toString.call( this );\n    }\n});\n\n\n//==============================================================================\n/** @class Backbone model for List of Lists Dataset Collection within a History. */\nvar HistoryListOfListsDatasetCollection = ListOfListsDC.extend( hcontentMixin ).extend({\n\n    defaults : _.extend( _.clone( ListOfListsDC.prototype.defaults ), {\n        history_content_type: 'dataset_collection',\n        collection_type     : 'list:list',\n        model_class         : 'HistoryDatasetCollectionAssociation'\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save : buildHDCASave( ListOfListsDC.prototype.save ),\n\n    /** String representation. */\n    toString : function(){\n         return ([ 'HistoryListOfListsDatasetCollection(', this.get( 'name' ), ')' ].join( '' ));\n    }\n});\n\n\n//==============================================================================\n    return {\n        HistoryListDatasetCollection        : HistoryListDatasetCollection,\n        HistoryPairDatasetCollection        : HistoryPairDatasetCollection,\n        HistoryListPairedDatasetCollection  : HistoryListPairedDatasetCollection,\n        HistoryListOfListsDatasetCollection : HistoryListOfListsDatasetCollection\n    };\n});\n"]}