{"version":3,"sources":["mvc/history/hdca-model.js"],"names":["buildHDCASave","_super","attributes","options","hcontentMixin","this","isNew","url","urlRoot","get","type","call","_collectionModel","require","_historyContentModel","_localization","_historyContentModel2","default","HistoryContentMixin","ListDC","_collectionModel2","ListDatasetCollection","PairDC","PairDatasetCollection","ListPairedDC","ListPairedDatasetCollection","ListOfListsDC","ListOfListsDatasetCollection","HistoryListDatasetCollection","extend","defaults","_","_save","history_content_type","save","toString","prototype","HistoryPairDatasetCollection","clone","collection_type","model_class","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","join"],"mappings":"qFAqBA,SAASA,cAAcC,GACnB,OAAO,SAAeC,EAAYC,GATlCC,OAUQC,KAAKC,WACLH,EAAUA,OACFI,IAAMF,KAAKG,QAAUH,KAAKI,IAAI,cAAgB,aACtDP,EAAaA,OACFQ,KAAO,sBAd1BN,EAAgBO,KAAAN,KAAAH,EAAAC,2DAbpB,IAAAS,iBAAAC,QAAA,8FACAC,qBAAAD,QAAA,wGACAE,cAAAF,QAAA,2EAWIT,cAAgBY,sBAAAC,QAAgBC,oBAXpCC,OAAAC,kBAAAH,QAAAI,sBAaIC,OAASF,kBAAAH,QAASM,sBAClBC,aAAeJ,kBAAAH,QAASQ,4BACxBC,cAAgBN,kBAAAH,QAASU,6BAG7BC,6BAAAT,OAAAU,OAAAzB,eAAAyB,QAEIC,SAAOC,EAASC,OAAM9B,EAAAA,MAAAA,OAAYC,UAAS2B,WACnCG,qBAAc,qBACd9B,gBAAUA,OACVA,YAAA,wCAIJ+B,KAAAlC,cAAmBmB,OAAMjB,UAAYC,MAmBrCgC,SAAU,WAflB,MAAA,UAAAhB,OAAAiB,UAAAD,SAAAxB,KAAAN,SAK+DgC,6BADNf,OAAAO,OAAAzB,eAAAyB,QAOjDC,SAAAC,EAAAF,OAAAE,EAAAO,MAAAhB,OAAAc,UAAAN,WACM9B,qBAAqBoC,qBAiBvBG,gBAAiB,SAfrBC,YAAA,wCAXRN,KAAAlC,cAAAsB,OAAAc,UAAAF,MAmBAC,SAAA,WAgBY,MAAO,UAAYb,OAAOc,UAAUD,SAASxB,KAAKN,SARlDmC,mCAAahB,aAAAK,OAHsCzB,eAoB7DyB,QAdMC,SAAAC,EAAAF,OAAAE,EAAAO,MAAAd,aAAAY,UAAAN,WACAI,qBAAoBZ,qBAgBpBiB,gBAAiB,cAdjBC,YAAA,wCAXRN,KAAAlC,cAAAwB,aAAAY,UAAAF,MAmBAC,SAAA,WACIM,MAAAA,UAAAA,aAAAA,UAAqCjB,SAAaK,KAClDzB,SAmBAsC,oCAAsChB,cAAcG,OAXpDzB,eACA8B,QAaAJ,SAAUC,EAAEF,OAAOE,EAAEO,MAAMZ,cAAcU,UAAUN,WAXnDG,qBAAA,qBACAE,gBAAU,YACNK,YAAO,wCAIfN,KAAAlC,cAAA0B,cAAAU,UAAAF,MAKIJ,SAAUC,WACNE,OACAM,uCACAC,KAAAA,IAAa,QAJZ,KAgBCG,KAAK,wBAJPf,6BACIA,6BAIPS,6BAAAA,6BAnBLI,mCAAAA,mCA2BIC,oCAAqCA","file":"../../../scripts/mvc/history/hdca-model.js","sourcesContent":["import DC_MODEL from \"mvc/collection/collection-model\";\nimport HISTORY_CONTENT from \"mvc/history/history-content-model\";\nimport _l from \"utils/localization\";\n\n/*==============================================================================\n\nModels for DatasetCollections contained within a history.\n\nTODO:\n    these might be compactable to one class if some duplication with\n    collection-model is used.\n\n==============================================================================*/\nvar hcontentMixin = HISTORY_CONTENT.HistoryContentMixin,\n    ListDC = DC_MODEL.ListDatasetCollection,\n    PairDC = DC_MODEL.PairDatasetCollection,\n    ListPairedDC = DC_MODEL.ListPairedDatasetCollection,\n    ListOfListsDC = DC_MODEL.ListOfListsDatasetCollection;\n\n//==============================================================================\n/** Override to post to contents route w/o id. */\nfunction buildHDCASave(_super) {\n    return function _save(attributes, options) {\n        if (this.isNew()) {\n            options = options || {};\n            options.url = this.urlRoot + this.get(\"history_id\") + \"/contents\";\n            attributes = attributes || {};\n            attributes.type = \"dataset_collection\";\n        }\n        return _super.call(this, attributes, options);\n    };\n}\n\n//==============================================================================\n/** @class Backbone model for List Dataset Collection within a History.\n */\nvar HistoryListDatasetCollection = ListDC.extend(hcontentMixin).extend(\n    /** @lends HistoryListDatasetCollection.prototype */ {\n        defaults: _.extend(_.clone(ListDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"list\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(ListDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return \"History\" + ListDC.prototype.toString.call(this);\n        }\n    }\n);\n\n//==============================================================================\n/** @class Backbone model for Pair Dataset Collection within a History.\n *  @constructs\n */\nvar HistoryPairDatasetCollection = PairDC.extend(hcontentMixin).extend(\n    /** @lends HistoryPairDatasetCollection.prototype */ {\n        defaults: _.extend(_.clone(PairDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"paired\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(PairDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return \"History\" + PairDC.prototype.toString.call(this);\n        }\n    }\n);\n\n//==============================================================================\n/** @class Backbone model for List of Pairs Dataset Collection within a History. */\nvar HistoryListPairedDatasetCollection = ListPairedDC.extend(\n    hcontentMixin\n).extend({\n    defaults: _.extend(_.clone(ListPairedDC.prototype.defaults), {\n        history_content_type: \"dataset_collection\",\n        collection_type: \"list:paired\",\n        model_class: \"HistoryDatasetCollectionAssociation\"\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save: buildHDCASave(ListPairedDC.prototype.save),\n\n    /** String representation. */\n    toString: function() {\n        return \"History\" + ListPairedDC.prototype.toString.call(this);\n    }\n});\n\n//==============================================================================\n/** @class Backbone model for List of Lists Dataset Collection within a History. */\nvar HistoryListOfListsDatasetCollection = ListOfListsDC.extend(\n    hcontentMixin\n).extend({\n    defaults: _.extend(_.clone(ListOfListsDC.prototype.defaults), {\n        history_content_type: \"dataset_collection\",\n        collection_type: \"list:list\",\n        model_class: \"HistoryDatasetCollectionAssociation\"\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save: buildHDCASave(ListOfListsDC.prototype.save),\n\n    /** String representation. */\n    toString: function() {\n        return [\n            \"HistoryListOfListsDatasetCollection(\",\n            this.get(\"name\"),\n            \")\"\n        ].join(\"\");\n    }\n});\n\n//==============================================================================\nexport default {\n    HistoryListDatasetCollection: HistoryListDatasetCollection,\n    HistoryPairDatasetCollection: HistoryPairDatasetCollection,\n    HistoryListPairedDatasetCollection: HistoryListPairedDatasetCollection,\n    HistoryListOfListsDatasetCollection: HistoryListOfListsDatasetCollection\n};\n"]}