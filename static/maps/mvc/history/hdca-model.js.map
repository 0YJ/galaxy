{"version":3,"sources":["mvc/history/hdca-model.js"],"names":["buildHDCASave","_super","attributes","options","ListDC","this","isNew","url","urlRoot","get","type","call","ListDatasetCollection","hcontentMixin","_historyContentModel2","default","HistoryContentMixin","_collectionModel2","PairDC","PairDatasetCollection","ListPairedDC","ListPairedDatasetCollection","ListOfListsDC","ListOfListsDatasetCollection","HistoryListDatasetCollection","extend","defaults","_","clone","prototype","save","toString","HistoryPairDatasetCollection","history_content_type","collection_type","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","model_class","join"],"mappings":"yNAqBA,SAASA,EAAcC,GACnB,OAAO,SAAeC,EAAYC,GARlCC,OASQC,KAAKC,WACLH,EAAUA,OACFI,IAAMF,KAAKG,QAAUH,KAAKI,IAAI,cAAgB,aACtDP,EAAaA,OACFQ,KAAO,sBAb1BN,EAASO,KAAAN,KAAAH,EAASU,uEADlBC,QAAgBC,EAAAC,QAAgBC,qBAChCZ,EAASa,EAAAF,QAASH,sBAClBM,EAASD,EAAAF,QAASI,sBAClBC,EAAeH,EAAAF,QAASM,4BACxBC,EAAgBL,EAAAF,QAASQ,6BAI7BC,EAA+BpB,EAAAqB,OAAAZ,GAAAY,QAEvBC,SAAIC,EAAAF,OAAAE,EAAJC,MAAkBxB,EAAAyB,UAAAH,WACdvB,qBAAUA,qBACVA,gBAAA,OACAD,YAAAA,wCAIP4B,KARD9B,EAAAI,EAAAyB,UAAAC,MAWJC,SAAA,WACA,MAAA,UAAA3B,EAAAyB,UAAAE,SAAApB,KAAAN,SAwBI2B,EAA+Bd,EAAOO,OAAOZ,GAAeY,QAbxDK,SAAM9B,EAAAA,OAAAA,EAAcI,MAAOyB,EAAAA,UARsBH,WAwB7CO,qBAAsB,qBAd1BC,gBAAA,SACAH,YAAU,wCAmBVD,KAAM9B,EAAckB,EAAOW,UAAUC,MAGrCC,SAAU,WACN,MAAO,UAAYb,EAAOW,UAAUE,SAASpB,KAAKN,SAXC8B,EADNf,EAAAK,OAoBrDZ,GAbIY,QACAK,SAAM9B,EAAAA,OAAAA,EAAAA,MAAckB,EAAAW,UAR6BH,WAuBjDO,qBAAsB,qBAbtBC,gBAAA,cACAH,YAAU,wCAkBdD,KAAM9B,EAAcoB,EAAaS,UAAUC,MAV/CC,SAAII,WAGAT,MAAAA,UAAmBC,EAAQP,UAAaS,SAAUH,KAAAA,SAMlDU,EAAAd,EAAAG,OACAK,GAYFL,QAVEC,SAAAC,EAAAF,OAAAE,EAAAC,MAAAN,EAAAO,UAAAH,WACAK,qBAAU,qBACNG,gBAAO,YACVG,YAAA,wCAILP,KAAA9B,EAAAsB,EAAAO,UAAAC,MAKQG,SAAAA,WACAC,OACAG,uCAJChC,KAAAI,IAAA,QAeG,KARR6B,KAAA,kBAUCd,6BAAAA,EAjBIQ,6BAFTA,EA0BIG,mCAAoCA,EAJxCC,oCAAAA","file":"../../../scripts/mvc/history/hdca-model.js","sourcesContent":["import DC_MODEL from \"mvc/collection/collection-model\";\nimport HISTORY_CONTENT from \"mvc/history/history-content-model\";\nimport _l from \"utils/localization\";\n\n/*==============================================================================\n\nModels for DatasetCollections contained within a history.\n\nTODO:\n    these might be compactable to one class if some duplication with\n    collection-model is used.\n\n==============================================================================*/\nvar hcontentMixin = HISTORY_CONTENT.HistoryContentMixin,\n    ListDC = DC_MODEL.ListDatasetCollection,\n    PairDC = DC_MODEL.PairDatasetCollection,\n    ListPairedDC = DC_MODEL.ListPairedDatasetCollection,\n    ListOfListsDC = DC_MODEL.ListOfListsDatasetCollection;\n\n//==============================================================================\n/** Override to post to contents route w/o id. */\nfunction buildHDCASave(_super) {\n    return function _save(attributes, options) {\n        if (this.isNew()) {\n            options = options || {};\n            options.url = this.urlRoot + this.get(\"history_id\") + \"/contents\";\n            attributes = attributes || {};\n            attributes.type = \"dataset_collection\";\n        }\n        return _super.call(this, attributes, options);\n    };\n}\n\n//==============================================================================\n/** @class Backbone model for List Dataset Collection within a History.\n */\nvar HistoryListDatasetCollection = ListDC.extend(hcontentMixin).extend(\n    /** @lends HistoryListDatasetCollection.prototype */ {\n        defaults: _.extend(_.clone(ListDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"list\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(ListDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return \"History\" + ListDC.prototype.toString.call(this);\n        }\n    }\n);\n\n//==============================================================================\n/** @class Backbone model for Pair Dataset Collection within a History.\n *  @constructs\n */\nvar HistoryPairDatasetCollection = PairDC.extend(hcontentMixin).extend(\n    /** @lends HistoryPairDatasetCollection.prototype */ {\n        defaults: _.extend(_.clone(PairDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"paired\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(PairDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return \"History\" + PairDC.prototype.toString.call(this);\n        }\n    }\n);\n\n//==============================================================================\n/** @class Backbone model for List of Pairs Dataset Collection within a History. */\nvar HistoryListPairedDatasetCollection = ListPairedDC.extend(\n    hcontentMixin\n).extend({\n    defaults: _.extend(_.clone(ListPairedDC.prototype.defaults), {\n        history_content_type: \"dataset_collection\",\n        collection_type: \"list:paired\",\n        model_class: \"HistoryDatasetCollectionAssociation\"\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save: buildHDCASave(ListPairedDC.prototype.save),\n\n    /** String representation. */\n    toString: function() {\n        return \"History\" + ListPairedDC.prototype.toString.call(this);\n    }\n});\n\n//==============================================================================\n/** @class Backbone model for List of Lists Dataset Collection within a History. */\nvar HistoryListOfListsDatasetCollection = ListOfListsDC.extend(\n    hcontentMixin\n).extend({\n    defaults: _.extend(_.clone(ListOfListsDC.prototype.defaults), {\n        history_content_type: \"dataset_collection\",\n        collection_type: \"list:list\",\n        model_class: \"HistoryDatasetCollectionAssociation\"\n    }),\n\n    /** Override to post to contents route w/o id. */\n    save: buildHDCASave(ListOfListsDC.prototype.save),\n\n    /** String representation. */\n    toString: function() {\n        return [\n            \"HistoryListOfListsDatasetCollection(\",\n            this.get(\"name\"),\n            \")\"\n        ].join(\"\");\n    }\n});\n\n//==============================================================================\nexport default {\n    HistoryListDatasetCollection: HistoryListDatasetCollection,\n    HistoryPairDatasetCollection: HistoryPairDatasetCollection,\n    HistoryListPairedDatasetCollection: HistoryListPairedDatasetCollection,\n    HistoryListOfListsDatasetCollection: HistoryListOfListsDatasetCollection\n};\n"]}