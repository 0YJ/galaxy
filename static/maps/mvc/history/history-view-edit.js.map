{"version":3,"file":"history-view-edit.js","sources":["../../../src/mvc/history/history-view-edit.js"],"names":["define","HISTORY_VIEW","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","PAIR_COLLECTION_CREATOR","LIST_OF_PAIRS_COLLECTION_CREATOR","faIconButton","PopupMenu","BASE_MVC","_l","_super","HistoryView","HistoryViewEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","listenTo","collection","change:deleted","_handleHdaDeletionChange","change:visible","_handleHdaVisibleChange","change:purged","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","Galaxy","user","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","jQuery","$el","html","templates","counts","toJSON","find","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","text","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","push","confirm","purge","concat","_collectionActions","createListCollection","done","refresh","createPairCollection","createListOfPairsCollection","_getItemViewOptions","options","_","hidden","itemModel","showDeleted","removeItemView","showHidden","args","Array","slice","arguments","each","view","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","$","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","$list","before","_renderDropTargetHelp","evName","hasOwnProperty","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","originalEvent","dropEffect","getData","JSON","parse","err","warn","trigger","isObject","model_class","contents","copy","when","toString","countsTemplate","wrapTemplate"],"mappings":"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"}