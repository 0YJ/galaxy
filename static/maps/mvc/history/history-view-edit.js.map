{"version":3,"file":"history-view-edit.js","sources":["../../../src/mvc/history/history-view-edit.js"],"names":["define","HISTORY_VIEW","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","PAIR_COLLECTION_CREATOR","LIST_OF_PAIRS_COLLECTION_CREATOR","faIconButton","PopupMenu","BASE_MVC","_l","_super","HistoryView","HistoryViewEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","on","drop","ev","data","dataDropped","dropTargetOff","view:attached view:removed","_renderCounts","search:loading-progress","limit","offset","console","log","stop","$","html","model","contentsShown","join","search:searching","views","length","_setUpModelListeners","listenTo","updateHistoryDiskSize","_setUpCollectionListeners","collection","change:deleted","_handleItemDeletedChange","change:visible","_handleItemVisibleChange","change:purged","fetch","fetching-deleted","fetching-hidden","fetching-deleted-done fetching-hidden-done","_buildNewRender","$newRender","Galaxy","user","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","searchFor","jQuery","$el","templates","counts","toJSON","find","$where","panel","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","text","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","push","confirm","purge","concat","_collectionActions","createListCollection","done","refresh","createPairCollection","createListOfPairsCollection","_getItemViewOptions","options","_","hidden","itemModel","_handleItemDeletion","_handleItemUndeletion","deleted","active","contents","includeDeleted","removeItemView","set","_handleItemHidden","_handleItemUnhidden","includeHidden","showOrHide","speed","each","view","toggle","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","$dropTarget","_renderDropTarget","$list","before","_renderDropTargetHelp","evName","hasOwnProperty","remove","addClass","_dropHandlers","off","dropTargetToggle","preventDefault","stopPropagation","css","dataTransfer","originalEvent","dropEffect","getData","JSON","parse","err","warn","trigger","isObject","model_class","copy","when","toString","countsTemplate","wrapTemplate"],"mappings":"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"}