{"version":3,"file":"history-view-edit.js","sources":["../../../src/mvc/history/history-view-edit.js"],"names":["define","HISTORY_VIEW","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","PAIR_COLLECTION_CREATOR","LIST_OF_PAIRS_COLLECTION_CREATOR","faIconButton","PopupMenu","_l","_super","HistoryView","HistoryViewEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","listenTo","collection","change:deleted","_handleHdaDeletionChange","change:visible","_handleHdaVisibleChange","change:purged","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","Galaxy","user","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","join","$el","deleted","where","hidden","visible","msgs","length","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","concat","_collectionActions","createListCollection","done","refresh","createPairCollection","createListOfPairsCollection","_getItemViewOptions","options","_","itemModel","removeItemView","args","Array","slice","arguments","each","view","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","$","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","$list","before","_renderDropTargetHelp","evName","hasOwnProperty","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","originalEvent","dropEffect","getData","JSON","parse","err","warn","trigger","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}