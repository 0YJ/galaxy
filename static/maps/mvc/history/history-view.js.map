{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","freeModel","model","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","loadHistory","historyId","contentsOptions","info","historyFn","contentsFn","detailIdsFn","self","setModel","History","id","fetchWithContents","always","refreshContents","refresh","$","when","_setUpWebStorage","initiallyExpanded","show_deleted","show_hidden","storage","stopListening","HistoryPrefs","historyStorageKey","get","_","isObject","set","isBoolean","log","listenTo","change:show_deleted","view","newVal","showDeleted","change:show_hidden","showHidden","undefined","_buildNewRender","$newRender","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","size","title","classes","faIcon","prependTo","_getItemViewClass","contentType","TypeError","_filterItem","panel","hidden","isDeletedOrPurged","_getItemViewOptions","expanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","v","addExpanded","collapsed","removeExpanded","getSelectedModels","collection","events","clone","click .show-selectors-btn","click .messages [class$=message]","toggleShowDeleted","show","store","renderItems","toggleShowHidden","_firstSearch","searchFor","inputSelector","contents","haveDetails","searchItems","searchInput","fetchAllDetails","silent","done","status","readyState","parsed","_parseErrorMessage","$messages","is","displayMessage","message","once","user","Galaxy","_bePolite","raven","window","Raven","isFunction","lastEventId","agent","navigator","userAgent","url","lastAjax","data","omit","source","toJSON","User","getAllResponseHeaders","responseHeaders","compact","split","map","header","object","type","scrollToTop","$msgContainer","$msg","addClass","html","isEmpty","$detailsLink","click","modal","_messageToModalOptions","append","functions","text","JSON","stringify","pre","body","buttons","Ok","hide","clearMessages","ev","$target","isUndefined","children","currentTarget","fadeOut","fxSpeed","scrollToHid","hid","scrollToItem","first","viewsWhereModel","toString","templates","controlsTemplate","wrapTemplate","controls"],"mappings":"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"}