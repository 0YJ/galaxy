{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","FETCH_COLLECTION_COUNTS_DELAY","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","self","_","delay","contents","fetchCollectionCounts","views:ready view:attached view:removed","_renderSelectButton","loadHistory","historyId","contentsOptions","silent","info","setModel","History","id","trigger","fetchWithContents","always","render","refreshContents","refresh","$","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","console","log","$indicator","$el","html","text","slideDown","isUndefined","fxSpeed","_hideLoadingIndicator","slideUp","remove","_buildNewRender","$newRender","$where","multiselectActions","length","views","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","empty","get","active","append","show","searchFor","haveSearchDetails","$scrollContainer","$list","renderItems","Date","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","done","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}