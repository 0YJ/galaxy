{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","search:searching","$","empty","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","refreshContents","refresh","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","$indicator","$el","html","text","show","isUndefined","fxSpeed","_hideLoadingIndicator","remove","_buildNewRender","$newRender","$where","multiselectActions","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","get","active","append","searchFor","haveSearchDetails","$scrollContainer","$list","renderItems","console","log","Date","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","searchItems","searchInput","progressivelyFetchDetails","progress","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}