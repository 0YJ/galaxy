{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","refreshContents","refresh","$","when","_setUpCollectionListeners","listenTo","collection","fetching-more","showContentsLoadingIndicator","fetching-more-done","hideContentsLoadingIndicator","_buildNewRender","$newRender","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","$emptyMessage","empty","get","active","append","show","searchFor","haveSearchDetails","_showLoadingIndicator","speed","$indicator","html","text","isUndefined","fxSpeed","_hideLoadingIndicator","hide","isNumber","size","stop","clearQueue","templates","contentsLoadingIndicator","insertAfter","$list","slideDown","slideUp","duration","complete","renderItems","models","_filterCollection","console","log","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","pagination","current","currentPage","last","getLastPage","_modelsToViews","map","view","_renderItemView$el","el","children","delegateEvents","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","_togglePageLoadingIndicator","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","initialContentsLength","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","contentsLoadingIndicatorTemplate","controls"],"mappings":"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"}