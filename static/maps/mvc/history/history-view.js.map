{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","search:searching","$","empty","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","render","refreshContents","refresh","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","console","log","$indicator","$el","html","text","show","isUndefined","fxSpeed","_hideLoadingIndicator","remove","_buildNewRender","$newRender","$where","multiselectActions","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","get","active","append","searchFor","haveSearchDetails","$scrollContainer","$list","renderItems","Date","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}