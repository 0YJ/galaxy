{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","FETCH_COLLECTION_COUNTS_DELAY","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","self","_","delay","contents","fetchCollectionCounts","views:ready view:attached view:removed","_renderSelectButton","search:searching","$","empty","loadHistory","historyId","contentsOptions","silent","info","setModel","History","id","trigger","fetchWithContents","always","render","refreshContents","refresh","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","console","log","$indicator","$el","html","text","show","isUndefined","fxSpeed","_hideLoadingIndicator","remove","_buildNewRender","$newRender","$where","multiselectActions","length","views","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","get","active","append","searchFor","haveSearchDetails","$scrollContainer","$list","renderItems","Date","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","done","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}