{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","freeModel","model","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","loadHistory","historyId","contentsOptions","info","self","setModel","History","id","fetchWithContents","always","refreshContents","refresh","$","when","_setUpWebStorage","_setUpModelListeners","listenTo","change:id","storage","stopListening","HistoryPrefs","historyStorageKey","get","log","change:show_deleted","view","newVal","showDeleted","change:show_hidden","showHidden","_buildNewRender","$newRender","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","size","title","classes","faIcon","prependTo","_getItemViewClass","contentType","TypeError","_filterItem","panel","hidden","isDeletedOrPurged","_getItemViewOptions","_","expanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","v","addExpanded","collapsed","removeExpanded","getSelectedModels","collection","events","clone","click .show-selectors-btn","click .messages [class$=message]","toggleShowDeleted","show","store","undefined","set","renderItems","toggleShowHidden","_firstSearch","searchFor","inputSelector","contents","haveDetails","searchItems","searchInput","fetchAllDetails","silent","done","status","readyState","parsed","_parseErrorMessage","$messages","is","displayMessage","message","once","user","Galaxy","_bePolite","raven","window","Raven","isFunction","lastEventId","agent","navigator","userAgent","url","lastAjax","data","omit","source","toJSON","User","getAllResponseHeaders","responseHeaders","compact","split","map","header","object","type","scrollToTop","$msgContainer","$msg","addClass","html","isEmpty","$detailsLink","click","modal","_messageToModalOptions","append","isObject","functions","text","JSON","stringify","pre","body","buttons","Ok","hide","clearMessages","ev","$target","isUndefined","children","currentTarget","fadeOut","fxSpeed","scrollToHid","hid","scrollToItem","first","viewsWhereModel","toString","templates","controlsTemplate","wrapTemplate","controls"],"mappings":"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"}