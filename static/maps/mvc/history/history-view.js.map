{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","search:searching","$","empty","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","refreshContents","refresh","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","$indicator","$el","html","text","show","isUndefined","fxSpeed","_hideLoadingIndicator","remove","_buildNewRender","$newRender","$where","multiselectActions","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","get","active","append","searchFor","haveSearchDetails","$list","renderItems","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","log","searchItems","searchInput","progressivelyFetchDetails","progress","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}