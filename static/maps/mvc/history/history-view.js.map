{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","refreshContents","refresh","$","when","_setUpCollectionListeners","listenTo","collection","fetching-more","showContentsLoadingIndicator","fetching-more-done","hideContentsLoadingIndicator","_buildNewRender","viewMap","$newRender","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","$emptyMessage","empty","get","active","append","show","searchFor","haveSearchDetails","_showLoadingIndicator","speed","$indicator","html","text","isUndefined","fxSpeed","_hideLoadingIndicator","hide","isNumber","size","stop","clearQueue","templates","contentsLoadingIndicator","insertAfter","$list","slideDown","slideUp","duration","complete","renderItems","children","detach","models","_filterCollection","console","log","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","pagination","current","currentPage","last","getLastPage","_modelsToViews","map","view","_renderItemView$el","el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","_togglePageLoadingIndicator","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","initialContentsLength","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","contentsLoadingIndicatorTemplate","controls"],"mappings":"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"}