{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","this","linkTarget","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","render","views","length","trigger","views:ready view:attached view:removed","_renderSelectButton","FETCH_COLLECTION_COUNTS_DELAY","loadHistory","historyId","contentsOptions","_","silent","info","self","setModel","History","id","fetchWithContents","done","delay","contents","fetchCollectionCounts","always","refreshContents","refresh","$","when","_setUpCollectionListeners","listenTo","collection","fetching-more","showContentsLoadingIndicator","fetching-more-done","hideContentsLoadingIndicator","_buildNewRender","$newRender","_renderEmptyMessage","$whereTo","$emptyMsg","$emptyMessage","empty","get","active","append","show","searchFor","haveSearchDetails","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","title","classes","faIcon","prependTo","_showLoadingIndicator","speed","$indicator","html","text","isUndefined","fxSpeed","_hideLoadingIndicator","hide","isNumber","size","stop","clearQueue","templates","contentsLoadingIndicator","insertAfter","$list","slideDown","slideUp","duration","complete","renderItems","freeViews","models","_filterCollection","_renderSomeItems","renderSliceSize","range","Math","ceil","forEach","i","start","min","someModels","slice","defer","concat","toggle","_modelsToViews","map","view","el","children","delegateEvents","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click .messages [class$=message]","toggleShowDeleted","undefined","setIncludeDeleted","fetch","fetchDeleted","jQuery","toggleShowHidden","store","setIncludeHidden","fetchHidden","_firstSearch","inputSelector","initialContentsLength","log","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","ev","$target","$messages","currentTarget","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","toString","mainTemplate","wrapTemplate","controlsTemplate","contentsLoadingIndicatorTemplate","controls"],"mappings":"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"}