{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","PaginatedCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","limitOnFirstFetch","limitPerFetch","order","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","call","urlRoot","Galaxy","root","url","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","prefs","HistoryPrefs","toJSON","values","expandedIds","join","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","fetchUpdated","since","update_time-ge","toISOString","fetchDeleted","self","undefined","always","fetchHidden","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","length","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","done","response","notify","curr","total","push","shift","value","progressivelyFetchDetails","_notifyAndContinue","offset","limit","allFetched","_recursivelyFetch","_options","clone","view","keys","detailKeys","fetchFn","fetchFirst","fetchMore","defer","fail","reject","r","limitPerCall","searchAttributes","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","parse","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","haveSearchDetails","has","attributes","matches","matchesWhat","Backbone","Collection","toString"],"mappings":"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"}