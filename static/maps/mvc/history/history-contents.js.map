{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","PaginatedCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","limitOnFirstFetch","limitPerFetch","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","call","urlRoot","Galaxy","root","url","order","comparator","buildComparator","ascending","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","prefs","HistoryPrefs","toJSON","values","expandedIds","join","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","fetchUpdated","since","update_time-ge","toISOString","console","log","done","r","length","fetchDeleted","self","undefined","always","fetchHidden","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","response","notify","curr","total","push","shift","value","progressivelyFetchDetails","_notifyAndContinue","offset","limit","allFetched","_recursivelyFetch","_options","clone","view","keys","detailKeys","fetchFn","fetchFirst","fetchMore","defer","fail","reject","limitPerCall","searchAttributes","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","matches","matchesWhat","Backbone","Collection","toString"],"mappings":"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"}