{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","AJAX_QUEUE","_super","InfinitelyScrollingCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","limitOnFirstFetch","limitPerFetch","order","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","call","urlRoot","Galaxy","root","url","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","prefs","HistoryPrefs","toJSON","values","expandedIds","join","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","fetchUpdated","since","update_time-ge","toISOString","fetchDeleted","self","undefined","remove","always","fetchHidden","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","queue","AjaxQueue","chain","reverse","map","start","deferred","limitPerProgressiveFetch","progressivelyFetchDetails","_notifyAndContinue","response","offset","notify","limit","allFetched","resolve","_recursivelyFetch","_options","clone","view","keys","detailKeys","reset","fetchFn","fetchFirst","fetchMore","defer","fail","reject","done","r","jQuery","Deferred","limitPerCall","searchAttributes","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","xhr","post","source","add","parse","createHDCA","elementIdentifiers","collectionType","name","hdca","create","history_id","element_identifiers","wait","haveSearchDetails","has","attributes","matches","matchesWhat","Backbone","Collection","toString","length"],"mappings":"AAAAA,QACI,uCACA,wBACA,yBACA,kCACA,eACA,oBACD,SAAUC,EAA6BC,EAAWC,EAAYC,EAAeC,EAAUC,GAC1F,YAIA,IAAIC,GAASN,EAA4BO,8BASrCC,EAAkBF,EAAOG,OAAQL,EAASM,eAAgBD,QAC1DE,cAAgB,UAGhBC,MAAQ,SAAUC,EAAOC,GACrB,GAAmC,YAA/BD,EAAME,qBACN,MAAO,IAAId,GAAUe,0BAA2BH,EAAOC,EAEpD,IAAmC,uBAA/BD,EAAME,qBAAgD,CAC7D,OAAQF,EAAMI,iBACV,IAAK,OACD,MAAO,IAAIf,GAAWgB,6BAA8BL,EAAOC,EAC/D,KAAK,SACD,MAAO,IAAIZ,GAAWiB,6BAA8BN,EAAOC,EAC/D,KAAK,cACD,MAAO,IAAIZ,GAAWkB,mCAAoCP,EAAOC,GAMzE,OAASO,gBAAkB,4BAA8BR,EAAME,sBAEnE,OAASM,gBAAkB,iCAAmCR,EAAME,uBAIxEO,kBAAsB,IAEtBC,cAAsB,IAGtBC,MAAQ,cAGRC,WAAa,SAAUC,EAAQZ,GAc3B,MAbAA,GAAUA,MACVa,KAAKC,UAAYd,EAAQc,WAAa,KAKtCD,KAAKf,MAAMiB,UAAUC,YAAc,UAGnCH,KAAKI,eAAiBjB,EAAQiB,iBAAkB,EAEhDJ,KAAKK,cAAgBlB,EAAQkB,gBAAiB,EAEvC1B,EAAOuB,UAAUJ,WAAWQ,KAAMN,KAAMD,EAAQZ,IAI3DoB,QAAUC,OAAOC,KAAO,gBAGxBC,IAAM,WACF,MAAOV,MAAKO,QAAU,IAAMP,KAAKC,UAAY,aAQjDU,QAAU,WACN,QAASC,GAAUC,GAAK,OAAQA,EAAEC,eAClC,MAAO,IAAIjC,GAAiBmB,KAAKe,OAAQH,KAO7CI,SAAW,SAAUC,GACjB,MAAOC,GAAEC,MAAOnB,KAAKe,OAAQ,SAAUK,GAAW,MAAOA,GAAQC,IAAK,SAAYJ,MAItFK,YAAc,WACV,MAAOtB,MAAKuB,IAAK,SAAUH,GAAW,MAAOA,GAAQI,gBAKzDC,OAAS,WACL,QAASb,GAAUC,GAAK,MAAOA,GAAEY,SACjC,MAAO,IAAI5C,GAAiBmB,KAAKe,OAAQH,KAI7Cc,QAAU,WACN,QAASd,GAAUC,GAAK,MAAOA,GAAEQ,IAAK,WACtC,MAAO,IAAIxC,GAAiBmB,KAAKe,OAAQH,KAI7Ce,oBAAsB,WAClB,QAASf,GAAUC,GAAK,MAAOA,GAAEQ,IAAK,aAAgBR,EAAEQ,IAAK,WAC7D,MAAO,IAAIxC,GAAiBmB,KAAKe,OAAQH,KAI7CgB,kBAAoB,SAAUC,GACtBX,EAAEY,UAAWD,IAAaA,IAAY7B,KAAKI,iBAC3CJ,KAAKI,eAAiByB,EACtB7B,KAAK+B,QAAS,yBAA0BF,EAAS7B,QAKzDgC,iBAAmB,SAAUH,GACrBX,EAAEY,UAAWD,IAAaA,IAAY7B,KAAKK,gBAC3CL,KAAKK,cAAgBwB,EACrB7B,KAAK+B,QAAS,wBAAyBF,EAAS7B,QAMxDiC,MAAQ,SAAU9C,GAEd,GADAA,EAAUA,MACNa,KAAKC,YAAcd,EAAQ+C,QAAS,CACpC,GAAIC,GAAQ3D,EAAc4D,aAAaf,IAAKrB,KAAKC,WAAYoC,QAC7DlD,GAAQ+C,QAAUhB,EAAEoB,OAAQH,EAAMI,aAAcC,KAAM,KAE1D,MAAO7D,GAAOuB,UAAU+B,MAAM3B,KAAMN,KAAMb,IAK9CsD,gBAAkB,SAAUtD,GACxB,MAAO+B,GAAEpC,OAAQH,EAAOuB,UAAUuC,gBAAgBnC,KAAMN,KAAMb,IAC1DuD,EAAI,SAKZC,aAAehE,EAAOuB,UAAUyC,aAAaC,QAGzC,IAEA,YAIJC,mBAAqB,SAAU1D,GAC3B,GAAI2D,GAAenE,EAAOuB,UAAU2C,mBAAmBvC,KAAMN,KAAMb,OAC/D4D,IAQJ,OAPK/C,MAAKI,iBACN2C,EAAQrB,SAAU,EAClBqB,EAAQC,QAAS,GAEhBhD,KAAKK,gBACN0C,EAAQE,SAAU,GAEf/B,EAAEgC,SAAUJ,EAAcC,IAIrCI,aAAe,SAAUC,EAAOjE,GAW5B,MAVIiE,KACAjE,EAAUA,IAAa4D,YACvB5D,EAAQ4D,SACJM,iBAAmBD,EAAME,cAIzBL,QAAmB,KAGpBjD,KAAKiC,MAAO9C,IAIvBoE,aAAe,SAAUpE,GACrBA,EAAUA,KACV,IAAIqE,GAAOxD,IASX,OARAb,GAAQ4D,QAAU7B,EAAEpC,OAAQK,EAAQ4D,SAEhCrB,SAAU,EACVsB,OAAUS,SAEdtE,EAAQuE,QAAS,EAEjBF,EAAKzB,QAAS,mBAAoByB,GAC3BA,EAAKvB,MAAO9C,GACdwE,OAAQ,WAAYH,EAAKzB,QAAS,wBAAyByB,MAIpEI,YAAc,SAAUzE,GACpBA,EAAUA,KACV,IAAIqE,GAAOxD,IAOX,OANAb,GAAQ4D,QAAU7B,EAAEpC,OAAQK,EAAQ4D,SAChCE,SAAU,IAEd9D,EAAQuE,QAAS,EAEjBF,EAAKzB,QAAS,kBAAmByB,GAC1BA,EAAKvB,MAAO9C,GACdwE,OAAQ,WAAYH,EAAKzB,QAAS,uBAAwByB,MAInEK,gBAAkB,SAAU1E,GACxBA,EAAUA,KACV,IAAI2E,IAAgB5B,QAAS,MAE7B,OADA/C,GAAQ4E,KAAO7C,EAAEpC,OAAQK,EAAQ4E,SAAYD,GACtC9D,KAAKiC,MAAO9C,IAKvB6E,UAAY,SAAUC,EAAQ9E,GAC1B,GAAI+E,GAAQ,GAAIxF,GAAWyF,UAAWnE,KAAKoE,QAAQC,UAAUC,IAAK,SAAUlD,GACxE,MAAO,YAAY,MAAO6C,GAAO3D,KAAMc,EAASjC,MAGpD,OADA+E,GAAMK,QACCL,EAAMM,UAIjBC,yBAA2B,IAG3BC,0BAA4B,SAAUvF,GAYlC,QAASwF,GAAoBC,EAAUC,GAGnC,MADAL,GAASM,OAAQF,EAAUG,EAAOF,GAC9BrB,EAAKwB,eACLR,GAASS,QAASL,EAAUG,EAAOF,OAGvCK,GAAmBL,EAASE,GAGhC,QAASG,GAAmBL,GACxBA,EAASA,GAAU,CAEnB,IAAIM,GAAWjE,EAAEpC,OAAQoC,EAAEkE,MAAOjG,IAC9BkG,KAAU,UACVC,KAAUC,EACVR,MAAUA,EACVF,OAAUA,EACVW,MAAqB,IAAXX,IAEVY,EAAqB,IAAXZ,EAAcrB,EAAKkC,WAAalC,EAAKmC,SAEnDzE,GAAE0E,MAAO,WACLH,EAAQnF,KAAMkD,EAAM2B,GACfU,KAAMrB,EAASsB,QACfC,KAAM,SAAUC,GAAKrB,EAAoBqB,EAAGnB,OAnCzD1F,EAAUA,KACV,IAAIqF,GAAWyB,OAAOC,WAClB1C,EAAOxD,KACP+E,EAAQ5F,EAAQgH,cAAgB3C,EAAKiB,yBAErC2B,EAAmB9H,EAAUe,0BAA0Ba,UAAUkG,iBACjEb,EAAaa,EAAiB5D,KAAM,IAiCxC,OADA0C,KACOV,GAIX6B,WAAa,SAAUC,GACnB,GAAIC,IACA,4BACA,sCAEJ,OAAWrF,GAAEsF,SAAUF,IAAkBA,EAAaG,IAC3CvF,EAAEwF,SAAUH,EAAsBD,EAAaK,cAI9DC,KAAO,SAAUC,GAEb,GAAIJ,GAAIK,EAAMC,CACV7F,GAAE8F,SAAUH,IACZJ,EAAKI,EACLE,EAAc,MACdD,EAAO,YAEPL,EAAKI,EAAKJ,GACVM,GACI1H,0BAA8B,MAC9B4H,iCAAqC,OACrCC,oCAAwC,QACxCL,EAAKF,cAAiB,MAC1BG,EAAyB,SAAhBC,EAAwB,qBAAuB,UAE5D,IAAII,GAAanH,KACboH,EAAMnB,OAAOoB,KAAMrH,KAAKU,OACpBU,QAAUqF,EACVa,OAAUP,EACVD,KAAUA,EACVzB,KAAU,WACVC,KAAU,4BAEbS,KAAM,SAAUnB,GACbuC,EAAWI,KAAM3C,IAAc4C,OAAO,MAEzC3B,KAAM,WACHsB,EAAWpF,QAAS,QAASoF,EAAYC,KACrC,0BAA4BN,KAAMA,EAAML,GAAIA,EAAIa,OAAQP,KAEpE,OAAOK,IAIXK,WAAa,SAAUC,EAAoBC,EAAgBC,GAGvD,MAAOC,MAAKC,QACJC,WAAsB/H,KAAKC,UAC3BX,gBAAsBqI,EACtBC,KAAsBA,EAGtBI,oBAAsBN,IAErBO,MAAM,KAKnBC,kBAAoB,WAChB,MAAOlI,MAAKgF,YAAchF,KAAKuB,IAAK,SAAUH,GAI1C,MAAOF,GAAEiH,IAAK/G,EAAQgH,WAAY,iBAK1CC,QAAU,SAAUC,GAChB,MAAOtI,MAAKe,OAAQ,SAAUK,GAC1B,MAAOA,GAAQiH,QAASC,MAMhClD,MAAQ,WACJ,GAAIA,GAAQmD,SAASC,WAAWtI,UAAUkF,MAAM9E,KAAMN,KAEtD,OADAoF,GAAMnF,UAAYD,KAAKC,UAChBmF,GAIXqD,SAAW,WACN,OAAU,oBAAsBzI,KAAKC,UAAWD,KAAK0I,QAASlG,OAAQ,KAAMA,KAAM,MAMvF,QACI3D,gBAAkBA"}