{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","PaginatedCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","limitOnFirstFetch","limitPerFetch","order","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","call","urlRoot","Galaxy","root","url","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","prefs","HistoryPrefs","toJSON","values","expandedIds","join","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","fetchUpdated","since","update_time-ge","toISOString","done","r","console","log","length","fetchDeleted","self","undefined","always","fetchHidden","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","response","notify","curr","total","push","shift","value","progressivelyFetchDetails","_notifyAndContinue","offset","limit","allFetched","_recursivelyFetch","_options","clone","view","keys","detailKeys","fetchFn","fetchFirst","fetchMore","defer","fail","reject","limitPerCall","searchAttributes","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","parse","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","haveSearchDetails","has","attributes","matches","matchesWhat","Backbone","Collection","toString"],"mappings":"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"}