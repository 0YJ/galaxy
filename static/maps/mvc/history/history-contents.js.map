{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","HISTORY_CONTENT","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","ControlledFetchCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","on","console","debug","arguments","urlRoot","Galaxy","root","url","order","comparator","buildComparator","ascending","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","expandedIds","HistoryPrefs","values","join","call","fetchUpdated","since","filters","update_time-ge","toISOString","log","done","r","JSON","stringify","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","purged","visible","defaults","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","length","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","response","notify","curr","total","always","push","shift","value","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","fail","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","matches","matchesWhat","set","isArray","each","type_id","typeIdStr","Backbone","Collection","clone","toString","window"],"mappings":"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"}