{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","HISTORY_CONTENT","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","ControlledFetchCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","urlRoot","Galaxy","root","url","order","comparator","a","b","createTimeA","get","createTimeB","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","expandedIds","HistoryPrefs","values","join","call","fetchUpdated","since","filters","update_time-ge","toISOString","console","log","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","purged","visible","defaults","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","length","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","done","response","notify","curr","total","always","push","shift","value","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","fail","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","matches","matchesWhat","set","isArray","each","type_id","typeIdStr","Backbone","Collection","clone","toString","window"],"mappings":"AAAAA,QACI,oCACA,uCACA,wBACA,yBACA,kCACA,gBACD,SAAUC,EAAiBC,EAA6BC,EAAWC,EAAYC,EAAeC,GACjG,YAGA,IAAIC,GAASL,EAA4BM,0BASrCC,EAAkBF,EAAOG,OAAQJ,EAASK,eAAgBD,QAC1DE,cAAgB,UAGhBC,MAAQ,SAAUC,EAAOC,GACrB,GAAmC,YAA/BD,EAAME,qBACN,MAAO,IAAIb,GAAUc,0BAA2BH,EAAOC,EAEpD,IAAmC,uBAA/BD,EAAME,qBAAgD,CAC7D,OAAQF,EAAMI,iBACV,IAAK,OACD,MAAO,IAAId,GAAWe,6BAA8BL,EAAOC,EAC/D,KAAK,SACD,MAAO,IAAIX,GAAWgB,6BAA8BN,EAAOC,EAC/D,KAAK,cACD,MAAO,IAAIX,GAAWiB,mCAAoCP,EAAOC,GAMzE,OAASO,gBAAkB,4BAA8BR,EAAME,sBAEnE,OAASM,gBAAkB,iCAAmCR,EAAME,uBAIxEO,WAAa,SAAUC,EAAQT,GAC3BA,EAAUA,MACVU,KAAKC,UAAYX,EAAQW,WAAa,KAKtCD,KAAKZ,MAAMc,UAAUC,YAAc,UAGnCH,KAAKI,eAAiBd,EAAQc,iBAAkB,EAEhDJ,KAAKK,cAAgBf,EAAQe,gBAAiB,GAIlDC,QAAUC,OAAOC,KAAO,gBAGxBC,IAAM,WACF,MAAOT,MAAKM,QAAU,IAAMN,KAAKC,UAAY,aAKjDS,MAAQ,cAIRC,WAAa,SAA0BC,EAAGC,GACtC,GAAIC,GAAcF,EAAEG,IAAK,eACrBC,EAAcH,EAAEE,IAAK,cAEzB,OAAID,GAAcE,EAAuB,EACvBA,EAAdF,EAAqC,GAClC,GAQXG,QAAU,WACN,QAASC,GAAUC,GAAK,OAAQA,EAAEC,eAClC,MAAO,IAAIpC,GAAiBgB,KAAKqB,OAAQH,KAO7CI,SAAW,SAAUC,GACjB,MAAOC,GAAEC,MAAOzB,KAAKqB,OAAQ,SAAUK,GAAW,MAAOA,GAAQX,IAAK,SAAYQ,MAItFI,YAAc,WACV,MAAO3B,MAAK4B,IAAK,SAAUF,GAAW,MAAOA,GAAQG,gBAKzDC,OAAS,WACL,QAASZ,GAAUC,GAAK,MAAOA,GAAEW,SACjC,MAAO,IAAI9C,GAAiBgB,KAAKqB,OAAQH,KAI7Ca,QAAU,WACN,QAASb,GAAUC,GAAK,MAAOA,GAAEJ,IAAK,WACtC,MAAO,IAAI/B,GAAiBgB,KAAKqB,OAAQH,KAI7Cc,oBAAsB,WAClB,QAASd,GAAUC,GAAK,MAAOA,GAAEJ,IAAK,aAAgBI,EAAEJ,IAAK,WAC7D,MAAO,IAAI/B,GAAiBgB,KAAKqB,OAAQH,KAK7Ce,kBAAoB,SAAUC,GACtBV,EAAEW,UAAWD,IAAaA,IAAYlC,KAAKI,iBAC3CJ,KAAKI,eAAiB8B,EACtBlC,KAAKoC,QAAS,yBAA0BF,EAASlC,QAKzDqC,iBAAmB,SAAUH,GACrBV,EAAEW,UAAWD,IAAaA,IAAYlC,KAAKK,gBAC3CL,KAAKK,cAAgB6B,EACrBlC,KAAKoC,QAAS,wBAAyBF,EAASlC,QAMxDsC,MAAQ,SAAUhD,GAEd,GADAA,EAAUA,MACNU,KAAKC,YAAcX,EAAQiD,QAAS,CAEpC,GAAIC,GAAc5D,EAAc6D,aAAa1B,IAAKf,KAAKC,WAAYc,IAAK,cACxEzB,GAAQiD,QAAUf,EAAEkB,OAAQF,GAAcG,KAAM,KAEpD,MAAO7D,GAAOoB,UAAUoC,MAAMM,KAAM5C,KAAMV,IAK9CuD,aAAe,SAAUC,EAAOxD,GAQ5B,MAPIwD,KACAxD,EAAUA,IAAayD,YACvBzD,EAAQyD,SACJC,iBAAmBF,EAAMG,gBAGjCC,QAAQC,IAAK,oBAAqBnD,KAAKC,WAChCD,KAAKsC,MAAOhD,IAIvB8D,gBAAkB,SAAU9D,GACxB,MAAOkC,GAAEvC,OAAQH,EAAOoB,UAAUkD,gBAAgBR,KAAM5C,KAAMV,IAC1D+D,EAAI,SAKZC,aAAexE,EAAOoB,UAAUoD,aAAaC,QAGzC,IAEA,YAIJC,mBAAqB,SAAUlE,GAC3B,GAAIyD,KAQJ,OAPK/C,MAAKI,iBACN2C,EAAQhB,SAAU,EAClBgB,EAAQU,QAAS,GAEhBzD,KAAKK,gBACN0C,EAAQW,SAAU,GAEflC,EAAEmC,SAAU7E,EAAOoB,UAAUsD,mBAAoBxD,KAAMV,GAAWyD,IAI7Ea,gBAAkB,SAAUtE,GACxBA,EAAUA,KACV,IAAIuE,IAAgBtB,QAAS,MAE7B,OADAjD,GAAQwE,KAAOtC,EAAEvC,OAAQK,EAAQwE,SAAYD,GACtC7D,KAAKsC,MAAOhD,IAKvByE,UAAY,SAAUC,EAAQ1E,GAC1B,GAAI2E,GAAWC,OAAOC,WAClBC,EAAiBpE,KAAKqE,OACtBC,IAEJ,KAAKF,EAED,MADAH,GAASM,YACFN,CAIX,IAAIO,GAAUxE,KAAKyE,QAAQC,UAAUC,IAAK,SAAUjD,EAASkD,GACzD,MAAO,YACH,GAAIC,GAAMb,EAAOpB,KAAMlB,EAASpC,EAEhCuF,GAAIC,KAAM,SAAUC,GAChBd,EAASe,QAASC,KAAML,EAAGM,MAAOd,EAAgBW,SAAUA,EAAU3F,MAAOsC,MAIjFmD,EAAIM,OAAQ,SAAUJ,GAClBT,EAAUc,KAAML,GACZP,EAAQH,OACRG,EAAQa,UAERpB,EAASM,QAASD,QAI/BgB,OAIH,OAFAd,GAAQa,UAEDpB,GAIXsB,WAAa,SAAUC,GACnB,GAAIC,IACA,4BACA,sCAEJ,OAAWjE,GAAEkE,SAAUF,IAAkBA,EAAaG,IAC3CnE,EAAEoE,SAAUH,EAAsBD,EAAaK,cAI9DC,KAAO,SAAUC,GACb,GAAIJ,GAAIK,EAAMC,CACVzE,GAAE0E,SAAUH,IACZJ,EAAKI,EACLE,EAAc,MACdD,EAAO,YAEPL,EAAKI,EAAKJ,GACVM,GACIzG,0BAA8B,MAC9B2G,iCAAqC,OACrCC,oCAAwC,QACxCL,EAAKF,cAAiB,MAC1BG,EAAyB,SAAhBC,EAAwB,qBAAuB,UAE5D,IAAII,GAAarG,KACb6E,EAAMX,OAAOoC,KAAMtG,KAAKS,OACpBiB,QAAUiE,EACVY,OAAUN,EACVD,KAAUA,IAEblB,KAAM,SAAUC,GACbsB,EAAWG,KAAMzB,MAEpB0B,KAAM,WACHJ,EAAWjE,QAAS,QAASiE,EAAYxB,KACrC,0BAA4BmB,KAAMA,EAAML,GAAIA,EAAIY,OAAQN,KAEpE,OAAOpB,IAIX6B,WAAa,SAAUC,EAAoBC,EAAgBC,GAGvD,GAAIC,GAAW9G,KACX+G,GACIC,KAAUrI,EAAWe,6BACrBuH,OAAUtI,EAAWgB,8BAEzBuH,EAAO,GAAKH,GAAaH,IACrBO,WAAsBnH,KAAKC,UAC3B4G,KAAsBA,EAEtBO,oBAAsBT,GAG9B,OAAOO,GAAKG,OACPvC,KAAM,WACHgC,EAASN,IAAKU,KAEjBT,KAAM,SAAU5B,EAAKyC,EAAQC,GAC1BT,EAAS1E,QAAS,QAASyC,EAAKyC,EAAQC,MAMpDC,QAAU,SAAUC,GAChB,MAAOzH,MAAKqB,OAAQ,SAAUK,GAC1B,MAAOA,GAAQ8F,QAASC,MAOhCC,IAAM,SAAU3H,EAAQT,GACpBS,EAASyB,EAAEmG,QAAS5H,GAAUA,GAAWA,GACzCyB,EAAEoG,KAAM7H,EAAQ,SAAUX,GACjBA,EAAMyI,SAAYzI,EAAM2B,KAAQ3B,EAAM2B,IAAK,aAC5C3B,EAAMyI,QAAUrJ,EAAgBsJ,UAAW1I,EAAMG,qBAAsBH,EAAMuG,OAGrFoC,SAASC,WAAW9H,UAAUwH,IAAI9E,KAAM5C,KAAMD,EAAQT,IAI1D2I,MAAQ,WACJ,GAAIA,GAAQF,SAASC,WAAW9H,UAAU+H,MAAMrF,KAAM5C,KAEtD,OADAiI,GAAMhI,UAAYD,KAAKC,UAChBgI,GAIXC,SAAW,WACN,OAAU,oBAAsBlI,KAAKC,UAAWD,KAAKqE,QAAS1B,OAAQ,KAAMA,KAAM,MAMvF,OAHJwF,QAAOnJ,gBAAkBA,GAIjBA,gBAAkBA"}