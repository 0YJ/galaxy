{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","HISTORY_CONTENT","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","ControlledFetchCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","initialize","models","this","historyId","prototype","idAttribute","urlRoot","Galaxy","root","url","order","comparator","a","b","createTimeA","get","createTimeB","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","hidden","deleted","visibleAndUndeleted","haveDetails","all","hasDetails","fetch","data","defaults","v","details","expandedIds","HistoryPrefs","values","join","call","fetchUpdated","since","filters","update_time-ge","toISOString","console","log","_buildFetchData","_fetchDefaults","includeDeleted","purged","includeHidden","visible","_fetchOptions","concat","fetchAllDetails","detailsFlag","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","length","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","done","response","notify","curr","total","always","push","shift","value","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","fail","trigger","matches","matchesWhat","set","isArray","each","type_id","typeIdStr","Backbone","Collection","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","clone","toString"],"mappings":"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"}