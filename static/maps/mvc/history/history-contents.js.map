{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","_super","ControlledFetchCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","validationError","initialize","models","this","historyId","prototype","idAttribute","includeDeleted","includeHidden","on","console","debug","arguments","urlRoot","Galaxy","root","url","order","comparator","buildComparator","ascending","running","filterFn","c","inReadyState","filter","getByHid","hid","_","first","content","get","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","trigger","setIncludeHidden","fetch","details","prefs","HistoryPrefs","toJSON","values","expandedIds","join","call","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","fetchUpdated","since","update_time-ge","toISOString","log","done","r","length","fetchDeleted","self","undefined","always","fetchHidden","fetchAllDetails","detailsFlag","data","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","responses","resolve","ajaxFns","chain","reverse","map","i","xhr","response","notify","curr","total","push","shift","value","progressivelyFetchDetails","_notifyAndContinue","offset","limit","_recursivelyFetch","_options","clone","view","keys","detailKeys","defer","fail","reject","limitPerCall","searchAttributes","_test_progressivelyFetchDetails","progress","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","post","source","add","createHDCA","elementIdentifiers","collectionType","name","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","matches","matchesWhat","Backbone","Collection","toString"],"mappings":"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"}