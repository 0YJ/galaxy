{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["_super","_hdcaLi2","default","HDCAListItemView","HDCAListItemEdit","extend","_getFoldoutPanelClass","this","model","get","_collectionViewEdit2","ListCollectionViewEdit","PairCollectionViewEdit","ListOfListsCollectionViewEdit","TypeError","_renderPrimaryActions","log","prototype","call","concat","_renderDeleteButton","self","deleted","_faIconButton2","title","_localization2","classes","faIcon","disabled","onclick","find","trigger"],"mappings":"wTAMIA,EAASC,EAAAC,QAAQC,iBAGjBC,EAAmBJ,EAAOK,QAMtBC,sBAAuB,WACnB,OAAQC,KAAKC,MAAMC,IAAI,oBACnB,IAAK,OACD,OAAOC,EAAAR,QAAaS,uBACxB,IAAK,SACD,OAAOD,EAAAR,QAAaU,uBAfxC,IAAA,cACa,OAAAF,EAAAR,QAAQC,8BACrB,IAAA,YAiBoB,OAAOO,EAAAR,QAAaW,8BAdpC,MAAA,IAAAC,UACI,2BAAAP,KAAAC,MAAAC,IAAA,qBAMQM,sBAAA,WAGI,OAFAR,KAAAS,IAAAT,KAAO,0BAEPP,EAAAiB,UAAOF,sBACXG,KAAKX,MACDY,QAAAZ,KAAOa,yBAIfA,oBAAUN,WAhBuB,IAAAO,EAAAd,KAkC7Be,EAAUf,KAAKC,MAAMC,IAAI,WAbjC,OAAA,EAAAc,EAAArB,UACAsB,MAAAF,GACAP,EAAAA,EAAAA,SAAAA,0CACa,EAAAU,EAAAvB,SAAA,UACTwB,QAAA,aACAC,OAAO3B,WA1B0B4B,SAAAN,EA0C7BO,QAAS,WAVjBT,EAAAA,IAAqBU,KAAA,wBAAAC,QAAW,YACxBV,EAAOb,MAAPa,aASAQ,SAAAA,WAEIR,MAAAA,qBADAd,KAAAC,MAAAD,KAAAC,MAAA,GAAA,cACc,kBAO1BJ,iBAAAA","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["import HDCA_LI from \"mvc/history/hdca-li\";\nimport DC_VIEW_EDIT from \"mvc/collection/collection-view-edit\";\nimport faIconButton from \"ui/fa-icon-button\";\nimport _l from \"utils/localization\";\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n    /** @lends HDCAListItemEdit.prototype */ {\n        /** logger used to record this.log messages, commonly set to console */\n        //logger              : console,\n\n        /** Override to return editable versions of the collection panels */\n        _getFoldoutPanelClass: function() {\n            switch (this.model.get(\"collection_type\")) {\n                case \"list\":\n                    return DC_VIEW_EDIT.ListCollectionViewEdit;\n                case \"paired\":\n                    return DC_VIEW_EDIT.PairCollectionViewEdit;\n                case \"list:paired\":\n                    return DC_VIEW_EDIT.ListOfPairsCollectionViewEdit;\n                case \"list:list\":\n                    return DC_VIEW_EDIT.ListOfListsCollectionViewEdit;\n            }\n            throw new TypeError(\n                \"Uknown collection_type: \" + this.model.get(\"collection_type\")\n            );\n        },\n\n        // ......................................................................... delete\n        /** In this override, add the delete button. */\n        _renderPrimaryActions: function() {\n            this.log(this + \"._renderPrimaryActions\");\n            // render the display, edit attr and delete icon-buttons\n            return _super.prototype._renderPrimaryActions\n                .call(this)\n                .concat([this._renderDeleteButton()]);\n        },\n\n        /** Render icon-button to delete this collection. */\n        _renderDeleteButton: function() {\n            var self = this;\n            var deleted = this.model.get(\"deleted\");\n            return faIconButton({\n                title: deleted\n                    ? _l(\"Dataset collection is already deleted\")\n                    : _l(\"Delete\"),\n                classes: \"delete-btn\",\n                faIcon: \"fa-times\",\n                disabled: deleted,\n                onclick: function() {\n                    // ...bler... tooltips being left behind in DOM (hover out never called on deletion)\n                    self.$el.find(\".icon-btn.delete-btn\").trigger(\"mouseout\");\n                    self.model[\"delete\"]();\n                }\n            });\n        },\n\n        // ......................................................................... misc\n        /** string rep */\n        toString: function() {\n            var modelString = this.model ? this.model + \"\" : \"(no model)\";\n            return \"HDCAListItemEdit(\" + modelString + \")\";\n        }\n    }\n);\n\n//==============================================================================\nexport default {\n    HDCAListItemEdit: HDCAListItemEdit\n};\n"]}