{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["define","HDCA_LI","DC_VIEW_EDIT","faIconButton","_l","_super","HDCAListItemView","HDCAListItemEdit","extend","_getFoldoutPanelClass","this","model","get","ListCollectionViewEdit","PairCollectionViewEdit","ListOfPairsCollectionViewEdit","ListOfListsCollectionViewEdit","TypeError","_renderPrimaryActions","log","prototype","call","concat","_renderDeleteButton","self","deleted","title","classes","faIcon","disabled","onclick","$el","find","trigger","toString"],"mappings":"AAAAA,QACI,sBACA,sCACA,oBACA,sBACD,SAAUC,EAASC,EAAcC,EAAcC,GAElD,YAGA,IAAIC,GAASJ,EAAQK,gBA6DjB,QACIC,iBA3DeF,EAAOG,QAO1BC,sBAAwB,WACpB,OAAQC,KAAKC,MAAMC,IAAK,oBACpB,IAAK,OACD,MAAOV,GAAaW,sBACxB,KAAK,SACD,MAAOX,GAAaY,sBACxB,KAAK,cACD,MAAOZ,GAAaa,6BACxB,KAAK,YACD,MAAOb,GAAac,8BAE5B,KAAM,IAAIC,WAAW,2BAA6BP,KAAKC,MAAMC,IAAK,qBAKtEM,sBAAwB,WAGpB,MAFAR,MAAKS,IAAKT,KAAO,0BAEVL,EAAOe,UAAUF,sBAAsBG,KAAMX,MAC/CY,QACGZ,KAAKa,yBAKjBA,oBAAsB,WAClB,GAAIC,GAAOd,KACPe,EAAUf,KAAKC,MAAMC,IAAK,UAC9B,OAAOT,IACHuB,MAAuBtB,EAATqB,EAAa,wCAA+C,UAC1EE,QAAc,aACdC,OAAc,WACdC,SAAcJ,EACdK,QAAc,WAEVN,EAAKO,IAAIC,KAAM,wBAAyBC,QAAS,YACjDT,EAAKb,MAAgB,aAOjCuB,SAAW,WAEP,MAAO,qBADaxB,KAAW,MAAIA,KAAKC,MAAQ,GAAK,cACV","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["define([\n    \"mvc/history/hdca-li\",\n    \"mvc/collection/collection-view-edit\",\n    \"ui/fa-icon-button\",\n    \"utils/localization\"\n], function( HDCA_LI, DC_VIEW_EDIT, faIconButton, _l ){\n\n'use strict';\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n/** @lends HDCAListItemEdit.prototype */{\n\n    /** logger used to record this.log messages, commonly set to console */\n    //logger              : console,\n\n    /** Override to return editable versions of the collection panels */\n    _getFoldoutPanelClass : function(){\n        switch( this.model.get( 'collection_type' ) ){\n            case 'list':\n                return DC_VIEW_EDIT.ListCollectionViewEdit;\n            case 'paired':\n                return DC_VIEW_EDIT.PairCollectionViewEdit;\n            case 'list:paired':\n                return DC_VIEW_EDIT.ListOfPairsCollectionViewEdit;\n            case 'list:list':\n                return DC_VIEW_EDIT.ListOfListsCollectionViewEdit;\n        }\n        throw new TypeError( 'Uknown collection_type: ' + this.model.get( 'collection_type' ) );\n    },\n\n    // ......................................................................... delete\n    /** In this override, add the delete button. */\n    _renderPrimaryActions : function(){\n        this.log( this + '._renderPrimaryActions' );\n        // render the display, edit attr and delete icon-buttons\n        return _super.prototype._renderPrimaryActions.call( this )\n            .concat([\n                this._renderDeleteButton()\n            ]);\n    },\n\n    /** Render icon-button to delete this collection. */\n    _renderDeleteButton : function(){\n        var self = this,\n            deleted = this.model.get( 'deleted' );\n        return faIconButton({\n            title       : deleted? _l( 'Dataset collection is already deleted' ): _l( 'Delete' ),\n            classes     : 'delete-btn',\n            faIcon      : 'fa-times',\n            disabled    : deleted,\n            onclick     : function() {\n                // ...bler... tooltips being left behind in DOM (hover out never called on deletion)\n                self.$el.find( '.icon-btn.delete-btn' ).trigger( 'mouseout' );\n                self.model[ 'delete' ]();\n            }\n        });\n    },\n\n    // ......................................................................... misc\n    /** string rep */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'HDCAListItemEdit(' + modelString + ')';\n    }\n});\n\n//==============================================================================\n    return {\n        HDCAListItemEdit : HDCAListItemEdit\n    };\n});\n"]}