{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["define","HDCA_LI","DC_VIEW_EDIT","faIconButton","_l","_super","HDCAListItemView","HDCAListItemEdit","extend","_getFoldoutPanelClass","this","model","TypeError","ListOfListsCollectionViewEdit","get","_renderPrimaryActions","log","prototype","call","concat","_renderDeleteButton","classes","faIcon","disabled","deleted","onclick","title","self","$el","find","trigger","toString"],"mappings":"aAAAA,QACI,sBADJA,sCAGI,oBAIJ,sBAFG,SAAUC,EAASC,EAAcC,EAAcC,GAKlD,IAAIC,EAASJ,EAAQK,iBA6DjB,OACIC,iBA3DeF,EAAOG,QASlBC,sBAAA,WACI,OAAAC,KAAAC,MAAOT,IAAAA,oBACX,IAAA,OACI,OAAAA,EAAOA,uBACX,IAAA,SACI,OAAAA,EAAOA,uBACX,IAAA,cACI,OAAAA,EAAOA,8BARf,IAAA,YAUA,OAAUU,EAAWC,8BAArB,MAAM,IAAID,UAAW,2BAA6BF,KAAKC,MAAMG,IAAK,qBAOlEC,sBAAA,WACA,OAAAL,KAAAM,IAAAN,KAAOL,0BAAAA,EAAOY,UAAUF,sBAAsBG,KAAMR,MAMxDS,QACAC,KAAAA,yBAKQC,oBAAc,WACdC,IAAAA,EAAAA,KACAC,EAAAA,KAAcC,MAJEV,IAAA,WAKhBW,OAAAA,GACIC,MAAAtB,EAAAoB,EAAA,wCAAA,UACAG,QAAKC,aACLD,OAAKhB,WACRY,SAAAC,EATeC,QAApB,WAOQE,EAAKC,IAAIC,KAAM,wBAAyBC,QAAS,YAM7DH,EAAAhB,MAAA,aAEAoB,SAAW,WAOX,MAAO,qBADXrB,KAAAC,MAAAD,KAAAC,MAAA,GAAA,cACW","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["define([\n    \"mvc/history/hdca-li\",\n    \"mvc/collection/collection-view-edit\",\n    \"ui/fa-icon-button\",\n    \"utils/localization\"\n], function( HDCA_LI, DC_VIEW_EDIT, faIconButton, _l ){\n\n'use strict';\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n/** @lends HDCAListItemEdit.prototype */{\n\n    /** logger used to record this.log messages, commonly set to console */\n    //logger              : console,\n\n    /** Override to return editable versions of the collection panels */\n    _getFoldoutPanelClass : function(){\n        switch( this.model.get( 'collection_type' ) ){\n            case 'list':\n                return DC_VIEW_EDIT.ListCollectionViewEdit;\n            case 'paired':\n                return DC_VIEW_EDIT.PairCollectionViewEdit;\n            case 'list:paired':\n                return DC_VIEW_EDIT.ListOfPairsCollectionViewEdit;\n            case 'list:list':\n                return DC_VIEW_EDIT.ListOfListsCollectionViewEdit;\n        }\n        throw new TypeError( 'Uknown collection_type: ' + this.model.get( 'collection_type' ) );\n    },\n\n    // ......................................................................... delete\n    /** In this override, add the delete button. */\n    _renderPrimaryActions : function(){\n        this.log( this + '._renderPrimaryActions' );\n        // render the display, edit attr and delete icon-buttons\n        return _super.prototype._renderPrimaryActions.call( this )\n            .concat([\n                this._renderDeleteButton()\n            ]);\n    },\n\n    /** Render icon-button to delete this collection. */\n    _renderDeleteButton : function(){\n        var self = this,\n            deleted = this.model.get( 'deleted' );\n        return faIconButton({\n            title       : deleted? _l( 'Dataset collection is already deleted' ): _l( 'Delete' ),\n            classes     : 'delete-btn',\n            faIcon      : 'fa-times',\n            disabled    : deleted,\n            onclick     : function() {\n                // ...bler... tooltips being left behind in DOM (hover out never called on deletion)\n                self.$el.find( '.icon-btn.delete-btn' ).trigger( 'mouseout' );\n                self.model[ 'delete' ]();\n            }\n        });\n    },\n\n    // ......................................................................... misc\n    /** string rep */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'HDCAListItemEdit(' + modelString + ')';\n    }\n});\n\n//==============================================================================\n    return {\n        HDCAListItemEdit : HDCAListItemEdit\n    };\n});\n"]}