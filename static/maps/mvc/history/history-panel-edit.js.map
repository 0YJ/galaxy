{"version":3,"file":"history-panel-edit.js","sources":["../../../src/mvc/history/history-panel-edit.js"],"names":["define","HPANEL","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","faIconButton","PopupMenu","_l","createListCollection","history","collection","name","elementIdentifiers","toJSON","map","element","id","src","history_content_type","createHDCA","createPairCollection","elementsJSON","createListOfPairsCollection","datasets","filter","content","state","OK","length","require","creator","window","pairedCollectionCreatorModal","historyId","Galaxy","modal","show","title","body","join","buttons","Ok","hide","closing_events","_super","HistoryPanel","HistoryPanelEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","_handleHdaDeletionChange","_handleHdaVisibleChange","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","currUser","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","$el","deleted","where","hidden","visible","msgs","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","concat","done","refresh","_attachItems","$list","append","reverse","view","_attachView","unshift","prepend","trigger","slideDown","_getItemViewOptions","options","_","itemModel","removeItemView","storage","args","Array","slice","arguments","each","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","before","_renderDropTargetHelp","evName","hasOwnProperty","$","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","console","debug","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","dropEffect","getData","JSON","parse","err","warn","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}