{"version":3,"file":"history-panel-edit.js","sources":["../../../src/mvc/history/history-panel-edit.js"],"names":["define","HPANEL","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","faIconButton","PopupMenu","_l","createPairCollection","history","collection","elementsJSON","toJSON","name","elementIdentifiers","src","id","createHDCA","createListOfPairsCollection","datasets","filter","content","history_content_type","state","OK","length","require","creator","window","pairedCollectionCreatorModal","historyId","Galaxy","modal","show","title","body","join","buttons","Ok","hide","closing_events","_super","HistoryPanel","HistoryPanelEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","_handleHdaDeletionChange","_handleHdaVisibleChange","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","currUser","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","$el","deleted","where","hidden","visible","msgs","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","concat","createListCollection","done","refresh","_attachItems","$list","append","reverse","map","view","_attachView","unshift","prepend","trigger","slideDown","_getItemViewOptions","options","_","itemModel","removeItemView","storage","args","Array","slice","arguments","each","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","before","_renderDropTargetHelp","evName","hasOwnProperty","$","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","console","debug","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","dropEffect","getData","JSON","parse","err","warn","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}