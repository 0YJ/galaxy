{"version":3,"file":"history-panel-edit.js","sources":["../../../src/mvc/history/history-panel-edit.js"],"names":["define","HPANEL","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","faIconButton","PopupMenu","_l","_super","HistoryPanel","HistoryPanelEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","collection","_handleHdaDeletionChange","_handleHdaVisibleChange","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","Galaxy","currUser","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","join","$el","deleted","where","hidden","visible","msgs","length","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","promoteToHistoryDatasetCollection","_","bind","_showPairedCollectionModal","datasets","toJSON","filter","content","history_content_type","state","OK","require","creator","window","pairedCollectionCreatorModal","historyId","modal","show","body","buttons","Ok","closing_events","_attachItems","$list","append","reverse","map","view","_attachView","unshift","prepend","trigger","slideDown","_getItemViewOptions","options","itemModel","removeItemView","storage","args","Array","slice","arguments","each","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","dragover","dragleave","drop","$dropTarget","_renderDropTarget","before","_renderDropTargetHelp","evName","hasOwnProperty","$","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","console","debug","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","dropEffect","getData","JSON","parse","err","warn","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}