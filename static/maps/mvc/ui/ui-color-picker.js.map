{"version":3,"sources":["mvc/ui/ui-color-picker.js"],"names":["Backbone","View","extend","colors","standard","base","theme","initialize","self","new_val","_getValue","rgb","line_def","options","this","_utils2","default","merge","_content","_template","$panel","$view","$content","$","$value","$line","$header","append","_build","visible","$box","value","css","bottom","fadeOut","undefined","_templateContent","empty","html","_templateCheck","onchange","hex","x","parseInt","toString","slice","i","length","find","_templateBox","top","color"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-color-picker.js","sourcesContent":["/** Renders the color picker used e.g. in the tool form **/\nimport Utils from \"utils/utils\";\nexport default Backbone.View.extend({\n    colors: {\n        standard: [\n            \"c00000\",\n            \"ff0000\",\n            \"ffc000\",\n            \"ffff00\",\n            \"92d050\",\n            \"00b050\",\n            \"00b0f0\",\n            \"0070c0\",\n            \"002060\",\n            \"7030a0\"\n        ],\n        base: [\n            \"ffffff\",\n            \"000000\",\n            \"eeece1\",\n            \"1f497d\",\n            \"4f81bd\",\n            \"c0504d\",\n            \"9bbb59\",\n            \"8064a2\",\n            \"4bacc6\",\n            \"f79646\"\n        ],\n        theme: [\n            [\n                \"f2f2f2\",\n                \"7f7f7f\",\n                \"ddd9c3\",\n                \"c6d9f0\",\n                \"dbe5f1\",\n                \"f2dcdb\",\n                \"ebf1dd\",\n                \"e5e0ec\",\n                \"dbeef3\",\n                \"fdeada\"\n            ],\n            [\n                \"d8d8d8\",\n                \"595959\",\n                \"c4bd97\",\n                \"8db3e2\",\n                \"b8cce4\",\n                \"e5b9b7\",\n                \"d7e3bc\",\n                \"ccc1d9\",\n                \"b7dde8\",\n                \"fbd5b5\"\n            ],\n            [\n                \"bfbfbf\",\n                \"3f3f3f\",\n                \"938953\",\n                \"548dd4\",\n                \"95b3d7\",\n                \"d99694\",\n                \"c3d69b\",\n                \"b2a2c7\",\n                \"92cddc\",\n                \"fac08f\"\n            ],\n            [\n                \"a5a5a5\",\n                \"262626\",\n                \"494429\",\n                \"17365d\",\n                \"366092\",\n                \"953734\",\n                \"76923c\",\n                \"5f497a\",\n                \"31859b\",\n                \"e36c09\"\n            ],\n            [\n                \"7f7f7e\",\n                \"0c0c0c\",\n                \"1d1b10\",\n                \"0f243e\",\n                \"244061\",\n                \"632423\",\n                \"4f6128\",\n                \"3f3151\",\n                \"205867\",\n                \"974806\"\n            ]\n        ]\n    },\n\n    initialize: function(options) {\n        this.options = Utils.merge(options, {});\n        this.setElement(this._template());\n        this.$panel = this.$(\".ui-color-picker-panel\");\n        this.$view = this.$(\".ui-color-picker-view\");\n        this.$value = this.$(\".ui-color-picker-value\");\n        this.$header = this.$(\".ui-color-picker-header\");\n        this._build();\n        this.visible = false;\n        this.value(this.options.value);\n        this.$boxes = this.$(\".ui-color-picker-box\");\n        var self = this;\n        this.$boxes.on(\"click\", function() {\n            self.value($(this).css(\"background-color\"));\n            self.$header.trigger(\"click\");\n        });\n        this.$header.on(\"click\", function() {\n            self.visible = !self.visible;\n            if (self.visible) {\n                self.$view.fadeIn(\"fast\");\n            } else {\n                self.$view.fadeOut(\"fast\");\n            }\n        });\n    },\n\n    /** Get/set value */\n    value: function(new_val) {\n        if (new_val !== undefined && new_val !== null) {\n            this.$value.css(\"background-color\", new_val);\n            this.$(\".ui-color-picker-box\").empty();\n            this.$(this._getValue()).html(this._templateCheck());\n            this.options.onchange && this.options.onchange(new_val);\n        }\n        return this._getValue();\n    },\n\n    /** Get value from dom */\n    _getValue: function() {\n        var rgb = this.$value.css(\"background-color\");\n        rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n        if (rgb) {\n            function hex(x) {\n                return (\"0\" + parseInt(x).toString(16)).slice(-2);\n            }\n            return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n        } else {\n            return null;\n        }\n    },\n\n    /** Build color panel */\n    _build: function() {\n        this._content({ colors: this.colors.base });\n        for (var i in this.colors.theme) {\n            var line_def = {};\n            if (i == 0) {\n                line_def[\"bottom\"] = true;\n            } else if (i != this.colors.theme.length - 1) {\n                line_def[\"top\"] = true;\n                line_def[\"bottom\"] = true;\n            } else {\n                line_def[\"top\"] = true;\n            }\n            line_def[\"colors\"] = this.colors.theme[i];\n            this._content(line_def);\n        }\n        this._content({ colors: this.colors.standard });\n    },\n\n    /** Create content */\n    _content: function(options) {\n        var colors = options.colors;\n        var $content = $(this._templateContent());\n        var $line = $content.find(\".line\");\n        this.$panel.append($content);\n        for (var i in colors) {\n            var $box = $(this._templateBox(colors[i]));\n            if (options.top) {\n                $box.css(\"border-top\", \"none\");\n                $box.css(\"border-top-left-radius\", \"0px\");\n                $box.css(\"border-top-right-radius\", \"0px\");\n            }\n            if (options.bottom) {\n                $box.css(\"border-bottom\", \"none\");\n                $box.css(\"border-bottom-left-radius\", \"0px\");\n                $box.css(\"border-bottom-right-radius\", \"0px\");\n            }\n            $line.append($box);\n        }\n        return $content;\n    },\n\n    /** Check icon */\n    _templateCheck: function() {\n        return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n    },\n\n    /** Content template */\n    _templateContent: function() {\n        return (\n            '<div class=\"ui-color-picker-content\">' +\n            '<div class=\"line\"/>' +\n            \"</div>\"\n        );\n    },\n\n    /** Box template */\n    _templateBox: function(color) {\n        return (\n            '<div id=\"' +\n            color +\n            '\" class=\"ui-color-picker-box\" style=\"background-color: #' +\n            color +\n            ';\"/>'\n        );\n    },\n\n    /** Main template */\n    _template: function() {\n        return (\n            '<div class=\"ui-color-picker\">' +\n            '<div class=\"ui-color-picker-header\">' +\n            '<div class=\"ui-color-picker-value\"/>' +\n            '<div class=\"ui-color-picker-label\">Select a color</div>' +\n            \"</div>\" +\n            '<div class=\"ui-color-picker-view ui-input\">' +\n            '<div class=\"ui-color-picker-panel\"/>' +\n            \"</div>\"\n        );\n        (\"</div>\");\n    }\n});\n"]}