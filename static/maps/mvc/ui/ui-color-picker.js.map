{"version":3,"sources":["mvc/ui/ui-color-picker.js"],"names":["define","Utils","Backbone","View","extend","colors","standard","base","theme","initialize","self","_getValue","rgb","line_def","_content","$content","$line","$box","css","merge","options","_template","this","$panel","$","$view","bottom","visible","append","$boxes","on","value","$header","trigger","fadeIn","fadeOut","new_val","undefined","$value","empty","html","_templateCheck","onchange","match","hex","x","parseInt","toString","slice","_build","i","length","_templateContent","find","_templateBox","top","color"],"mappings":"kCACAA,QAAQ,eAAgB,SAASC,GAC7B,OAAOC,SAASC,KAAKC,QAFzBC,QACQC,UACGJ,SACHG,SACIC,SAYAC,SAYAC,SA1BoB,SAShB,SAiFRC,SACI,SACA,UAEAF,MACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACIG,SACAA,UAEJF,QAEI,SACIE,SACH,SACGA,SACH,SANL,SA1GoB,SAmCZ,SAiFZ,SACO,WAGC,SACA,SACA,SACH,SACD,SA5HoB,SA8CZ,SAiFZ,SACAC,SACQC,WAEK,SAED,SACH,SA/EG,SAgFJ,SAJJ,SAMI,SACH,SA1ImB,SA6DZ,WAkFR,SACA,SACI,SACA,SACIC,SACH,SACGA,SACAA,SACH,SACGA,WAGJ,SACH,SACD,SA7JoB,SAgFZ,SAgFZ,SACAC,SACQT,SACAU,SACAC,YAKIC,WAAAA,SAAKC,GACLD,KAAAA,QAAAA,EAASE,MAAAC,MACTH,KAAAA,WAAAA,KAASI,aACZC,KAAAC,OAAAD,KAAAE,EAAA,0BACDF,KAAAG,MAAIL,KAAAA,EAAQM,yBACRT,KAAAA,OAAAA,KAAKC,EAAI,0BACTD,KAAAA,QAAAA,KAAAO,EAAS,2BACTP,KAAAA,SACHK,KAAAK,SAAA,EACDX,KAAAA,MAAAA,KAAMY,QAAOX,OAChBK,KAAAO,OAAAP,KAAAE,EAAA,wBACD,IAAAd,EAAOK,KACVO,KArLuBO,OAAAC,GAAA,QAAA,WAuGhBpB,EAAKqB,MAAMP,EAAEF,MAAMJ,IAAI,qBAgF/BR,EAAAsB,QAAAC,QAAA,WAEIX,KAAAU,QAAOF,GAAA,QAAA,WAzLapB,EAAAiB,SAAAjB,EAAAiB,QA4GZjB,EAAKiB,QAgFjBjB,EAAAe,MAAAS,OAAA,QAEIxB,EACIe,MAAAU,QAAA,WAePJ,MA9MuB,SAAAK,GAA5B,YAsHwBC,IAAZD,GAAqC,OAAZA,IA0FjCd,KAAAgB,OAAApB,IAAA,mBAAAkB,GACAf,KAAAA,EAAW,wBAAWkB,QAClBjB,KAAAE,EACIF,KAAAX,aAAA6B,KAAAlB,KAAAmB,kBASHnB,KAAAF,QAADsB,UAAApB,KAAAF,QAAAsB,SAAAN,IA5NRd,KAAAX,aAgIIA,UAAW,WACP,IAAIC,EAAMU,KAAKgB,OAAOpB,IAAI,oBAE1B,GADAN,EAAMA,EAAI+B,MAAM,oCACP,CAAA,IACIC,EAAT,SAAaC,GACT,OAAQ,IAAMC,SAASD,GAAGE,SAAS,KAAKC,OAAO,IAEnD,MAAO,IAAMJ,EAAIhC,EAAI,IAAMgC,EAAIhC,EAAI,IAAMgC,EAAIhC,EAAI,IAEjD,OAAO,MAKfqC,OAAQ,WACJ3B,KAAKR,UAAWT,OAAQiB,KAAKjB,OAAOE,OACpC,IAAK,IAAI2C,KAAK5B,KAAKjB,OAAOG,MAAO,CAC7B,IAAIK,KACK,GAALqC,EACArC,EAAA,QAAqB,EACdqC,GAAK5B,KAAKjB,OAAOG,MAAM2C,OAAS,GACvCtC,EAAA,KAAkB,EAClBA,EAAA,QAAqB,GAErBA,EAAA,KAAkB,EAEtBA,EAAA,OAAqBS,KAAKjB,OAAOG,MAAM0C,GACvC5B,KAAKR,SAASD,GAElBS,KAAKR,UAAWT,OAAQiB,KAAKjB,OAAOC,YAIxCQ,SAAU,SAASM,GACf,IAAIf,EAASe,EAAQf,OACjBU,EAAWS,EAAEF,KAAK8B,oBAClBpC,EAAQD,EAASsC,KAAK,SAC1B/B,KAAKC,OAAOK,OAAOb,GACnB,IAAK,IAAImC,KAAK7C,EAAQ,CAClB,IAAIY,EAAOO,EAAEF,KAAKgC,aAAajD,EAAO6C,KAClC9B,EAAQmC,MACRtC,EAAKC,IAAI,aAAc,QACvBD,EAAKC,IAAI,yBAA0B,OACnCD,EAAKC,IAAI,0BAA2B,QAEpCE,EAAQM,SACRT,EAAKC,IAAI,gBAAiB,QAC1BD,EAAKC,IAAI,4BAA6B,OACtCD,EAAKC,IAAI,6BAA8B,QAE3CF,EAAMY,OAAOX,GAEjB,OAAOF,GAIX0B,eAAgB,WACZ,MAAO,oDAIXW,iBAAkB,WACd,MACI,kEAORE,aAAc,SAASE,GACnB,MACI,YACAA,EACA,2DACAA,EACA,QAKRnC,UAAW,WACP,MACI","file":"../../../scripts/mvc/ui/ui-color-picker.js","sourcesContent":["/** Renders the color picker used e.g. in the tool form **/\ndefine([\"utils/utils\"], function(Utils) {\n    return Backbone.View.extend({\n        colors: {\n            standard: [\n                \"c00000\",\n                \"ff0000\",\n                \"ffc000\",\n                \"ffff00\",\n                \"92d050\",\n                \"00b050\",\n                \"00b0f0\",\n                \"0070c0\",\n                \"002060\",\n                \"7030a0\"\n            ],\n            base: [\n                \"ffffff\",\n                \"000000\",\n                \"eeece1\",\n                \"1f497d\",\n                \"4f81bd\",\n                \"c0504d\",\n                \"9bbb59\",\n                \"8064a2\",\n                \"4bacc6\",\n                \"f79646\"\n            ],\n            theme: [\n                [\n                    \"f2f2f2\",\n                    \"7f7f7f\",\n                    \"ddd9c3\",\n                    \"c6d9f0\",\n                    \"dbe5f1\",\n                    \"f2dcdb\",\n                    \"ebf1dd\",\n                    \"e5e0ec\",\n                    \"dbeef3\",\n                    \"fdeada\"\n                ],\n                [\n                    \"d8d8d8\",\n                    \"595959\",\n                    \"c4bd97\",\n                    \"8db3e2\",\n                    \"b8cce4\",\n                    \"e5b9b7\",\n                    \"d7e3bc\",\n                    \"ccc1d9\",\n                    \"b7dde8\",\n                    \"fbd5b5\"\n                ],\n                [\n                    \"bfbfbf\",\n                    \"3f3f3f\",\n                    \"938953\",\n                    \"548dd4\",\n                    \"95b3d7\",\n                    \"d99694\",\n                    \"c3d69b\",\n                    \"b2a2c7\",\n                    \"92cddc\",\n                    \"fac08f\"\n                ],\n                [\n                    \"a5a5a5\",\n                    \"262626\",\n                    \"494429\",\n                    \"17365d\",\n                    \"366092\",\n                    \"953734\",\n                    \"76923c\",\n                    \"5f497a\",\n                    \"31859b\",\n                    \"e36c09\"\n                ],\n                [\n                    \"7f7f7e\",\n                    \"0c0c0c\",\n                    \"1d1b10\",\n                    \"0f243e\",\n                    \"244061\",\n                    \"632423\",\n                    \"4f6128\",\n                    \"3f3151\",\n                    \"205867\",\n                    \"974806\"\n                ]\n            ]\n        },\n\n        initialize: function(options) {\n            this.options = Utils.merge(options, {});\n            this.setElement(this._template());\n            this.$panel = this.$(\".ui-color-picker-panel\");\n            this.$view = this.$(\".ui-color-picker-view\");\n            this.$value = this.$(\".ui-color-picker-value\");\n            this.$header = this.$(\".ui-color-picker-header\");\n            this._build();\n            this.visible = false;\n            this.value(this.options.value);\n            this.$boxes = this.$(\".ui-color-picker-box\");\n            var self = this;\n            this.$boxes.on(\"click\", function() {\n                self.value($(this).css(\"background-color\"));\n                self.$header.trigger(\"click\");\n            });\n            this.$header.on(\"click\", function() {\n                self.visible = !self.visible;\n                if (self.visible) {\n                    self.$view.fadeIn(\"fast\");\n                } else {\n                    self.$view.fadeOut(\"fast\");\n                }\n            });\n        },\n\n        /** Get/set value */\n        value: function(new_val) {\n            if (new_val !== undefined && new_val !== null) {\n                this.$value.css(\"background-color\", new_val);\n                this.$(\".ui-color-picker-box\").empty();\n                this.$(this._getValue()).html(this._templateCheck());\n                this.options.onchange && this.options.onchange(new_val);\n            }\n            return this._getValue();\n        },\n\n        /** Get value from dom */\n        _getValue: function() {\n            var rgb = this.$value.css(\"background-color\");\n            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n            if (rgb) {\n                function hex(x) {\n                    return (\"0\" + parseInt(x).toString(16)).slice(-2);\n                }\n                return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n            } else {\n                return null;\n            }\n        },\n\n        /** Build color panel */\n        _build: function() {\n            this._content({ colors: this.colors.base });\n            for (var i in this.colors.theme) {\n                var line_def = {};\n                if (i == 0) {\n                    line_def[\"bottom\"] = true;\n                } else if (i != this.colors.theme.length - 1) {\n                    line_def[\"top\"] = true;\n                    line_def[\"bottom\"] = true;\n                } else {\n                    line_def[\"top\"] = true;\n                }\n                line_def[\"colors\"] = this.colors.theme[i];\n                this._content(line_def);\n            }\n            this._content({ colors: this.colors.standard });\n        },\n\n        /** Create content */\n        _content: function(options) {\n            var colors = options.colors;\n            var $content = $(this._templateContent());\n            var $line = $content.find(\".line\");\n            this.$panel.append($content);\n            for (var i in colors) {\n                var $box = $(this._templateBox(colors[i]));\n                if (options.top) {\n                    $box.css(\"border-top\", \"none\");\n                    $box.css(\"border-top-left-radius\", \"0px\");\n                    $box.css(\"border-top-right-radius\", \"0px\");\n                }\n                if (options.bottom) {\n                    $box.css(\"border-bottom\", \"none\");\n                    $box.css(\"border-bottom-left-radius\", \"0px\");\n                    $box.css(\"border-bottom-right-radius\", \"0px\");\n                }\n                $line.append($box);\n            }\n            return $content;\n        },\n\n        /** Check icon */\n        _templateCheck: function() {\n            return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n        },\n\n        /** Content template */\n        _templateContent: function() {\n            return (\n                '<div class=\"ui-color-picker-content\">' +\n                '<div class=\"line\"/>' +\n                \"</div>\"\n            );\n        },\n\n        /** Box template */\n        _templateBox: function(color) {\n            return (\n                '<div id=\"' +\n                color +\n                '\" class=\"ui-color-picker-box\" style=\"background-color: #' +\n                color +\n                ';\"/>'\n            );\n        },\n\n        /** Main template */\n        _template: function() {\n            return (\n                '<div class=\"ui-color-picker\">' +\n                '<div class=\"ui-color-picker-header\">' +\n                '<div class=\"ui-color-picker-value\"/>' +\n                '<div class=\"ui-color-picker-label\">Select a color</div>' +\n                \"</div>\" +\n                '<div class=\"ui-color-picker-view ui-input\">' +\n                '<div class=\"ui-color-picker-panel\"/>' +\n                \"</div>\"\n            );\n            (\"</div>\");\n        }\n    });\n});\n"]}