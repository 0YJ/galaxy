{"version":3,"sources":["mvc/ui/ui-select-ftp.js"],"names":["define","Utils","List","View","Backbone","extend","initialize","options","self","this","ftpfile_list","name","optional","multiple","onchange","value","setElement","$el","get","Galaxy","root","url","success","data","push","response","i","update","val"],"mappings":"YACAA,SAAQ,cAAe,kBADvB,SAAAC,EAAAC,GAgDA,OAAAC,KAzCWC,SAASD,KAAKE,QACrBC,WAAA,SAAAC,GAEI,GAAAC,GAAAC,IAGAA,MAAAC,aAAA,GAAAR,GAAAC,MACAQ,KAAKD,OACDC,SAAcJ,EADgBK,SAE9BA,SAAcL,EAAQK,SACtBC,SAAcN,WACdO,EAAAA,UAAcP,EAAAO,SAAWN,EAAAO,YAK7BN,KAAAO,WAAAP,KAAAC,aAAAO,KAGAhB,EAAAiB,KACAjB,IAAUkB,OAAAC,KAAA,mBACNC,QAAUF,SAAOC,GACjBE,GAAAA,KACI,KAAA,GAAIC,KAAAA,GACJA,EAAKC,MACDD,MAAUE,EAAAC,GAAA,KACNX,MAAAA,EAAUU,GAAVV,MAGPP,GAAAE,aAAAiB,OAAAJ,OAMbR,MAAA,SAAAa,GACAb,MAAON,MAAAC,aAAAK,MAAca","file":"../../../scripts/mvc/ui/ui-select-ftp.js","sourcesContent":["// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-list'],\n        function(Utils, List) {\n\n/**\n * FTP file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // create ui-list view to keep track of selected ftp files\n        this.ftpfile_list = new List.View({\n            name        : 'file',\n            optional    : options.optional,\n            multiple    : options.multiple,\n            onchange    : function() {\n                options.onchange && options.onchange(self.value());\n            }\n        });\n\n        // create elements\n        this.setElement(this.ftpfile_list.$el);\n\n        // initial fetch of ftps\n        Utils.get({\n            url     : Galaxy.root + 'api/remote_files',\n            success : function(response) {\n                var data = [];\n                for (var i in response) {\n                    data.push({\n                        value   : response[i]['path'],\n                        label   : response[i]['path']\n                    });\n                }\n                self.ftpfile_list.update(data);\n            }\n        });\n    },\n\n    /** Return/Set currently selected ftp datasets */\n    value: function(val) {\n        return this.ftpfile_list.value(val);\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n"]}