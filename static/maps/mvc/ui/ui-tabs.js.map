{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["define","Utils","View","Backbone","extend","initialize","options","Collection","model","collection","onchange","visible","this","setElement","_template","$nav","$content","$","$el","hide","render","listenTo","_add","_remove","_change","_reset","id","children","length","addClass","first","removeClass","size","get","current","show","set","add","del","delAll","remove","showTab","reset","hideTab","tab_model","title","placement","attributes","container","e","preventDefault","self","append","_template_tab","tooltip","on","empty","$href","$tmpl","attr","find","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\ndefine([\"utils/utils\"], function(Utils) {\n    var View = Backbone.View.extend({\n        initialize: function(options) {\n            var self = this;\n            this.collection = new Backbone.Collection();\n            this.model =\n                (options && options.model) ||\n                new Backbone.Model({\n                    onchange: null,\n                    visible: true\n                }).set(options);\n            this.setElement($(this._template()));\n            this.$nav = this.$(\".tab-navigation\");\n            this.$content = this.$(\".tab-content\");\n            this.$el.on(\"click\", function() {\n                $(\".tooltip\").hide();\n            });\n            this.render();\n            this.listenTo(this.model, \"change\", this.render, this);\n            this.listenTo(this.collection, \"add\", this._add, this);\n            this.listenTo(this.collection, \"remove\", this._remove, this);\n            this.listenTo(this.collection, \"change\", this._change, this);\n            this.listenTo(this.collection, \"reset\", this._reset, this);\n            this.listenTo(\n                this.collection,\n                \"add remove reset\",\n                this.render,\n                this\n            );\n        },\n\n        render: function() {\n            var id = this.model.get(\"current\");\n            id = this.$(\"#\" + id).length > 0 ? id : this.first();\n            if (id) {\n                this.$nav.children().removeClass(\"active\");\n                this.$content.children().removeClass(\"active\");\n                this.$(\"#tab-\" + id).addClass(\"active\");\n                this.$(\"#\" + id).addClass(\"active\");\n            }\n            this.$el[this.model.get(\"visible\") ? \"fadeIn\" : \"fadeOut\"](\"fast\");\n            this.$nav[this.size() > 1 ? \"show\" : \"hide\"]();\n        },\n\n        /** Returns tab id for currently shown tab */\n        current: function() {\n            return this.model.get(\"current\");\n        },\n\n        /** Show tab view and highlight a tab by id */\n        show: function(id) {\n            if (id) {\n                this.model.set({ current: id, visible: true });\n                this.model.get(\"onchange\") && this.model.get(\"onchange\")(id);\n            }\n        },\n\n        /** Hide tab view */\n        hide: function() {\n            this.model.set(\"visible\", false);\n        },\n\n        /** Returns first tab */\n        first: function() {\n            var model = this.collection.first();\n            return model && model.id;\n        },\n\n        /** Returns current number of tabs */\n        size: function() {\n            return this.collection.length;\n        },\n\n        /** Adds a new tab */\n        add: function(options) {\n            this.collection.add(options);\n        },\n\n        /** Delete tab */\n        del: function(id) {\n            this.collection.remove(id);\n        },\n\n        /** Delete all tabs */\n        delAll: function() {\n            this.collection.reset();\n        },\n\n        /** Show tab */\n        showTab: function(id) {\n            this.collection.get(id).set(\"hidden\", false);\n        },\n\n        /** Hide tab */\n        hideTab: function(id) {\n            this.collection.get(id).set(\"hidden\", true);\n        },\n\n        /** Adds a new tab */\n        _add: function(tab_model) {\n            var self = this;\n            var options = tab_model.attributes;\n            this.$content.append(\n                $(\"<div/>\")\n                    .attr(\"id\", options.id)\n                    .addClass(\"tab-pane\")\n                    .append(options.$el)\n            );\n            this.$nav.append(\n                $(this._template_tab(options))\n                    .show()\n                    .tooltip({\n                        title: options.tooltip,\n                        placement: \"bottom\",\n                        container: self.$el\n                    })\n                    .on(\"click\", function(e) {\n                        e.preventDefault();\n                        self.show(options.id);\n                    })\n            );\n            if (this.size() == 1) {\n                this.show(options.id);\n            }\n        },\n\n        /** Delete tab */\n        _remove: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id).remove();\n            this.$(\"#\" + tab_model.id).remove();\n        },\n\n        /** Reset collection */\n        _reset: function() {\n            this.$nav.empty();\n            this.$content.empty();\n        },\n\n        /** Change tab */\n        _change: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id)[\n                tab_model.get(\"hidden\") ? \"hide\" : \"show\"\n            ]();\n        },\n\n        /** Main template */\n        _template: function() {\n            return $(\"<div/>\")\n                .addClass(\"ui-tabs tabbable tabs-left\")\n                .append($(\"<ul/>\").addClass(\"tab-navigation nav nav-tabs\"))\n                .append($(\"<div/>\").addClass(\"tab-content\"));\n        },\n\n        /** Tab template */\n        _template_tab: function(options) {\n            var $tmpl = $(\"<li/>\")\n                .addClass(\"tab-element\")\n                .attr(\"id\", \"tab-\" + options.id)\n                .append($(\"<a/>\").attr(\"id\", \"tab-title-link-\" + options.id));\n            var $href = $tmpl.find(\"a\");\n            options.icon &&\n                $href.append(\n                    $(\"<i/>\")\n                        .addClass(\"tab-icon fa\")\n                        .addClass(options.icon)\n                );\n            $href.append(\n                $(\"<span/>\")\n                    .attr(\"id\", \"tab-title-text-\" + options.id)\n                    .addClass(\"tab-title-text\")\n                    .append(options.title)\n            );\n            return $tmpl;\n        }\n    });\n\n    return { View: View };\n});\n"]}