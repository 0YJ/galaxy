{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["define","Utils","View","Backbone","extend","initialize","options","this","collection","Collection","model","Model","onchange","visible","set","setElement","$","_template","$nav","$content","$el","on","hide","render","listenTo","_add","_remove","_change","_reset","id","get","length","first","children","removeClass","addClass","size","current","show","add","del","remove","delAll","reset","showTab","hideTab","tab_model","self","attributes","append","attr","_template_tab","tooltip","title","placement","container","e","preventDefault","empty","$tmpl","$href","find","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function( options ) {\n            var self = this;\n            this.collection = new Backbone.Collection();\n            this.model = options && options.model || new Backbone.Model( {\n                onchange    : null,\n                visible     : true\n            }).set( options );\n            this.setElement( $( this._template() ) );\n            this.$nav       = this.$( '.tab-navigation' );\n            this.$content   = this.$( '.tab-content' );\n            this.$el.on( 'click', function() { $( '.tooltip' ).hide() } );\n            this.render();\n            this.listenTo( this.model, 'change', this.render, this );\n            this.listenTo( this.collection, 'add', this._add, this );\n            this.listenTo( this.collection, 'remove', this._remove, this );\n            this.listenTo( this.collection, 'change', this._change, this );\n            this.listenTo( this.collection, 'reset', this._reset, this );\n            this.listenTo( this.collection, 'add remove reset', this.render, this );\n        },\n\n        render: function() {\n            var id = this.model.get( 'current' );\n            id = this.$( '#' + id ).length > 0 ? id : this.first();\n            if ( id ) {\n                this.$nav.children().removeClass('active' );\n                this.$content.children().removeClass('active' );\n                this.$( '#tab-' + id ).addClass( 'active' );\n                this.$( '#' + id ).addClass( 'active' );\n            }\n            this.$el[ this.model.get( 'visible' ) ? 'fadeIn' : 'fadeOut' ]( 'fast' );\n            this.$nav[ this.size() > 1 ? 'show' : 'hide' ]();\n        },\n\n        /** Returns tab id for currently shown tab */\n        current: function() {\n            return this.model.get( 'current' );\n        },\n\n        /** Show tab view and highlight a tab by id */\n        show: function( id ) {\n            if ( id ) {\n                this.model.set( { 'current': id, 'visible': true } );\n                this.model.get( 'onchange' ) && this.model.get( 'onchange' )( id );\n            }\n        },\n\n        /** Hide tab view */\n        hide: function(){\n            this.model.set( 'visible', false );\n        },\n\n        /** Returns first tab */\n        first: function() {\n            var model = this.collection.first();\n            return model && model.id;\n        },\n\n        /** Returns current number of tabs */\n        size: function() {\n            return this.collection.length;\n        },\n\n        /** Adds a new tab */\n        add: function( options ) {\n            this.collection.add( options );\n        },\n\n        /** Delete tab */\n        del: function( id ) {\n            this.collection.remove( id );\n        },\n\n        /** Delete all tabs */\n        delAll: function() {\n            this.collection.reset();\n        },\n\n        /** Show tab */\n        showTab: function( id ) {\n            this.collection.get( id ).set( 'hidden', false );\n        },\n\n        /** Hide tab */\n        hideTab: function( id ) {\n            this.collection.get( id ).set( 'hidden', true );\n        },\n\n        /** Adds a new tab */\n        _add: function( tab_model ) {\n            var self = this;\n            var options = tab_model.attributes;\n            this.$content.append( $( '<div/>' ).attr( 'id', options.id ).addClass( 'tab-pane' ).append( options.$el ) );\n            this.$nav.append( $( this._template_tab( options ) )\n                .show()\n                .tooltip( { title: options.tooltip, placement: 'bottom', container: self.$el } )\n                .on( 'click', function( e ) {\n                    e.preventDefault();\n                    self.show( options.id );\n                }));\n            if ( this.size() == 1 ) {\n                this.show( options.id );\n            }\n        },\n\n        /** Delete tab */\n        _remove: function( tab_model ) {\n            this.$( '#tab-' + tab_model.id ).remove();\n            this.$( '#' + tab_model.id ).remove();\n        },\n\n        /** Reset collection */\n        _reset: function() {\n            this.$nav.empty();\n            this.$content.empty();\n        },\n\n        /** Change tab */\n        _change: function( tab_model ) {\n            this.$( '#tab-' + tab_model.id )[ tab_model.get( 'hidden' ) ? 'hide' : 'show' ]();\n        },\n\n        /** Main template */\n        _template: function() {\n            return  $( '<div/>' ).addClass( 'ui-tabs tabbable tabs-left' )\n                                 .append( $( '<ul/>' ).addClass( 'tab-navigation nav nav-tabs' ) )\n                                 .append( $( '<div/>' ).addClass( 'tab-content' ) );\n        },\n\n        /** Tab template */\n        _template_tab: function( options ) {\n            var $tmpl = $( '<li/>' ).addClass( 'tab-element' )\n                                    .attr( 'id', 'tab-' + options.id )\n                                    .append( $( '<a/>' ).attr( 'id', 'tab-title-link-' + options.id ) );\n            var $href = $tmpl.find( 'a' );\n            options.icon && $href.append( $( '<i/>' ).addClass( 'tab-icon fa' ).addClass( options.icon ) );\n            $href.append( $( '<span/>' ).attr( 'id', 'tab-title-text-' + options.id )\n                                        .addClass( 'tab-title-text' )\n                                        .append( options.title ) );\n            return $tmpl;\n        }\n    });\n\n    return { View : View }\n});"]}