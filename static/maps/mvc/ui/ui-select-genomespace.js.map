{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["define","Utils","Ui","GenomespaceBrowser","View","Backbone","extend","initialize","options","self","this","browse_button","ButtonIcon","title","icon","tooltip","onclick","filename_textbox","Input","token_textbox","type","setElement","_template","$","$el","append","browseGenomeSpace","openFileBrowser","successCallback","data","token","value","new_value","_getValue","undefined","_setValue","values","split"],"mappings":"aACAA,QAAQ,cAAe,iBAAkB,6BADzC,SAAAC,EAAAC,EAAAC,GA2FA,OACIC,KArFOC,SAASD,KAAKE,QACrBC,WAAA,SAAAC,GAGI,IAAAC,EAAAC,KAGAA,KAAAC,cAAA,IAAAT,EAAAU,YACAC,MAAKF,SACDE,KAAc,gBACdC,QAAc,qBACdC,QAAc,WACdC,EAAAA,uBAKJN,KAAAO,iBAAA,IAAAf,EAAAgB,MAGAR,KAAAS,cAAA,IAAAjB,EAAAgB,OACAE,KAAKD,aAILT,KAAAW,WAAAX,KAAAY,UAAAd,IACAE,KAAAa,EAAA,wBAAqBD,OAAUd,KAA/BG,cAAAa,KACAd,KAAAa,EAAA,2BAAAE,OAAAf,KAAsCO,iBAAmBO,KACzDd,KAAAa,EAAA,wBAAOE,OAA2BA,KAAAA,cAAYR,MAIlDS,kBAAA,SAAAlB,GACAkB,IAAAA,EAAAA,KACIvB,EAAAwB,iBACAxB,gBAAAA,SAAmBwB,GACfC,EAAAA,MAAAA,EAAAA,YAAiB,IAAAC,EAAAC,WAMzBR,UAAA,SAAAd,GACAc,MAAAA,6SAcAS,MAAQ,SAAUC,GAWlBC,QAAWC,IAAXD,EAKA,OAAAvB,KAAAuB,YAJIvB,KAAAyB,UAAYlB,IASVgB,UAAA,WACD,OAAAvB,KAAAO,iBAAAc,QACJ,IAAArB,KAAAS,cAAAY,SAILI,UAAO,SAAAH,GACH5B,IADJgC,OAAAJ,EAAAK,MAAA,KA1FA3B,KAAAO,iBAAAc,MAAAK,OAAA,IAoFU1B,KAAKS,cAAcY,MAAMK,OAAO","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-misc', 'mvc/tool/tool-genomespace'],\n        function(Utils, Ui, GenomespaceBrowser) {\n\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n\n        // link this\n        var self = this;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title       : 'Browse',\n            icon        : 'fa fa-sign-in',\n            tooltip     : 'Browse GenomeSpace',\n            onclick     : function() {\n                self.browseGenomeSpace();\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create genomespace token textbox\n        this.token_textbox = new Ui.Input({\n          type       : 'password'        \n        });\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$('.ui-gs-browse-button').append(this.browse_button.$el);\n        this.$('.ui-gs-filename-textbox').append(this.filename_textbox.$el);\n        this.$('.ui-gs-token-textbox').append(this.token_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(data.destination + \"^\" + data.token);\n            }\n        });\n    },\n    \n    /** Main Template */\n    _template: function(options) {\n        return  '<div class=\"ui-gs-select-file\">' +\n                    '<div class=\"ui-gs-browse-field\">' +\n                        '<span class=\"ui-gs-browse-button\" />' +\n                        '<span class=\"ui-gs-filename-textbox\" />' +\n                    '</div>' +\n                    '<div class=\"ui-gs-token-field\">' +\n                        '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n                        '<span class=\"ui-gs-token-textbox\" />' +\n                    '</div>' +\n                '</div>';\n    },\n    \n    /** Return/Set currently selected genomespace filename/token */\n    value : function (new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        }\n        else {\n          return this._getValue();\n        }\n    },\n    \n    // get value\n    _getValue: function() {\n        return this.filename_textbox.value() +\n            \"^\" + this.token_textbox.value();\n    },\n    \n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n          values = new_value.split(\"^\");\n          this.filename_textbox.value(values[0]);\n          this.token_textbox.value(values[1]);\n        }\n    },\n    \n});\n\nreturn {\n    View: View\n}\n\n});\n"]}