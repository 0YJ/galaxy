{"version":3,"sources":["mvc/collection/collection-li-edit.js"],"names":["define","DC_LI","DATASET_LI_EDIT","BASE_MVC","_l","DCListItemView","DCListItemEdit","extend","initialize","attributes","prototype","call","this","toString","model","DCEListItemView","DCEListItemEdit","DatasetDCEListItemEdit","DatasetListItemEdit","_fetchModelDetails","view","inReadyState","hasDetails","fetch","silent","jQuery","when","_renderDeleteButton","templates","_","titleBar","DatasetDCEListItemView","NestedDCDCEListItemEdit","NestedDCDCEListItemView"],"mappings":"AAAAA,QACI,+BACA,8BACA,eACA,sBACD,SAAUC,EAAOC,EAAiBC,EAAUC,GAE/C,YAEA,IAAIC,GAAiBJ,EAAMI,eAGvBC,EAAiBD,EAAeE,QAIhCC,WAAa,SAAUC,GACnBJ,EAAeK,UAAUF,WAAWG,KAAMC,KAAMH,IAKpDI,SAAW,WAEP,MAAO,mBADaD,KAAW,MAAIA,KAAKE,MAAQ,GAAK,cACZ,OAM7CC,EAAkBd,EAAMc,gBAGxBC,EAAkBD,EAAgBR,QAKlCC,WAAc,SAAUC,GACpBM,EAAgBL,UAAUF,WAAWG,KAAMC,KAAMH,IAKrDI,SAAW,WAEP,MAAO,oBADaD,KAAW,MAAIA,KAAKE,MAAQ,GAAK,cACX,OAW9CG,EAAyBf,EAAgBgB,oBAAoBX,QAI7DC,WAAc,SAAUC,GACpBP,EAAgBgB,oBAAoBR,UAAUF,WAAWG,KAAMC,KAAMH,IAQzEU,mBAAqB,WACjB,GAAIC,GAAOR,IACX,OAAIQ,GAAKN,MAAMO,iBAAmBD,EAAKN,MAAMQ,aAClCF,EAAKN,MAAMS,OAAQC,QAAQ,IAE/BC,OAAOC,QAIlBC,oBAAsB,WAClB,MAAO,OAKXd,SAAW,WAEP,MAAO,2BADaD,KAAW,MAAIA,KAAKE,MAAQ,GAAK,cACJ,MA8BrD,OAxBJG,GAAuBP,UAAUkB,UAAa,WAE1C,MAAOC,GAAEtB,UAAYL,EAAgBgB,oBAAoBR,UAAUkB,WAC/DE,SAAW7B,EAAM8B,uBAAuBrB,UAAUkB,UAAUE,eAsB5DxB,eAA0BA,EAC1BU,gBAA0BA,EAC1BC,uBAA0BA,EAC1Be,wBAhBsB/B,EAAMgC,wBAAwB1B,QAIxDM,SAAW,WAEP,MAAO,4BADaD,KAAW,MAAIA,KAAKE,MAAQ,GAAK,cACH","file":"../../../scripts/mvc/collection/collection-li-edit.js","sourcesContent":["define([\n    \"mvc/collection/collection-li\",\n    \"mvc/dataset/dataset-li-edit\",\n    \"mvc/base-mvc\",\n    \"utils/localization\"\n], function( DC_LI, DATASET_LI_EDIT, BASE_MVC, _l ){\n\n'use strict';\n//==============================================================================\nvar DCListItemView = DC_LI.DCListItemView;\n/** @class Edit view for DatasetCollection.\n */\nvar DCListItemEdit = DCListItemView.extend(\n/** @lends DCListItemEdit.prototype */{\n\n    /** override to add linkTarget */\n    initialize : function( attributes ){\n        DCListItemView.prototype.initialize.call( this, attributes );\n    },\n\n    // ......................................................................... misc\n    /** String representation */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'DCListItemEdit(' + modelString + ')';\n    }\n});\n\n\n//==============================================================================\nvar DCEListItemView = DC_LI.DCEListItemView;\n/** @class Read only view for DatasetCollectionElement.\n */\nvar DCEListItemEdit = DCEListItemView.extend(\n/** @lends DCEListItemEdit.prototype */{\n//TODO: this might be expendable - compacted with HDAListItemView\n\n    /** set up */\n    initialize  : function( attributes ){\n        DCEListItemView.prototype.initialize.call( this, attributes );\n    },\n\n    // ......................................................................... misc\n    /** String representation */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'DCEListItemEdit(' + modelString + ')';\n    }\n});\n\n\n//==============================================================================\n// NOTE: this does not inherit from DatasetDCEListItemView as you would expect\n//TODO: but should - if we can find something simpler than using diamond\n/** @class Editable view for a DatasetCollectionElement that is also an DatasetAssociation\n *      (a dataset contained in a dataset collection).\n */\nvar DatasetDCEListItemEdit = DATASET_LI_EDIT.DatasetListItemEdit.extend(\n/** @lends DatasetDCEListItemEdit.prototype */{\n\n    /** set up */\n    initialize  : function( attributes ){\n        DATASET_LI_EDIT.DatasetListItemEdit.prototype.initialize.call( this, attributes );\n    },\n\n    // NOTE: this does not inherit from DatasetDCEListItemView - so we duplicate this here\n    //TODO: fix\n    /** In this override, only get details if in the ready state.\n     *  Note: fetch with no 'change' event triggering to prevent automatic rendering.\n     */\n    _fetchModelDetails : function(){\n        var view = this;\n        if( view.model.inReadyState() && !view.model.hasDetails() ){\n            return view.model.fetch({ silent: true });\n        }\n        return jQuery.when();\n    },\n\n    /** Override to remove delete button */\n    _renderDeleteButton : function(){\n        return null;\n    },\n\n    // ......................................................................... misc\n    /** String representation */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'DatasetDCEListItemEdit(' + modelString + ')';\n    }\n});\n\n// ............................................................................ TEMPLATES\n/** underscore templates */\nDatasetDCEListItemEdit.prototype.templates = (function(){\n\n    return _.extend( {}, DATASET_LI_EDIT.DatasetListItemEdit.prototype.templates, {\n        titleBar : DC_LI.DatasetDCEListItemView.prototype.templates.titleBar\n    });\n}());\n\n\n//==============================================================================\n/** @class Read only view for a DatasetCollectionElement that is also a DatasetCollection\n *      (a nested DC).\n */\nvar NestedDCDCEListItemEdit = DC_LI.NestedDCDCEListItemView.extend(\n/** @lends NestedDCDCEListItemEdit.prototype */{\n\n    /** String representation */\n    toString : function(){\n        var modelString = ( this.model )?( this.model + '' ):( '(no model)' );\n        return 'NestedDCDCEListItemEdit(' + modelString + ')';\n    }\n});\n\n\n//==============================================================================\n    return {\n        DCListItemEdit          : DCListItemEdit,\n        DCEListItemEdit         : DCEListItemEdit,\n        DatasetDCEListItemEdit  : DatasetDCEListItemEdit,\n        NestedDCDCEListItemEdit : NestedDCDCEListItemEdit\n    };\n});\n"]}