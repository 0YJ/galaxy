{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["define","CollectionCreatorMixin","_validationWarning","what","clear","this","$","add","focus","select","removeClass","addClass","_changeHideOriginals","ev","hideOriginals","prop","_changeName","_getName","_nameCheckForEnter","keyCode","blocking","_clickCreate","_","escape","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","attr","find","html","_hideAlert","_cancelCreate","oncancel","call","name","createList","_setUpCommonSettings","attributes","defaultHideSourceItems","_renderFooter","speed","callback","instance","$footer","empty","templates","footer","each","footerSettings","property","selector","_creatorTemplates","main","template","join"],"mappings":"AAAAA,UACG,WA0HC,OACIC,wBAnHJC,mBAAqB,SAAUC,EAAMC,GAEpB,SAATD,IACAA,EAAOE,KAAKC,EAAG,oBAAqBC,IAAKF,KAAKC,EAAG,4BACjDD,KAAKC,EAAG,oBAAqBE,QAAQC,UAErCL,GACAD,EAAOA,GAAQE,KAAKC,EAAG,uBACvBH,EAAKO,YAPc,uBASnBP,EAAKQ,SATc,uBAa3BC,qBAAsB,SAAUC,GAC5BR,KAAKS,cAAgBT,KAAKC,EAAG,mBAAoBS,KAAK,YAK1DC,YAAc,SAAUH,GACpBR,KAAKH,mBAAoB,SAAUG,KAAKY,aAI5CC,mBAAqB,SAAUL,GACR,KAAfA,EAAGM,SAAmBd,KAAKe,UAC3Bf,KAAKgB,gBAKbJ,SAAW,WACP,MAAOK,GAAEC,OAAQlB,KAAKC,EAAG,oBAAqBkB,QAKlDC,eAAiB,SAAUZ,GACvBA,EAAGa,kBACHrB,KAAKC,EAAG,cAAeK,SAAU,YACjCN,KAAKC,EAAG,cAAeqB,QAG3BC,eAAiB,SAAUf,GACvBA,EAAGa,kBACHrB,KAAKC,EAAG,cAAeI,YAAa,YACpCL,KAAKC,EAAG,cAAeuB,QAG3BC,YAAc,SAAUjB,GACpBA,EAAGa,kBACHrB,KAAKC,EAAG,cAAeyB,YAAa,YACpC1B,KAAKC,EAAG,cAAe0B,UAI3BC,WAAa,SAAUC,EAASC,GAC5BA,EAAaA,GAAc,eAC3B9B,KAAKC,EAAG,cAAeqB,OACvBtB,KAAKC,EAAG,kBACH8B,KAAM,QAAS,2BAA4BzB,SAAUwB,GAAaN,OAClEQ,KAAM,kBAAmBC,KAAMJ,IAGxCK,WAAa,SAAUL,GACnB7B,KAAKC,EAAG,cAAeuB,OACvBxB,KAAKC,EAAG,kBAAmBqB,QAG/Ba,cAAe,SAAU3B,GACQ,kBAAlBR,MAAKoC,UACZpC,KAAKoC,SAASC,KAAMrC,OAK5BgB,aAAe,SAAUR,GACrB,GAAI8B,GAAOtC,KAAKY,UACX0B,GAEOtC,KAAKe,UACbf,KAAKuC,WAAYD,GAFjBtC,KAAKH,mBAAoB,SAMjC2C,qBAAuB,SAAUC,GAC7BzC,KAAKS,cAAgBgC,EAAWC,yBAA0B,GAI9DC,cAAgB,SAAUC,EAAOC,GAC7B,GAAIC,GAAW9C,KACX+C,EAAU/C,KAAKC,EAAG,WAAY+C,QAAQf,KAAMjC,KAAKiD,UAAUC,SAO/D,OANAjC,GAAEkC,KAAMnD,KAAKoD,eAAgB,SAAUC,EAAUC,GAC7CtD,KAAKC,EAAGqD,GAAW5C,KAAM,UAAWoC,EAAUO,MAErB,kBAAlBrD,MAAKoC,UACZpC,KAAKC,EAAG,sBAAuBuB,OAE5BuB,GAGXQ,mBACIC,KAAOvC,EAAEwC,UACL,8CACA,yDACA,+CACFC,KAAK","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["define([\n], function( ){\n\n/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning : function( what, clear ){\n        var VALIDATION_CLASS = 'validation-warning';\n        if( what === 'name' ){\n            what = this.$( '.collection-name' ).add( this.$( '.collection-name-prompt' ) );\n            this.$( '.collection-name' ).focus().select();\n        }\n        if( clear ){\n            what = what || this.$( '.' + VALIDATION_CLASS );\n            what.removeClass( VALIDATION_CLASS );\n        } else {\n            what.addClass( VALIDATION_CLASS );\n        }\n    },\n\n    _changeHideOriginals: function( ev ) {\n        this.hideOriginals = this.$( '.hide-originals' ).prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName : function( ev ){\n        this._validationWarning( 'name', !!this._getName() );\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter : function( ev ){\n        if( ev.keyCode === 13 && !this.blocking ){\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName : function(){\n        return _.escape( this.$( '.collection-name' ).val() );\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).addClass( 'expanded' );\n        this.$( '.more-help' ).hide();\n    },\n    /** collapse help */\n    _clickLessHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).removeClass( 'expanded' );\n        this.$( '.more-help' ).show();\n    },\n    /** toggle help */\n    _toggleHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).toggleClass( 'expanded' );\n        this.$( '.more-help' ).toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert : function( message, alertClass ){\n        alertClass = alertClass || 'alert-danger';\n        this.$( '.main-help' ).hide();\n        this.$( '.header .alert' )\n            .attr( 'class', 'alert alert-dismissable' ).addClass( alertClass ).show()\n            .find( '.alert-message' ).html( message );\n    },\n    /** hide the alerts at the top */\n    _hideAlert : function( message ){\n        this.$( '.main-help' ).show();\n        this.$( '.header .alert' ).hide();\n    },\n\n    _cancelCreate: function( ev ){\n        if( typeof this.oncancel === 'function' ){\n            this.oncancel.call( this );\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate : function( ev ){\n        var name = this._getName();\n        if( !name ){\n            this._validationWarning( 'name' );\n        } else if( !this.blocking ){\n            this.createList( name );\n        }\n    },\n\n    _setUpCommonSettings : function( attributes ) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter : function( speed, callback ){\n        var instance = this;\n        var $footer = this.$( '.footer' ).empty().html( this.templates.footer() );\n        _.each( this.footerSettings, function( property, selector ) {\n            this.$( selector ).prop( 'checked', instance[ property ] );\n        });\n        if( typeof this.oncancel === 'function' ){\n            this.$( '.cancel-create.btn' ).show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main : _.template([\n            '<div class=\"header flex-row no-flex\"></div>',\n            '<div class=\"middle flex-row flex-row-container\"></div>',\n            '<div class=\"footer flex-row no-flex\"></div>'\n        ].join('')),\n    }\n\n}\n\n//==============================================================================\n    return {\n        CollectionCreatorMixin: CollectionCreatorMixin\n    };\n});\n"]}