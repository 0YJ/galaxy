{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["CollectionCreatorMixin","_validationWarning","what","clear","add","this","$","VALIDATION_CLASS","addClass","_changeHideOriginals","ev","prop","_changeName","_getName","_nameCheckForEnter","blocking","keyCode","_","escape","val","_clickMoreHelp","stopPropagation","_clickLessHelp","removeClass","_toggleHelp","toggleClass","_showAlert","message","alertClass","show","_hideAlert","_cancelCreate","hide","oncancel","call","_clickCreate","name","createList","_setUpCommonSettings","attributes","_renderFooter","defaultHideSourceItems","self","selector","speed","callback","$footer","empty","html","templates","footer","each","property","_creatorTemplates","main","template","join"],"mappings":"oEAGA,IAAIA,wBAHJC,mBAAA,SAAAC,EAAAC,GAOqB,SAATD,IAJRF,EAAAA,KAAAA,EAAAA,oBAAyBI,IACzBC,KAAAC,EAAA,4BAEQC,KAAAA,EAAAA,oBACAL,QACAA,UAMHC,GACGA,EAAOD,GAAAG,KAAAC,EAAA,wBACPJ,YAVmB,sBASvBA,EAGOM,SAZgB,uBAiB3BC,qBAAsB,SAASC,GAA/BD,KAAAA,cAAsBJ,KAAAC,EAAA,mBAAAK,KAAa,YAKnCC,YAAA,SAAAF,GACAE,KAAAA,mBAAa,SAAaP,KAAAQ,aAI1BC,mBAAA,SAAAJ,GACoB,KAApBI,EAAAA,SAAoBT,KAAAU,UACZL,KAAGM,gBAKXH,SAAA,WACAA,OAAUI,EAAAC,OAAAb,KAAAC,EAAA,oBAAWa,QAKrBC,eAAA,SAAAV,GACAU,EAAAA,kBACIV,KAAGW,EAAAA,cAAHb,SAAA,YACAH,KAAKC,EAAE,cAAcE,QAGzBc,eAAA,SAAAZ,GACAY,EAAAA,kBACIZ,KAAGW,EAAAA,cAAHE,YAAA,YACAlB,KAAKC,EAAE,cAAciB,QAGzBC,YAAA,SAAAd,GACAc,EAAAA,kBACId,KAAGW,EAAAA,cAAHI,YAAA,YACApB,KAAKC,EAAE,cAAcmB,UAIzBC,WAAA,SAAAC,EAAAC,GACAF,EAAYE,GAAA,eACRA,KAAAA,EAAAA,cAAaA,OACbvB,KAAKC,EAAE,kBACFA,KAAE,QAAA,2BAlEcE,SAAAoB,GAyEzBC,OACAC,KAAY,kBACHxB,KAAEqB,IADXG,WAAY,SAASH,GAKrBI,KAAAA,EAAAA,cAAeF,OACXxB,KAAIC,EAAA,kBAAA0B,QAGPD,cAnFwB,SAAArB,GAgFQ,mBAAlBL,KAAK4B,UAKpB5B,KAAA4B,SAAAC,KAAA7B,OAKK8B,aAAM,SAAUpB,GACb,IAAAqB,EAAKC,KAAAA,WACRD,EAFW/B,KAAKU,UAKrBuB,KAAAA,WAAsBF,GA/FG/B,KAAAJ,mBAAA,SAmGzBqC,qBAAA,SAAAC,GACAC,KAAAA,cAAeD,EAAAE,yBAA0B,GAMjCC,cAAOC,SAAPC,EAAsBC,GACzB,IAFDH,EAAArC,KAGIyC,EAAOzC,KAAK4B,EAAAA,WACZc,QACHC,KAAA3C,KAAA4C,UAAAC,UA9GT,OA+GQjC,EAAAkC,KAAOL,KAAAA,eAAP,SAAAM,EAAAT,GA/GqBD,EAAApC,EAAAqC,GAAAhC,KAAA,UAAA+B,EAAAU,MAkHN,mBAAnBC,KAAmBpB,UACfqB,KAAQC,EAAAA,sBAEA1B,OArHhBiB,GAkHIO,mBAaArD,KAAAA,EAAAA,UAVY,8CACA,yDACA,+CACFwD,KAAK,wBAOfxD,uBAAwBA","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning: function(what, clear) {\n        var VALIDATION_CLASS = \"validation-warning\";\n        if (what === \"name\") {\n            what = this.$(\".collection-name\").add(\n                this.$(\".collection-name-prompt\")\n            );\n            this.$(\".collection-name\")\n                .focus()\n                .select();\n        }\n        if (clear) {\n            what = what || this.$(\".\" + VALIDATION_CLASS);\n            what.removeClass(VALIDATION_CLASS);\n        } else {\n            what.addClass(VALIDATION_CLASS);\n        }\n    },\n\n    _changeHideOriginals: function(ev) {\n        this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName: function(ev) {\n        this._validationWarning(\"name\", !!this._getName());\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter: function(ev) {\n        if (ev.keyCode === 13 && !this.blocking) {\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName: function() {\n        return _.escape(this.$(\".collection-name\").val());\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").addClass(\"expanded\");\n        this.$(\".more-help\").hide();\n    },\n    /** collapse help */\n    _clickLessHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").removeClass(\"expanded\");\n        this.$(\".more-help\").show();\n    },\n    /** toggle help */\n    _toggleHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").toggleClass(\"expanded\");\n        this.$(\".more-help\").toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert: function(message, alertClass) {\n        alertClass = alertClass || \"alert-danger\";\n        this.$(\".main-help\").hide();\n        this.$(\".header .alert\")\n            .attr(\"class\", \"alert alert-dismissable\")\n            .addClass(alertClass)\n            .show()\n            .find(\".alert-message\")\n            .html(message);\n    },\n    /** hide the alerts at the top */\n    _hideAlert: function(message) {\n        this.$(\".main-help\").show();\n        this.$(\".header .alert\").hide();\n    },\n\n    _cancelCreate: function(ev) {\n        if (typeof this.oncancel === \"function\") {\n            this.oncancel.call(this);\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate: function(ev) {\n        var name = this._getName();\n        if (!name) {\n            this._validationWarning(\"name\");\n        } else if (!this.blocking) {\n            this.createList(name);\n        }\n    },\n\n    _setUpCommonSettings: function(attributes) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter: function(speed, callback) {\n        var self = this;\n        var $footer = this.$(\".footer\")\n            .empty()\n            .html(this.templates.footer());\n        _.each(this.footerSettings, function(property, selector) {\n            self.$(selector).prop(\"checked\", self[property]);\n        });\n        if (typeof this.oncancel === \"function\") {\n            this.$(\".cancel-create.btn\").show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main: _.template(\n            [\n                '<div class=\"header flex-row no-flex\"></div>',\n                '<div class=\"middle flex-row flex-row-container\"></div>',\n                '<div class=\"footer flex-row no-flex\"></div>'\n            ].join(\"\")\n        )\n    }\n};\n\n//==============================================================================\nexport default {\n    CollectionCreatorMixin: CollectionCreatorMixin\n};\n"]}