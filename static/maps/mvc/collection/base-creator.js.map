{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["define","CollectionCreatorMixin","_validationWarning","what","clear","VALIDATION_CLASS","add","this","$","focus","select","addClass","_changeHideOriginals","ev","prop","_changeName","_getName","_nameCheckForEnter","blocking","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","removeClass","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","attr","find","html","_hideAlert","_cancelCreate","oncancel","call","_clickCreate","name","createList","_setUpCommonSettings","hideOriginals","attributes","defaultHideSourceItems","_renderFooter","instance","speed","callback","$footer","_","footerSettings","empty","property","selector","footer","each","main","template","join"],"mappings":"YAAAA,WACG,WA0HC,OACIC,wBApHJC,mBAAA,SAAAC,EAAAC,GAEQC,SAAJF,IACAA,EAAIA,KAAAA,EAAS,oBAAQG,IAAAC,KAAAC,EAAA,4BACjBL,KAAAA,EAAAA,oBAAeM,QAARC,UAEVN,GACDD,EAAIC,GAAOG,KAAAC,EAAA,uBACPL,EAAAA,YAPa,uBAShBA,EAHDQ,SANiB,uBAcrBC,qBAAsB,SAAUC,GAAhCD,KAAAA,cAAAA,KAAsBJ,EAAA,mBAAAM,KAAA,YAKtBC,YAAA,SAAAF,GACAE,KAAAA,mBAAc,SAAUF,KAAIG,aAI5BC,mBAAA,SAAAJ,GACAI,KAAAA,EAAAA,SAAqBV,KAAAW,UACjBX,KAAIM,gBAKRG,SAAA,WACAA,MAAAA,GAAAA,OAAWT,KAAAC,EAAA,oBAAUW,QAKrBC,eAAA,SAAAP,GACAO,EAAAA,kBACIP,KAAAA,EAAGQ,cAAHV,SAAA,YACAJ,KAAAC,EAAA,cAAAc,QAGJC,eAAA,SAAAV,GACAU,EAAAA,kBACIV,KAAAA,EAAGQ,cAAHG,YAAA,YACAjB,KAAAC,EAAA,cAAAiB,QAGJC,YAAA,SAAAb,GACAa,EAAAA,kBACIb,KAAAA,EAAGQ,cAAHM,YAAA,YACApB,KAAAC,EAAA,cAAAoB,UAIJC,WAAA,SAAAC,EAAAC,GACAF,EAAaE,GAAA,eACTA,KAAAA,EAAAA,cAAaA,OACbxB,KAAAC,EAAA,kBACAwB,KAAQ,QAAA,2BACYrB,SAAAoB,GAA4BpB,OAhE3BsB,KAAA,kBAAAC,KAAAJ,IAqErBK,WAAK3B,SAAGsB,GACRvB,KAAAC,EAAA,cAAQiB,OACXlB,KAvEwBC,EAAA,kBAAAc,QA0ErBc,cAAI,SAAYC,GACQ,kBAApB9B,MAAK8B,UACR9B,KAAA8B,SAAAC,KAAA/B,OAKDgC,aAAIC,SAAYxB,GAChB,GAAAwB,GAAKA,KAAMxB,UACPwB,GAEAjC,KAAKkC,UACRlC,KAAAkC,WAAAD,GAFAjC,KAFDL,mBAEO,SAMPwC,qBAAKC,SAAgBC,GACxBrC,KA3FwBoC,cAAAC,EAAAC,yBAAA,GA+FrBC,cAAIC,SAAWC,EAAfC,GACA,GAAAF,GAAIG,KACJC,EAAQ5C,KAAK6C,EAAAA,WAAgBC,QAAUC,KAAAA,KAAUC,UAAWC,SAO/D,OANOL,GAAAM,KAAAlD,KAAKC,eAAL,SAAA8C,EAAoCP,GACvCxC,KAFDC,EAAA+C,GAAAzC,KAAA,UAAAiC,EAAAO,MAIY,kBAAR/C,MAAQ8B,UACX9B,KAAAC,EAAA,sBAAAiB,OAtGoByB,GA2GrBQ,mBADeA,KAAAP,EAAAQ,UAEX,8CA5GZ,yDA8GY,+CAMZC,KAAA","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["define([\n], function( ){\n\n/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning : function( what, clear ){\n        var VALIDATION_CLASS = 'validation-warning';\n        if( what === 'name' ){\n            what = this.$( '.collection-name' ).add( this.$( '.collection-name-prompt' ) );\n            this.$( '.collection-name' ).focus().select();\n        }\n        if( clear ){\n            what = what || this.$( '.' + VALIDATION_CLASS );\n            what.removeClass( VALIDATION_CLASS );\n        } else {\n            what.addClass( VALIDATION_CLASS );\n        }\n    },\n\n    _changeHideOriginals: function( ev ) {\n        this.hideOriginals = this.$( '.hide-originals' ).prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName : function( ev ){\n        this._validationWarning( 'name', !!this._getName() );\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter : function( ev ){\n        if( ev.keyCode === 13 && !this.blocking ){\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName : function(){\n        return _.escape( this.$( '.collection-name' ).val() );\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).addClass( 'expanded' );\n        this.$( '.more-help' ).hide();\n    },\n    /** collapse help */\n    _clickLessHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).removeClass( 'expanded' );\n        this.$( '.more-help' ).show();\n    },\n    /** toggle help */\n    _toggleHelp : function( ev ){\n        ev.stopPropagation();\n        this.$( '.main-help' ).toggleClass( 'expanded' );\n        this.$( '.more-help' ).toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert : function( message, alertClass ){\n        alertClass = alertClass || 'alert-danger';\n        this.$( '.main-help' ).hide();\n        this.$( '.header .alert' )\n            .attr( 'class', 'alert alert-dismissable' ).addClass( alertClass ).show()\n            .find( '.alert-message' ).html( message );\n    },\n    /** hide the alerts at the top */\n    _hideAlert : function( message ){\n        this.$( '.main-help' ).show();\n        this.$( '.header .alert' ).hide();\n    },\n\n    _cancelCreate: function( ev ){\n        if( typeof this.oncancel === 'function' ){\n            this.oncancel.call( this );\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate : function( ev ){\n        var name = this._getName();\n        if( !name ){\n            this._validationWarning( 'name' );\n        } else if( !this.blocking ){\n            this.createList( name );\n        }\n    },\n\n    _setUpCommonSettings : function( attributes ) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter : function( speed, callback ){\n        var instance = this;\n        var $footer = this.$( '.footer' ).empty().html( this.templates.footer() );\n        _.each( this.footerSettings, function( property, selector ) {\n            this.$( selector ).prop( 'checked', instance[ property ] );\n        });\n        if( typeof this.oncancel === 'function' ){\n            this.$( '.cancel-create.btn' ).show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main : _.template([\n            '<div class=\"header flex-row no-flex\"></div>',\n            '<div class=\"middle flex-row flex-row-container\"></div>',\n            '<div class=\"footer flex-row no-flex\"></div>'\n        ].join('')),\n    }\n\n}\n\n//==============================================================================\n    return {\n        CollectionCreatorMixin: CollectionCreatorMixin\n    };\n});\n"]}