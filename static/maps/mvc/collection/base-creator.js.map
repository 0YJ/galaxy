{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["CollectionCreatorMixin","_validationWarning","what","clear","this","$","add","VALIDATION_CLASS","_changeHideOriginals","ev","hideOriginals","prop","_changeName","_getName","_nameCheckForEnter","keyCode","blocking","_","escape","val","_clickMoreHelp","stopPropagation","addClass","_clickLessHelp","removeClass","_toggleHelp","toggleClass","_showAlert","message","alertClass","hide","attr","show","find","_hideAlert","_cancelCreate","oncancel","call","_clickCreate","name","createList","_setUpCommonSettings","attributes","defaultHideSourceItems","footerSettings","self","$footer","empty","html","templates","footer","each","property","selector","_creatorTemplates","main","template","join"],"mappings":"2HAGA,IAAIA,GAEAC,mBAAoB,SAASC,EAAMC,GAElB,SAATD,IACAA,EAAOE,KAAKC,EAAE,oBAAoBC,IAL1CN,KAAAA,EAAAA,4BAEAC,KAAAA,EAAAA,oBACQM,QACAL,UAIAC,GAGHD,EAAAA,GAAAE,KAAAC,EAAA,wBACGF,YAfZ,sBAiBYD,EAAAA,SAjBZ,uBAqBKM,qBAlBwB,SAAAC,GAqBrBL,KAAKM,cAAgBN,KAAKC,EAAE,mBAAmBM,KAAK,YAGxDC,YAAA,SAAAH,GACAL,KAAAH,mBAAA,SAAAG,KAAAS,aAMAC,mBAAoB,SAASL,GAD7B,KAAAA,EAAAM,SAAAX,KAAAY,UACAF,KAAAA,gBAOAD,SAAU,WADV,OAAAI,EAAAC,OAAAd,KAAAC,EAAA,oBAAAc,QAKAC,eAAA,SAAAX,GACAA,EAAAY,kBACAD,KAAAA,EAAAA,cAAgBE,SAAA,YACZb,KAAAA,EAAGY,cAAAA,QAGNE,eAhDwB,SAAAd,GAiDzBA,EAAAY,kBACAE,KAAAA,EAAAA,cAAgBC,YAAA,YACZf,KAAAA,EAAGY,cAAAA,QAGNI,YAtDwB,SAAAhB,GAuDzBA,EAAAY,kBACAI,KAAAA,EAAAA,cAAaC,YAAA,YACTjB,KAAAA,EAAGY,cAAAA,UAMPM,WAAY,SAASC,EAASC,GAD9BA,EAAAA,GAAA,eACAF,KAAAA,EAAAA,cAAYG,OACRD,KAAAA,EAAAA,kBACAE,KAAA,QAAO,2BACPT,SAAOO,GAlEcG,OAyEzBC,KAAA,kBACAC,KAAAA,IAGCA,WA7EwB,SAAAN,GA2ErBxB,KAAKC,EAAE,cAAc2B,OAIzBG,KAAAA,EAAAA,kBAAeL,QAGVK,cAAA,SAAA1B,GAlFoB,mBAAAL,KAAAgC,UAiFjBhC,KAAKgC,SAASC,KAAKjC,OAQnBkC,aAAA,SAAKrC,GACR,IAAAsC,EAAMnC,KAAKS,WACR0B,EA3FiBnC,KAAAY,UA2FjBZ,KAAKoC,WAAWD,GACnBnC,KAAAH,mBAAA,SAGLwC,qBAAsB,SAASC,GAI/BtC,KAAAM,cAAAgC,EAAAC,yBAAA,GAMI1B,cAAO,SAAK2B,EAAAA,GACRC,IAAAA,EAAAA,KACHC,EAFD1C,KAAAC,EAAA,WAGA0C,QACIC,KAAA5C,KAAO6C,UAAAC,UAKI,OAJdjC,EAAAkC,KAAA/C,KAAAwC,eAAA,SAAAQ,EAAAC,GACDR,EAAAxC,EAAOyC,GAAPnC,KAAA,UAAAkC,EAAAO,MAH6B,mBAAlBhD,KAAKgC,UAMpBkB,KAAAA,EAAAA,sBAAmBtB,OAAAc,GAWvBQ,mBAVQC,KAAMtC,EAAEuC,UAEA,8CACA,yDACA,+CACFC,KAAK,kBAOfzD,uBAAwBA","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning: function(what, clear) {\n        var VALIDATION_CLASS = \"validation-warning\";\n        if (what === \"name\") {\n            what = this.$(\".collection-name\").add(\n                this.$(\".collection-name-prompt\")\n            );\n            this.$(\".collection-name\")\n                .focus()\n                .select();\n        }\n        if (clear) {\n            what = what || this.$(`.${VALIDATION_CLASS}`);\n            what.removeClass(VALIDATION_CLASS);\n        } else {\n            what.addClass(VALIDATION_CLASS);\n        }\n    },\n\n    _changeHideOriginals: function(ev) {\n        this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName: function(ev) {\n        this._validationWarning(\"name\", !!this._getName());\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter: function(ev) {\n        if (ev.keyCode === 13 && !this.blocking) {\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName: function() {\n        return _.escape(this.$(\".collection-name\").val());\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").addClass(\"expanded\");\n        this.$(\".more-help\").hide();\n    },\n    /** collapse help */\n    _clickLessHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").removeClass(\"expanded\");\n        this.$(\".more-help\").show();\n    },\n    /** toggle help */\n    _toggleHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").toggleClass(\"expanded\");\n        this.$(\".more-help\").toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert: function(message, alertClass) {\n        alertClass = alertClass || \"alert-danger\";\n        this.$(\".main-help\").hide();\n        this.$(\".header .alert\")\n            .attr(\"class\", \"alert alert-dismissable\")\n            .addClass(alertClass)\n            .show()\n            .find(\".alert-message\")\n            .html(message);\n    },\n    /** hide the alerts at the top */\n    _hideAlert: function(message) {\n        this.$(\".main-help\").show();\n        this.$(\".header .alert\").hide();\n    },\n\n    _cancelCreate: function(ev) {\n        if (typeof this.oncancel === \"function\") {\n            this.oncancel.call(this);\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate: function(ev) {\n        var name = this._getName();\n        if (!name) {\n            this._validationWarning(\"name\");\n        } else if (!this.blocking) {\n            this.createList(name);\n        }\n    },\n\n    _setUpCommonSettings: function(attributes) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter: function(speed, callback) {\n        var self = this;\n        var $footer = this.$(\".footer\")\n            .empty()\n            .html(this.templates.footer());\n        _.each(this.footerSettings, (property, selector) => {\n            self.$(selector).prop(\"checked\", self[property]);\n        });\n        if (typeof this.oncancel === \"function\") {\n            this.$(\".cancel-create.btn\").show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main: _.template(\n            [\n                '<div class=\"header flex-row no-flex\"></div>',\n                '<div class=\"middle flex-row flex-row-container\"></div>',\n                '<div class=\"footer flex-row no-flex\"></div>'\n            ].join(\"\")\n        )\n    }\n};\n\n//==============================================================================\nexport default {\n    CollectionCreatorMixin: CollectionCreatorMixin\n};\n"]}