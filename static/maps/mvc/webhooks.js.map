{"version":3,"sources":["mvc/webhooks.js"],"names":["define","WebhookModel","Backbone","Model","extend","defaults","Webhooks","Collection","model","WebhookView","View","el","options","me","this","urlRoot","fetch","success","render","webhook","toJSON","name","styles","$","type","text","appendTo","html","script","webhooks","Galaxy","url","async","callback"],"mappings":"YAGAA,WAAW,WAAXA,GAAOC,GAAeC,SAAAC,MAAAC,QAGdC,UADAJ,UAAAA,KAAJK,EAAAJ,SAAAK,WAAAH,QAOII,MAAOP,IADXQ,EAAAP,SAAAQ,KAAAN,QAKIO,GAAI,gBAAJA,WAAI,SAD+BC,GAI/B,GAAIC,GAAKC,IAATA,MAAID,MAAJ,GAAAZ,GAGAa,KAAKN,MAAMO,QAAUH,EAAQG,QAD7BD,KAAKN,MAALQ,OACAC,QAAWF,WACNP,EAAMQ,aAKdE,OAbkC,WAgB/B,GAAIC,GAAUL,KAAKN,MAAMY,QAIzB,OAJAN,MAAIK,IAAAA,KAAU,YAAWC,EAAzBC,KAAA,YAGIF,EAAQG,QAAQC,EAAE,YAAaC,KAAM,aAAaC,KAAKN,EAAQG,QAAQI,SAAS,QADpFP,EAASQ,QAAKJ,EAAA,aAAsBF,KAAtB,oBAAdI,KAAAN,EAAAS,QAAAF,SAAA,QAEIP,OAcX,QAGGb,SAAUA,EADdG,YAAOA,EACHH,IArCJ,SAAAM,GA2BI,GAAIiB,GAAW,GAAIvB,EAAnBuB,GAAIA,IAAWC,OAAIxB,KAAnBM,EAAAmB,IAGAF,EAASb,OADTa,UAA6BjB,KAAdkB,EAAAE,OAAfpB,EAAAoB,MACAH,QAASb,EAAMiB","file":"../../scripts/mvc/webhooks.js","sourcesContent":["/**\n  Webhooks\n**/\ndefine([], function() {\n\n    var WebhookModel = Backbone.Model.extend({\n        defaults: {\n            activate: false\n        }\n    });\n\n    var Webhooks = Backbone.Collection.extend({\n        model: WebhookModel\n    });\n\n    var WebhookView = Backbone.View.extend({\n        el: '#webhook-view',\n\n        initialize: function(options) {\n            var me = this;\n\n            this.model = new WebhookModel();\n            this.model.urlRoot = options.urlRoot;\n            this.model.fetch({\n                success: function() {\n                    me.render();\n                }\n            });\n        },\n\n        render: function() {\n            var webhook = this.model.toJSON();\n\n            this.$el.html('<div id=\"' + webhook.name + '\"></div>');\n            if (webhook.styles) $('<style/>', {type: 'text/css'}).text(webhook.styles).appendTo('head');\n            if (webhook.script) $('<script/>', {type: 'text/javascript'}).text(webhook.script).appendTo('head');\n            \n            return this;\n        }\n    });\n\n    var add = function(options) {\n        var webhooks = new Webhooks();\n\n        webhooks.url = Galaxy.root + options.url;\n        webhooks.fetch({\n            async: (typeof options.async != 'undefined') ? options.async : true,\n            success: options.callback\n        });\n    };\n\n    return {\n        Webhooks: Webhooks,\n        WebhookView: WebhookView,\n        add: add\n    };\n});\n"]}