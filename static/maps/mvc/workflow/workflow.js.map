{"version":3,"file":"workflow.js","sources":["../../../src/mvc/workflow/workflow.js"],"names":["define","Manager","Backbone","View","extend","initialize","options","layout_editor","workflow","layout","fit_canvas_to_nodes","self","scroll_to_nodes","canvas_manager","draw_overview","edit_workflow_attributes","clear_active_node","$","hide","show","show_overview","jStorage","set","css","hide_overview","this","urls","active_ajax_call","close_editor","check_changes_in_active_form","has_changes","do_close","window","onbeforeunload","undefined","document","location","workflow_index","show_modal","Cancel","hide_modal","Save Changes","save_current_workflow","Don't Save","eventObj","success_callback","show_message","rectify_workflow_outputs","savefn","callback","ajax","url","save_workflow","type","data","id","workflow_data","JSON","stringify","to_simple","_","dataType","success","body","text","message","errors","addClass","errlist","each","i","v","appendTo","append","name","stored","show_workflow_parameters","Ok","bind","unbind","lt_ie_7","click","focus","select","keyup","value","length","reset_tool_search","lastValue","q","timer","clearTimeout","setTimeout","get","tool_search","find","s","map","n","index","parent","this_label","next","no_visible_tools","hasClass","is","CanvasManager","reset","datatypes","parse","galaxy_config","root","async","responseText","get_datatypes","cache","populate_datatype_info","load_workflow","from_simple","upgrade_message","upgrade_messages","k","parseInt","nodes","vv","Continue","beforeSubmit","ajaxStart","ajaxError","e","x","statusText","Ignore error","make_popupmenu","Save","Run","run_workflow","Edit Attributes","Auto Re-layout","Close","overview_size","width","height","d","op","offsetParent","opo","offset","new_size","Math","max","offsetX","left","offsetY","top","wrap","last_expanded","slideUp","slideDown","async_save_text","rename_async","annotate_async","remove_all","Workflow","cv","cc","add_node_for_tool","title","node","add_node","get_new_module_info","tool_id","global","init_field_data","error","m","status","add_node_for_module","display_pja","pja","get_pja_form","action_to_rem","closest","children","remove","active_node","post_job_actions","active_form_has_changes","display_pja_list","pja_list","display_file_list","addlist","out_terminal","output_terminals","new_pja","action_type","target","output_name","parameter_re","workflow_parameters","wf_parm_container","wf_parm_box","new_parameter_content","matches","form_matches","form_html","match","concat","action_arguments","action_argument","arg_matches","element","inArray","push","substring","html","show_tool_form","cls","$container","$current","$el","Utils","isJSON","ToolsForm","scrollTop"],"mappings":"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"}