{"version":3,"file":"workflow-canvas.js","sources":["../../../src/mvc/workflow/workflow-canvas.js"],"names":["define","CanvasManager","app","canvas_viewport","overview","this","cv","cc","find","oc","ov","init_drag","ScrollPanel","panel","$","extend","prototype","self","move","x","y","Math","min","width","max","height","css","left","top","background-position-x","background-position-y","update_viewport_overlay","each","scroll_panel","x_adjust","y_adjust","bind","o","offset","p","position","e","d","offsetX","offsetY","workflow","fit_canvas_to_nodes","draw_overview","click","hasClass","removeClass","in_w","in_h","o_w","o_h","new_x_offset","new_y_offset","addClass","op","offsetParent","opo","new_size","cc_pos","shift_h","shift_w","canvas_el","size","parent","c","get","getContext","cv_w","cv_h","ceil","attr","nodes","id","node","fillStyle","strokeStyle","lineWidth","node_element","element","w","h","tool_errors","undefined","workflow_outputs","length","fillRect","strokeRect","test","onmove","clearTimeout","timeout","pageX","pageY","panel_pos","panel_w","panel_h","viewport","viewport_w","viewport_h","viewport_offset","min_x","min_y","max_x","max_y","p_min_x","p_min_y","p_max_x","p_max_y","moved","close_dist","nudge","t","setTimeout","stop"],"mappings":"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"}