{"version":3,"sources":["mvc/toolshed/toolshed-model.js"],"names":["define","ToolShedModel","Backbone","Model","extend","defaults","url","name","ToolShedsCollection","Collection","Galaxy","root","ToolShedCategoriesModel","ToolShedCategoriesCollection","ToolShedCategoryModel","ToolShedCategoryCollection","ToolShedRepositoryModel","ToolShedRepositoryCollection","RepoQueueModel","RepoQueueCollection","model","this","repositories","Array","collection","JSON","parse","localStorage","repositories_enc","_","each","queue_keys","key","push","prototype","fetch","call","RepoStatusModel","RepoStatusCollection","WorkflowToolsModel","ShedModel","ShedsCollection","Category","Categories","CategoryModel","CategoryCollection","RepositoryModel","RepositoryCollection","RepoQueue","WorkflowToolsCollection"],"mappings":"YAAAA,WAAW,WAAXA,GAAOC,GAAeC,SAAAC,MAAAC,QAGdC,UAAWC,IAAO,kCAAmCC,KAAQ,yBAD7DN,QAAAA,OAAgBC,KAAAA,kBAApBM,EAAAN,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,gBADnBH,MAAAA,IAAJI,EAAAV,SAAAC,MAAAC,QAMIC,cADAO,QAAAA,OAAAA,KAAAA,2BAAJC,EAAAX,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,yBADnBE,MAAAA,IAAJC,EAAAZ,SAAAC,MAAAC,QAMIC,cADAS,QAAAA,OAAAA,KAAAA,2BAAJC,EAAAb,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,yBADnBI,MAAAA,IAAJC,EAAAd,SAAAC,MAAAC,QAMIC,cADAW,QAAAA,OAAAA,KAAAA,6BAAJC,EAAAf,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,2BADnBM,MAAAA,IAAJC,EAAAhB,SAAAC,MAAAC,QAMIE,IAAK,MADTa,EAAAjB,SAAAO,WAAAL,QAKIE,IAAK,IADLa,MAAAA,EACAb,MAAK,WACLc,GAAOF,GAF0CG,KAG1CC,EAAAC,QACCC,EAAJC,KAAAC,MAAAC,aAAAL,cACIA,EAAAA,OAAeC,KAAnBK,EAOC,OANDC,GAAAC,KAAIF,EAAAA,SAAwBF,GACxBK,GAAAA,GAAAA,EAAyBH,EAC3BE,GAAKC,UAAYC,EACfV,EAAWM,KAAAA,KAEXN,EAAAA,MAAaW,GAHjB/B,SAAAO,WAAAyB,UAAAC,MAAAC,KAAAf,SARRgB,EAAAnC,SAAAC,MAAAC,QAmBIC,cADAgC,QAAAA,OAAAA,KAAkBnC,yBAAtBoC,EAAApC,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,uBADnB2B,MAAAA,IAAJC,EAAArC,SAAAC,MAAAC,QAMIC,cADAkC,QAAAA,OAAAA,KAAqBrC,oCAKgC,QAMrDsC,UAAWvC,EADfwC,gBAAOjC,EACHgC,SAAAA,EACAC,WAAAA,EACAC,cAAU9B,EACV+B,mBAAY9B,EACZ+B,gBAAe9B,EACf+B,qBAAoB9B,EACpB+B,UAAAA,EACAC,WAAAA,EACAC,cAnBJ9C,SAAAO,WAAAL,QAMIE,IAAKI,OAAOC,KAAO,mCADnBsC,MAAAA","file":"../../../scripts/mvc/toolshed/toolshed-model.js","sourcesContent":["define([], function() {\n\n    var ToolShedModel = Backbone.Model.extend({\n        defaults: {\"url\": \"https://toolshed.g2.bx.psu.edu/\", \"name\": \"Galaxy Main Tool Shed\"},\n        urlRoot: Galaxy.root + 'api/tool_shed',\n    });\n\n    var ToolShedsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/tool_shed',\n        model: ToolShedModel\n    });\n\n    var ToolShedCategoriesModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + 'api/tool_shed/contents',\n    });\n\n    var ToolShedCategoriesCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/tool_shed/contents',\n        model: ToolShedCategoriesModel\n    });\n\n    var ToolShedCategoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + 'api/tool_shed/category',\n    });\n\n    var ToolShedCategoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/tool_shed/category',\n        model: ToolShedCategoryModel\n    });\n\n    var ToolShedRepositoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + 'api/tool_shed/repository',\n    });\n\n    var ToolShedRepositoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/tool_shed/repository',\n        model: ToolShedRepositoryModel\n    });\n\n    var RepoQueueModel = Backbone.Model.extend({\n        url: '#',\n    });\n\n    var RepoQueueCollection = Backbone.Collection.extend({\n        url: '#',\n        model: RepoQueueModel,\n        fetch: function() {\n            var collection = this;\n            var repositories = Array();\n            var repositories_enc = JSON.parse(localStorage.repositories);\n            var queue_keys = Object.keys(repositories_enc);\n            _.each(queue_keys, function(key) {\n                var repo = repositories_enc[key];\n                repo.queue_key = key;\n                repositories.push(repo);\n            });\n            collection.reset(repositories);\n            return Backbone.Collection.prototype.fetch.call(this);\n        },\n    });\n\n    var RepoStatusModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + 'api/tool_shed/status',\n    });\n\n    var RepoStatusCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/tool_shed/status',\n        model: RepoStatusModel\n    });\n\n    var WorkflowToolsModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + 'api/workflows?missing_tools=True',\n    });\n\n    var WorkflowToolsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + 'api/workflows?missing_tools=True',\n        model: WorkflowToolsModel\n    });\n\n    return {\n        ShedModel: ToolShedModel,\n        ShedsCollection: ToolShedsCollection,\n        Category: ToolShedCategoriesModel,\n        Categories: ToolShedCategoriesCollection,\n        CategoryModel: ToolShedCategoryModel,\n        CategoryCollection: ToolShedCategoryCollection,\n        RepositoryModel: ToolShedRepositoryModel,\n        RepositoryCollection: ToolShedRepositoryCollection,\n        RepoQueue: RepoQueueCollection,\n        RepoStatus: RepoStatusCollection,\n        WorkflowTools: WorkflowToolsCollection\n    };\n\n});\n"]}