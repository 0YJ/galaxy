{"version":3,"sources":["mvc/toolshed/toolshed-model.js"],"names":["define","ToolShedModel","Backbone","Model","extend","defaults","url","root","urlRoot","Collection","Galaxy","model","ToolShedCategoriesModel","ToolShedCategoryModel","ToolShedRepositoryModel","RepoQueueModel","fetch","RepoQueueCollection","this","JSON","parse","localStorage","repositories","queue_keys","collection","keys","repositories_enc","_","each","Array","repo","Object","queue_key","call","RepoStatusModel","ShedModel","ShedsCollection","ToolShedsCollection","Category","Categories","ToolShedCategoriesCollection","CategoryModel","CategoryCollection","RepositoryModel","RepositoryCollection","WorkflowToolsModel"],"mappings":"kCAAAA,UAAW,WACP,IAAIC,EAAgBC,SAASC,MAAMC,QAC/BC,UAFDC,IAAI,kCACHL,KAAAA,yBAEIK,QAAAA,OAAKC,KAAA,kBAGTC,EAAgBD,SAAOE,WAAAL,QALeE,IAA1CI,OAAAH,KAAA,gBAUII,MAAOV,IAAPU,EAAOV,SAAAA,MAAAA,QAF0CI,cAOjDG,QAASE,OAAOH,KAAO,2BAAvBC,EAAuBN,SAAAO,WAAAL,QAFyBE,IAApDI,OAAAH,KAAA,yBAOII,MAAOC,IAAPD,EAAOC,SAAAA,MAAAA,QAFmDP,cAO1DG,QAASE,OAAOH,KAAO,2BAAvBC,EAAuBN,SAAAO,WAAAL,QAFuBE,IAAlDI,OAAAH,KAAA,yBAOII,MAAOE,IAAPF,EAAOE,SAAAA,MAAAA,QAFiDR,cAOxDG,QAASE,OAAOH,KAAO,6BAAvBC,EAAuBN,SAAAO,WAAAL,QAFyBE,IAApDI,OAAAH,KAAA,2BAOII,MAAOG,IAAPH,EAAOG,SAAAA,MAAAA,QAFmDR,IAA9D,MAMIA,EAAKJ,SAAAO,WAAAL,QADkCE,IAA3C,IAMIK,MAAOI,EAFXC,MAAIC,WACAX,IAAAA,EADiDY,KAEjDP,EAAOI,QACPC,EAAOG,KAAWC,MAAAC,aAAAC,cACdC,EAAIC,OAAaC,KAAjBC,GAOIJ,OANJK,EAAAC,KAAAL,EAAID,SAAeO,GACnB,IAAIH,EAAAA,EAAwBN,GAC5BU,EAAIP,UAAaQ,EACjBJ,EAAOJ,KAAPO,KAEIA,EAAAA,MAAKE,GACLV,SAAAA,WAAkBQ,UAAlBd,MAAAiB,KAAAf,SAIPgB,EAAAhC,SAAAC,MAAAC,QAfgDC,cAoBjDG,QAASE,OAAOH,KAAO,yBAAvBC,EAAgBD,SAAOE,WAAAL,QAFiBE,IAA5CI,OAAAH,KAAA,uBAOII,MAAOuB,IAAPvB,EAAOuB,SAAAA,MAAAA,QAF2C7B,cAOlDG,QAASE,OAAOH,KAAO,qCAKvBI,OAFqDwB,UAAzDlC,EAOImC,gBAAiBC,EAFrBC,SAAO1B,EACHuB,WAAAA,EACAC,cAAAA,EACAE,mBAAU1B,EACV2B,gBAAYC,EACZC,qBAAe5B,EACf6B,UAAAA,EACAC,WAAAA,EACAC,cAhBS1C,SAAcO,WAAAL,QAFoBE,IAA/CI,OAAAH,KAAA,mCAOII,MAAOkC","file":"../../../scripts/mvc/toolshed/toolshed-model.js","sourcesContent":["define([], function() {\n    var ToolShedModel = Backbone.Model.extend({\n        defaults: {\n            url: \"https://toolshed.g2.bx.psu.edu/\",\n            name: \"Galaxy Main Tool Shed\"\n        },\n        urlRoot: Galaxy.root + \"api/tool_shed\"\n    });\n\n    var ToolShedsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed\",\n        model: ToolShedModel\n    });\n\n    var ToolShedCategoriesModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/contents\"\n    });\n\n    var ToolShedCategoriesCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/contents\",\n        model: ToolShedCategoriesModel\n    });\n\n    var ToolShedCategoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/category\"\n    });\n\n    var ToolShedCategoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/category\",\n        model: ToolShedCategoryModel\n    });\n\n    var ToolShedRepositoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/repository\"\n    });\n\n    var ToolShedRepositoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/repository\",\n        model: ToolShedRepositoryModel\n    });\n\n    var RepoQueueModel = Backbone.Model.extend({\n        url: \"#\"\n    });\n\n    var RepoQueueCollection = Backbone.Collection.extend({\n        url: \"#\",\n        model: RepoQueueModel,\n        fetch: function() {\n            var collection = this;\n            var repositories = Array();\n            var repositories_enc = JSON.parse(localStorage.repositories);\n            var queue_keys = Object.keys(repositories_enc);\n            _.each(queue_keys, function(key) {\n                var repo = repositories_enc[key];\n                repo.queue_key = key;\n                repositories.push(repo);\n            });\n            collection.reset(repositories);\n            return Backbone.Collection.prototype.fetch.call(this);\n        }\n    });\n\n    var RepoStatusModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/status\"\n    });\n\n    var RepoStatusCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/status\",\n        model: RepoStatusModel\n    });\n\n    var WorkflowToolsModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/workflows?missing_tools=True\"\n    });\n\n    var WorkflowToolsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/workflows?missing_tools=True\",\n        model: WorkflowToolsModel\n    });\n\n    return {\n        ShedModel: ToolShedModel,\n        ShedsCollection: ToolShedsCollection,\n        Category: ToolShedCategoriesModel,\n        Categories: ToolShedCategoriesCollection,\n        CategoryModel: ToolShedCategoryModel,\n        CategoryCollection: ToolShedCategoryCollection,\n        RepositoryModel: ToolShedRepositoryModel,\n        RepositoryCollection: ToolShedRepositoryCollection,\n        RepoQueue: RepoQueueCollection,\n        RepoStatus: RepoStatusCollection,\n        WorkflowTools: WorkflowToolsCollection\n    };\n});\n"]}