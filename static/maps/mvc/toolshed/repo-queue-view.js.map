{"version":3,"sources":["mvc/toolshed/repo-queue-view.js"],"names":["define","RepoQueue","Backbone","View","extend","ToolShedRepositoryQueue","el","options","this","_","render","repository_queue_template","templateRepoQueue","model","templateRepoQueueTab","template","workflows_missing_tools","join"],"mappings":"aAAAA,QAAQ,mCAAoC,WAmGxC,OACIC,UApGAC,SAARC,KAA4CC,QAEpCC,GAAAA,iBAEAC,OAAI,SAAAC,GAGAC,KAAKD,QAAUE,EAAEL,OAAOI,KAAKD,QAASA,GAD1CG,IAAQC,EAAkBH,KAAAI,oBACtBJ,KAAKD,IAAAA,KAALI,GAAsCJ,WAAtCC,KAAAK,UAGHC,qBAR8CL,EAAAM,UAW3C,8EADJD,kFAGI,SAGJF,KAAAA,KAkCAI,kBAAAA,EAAAA,UAlDJ,+CAkBY,wGA+EL,iCACQX,OADf,sIAnGJ,sIAyB4B,uCACA,mCACA,oCACA,uCACJ,QACJ,WACA,UACI,oDACI,mDACI,0BACI,oMACJ,QACA,0BACI,yMACJ,QACA,8DACA,qDACA,sDACA,0DACJ,QACJ,YACJ,WACJ,WACA,+FACJ,UACFY,KAAK,KAEPD,wBAAyBP,EAAEM,UACvB,4GACI,iCACI,OACI,wCACA,uCACA,mCACA,mCACA,oCACA,sCACJ,QACJ,WACA,UACI,gEACI,wDACA,gDACA,OACI,0BACI,8BACI,yDACI,4CACJ,YACJ,QACJ,QACA,0BACI,8BACI,uDACI,8CACJ,YACJ,QACJ,QACA,yDACA,yDACA,yDACA,0BACI,8BACI,oRACA,mQACJ,QACJ,QACJ,QACJ,YACJ,QACJ,UACFE,KAAK","file":"../../../scripts/mvc/toolshed/repo-queue-view.js","sourcesContent":["define(['toolshed/repository-queue-model'], function() {\n\n    var ToolShedRepositoryQueue = Backbone.View.extend({\n\n        el: '#category_list',\n\n        render: function(options) {\n            this.options = _.extend(this.options, options);\n            var repository_queue_template = this.templateRepoQueue();\n            this.$el.html(repository_queue_template({repository: this.model}));\n        },\n\n        templateRepoQueueTab: _.template([\n            '<li class=\"nav-tab\" role=\"presentation\" id=\"repository_installation_queue\">',\n                '<a href=\"#repository_queue\" data-toggle=\"tab\">Repository Installation Queue</a>',\n            '</li>',\n        ].join('')),\n\n        templateRepoQueue: _.template([\n            '<div class=\"tab-pane\" id=\"repository_queue\">',\n                '<table id=\"queued_repositories\" class=\"grid\" border=\"0\" cellpadding=\"2\" cellspacing=\"2\" width=\"100%\">',\n                    '<thead id=\"grid-table-header\">',\n                        '<tr>',\n                            '<th class=\"datasetRow\"><input class=\"btn btn-primary\" type=\"submit\" id=\"install_all\" name=\"install_all\" value=\"Install all\" /></th>',\n                            '<th class=\"datasetRow\"><input class=\"btn btn-primary\" type=\"submit\" id=\"clear_queue\" name=\"clear_queue\" value=\"Clear queue\" /></th>',\n                            '<th class=\"datasetRow\">ToolShed</th>',\n                            '<th class=\"datasetRow\">Name</th>',\n                            '<th class=\"datasetRow\">Owner</th>',\n                            '<th class=\"datasetRow\">Revision</th>',\n                        '</tr>',\n                    '</thead>',\n                    '<tbody>',\n                        '<\\% _.each(repositories, function(repository) { \\%>',\n                            '<tr id=\"queued_repository_<\\%= repository.id \\%>\">',\n                                '<td class=\"datasetRow\">',\n                                    '<input class=\"btn btn-primary install_one\" data-repokey=\"<\\%= repository.queue_key \\%>\" type=\"submit\" id=\"install_repository_<\\%= repository.id \\%>\" name=\"install_repository\" value=\"Install now\" />',\n                                '</td>',\n                                '<td class=\"datasetRow\">',\n                                    '<input class=\"btn btn-primary remove_one\" data-repokey=\"<\\%= repository.queue_key \\%>\" type=\"submit\" id=\"unqueue_repository_<\\%= repository.id \\%>\" name=\"unqueue_repository\" value=\"Remove from queue\" />',\n                                '</td>',\n                                '<td class=\"datasetRow\"><\\%= repository.tool_shed_url \\%></td>',\n                                '<td class=\"datasetRow\"><\\%= repository.name \\%></td>',\n                                '<td class=\"datasetRow\"><\\%= repository.owner \\%></td>',\n                                '<td class=\"datasetRow\"><\\%= repository.changeset \\%></td>',\n                            '</tr>',\n                        '<\\% }); \\%>',\n                    '</tbody>',\n                '</table>',\n                '<input type=\"button\" class=\"btn btn-primary\" id=\"from_workflow\" value=\"Add from workflow\" />',\n            '</div>',\n        ].join('')),\n\n        workflows_missing_tools: _.template([\n            '<table id=\"workflows_missing_tools\" class=\"grid\" border=\"0\" cellpadding=\"2\" cellspacing=\"2\" width=\"100%\">',\n                '<thead id=\"grid-table-header\">',\n                    '<tr>',\n                        '<th class=\"datasetRow\">Workflows</th>',\n                        '<th class=\"datasetRow\">Tool IDs</th>',\n                        '<th class=\"datasetRow\">Shed</th>',\n                        '<th class=\"datasetRow\">Name</th>',\n                        '<th class=\"datasetRow\">Owner</th>',\n                        '<th class=\"datasetRow\">Actions</th>',\n                    '</tr>',\n                '</thead>',\n                '<tbody>',\n                    '<\\% _.each(Object.keys(workflows), function(workflow_key) { \\%>',\n                        '<\\% var workflow_details = workflow_key.split(\"/\"); \\%>',\n                        '<\\% var workflow = workflows[workflow_key]; \\%>',\n                        '<tr>',\n                            '<td class=\"datasetRow\">',\n                                '<ul class=\"workflow_names\">',\n                                    '<\\% _.each(workflow.workflows.sort(), function(wf) { \\%>',\n                                        '<li class=\"workflow_names\"><\\%= wf \\%></li>',\n                                    '<\\% }); \\%>',\n                                '</ul>',\n                            '</td>',\n                            '<td class=\"datasetRow\">',\n                                '<ul class=\"workflow_tools\">',\n                                    '<\\% _.each(workflow.tools.sort(), function(tool) { \\%>',\n                                        '<li class=\"workflow_tools\"><\\%= tool \\%></li>',\n                                    '<\\% }); \\%>',\n                                '</ul>',\n                            '</td>',\n                            '<td class=\"datasetRow\"><\\%= workflow_details[0] \\%></td>',\n                            '<td class=\"datasetRow\"><\\%= workflow_details[2] \\%></td>',\n                            '<td class=\"datasetRow\"><\\%= workflow_details[1] \\%></td>',\n                            '<td class=\"datasetRow\">',\n                                '<ul class=\"workflow_tools\">',\n                                    '<li class=\"workflow_tools\"><input type=\"button\" class=\"show_wf_repo btn btn-primary\" data-shed=\"<\\%= workflow_details[0] \\%>\" data-owner=\"<\\%= workflow_details[1] \\%>\" data-repo=\"<\\%= workflow_details[2] \\%>\" data-toolids=\"<\\%= workflow.tools.join(\",\") \\%>\" value=\"Preview\" /></li>',\n                                    '<li><input type=\"button\" class=\"queue_wf_repo btn btn-primary\" data-shed=\"<\\%= workflow_details[0] \\%>\" data-owner=\"<\\%= workflow_details[1] \\%>\" data-repo=\"<\\%= workflow_details[2] \\%>\" data-toolids=\"<\\%= workflow.tools.join(\",\") \\%>\" value=\"Add to queue\" /></li>',\n                                '</ul>',\n                            '</td>',\n                        '</tr>',\n                    '<\\% }); \\%>',\n                '</ul>',\n            '</div>',\n        ].join(''))\n    });\n\n    return {\n        RepoQueue: ToolShedRepositoryQueue,\n    };\n\n});\n"]}