{"version":3,"file":"controlled-fetch-collection.js","sources":["../../../src/mvc/base/controlled-fetch-collection.js"],"names":["define","_","Backbone","BASE_MVC","ControlledFetchCollection","Collection","extend","initialize","models","options","prototype","call","this","setOrder","order","silent","_setUpListeners","on","changed-order","sort","fetch","_buildFetchOptions","clone","self","traditional","data","_buildFetchData","filters","_buildFetchFilters","isEmpty","_fetchFiltersToAjaxData","defaults","pick","_fetchParams","filterMap","q","qv","each","v","k","undefined","push","reset","allFetched","comparators","update_time","buildComparator","ascending","update_time-asc","create_time","create_time-asc","collection","comparator","isUndefined","Error","trigger","PaginatedCollection","limitPerPage","currentPage","getTotalItemCount","length","shouldPaginate","getLastPage","Math","floor","getPageCount","fetchPage","pageNum","max","min","limit","offset","fetchCurrentPage","fetchPrevPage","fetchNextPage","InfinitelyScrollingCollection","limitOnFirstFetch","limitPerFetch","lastFetched","remove","fetchFirst","fetchMore","jQuery","when","always","done","fetchedData","numFetched","isArray","fetchAll"],"mappings":"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"}