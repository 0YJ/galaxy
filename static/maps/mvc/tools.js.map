{"version":3,"file":"tools.js","sources":["../../src/mvc/tools.js"],"names":["define","_","util","data","ToolsForm","tool_form","tool_link","panel_section","tool_search","_templates","extend","Handlebars","templates","VisibilityMixin","hidden","show","this","set","hide","toggle","get","is_visible","attributes","ToolParameter","Backbone","Model","defaults","name","label","type","value","html","num_samples","initialize","unescape","copy","toJSON","set_value","ToolParameterCollection","Collection","model","DataToolParameter","IntegerToolParameter","parseInt","get_samples","d3","scale","linear","domain","ticks","FloatToolParameter","parseFloat","SelectToolParameter","map","option","subModelTypes","integer","float","select","Tool","id","description","target","inputs","outputs","urlRoot","galaxy_config","root","options","p","p_class","rval","prototype","call","i","remove_inputs","types","tool","incompatible_inputs","filter","input","indexOf","remove","only_samplable_inputs","valid_inputs","each","push","apply_search_results","results","set_input_value","find","set_input_values","inputs_dict","self","keys","input_name","run","_run","rerun","target_dataset","regions","action","target_dataset_id","get_inputs_dict","input_dict","additional_params","payload","tool_id","run_deferred","$","Deferred","ss_deferred","ServerStateDeferred","ajax_settings","url","JSON","stringify","dataType","contentType","interval","success_fn","response","when","go","then","result","resolve","DatasetCollection","ToolCollection","View","ToolSectionLabel","ToolSection","elems","open","clear_search_results","elt","cur_label","all_hidden","ToolSearch","search_hint_string","min_chars_for_search","spinner_url","clear_btn_url","search_url","visible","query","clear_key","on","do_search","length","q","timer","clearTimeout","setTimeout","ga","clear_search","ToolPanel","tools","layout","parse","parse_elt","elt_dict","model_class","panel_elt","BaseView","update_visible","$el","ToolLinkView","tagName","render","$link","append","e","preventDefault","Galaxy","upload","form","version","deferred","execute","app","display","ToolSectionLabelView","className","text","ToolSectionView","update_open","section_body","tool_view","label_view","events","click .toolSectionTitle > a","children","slideDown","slideUp","ToolSearchView","click","keyup :input","click #search-clear-btn","tooltip","focus_and_select","focus","clear","val","query_changed","evData","which","ToolPanelView","handle_search_results","search_view","section_title_view","attr","split","trigger","ToolFormView","tool_panel_view","collection","tool_form_view","css","show_tool","fetch","done","width"],"mappings":"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"}