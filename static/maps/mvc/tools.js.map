{"version":3,"file":"tools.js","sources":["../../src/mvc/tools.js"],"names":["define","_","util","data","ToolsForm","tool_form","tool_link","panel_section","tool_search","console","debug","_templates","Handlebars","templates","VisibilityMixin","hidden","show","this","set","hide","toggle","get","is_visible","attributes","ToolParameter","Backbone","Model","extend","defaults","name","label","type","value","html","num_samples","initialize","unescape","copy","toJSON","set_value","ToolParameterCollection","Collection","model","DataToolParameter","IntegerToolParameter","parseInt","get_samples","d3","scale","linear","domain","ticks","FloatToolParameter","parseFloat","SelectToolParameter","map","option","subModelTypes","integer","float","select","Tool","id","description","target","inputs","outputs","urlRoot","galaxy_config","root","options","p","p_class","rval","prototype","call","i","remove_inputs","types","tool","incompatible_inputs","filter","input","indexOf","remove","only_samplable_inputs","valid_inputs","each","push","apply_search_results","results","set_input_value","find","set_input_values","inputs_dict","self","keys","input_name","run","_run","rerun","target_dataset","regions","action","target_dataset_id","get_inputs_dict","input_dict","additional_params","payload","tool_id","run_deferred","$","Deferred","ss_deferred","ServerStateDeferred","ajax_settings","url","JSON","stringify","dataType","contentType","interval","success_fn","response","when","go","then","result","resolve","DatasetCollection","ToolCollection","View","ToolSectionLabel","ToolSection","elems","open","clear_search_results","elt","cur_label","all_hidden","ToolSearch","search_hint_string","min_chars_for_search","spinner_url","clear_btn_url","search_url","visible","query","clear_key","on","do_search","length","q","timer","clearTimeout","setTimeout","ga","clear_search","ToolPanel","tools","layout","parse","parse_elt","elt_dict","model_class","panel_elt","BaseView","update_visible","$el","ToolLinkView","tagName","render","$link","append","e","preventDefault","Galaxy","upload","form","version","deferred","execute","app","display","ToolSectionLabelView","className","text","ToolSectionView","update_open","section_body","tool_view","label_view","events","click .toolSectionTitle > a","children","slideDown","slideUp","ToolSearchView","click","keyup :input","click #search-clear-btn","tooltip","focus_and_select","focus","clear","val","query_changed","evData","which","ToolPanelView","handle_search_results","search_view","section_title_view","attr","split","trigger","ToolFormView","tool_panel_view","collection","tool_form_view","css","show_tool","fetch","done","width"],"mappings":"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"}