{"version":3,"sources":["reports_webapp/run_stats.js"],"names":["days_in_month","month","year","Date","getDate","date_by_subtracting_days","date","days","getMonth","getHours","date_by_subtracting_hours","getSeconds","getMilliseconds","hours","getFullYear","refresh","window","location","get_utc_time_hours","data","inp_data","hours_array","now","i","days_array","reload","barWidth","width","name","time","title","click","classes","d3","select","this","attr","split","selectAll","filter","style","transition","size","chart_width","wdth","path","duration","chart_height","chart_zoom","height","push","zoom","margin","bottom","top","right","left","chart","max","bar","curr_margin","$","css","append","text","l_x","m_x","l_y","enter","d","scale","linear","on","round","axis","left_pad","getBoundingClientRect","top_pad","event","String","e","curr_day","first","_y2","m_y","y","range","curr_day_text","tickFormat","call","yAxis","text_height","this_width","node","curr_month","locale","toLocaleString","getBBox","create_histogram","layout","lengths","length","formatMinutes","Math","minutes","curr_month_text","undefined","trans","x","domain","histogram","bins","ticks","floor","bar_x","dx","xAxis","svg","orient"],"mappings":"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","file":"../../scripts/reports_webapp/run_stats.js","sourcesContent":["function days_in_month(month, year) {\n    return new Date(year, month, 0).getDate();\n}\n\nfunction date_by_subtracting_days(date, days) {\n    return new Date(\n        date.getFullYear(), \n        date.getMonth(), \n        date.getDate() - days,\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\nfunction date_by_subtracting_hours(date, hours) {\n    return new Date(\n        date.getFullYear(), \n        date.getMonth(), \n        date.getDate(),\n        date.getHours() - hours,\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\n// Gets the utc time without minutes and seconds\nfunction get_utc_time_hours() {\n    var date = new Date();\n    return new Date(\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        0, 0\n    );\n}\n\n// Refreshes the page for more up to date information\nfunction refresh() {\n    window.location.reload(true);\n}\n\n// This is commented out until we make Reports more responsive.\n// setTimeout(refresh, 60000); //1 minute = 60000 ms\n\nfunction create_chart( inp_data, name, time, title ) {\n    // Initialize starting variables\n    var data = inp_data;\n\n    var hours_array = []\n    var now = get_utc_time_hours()\n    for(var i = 0; i < 24; i++) {\n        hours_array.push(date_by_subtracting_hours(now, i));\n    }\n\n    var days_array = []\n    var now = get_utc_time_hours()\n    for(var i = 0; i < 30; i++) {\n        days_array.push(date_by_subtracting_days(now, i));\n    }\n\n    var margin = {top: 60, right: 30, bottom: 50, left: 60};\n    var width = 300;\n    var barWidth = 0;\n    if(time == \"hours\") {\n        barWidth = width / 24;\n    } else if(time == \"days\") {\n        barWidth = width / 30;\n    }\n    var chart_width = width + margin.left + margin.right;\n\n    var chart_zoom = 1.75;\n    var height = 150;\n    if(d3.max(data) != 0) {\n        var zoom = height / d3.max(data);\n    } else {\n        var zoom = 1.0;\n    }\n    var chart_height = height + margin.top + margin.bottom;\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3.selectAll(\".\" + classes[0]).filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height)\n                .attr(\"width\", chart_width);\n\n        d3.select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height*chart_zoom)\n                .attr(\"width\", chart_width*chart_zoom);\n    }\n\n    // Initialize all chart containers to have the correct height\n    $(\".charts\").css(\"height\", chart_height * (chart_zoom));\n\n    // Create the chart object\n    var chart = d3.select(\"#\" + name)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .on(\"click\", click);\n\n    // Create bars on the chart and assosciate data with it\n    var bar = chart.selectAll(\"g\")\n        .data(data)\n        .enter().append(\"g\")\n            .attr(\"transform\", function(d, i) {\n                // Place the bar in the correct place\n                curr_margin = +margin.left;\n                curr_margin += +(i * barWidth);\n                return \"translate(\" + curr_margin + \",\" + margin.top + \")\";\n            })\n            .on(\"mouseenter\", function(d) {\n                // Show tool tip\n                var i = 1;\n                var size = d;\n\n                while( size >= 10) {\n                    size = size / 10;\n                    i++;\n                }\n\n                var wdth = (i * 4) + 10;\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"text\")\n                        .attr(\"transform\", \"translate( \" + (margin.left - 5) + \", \" + ((height - (d * zoom)) + +margin.top + 10) + \" )\" )\n                        .attr(\"visibility\", \"visible\")\n                        .text(d);\n\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .attr(\"width\", wdth + \"px\")\n                    .attr(\"height\", \"15px\")\n                    .select(\"rect\")\n                        .attr(\"transform\", \"translate( \" + ((+margin.left) - wdth) + \", \" + ((height - (d * zoom)) + +margin.top) + \" )\" )\n                        .attr(\"width\", wdth + \"px\")\n                        .attr(\"height\", \"15px\")\n                        .attr(\"fill\",\"#ebd9b2\");\n            })\n            .on(\"mouseleave\", function(d) {\n                // Remove tool tip\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"text\")\n                        .attr(\"visibility\", \"hidden\");\n\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"rect\")\n                        .attr(\"width\", \"0\")\n                        .attr(\"height\", \"0\")\n                        .attr(\"fill\",\"\")\n                        .text(d);\n            });\n\n    // Add a title to the chart\n    chart.append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Add an x axis line to the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .append(\"path\")\n            .attr(\"class\", \"x\")\n            .attr(\"d\", function(d) {\n                var m_x = margin.left;\n                var m_y = +margin.top + height;\n                var l_x = m_x + width;\n                var l_y = m_y;\n\n                return \"M\" + m_x + \" \" + m_y + \" L \" + l_x + \" \" + l_y;\n            });\n\n    // Declare how high the y axis goes\n    var y = d3.scale.linear()\n        .range([height, 0]);\n\n    // Create a yAxis object\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat( function(d) { return d3.round( d*d3.max(data), 0 ) });\n\n    // Put the y axis on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", (\"y_\" + name))\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis)\n            .select(\".domain\");\n\n    // Put a title for y axis on chart\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#y_\" + name).node()\n                var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n                var top_pad = +margin.top + (axis.getBoundingClientRect().height/2) - 30\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n                return trans;\n            })\n            .text(\"Number of Jobs\");\n\n    // Add color to the chart's bars\n    bar.append(\"rect\")\n        .attr(\"y\", function(d) { return height - (d * zoom); })\n        .attr(\"height\", function(d) { return (d * zoom); })\n        .attr(\"width\", barWidth - 1);\n\n    // Append x axis\n    if(time == \"hours\") {\n        // Append hour lines\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + (barWidth/2) + \", \" + height + \")\"\n            });\n\n        // Append hour numbers\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 10, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\"\n\n                if( hours_array[i].getHours() < 10 ) {\n                    time = \"0\" + String(hours_array[i].getHours());\n                } else {\n                    time = hours_array[i].getHours();\n                }\n\n                return time;\n            });\n\n        // Append day lines\n        var curr_day = \"\";\n        var first = false;\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if(hours_array[i].getDate() != curr_day) {\n                    if(!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n                    \n                    curr_day = hours_array[i].getDate();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append day numbers\n        curr_day = \"\";\n        curr_day_text = \"\";\n        first = false;\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if(hours_array[i].getDate() != curr_day_text) {\n                    time = String(hours_array[i].toLocaleString(locale, { month: \"long\" }));                  \n                    time += \" \" + String(hours_array[i].getDate())\n\n                    curr_day_text = hours_array[i].getDate();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3.select(this).node().getBBox().width;\n\n                if(hours_array[i].getDate() != curr_day) {\n                    if(!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n                    \n                    curr_day = hours_array[i].getDate();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + (text_height) + \" )\"\n            });\n    } else if(time == \"days\") {\n        // Append day lines\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + (barWidth/2) + \", \" + height + \")\"\n            });\n\n        // Append day numbers\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 9, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\"\n\n                if( days_array[i].getDate() < 10 ) {\n                    time = \"0\" + String(days_array[i].getDate());\n                } else {\n                    time = days_array[i].getDate();\n                }\n\n                return time;\n            });\n\n        // Append month lines\n        var curr_month = \"\";\n        var first = false;\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if(days_array[i].getMonth() != curr_month) {\n                    if(!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n                    \n                    curr_month = days_array[i].getMonth();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append month numbers\n        curr_month = \"\";\n        curr_month_text = \"\";\n        first = false;\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,100,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if(days_array[i].getMonth() != curr_month_text) {\n                    time = String(days_array[i].toLocaleString(locale, { month: \"long\" }));                  \n                    time += \" \" + String(days_array[i].getFullYear())\n\n                    curr_month_text = days_array[i].getMonth();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3.select(this).node().getBBox().width;\n\n                if(days_array[i].getMonth() != curr_month) {\n                    if(!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n                    \n                    curr_month = days_array[i].getMonth();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + (text_height) + \" )\"\n            });\n    }\n\n    // Put an invisible tool tip on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\")\n        .append(\"text\");\n\n    // Initialize initial zoomed charts\n    if(name == \"jc_dy_chart\" || name == \"jc_hr_chart\") {\n        d3.select(\"#\" + name)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom)\n            .style(\"cursor\", \"default\");\n    }\n}\n\n//============================================================================================================\n\nfunction create_histogram( inp_data, name, title ) {\n    // Initialize initial variables\n    // inp_data is an array of numbers that are the amount of minutes per run\n    var data = inp_data;\n\n    var chart_zoom = 1.75;\n    var margin = {top: 60, right: 30, bottom: 50, left: 60};\n\n    var height = 150;\n    var chart_height = height + margin.top + margin.bottom;\n\n    var width = 300;\n    var chart_width = width + margin.left + margin.right;\n\n    // Cereate x axis metadata\n    // Used for x axis, histogram creation, and bar initialization\n    var x = d3.scale.linear()\n        .domain([0, d3.max(data)])\n        .range([0, width]);\n\n    // Generate a histogram using twenty uniformly-spaced bins.\n    var data = d3.layout.histogram()\n        .bins(x.ticks(20))(data);\n\n    // Create an array of the sizes of the bars\n    var lengths = [];\n    for(var i = 0; i < data.length; i ++) {\n        lengths.push(data[i].length)\n    }\n\n    // Find the amount needed to magnify the bars\n    if(d3.max(data) != 0) {\n        var zoom = height / d3.max(lengths);\n    } else {\n        var zoom = 1.0;\n    }\n\n    // Create y axis metadata\n    // Used for y axis and bar initialization\n    var y = d3.scale.linear()\n        .domain([0, d3.max(data, function(d) { return d.y; })])\n        .range([height, 0]);\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3.selectAll(\".\" + classes[0]).filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height)\n                .attr(\"width\", chart_width);\n\n        d3.select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height*chart_zoom)\n                .attr(\"width\", chart_width*chart_zoom);\n    }\n\n    // Formatter for x axis times (converting minutes to HH:MM).\n    var formatMinutes = function(d) {\n            hours = Math.floor( d / 60 )\n            minutes = Math.floor(d - (hours * 60))\n\n            if(hours < 10) {\n                hours = \"0\" + hours\n            }\n            if(minutes < 10) {\n                minutes = \"0\" + minutes\n            }\n\n            return hours + \":\" + minutes;\n        };\n\n    // Create a chart object\n    var chart = d3.select(\"#\" + name)\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .on(\"click\", click);\n\n    // Put title on chart\n    chart.append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Put bars on chart\n    var bar = chart.selectAll(\".bar\")\n        .data(data)\n      .enter().append(\"g\")\n        .attr(\"class\", \"bar\")\n        .attr(\"transform\", function(d) {\n            return \"translate(\" + (+x(d.x) + +margin.left) + \",\" + (+y(d.y) + +margin.top) + \")\"; })\n        .on(\"mouseenter\", function(d) {\n            // Show tool tip\n            i = 0;\n            size = d.length;\n\n            while( size >= 1) {\n                size = size / 10;\n                i++;\n            }\n            var wdth = (i * 4) + 10;\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"text\")\n                    .attr(\"transform\", \"translate( \" + (margin.left - 5) + \", \" + (height - (d.length * zoom) + +margin.top + 10) + \" )\" )\n                    .attr(\"visibility\", \"visible\")\n                    .text(d.length);\n\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                    .attr(\"transform\", \"translate( \" + ((+margin.left) - wdth) + \", \" + (height - (d.length * zoom) + +margin.top) + \" )\")\n                    .attr(\"width\", wdth + \"px\")\n                    .attr(\"height\", \"15px\")\n                    .attr(\"fill\",\"#ebd9b2\");\n        })\n        .on(\"mouseleave\", function(d) {\n            // Remove tool tip\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"text\")\n                    .attr(\"visibility\", \"hidden\");\n\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"rect\")\n                    .attr(\"width\", \"0\")\n                    .attr(\"height\", \"0\")\n                    .attr(\"fill\",\"\")\n        });\n\n    // Create bar width\n    var bar_x;\n    if(data[0] == undefined) {\n        bar_x = 1;\n    } else {\n        bar_x = x(data[0].dx);\n    }\n\n    // Add color to bar\n    bar.append(\"rect\")\n        .attr(\"x\", 1)\n        .attr(\"width\", bar_x - 1)\n        .attr(\"height\", function(d) { return height - y(d.y); });\n\n    // Create x axis\n    var xAxis = d3.svg.axis()\n        .scale(x)\n        .orient(\"bottom\")\n        .tickFormat(formatMinutes);\n\n    // Add x axis to chart\n    chart.append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"id\", \"x_\" + name)\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + (+height + +margin.top) + \")\")\n        .call(xAxis);\n\n    // Add a title to the x axis\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#x_\" + name).node()\n                var left_pad = +margin.left + (axis.getBoundingClientRect().width/2) + 30;\n                var top_pad = +margin.top + height + axis.getBoundingClientRect().height + 10\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")\";\n\n                return trans;\n            })\n            .text(\"ETA - hrs:mins\");\n\n    // Create y axis\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\");\n\n    // Add y axis to chart\n    chart.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", (\"y_\" + name))\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis);\n\n    // Add a title to the y axis\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#y_\" + name).node()\n                var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n                var top_pad = +margin.top + (axis.getBoundingClientRect().height/2) - 30\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n                return trans;\n            })\n            .text(\"Number of Jobs\");\n\n    // Put an invisible tool tip on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\")\n        .append(\"text\");\n}\n"]}