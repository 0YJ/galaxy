{"version":3,"sources":["reports_webapp/run_stats.js"],"names":["days_in_month","month","year","Date","getDate","date_by_subtracting_days","date","days","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","date_by_subtracting_hours","hours","get_utc_time_hours","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","refresh","window","location","reload","create_chart","inp_data","name","time","title","click","classes","d3","select","this","attr","split","selectAll","filter","style","transition","duration","chart_height","chart_width","chart_zoom","data","hours_array","now","i","push","days_array","margin","top","right","bottom","left","barWidth","width","max","zoom","$","css","chart","on","bar","enter","append","d","curr_margin","size","wdth","event","path","text","e","m_x","m_y","y","scale","linear","range","yAxis","svg","axis","orient","tickFormat","round","call","node","getBoundingClientRect","height","String","curr_day","first","_y2","curr_day_text","toLocaleString","text_height","this_width","getBBox","curr_month","curr_month_text","create_histogram","x","domain","layout","histogram","bins","ticks","lengths","length","formatMinutes","Math","floor","minutes","bar_x","undefined","dx","xAxis"],"mappings":"AAAA,QAASA,eAAcC,EAAOC,GAC1B,MAAO,IAAIC,MAAKD,EAAMD,EAAO,GAAGG,UAGpC,QAASC,0BAAyBC,EAAMC,GACpC,MAAO,IAAIJ,MACPG,EAAKE,cACLF,EAAKG,WACLH,EAAKF,UAAYG,EACjBD,EAAKI,WACLJ,EAAKK,aACLL,EAAKM,aACLN,EAAKO,mBAIb,QAASC,2BAA0BR,EAAMS,GACrC,MAAO,IAAIZ,MACPG,EAAKE,cACLF,EAAKG,WACLH,EAAKF,UACLE,EAAKI,WAAaK,EAClBT,EAAKK,aACLL,EAAKM,aACLN,EAAKO,mBAKb,QAASG,sBACL,GAAIV,GAAO,GAAIH,KACf,OAAO,IAAIA,MACPG,EAAKW,iBACLX,EAAKY,cACLZ,EAAKa,aACLb,EAAKc,cACL,EAAG,GAKX,QAASC,WACLC,OAAOC,SAASC,QAAO,GAM3B,QAASC,cAAcC,EAAUC,EAAMC,EAAMC,GAoCzC,QAASC,KACL,GAAIC,GAAUC,GAAGC,OAAOC,MAAMC,KAAK,QACnCJ,GAAUA,EAAQK,MAAM,KACxBJ,GAAGK,UAAU,IAAMN,EAAQ,IAAIO,OAAO,IAAMP,EAAQ,IAC/CQ,MAAM,SAAU,WAChBC,aACIC,SAAS,KACTN,KAAK,SAAUO,GACfP,KAAK,QAASQ,GAEvBX,GAAGC,OAAOC,MACLK,MAAM,SAAU,WAChBC,aACIC,SAAS,KACTN,KAAK,SAAUO,EAAaE,GAC5BT,KAAK,QAASQ,EAAYC,GA7CvC,IAAI,GAJAC,GAAOnB,EAEPoB,KACAC,EAAM/B,qBACFgC,EAAI,EAAGA,EAAI,GAAIA,IACnBF,EAAYG,KAAKnC,0BAA0BiC,EAAKC,GAKpD,KAAI,GAFAE,MACAH,EAAM/B,qBACFgC,EAAI,EAAGA,EAAI,GAAIA,IACnBE,EAAWD,KAAK5C,yBAAyB0C,EAAKC,GAGlD,IAAIG,IAAUC,IAAK,GAAIC,MAAO,GAAIC,OAAQ,GAAIC,KAAM,IAEhDC,EAAW,CACJ,UAAR5B,EACC4B,EAAWC,KACG,QAAR7B,IACN4B,EAAWC,GAEf,IAAId,GAPQ,IAOcQ,EAAOI,KAAOJ,EAAOE,MAE3CT,EAAa,IAEjB,IAAmB,GAAhBZ,GAAG0B,IAAIb,GACN,GAAIc,GAFK,IAEW3B,GAAG0B,IAAIb,OAE3B,IAAIc,GAAO,CAEf,IAAIjB,GANS,IAMeS,EAAOC,IAAMD,EAAOG,MAsBhDM,GAAE,WAAWC,IAAI,SAAUnB,EAAe,EAG1C,IAAIoB,GAAQ9B,GAAGC,OAAO,IAAMN,GACvBQ,KAAK,QAASQ,GACdR,KAAK,SAAUO,GACfP,KAAK,sBAAuB,YAC5BA,KAAK,UAAW,OAASQ,EAAc,IAAMD,GAC7CqB,GAAG,QAASjC,GAGbkC,EAAMF,EAAMzB,UAAU,KACrBQ,KAAKA,GACLoB,QAAQC,OAAO,KACX/B,KAAK,YAAa,SAASgC,EAAGnB,GAI3B,MAFAoB,cAAejB,EAAOI,KACtBa,cAAiBpB,EAAIQ,EACd,aAAeY,YAAc,IAAMjB,EAAOC,IAAM,MAE1DW,GAAG,aAAc,SAASI,GAKvB,IAHA,GAAInB,GAAI,EACJqB,EAAOF,EAEJE,GAAQ,IACXA,GAAc,GACdrB,GAGJ,IAAIsB,GAAY,EAAJtB,EAAS,EACrBhB,IAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,YAAa,eAAiBgB,EAAOI,KAAO,GAAK,MA7D9D,IA6DiFY,EAAIR,IAAUR,EAAOC,IAAM,IAAM,MAC1GjB,KAAK,aAAc,WACnBsC,KAAKN,GAEdnC,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BE,KAAK,QAASmC,EAAO,MACrBnC,KAAK,SAAU,QACfF,OAAO,QACHE,KAAK,YAAa,gBAAmBgB,EAAOI,KAAQe,GAAQ,MArEpE,IAqEuFH,EAAIR,IAAUR,EAAOC,KAAO,MAC3GjB,KAAK,QAASmC,EAAO,MACrBnC,KAAK,SAAU,QACfA,KAAK,OAAO,aAExB4B,GAAG,aAAc,SAASI,GAEvBnC,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,aAAc,UAE5BH,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,QAAS,KACdA,KAAK,SAAU,KACfA,KAAK,OAAO,IACZsC,KAAKN,IAI1BL,GAAMI,OAAO,KACRA,OAAO,QACP/B,KAAK,QAAS,SACdA,KAAK,cAAe,OACpBA,KAAK,YAAa,SAASuC,GACxB,MAAO,wBAEVD,KAAK5C,GAGViC,EAAMI,OAAO,KACR/B,KAAK,QAAS,QACd+B,OAAO,QACH/B,KAAK,QAAS,KACdA,KAAK,IAAK,SAASgC,GAChB,GAAIQ,GAAMxB,EAAOI,KACbqB,GAAOzB,EAAOC,IAzGjB,GA6GD,OAAO,IAAMuB,EAAM,IAAMC,EAAM,OAHrBD,EApHV,KAuH6C,IAFnCC,GAMtB,IAAIC,GAAI7C,GAAG8C,MAAMC,SACZC,OAlHQ,IAkHO,IAGhBC,EAAQjD,GAAGkD,IAAIC,OACdL,MAAMD,GACNO,OAAO,QACPC,WAAY,SAASlB,GAAK,MAAOnC,IAAGsD,MAAOnB,EAAEnC,GAAG0B,IAAIb,GAAO,IAgChE,IA7BAiB,EAAMI,OAAO,KACR/B,KAAK,QAAS,UACdA,KAAK,KAAO,KAAOR,GACnBQ,KAAK,cAAe,OACpBA,KAAK,YAAa,cAAgBgB,EAAOI,KAAO,IAAMJ,EAAOC,IAAM,KACnEmC,KAAKN,GACDhD,OAAO,WAGhB6B,EAAMI,OAAO,KACRA,OAAO,QACH/B,KAAK,QAAS,YACdA,KAAK,YAAa,SAASuC,GACxB,GAAIS,GAAOnD,GAAGC,OAAO,MAAQN,GAAM6D,MAKnC,OAFY,eAFIrC,EAAOI,KAAO4B,EAAKM,wBAAwBhC,MAAQ,GAE7B,MADvBN,EAAOC,IAAO+B,EAAKM,wBAAwBC,OAAO,EAAK,IAChB,iBAIzDjB,KAAK,kBAGdT,EAAIE,OAAO,QACN/B,KAAK,IAAK,SAASgC,GAAK,MAnJhB,KAmJiCA,EAAIR,IAC7CxB,KAAK,SAAU,SAASgC,GAAK,MAAQA,GAAIR,IACzCxB,KAAK,QAASqB,EAAW,GAGnB,SAAR5B,EAAiB,CAEhBoC,EAAIE,OAAO,QACN/B,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,SAAU,SACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,QACvBA,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,MAAO,cAAiBQ,EAAS,EAAK,WAI9CQ,EAAIE,OAAO,QACN/B,KAAK,OAAQ,cACbA,KAAK,YAAa,wBAClBsC,KAAK,SAASN,EAAGnB,GASd,MANIF,GAAYE,GAAGtC,WAAa,GACrB,IAAMiF,OAAO7C,EAAYE,GAAGtC,YAE5BoC,EAAYE,GAAGtC,YAOlC,IAAIkF,GAAW,GACXC,GAAQ,CACZ7B,GAAIE,OAAO,QACN/B,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,SAASgC,EAAGnB,GACpB,GAAI8C,GAAM,CAaV,OAXGhD,GAAYE,GAAG5C,WAAawF,IACvBC,EAIAC,EAAM,IAHNA,EAAM,GACND,GAAQ,GAKZD,EAAW9C,EAAYE,GAAG5C,WAGvB0F,IAEV3D,KAAK,SAAU,SACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,QACvBA,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,MAAO,uBAIf4C,EAAW,GACXG,cAAgB,GAChBF,GAAQ,EACR7B,EAAIE,OAAO,QACN/B,KAAK,OAAQ,cACbA,KAAK,iBAAkB,QACvBsC,KAAK,SAASN,EAAGnB,GACd,GAAIpB,GAAO,EAUX,OAPGkB,GAAYE,GAAG5C,WAAa2F,gBAC3BnE,EAAO+D,OAAO7C,EAAYE,GAAGgD,eAHpB,SAG6C/F,MAAO,UAC7D2B,GAAQ,IAAM+D,OAAO7C,EAAYE,GAAG5C,WAEpC2F,cAAgBjD,EAAYE,GAAG5C,WAG5BwB,IAEVO,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,GAAIiD,GAzOH,IA0OGC,EAAalE,GAAGC,OAAOC,MAAMsD,OAAOW,UAAU1C,KAalD,OAXGX,GAAYE,GAAG5C,WAAawF,IACvBC,EAIAI,GAAe,IAHfA,GAAe,GACfJ,GAAQ,GAKZD,EAAW9C,EAAYE,GAAG5C,WAGvB,eAAiB8F,EAAa,GAAK,KAAO,EAAgB,WAEtE,IAAW,QAARtE,EAAgB,CAEtBoC,EAAIE,OAAO,QACN/B,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,SAAU,SACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,QACvBA,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,MAAO,cAAiBQ,EAAS,EAAK,WAI9CQ,EAAIE,OAAO,QACN/B,KAAK,OAAQ,cACbA,KAAK,YAAa,uBAClBsC,KAAK,SAASN,EAAGnB,GASd,MANIE,GAAWF,GAAG5C,UAAY,GACnB,IAAMuF,OAAOzC,EAAWF,GAAG5C,WAE3B8C,EAAWF,GAAG5C,WAOjC,IAAIgG,GAAa,GACbP,GAAQ,CACZ7B,GAAIE,OAAO,QACN/B,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,SAASgC,EAAGnB,GACpB,GAAI8C,GAAM,CAaV,OAXG5C,GAAWF,GAAGvC,YAAc2F,IACvBP,EAIAC,EAAM,IAHNA,EAAM,GACND,GAAQ,GAKZO,EAAalD,EAAWF,GAAGvC,YAGxBqF,IAEV3D,KAAK,SAAU,SACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,QACvBA,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,MAAO,uBAIfoD,EAAa,GACbC,gBAAkB,GAClBR,GAAQ,EACR7B,EAAIE,OAAO,QACN/B,KAAK,OAAQ,gBACbA,KAAK,iBAAkB,QACvBsC,KAAK,SAASN,EAAGnB,GACd,GAAIpB,GAAO,EAUX,OAPGsB,GAAWF,GAAGvC,YAAc4F,kBAC3BzE,EAAO+D,OAAOzC,EAAWF,GAAGgD,eAHnB,SAG4C/F,MAAO,UAC5D2B,GAAQ,IAAM+D,OAAOzC,EAAWF,GAAGxC,eAEnC6F,gBAAkBnD,EAAWF,GAAGvC,YAG7BmB,IAEVO,KAAK,YAAa,SAASgC,EAAGnB,GAC3B,GAAIiD,GA1UH,IA2UGC,EAAalE,GAAGC,OAAOC,MAAMsD,OAAOW,UAAU1C,KAalD,OAXGP,GAAWF,GAAGvC,YAAc2F,IACvBP,EAIAI,GAAe,IAHfA,GAAe,GACfJ,GAAQ,GAKZO,EAAalD,EAAWF,GAAGvC,YAGxB,eAAiByF,EAAa,GAAK,KAAO,EAAgB,OAK7EpC,EAAMI,OAAO,KACR/B,KAAK,QAAS,YACd+B,OAAO,QACZJ,EAAM7B,OAAO,aACRiC,OAAO,QAGD,eAARvC,GAAiC,eAARA,GACxBK,GAAGC,OAAO,IAAMN,GACXQ,KAAK,SAAUO,EAAeE,GAC9BT,KAAK,QAASQ,EAAcC,GAC5BL,MAAM,SAAU,WAM7B,QAAS+D,kBAAkB5E,EAAUC,EAAME,GA4CvC,QAASC,KACL,GAAIC,GAAUC,GAAGC,OAAOC,MAAMC,KAAK,QACnCJ,GAAUA,EAAQK,MAAM,KACxBJ,GAAGK,UAAU,IAAMN,EAAQ,IAAIO,OAAO,IAAMP,EAAQ,IAC/CQ,MAAM,SAAU,WAChBC,aACIC,SAAS,KACTN,KAAK,SAAUO,GACfP,KAAK,QAASQ,GAEvBX,GAAGC,OAAOC,MACLK,MAAM,SAAU,WAChBC,aACIC,SAAS,KACTN,KAAK,SAAUO,EAAaE,GAC5BT,KAAK,QAASQ,EAAYC,GAjCvC,IAAI,GAvBAC,GAAOnB,EAEPkB,EAAa,KACbO,GAAUC,IAAK,GAAIC,MAAO,GAAIC,OAAQ,GAAIC,KAAM,IAGhDb,EADS,IACeS,EAAOC,IAAMD,EAAOG,OAG5CX,EADQ,IACcQ,EAAOI,KAAOJ,EAAOE,MAI3CkD,EAAIvE,GAAG8C,MAAMC,SACZyB,QAAQ,EAAGxE,GAAG0B,IAAIb,KAClBmC,OAAO,EAPA,MAURnC,EAAOb,GAAGyE,OAAOC,YAChBC,KAAKJ,EAAEK,MAAM,KAAK/D,GAGnBgE,KACI7D,EAAI,EAAGA,EAAIH,EAAKiE,OAAQ9D,IAC5B6D,EAAQ5D,KAAKJ,EAAKG,GAAG8D,OAIzB,IAAmB,GAAhB9E,GAAG0B,IAAIb,GACN,GAAIc,GAxBK,IAwBW3B,GAAG0B,IAAImD,OAE3B,IAAIlD,GAAO,CAKf,IAAIkB,GAAI7C,GAAG8C,MAAMC,SACZyB,QAAQ,EAAGxE,GAAG0B,IAAIb,EAAM,SAASsB,GAAK,MAAOA,GAAEU,MAC/CG,OAjCQ,IAiCO,IAsBhB+B,EAAgB,SAAS5C,GAWrB,MAVApD,OAAQiG,KAAKC,MAAO9C,EAAI,IACxB+C,QAAUF,KAAKC,MAAM9C,EAAa,GAARpD,OAEvBA,MAAQ,KACPA,MAAQ,IAAMA,OAEfmG,QAAU,KACTA,QAAU,IAAMA,SAGbnG,MAAQ,IAAMmG,SAIzBpD,EAAQ9B,GAAGC,OAAO,IAAMN,GACvBQ,KAAK,UAAW,OAASQ,EAAc,IAAMD,GAC7CP,KAAK,QAASQ,GACdR,KAAK,SAAUO,GACfP,KAAK,sBAAuB,YAC5B4B,GAAG,QAASjC,EAGjBgC,GAAMI,OAAO,KACRA,OAAO,QACP/B,KAAK,QAAS,SACdA,KAAK,YAAa,SAASuC,GACxB,MAAO,wBAEVD,KAAK5C,EAGV,IA6CIsF,GA7CAnD,EAAMF,EAAMzB,UAAU,QACrBQ,KAAKA,GACPoB,QAAQC,OAAO,KACb/B,KAAK,QAAS,OACdA,KAAK,YAAa,SAASgC,GACxB,MAAO,eAAiBoC,EAAEpC,EAAEoC,KAAMpD,EAAOI,MAAQ,MAAQsB,EAAEV,EAAEU,KAAM1B,EAAOC,KAAO,MACpFW,GAAG,aAAc,SAASI,GAKvB,IAHAnB,EAAI,EACJqB,KAAOF,EAAE2C,OAEFzC,MAAQ,GACXA,MAAc,GACdrB,GAEJ,IAAIsB,GAAY,EAAJtB,EAAS,EACrBhB,IAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,YAAa,eAAiBgB,EAAOI,KAAO,GAAK,MAzG1D,IAyG4EY,EAAE2C,OAASnD,IAASR,EAAOC,IAAM,IAAM,MAC/GjB,KAAK,aAAc,WACnBsC,KAAKN,EAAE2C,QAEhB9E,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BE,KAAK,QAASmC,EAAO,MACrBnC,KAAK,SAAU,QACfF,OAAO,QACHE,KAAK,YAAa,gBAAmBgB,EAAOI,KAAQe,GAAQ,MAjHhE,IAiHkFH,EAAE2C,OAASnD,IAASR,EAAOC,KAAO,MAChHjB,KAAK,QAASmC,EAAO,MACrBnC,KAAK,SAAU,QACfA,KAAK,OAAO,aAExB4B,GAAG,aAAc,SAASI,GAEvBnC,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,aAAc,UAE5BH,GAAGC,OAAOD,GAAGuC,MAAMC,KAAK,IAAIvC,OAAO,aAC9BA,OAAO,QACHE,KAAK,QAAS,KACdA,KAAK,SAAU,KACfA,KAAK,OAAO,KAMzBgF,OADUC,IAAXvE,EAAK,GACI,EAEA0D,EAAE1D,EAAK,GAAGwE,IAItBrD,EAAIE,OAAO,QACN/B,KAAK,IAAK,GACVA,KAAK,QAASgF,EAAQ,GACtBhF,KAAK,SAAU,SAASgC,GAAK,MA/IrB,KA+IqCU,EAAEV,EAAEU,IAGtD,IAAIyC,GAAQtF,GAAGkD,IAAIC,OACdL,MAAMyB,GACNnB,OAAO,UACPC,WAAW0B,EAGhBjD,GAAMI,OAAO,KACR/B,KAAK,QAAS,UACdA,KAAK,KAAM,KAAOR,GAClBQ,KAAK,YAAa,cAAgBgB,EAAOI,KAAO,MAAkBJ,EAAOC,IAAlB,KAAyB,KAChFmC,KAAK+B,GAGVxD,EAAMI,OAAO,KACRA,OAAO,QACH/B,KAAK,QAAS,YACdA,KAAK,YAAa,SAASuC,GACxB,GAAIS,GAAOnD,GAAGC,OAAO,MAAQN,GAAM6D,MAKnC,OAFY,eAFIrC,EAAOI,KAAQ4B,EAAKM,wBAAwBhC,MAAM,EAAK,IAEjC,MADvBN,EAAOC,IArKrB,IAqKoC+B,EAAKM,wBAAwBC,OAAS,IACrB,MAIzDjB,KAAK,iBAGd,IAAIQ,GAAQjD,GAAGkD,IAAIC,OACdL,MAAMD,GACNO,OAAO,OAGZtB,GAAMI,OAAO,KACR/B,KAAK,QAAS,UACdA,KAAK,KAAO,KAAOR,GACnBQ,KAAK,YAAa,cAAgBgB,EAAOI,KAAO,IAAMJ,EAAOC,IAAM,KACnEmC,KAAKN,GAGVnB,EAAMI,OAAO,KACRA,OAAO,QACH/B,KAAK,QAAS,YACdA,KAAK,YAAa,SAASuC,GACxB,GAAIS,GAAOnD,GAAGC,OAAO,MAAQN,GAAM6D,MAKnC,OAFY,eAFIrC,EAAOI,KAAO4B,EAAKM,wBAAwBhC,MAAQ,GAE7B,MADvBN,EAAOC,IAAO+B,EAAKM,wBAAwBC,OAAO,EAAK,IAChB,iBAIzDjB,KAAK,kBAGdX,EAAMI,OAAO,KACR/B,KAAK,QAAS,YACd+B,OAAO,QACZJ,EAAM7B,OAAO,aACRiC,OAAO","file":"../../scripts/reports_webapp/run_stats.js","sourcesContent":["function days_in_month(month, year) {\n    return new Date(year, month, 0).getDate();\n}\n\nfunction date_by_subtracting_days(date, days) {\n    return new Date(\n        date.getFullYear(), \n        date.getMonth(), \n        date.getDate() - days,\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\nfunction date_by_subtracting_hours(date, hours) {\n    return new Date(\n        date.getFullYear(), \n        date.getMonth(), \n        date.getDate(),\n        date.getHours() - hours,\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\n// Gets the utc time without minutes and seconds\nfunction get_utc_time_hours() {\n    var date = new Date();\n    return new Date(\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        0, 0\n    );\n}\n\n// Refreshes the page for more up to date information\nfunction refresh() {\n    window.location.reload(true);\n}\n\n// This is commented out until we make Reports more responsive.\n// setTimeout(refresh, 60000); //1 minute = 60000 ms\n\nfunction create_chart( inp_data, name, time, title ) {\n    // Initialize starting variables\n    var data = inp_data;\n\n    var hours_array = []\n    var now = get_utc_time_hours()\n    for(var i = 0; i < 24; i++) {\n        hours_array.push(date_by_subtracting_hours(now, i));\n    }\n\n    var days_array = []\n    var now = get_utc_time_hours()\n    for(var i = 0; i < 30; i++) {\n        days_array.push(date_by_subtracting_days(now, i));\n    }\n\n    var margin = {top: 60, right: 30, bottom: 50, left: 60};\n    var width = 300;\n    var barWidth = 0;\n    if(time == \"hours\") {\n        barWidth = width / 24;\n    } else if(time == \"days\") {\n        barWidth = width / 30;\n    }\n    var chart_width = width + margin.left + margin.right;\n\n    var chart_zoom = 1.75;\n    var height = 150;\n    if(d3.max(data) != 0) {\n        var zoom = height / d3.max(data);\n    } else {\n        var zoom = 1.0;\n    }\n    var chart_height = height + margin.top + margin.bottom;\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3.selectAll(\".\" + classes[0]).filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height)\n                .attr(\"width\", chart_width);\n\n        d3.select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height*chart_zoom)\n                .attr(\"width\", chart_width*chart_zoom);\n    }\n\n    // Initialize all chart containers to have the correct height\n    $(\".charts\").css(\"height\", chart_height * (chart_zoom));\n\n    // Create the chart object\n    var chart = d3.select(\"#\" + name)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .on(\"click\", click);\n\n    // Create bars on the chart and assosciate data with it\n    var bar = chart.selectAll(\"g\")\n        .data(data)\n        .enter().append(\"g\")\n            .attr(\"transform\", function(d, i) {\n                // Place the bar in the correct place\n                curr_margin = +margin.left;\n                curr_margin += +(i * barWidth);\n                return \"translate(\" + curr_margin + \",\" + margin.top + \")\";\n            })\n            .on(\"mouseenter\", function(d) {\n                // Show tool tip\n                var i = 1;\n                var size = d;\n\n                while( size >= 10) {\n                    size = size / 10;\n                    i++;\n                }\n\n                var wdth = (i * 4) + 10;\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"text\")\n                        .attr(\"transform\", \"translate( \" + (margin.left - 5) + \", \" + ((height - (d * zoom)) + +margin.top + 10) + \" )\" )\n                        .attr(\"visibility\", \"visible\")\n                        .text(d);\n\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .attr(\"width\", wdth + \"px\")\n                    .attr(\"height\", \"15px\")\n                    .select(\"rect\")\n                        .attr(\"transform\", \"translate( \" + ((+margin.left) - wdth) + \", \" + ((height - (d * zoom)) + +margin.top) + \" )\" )\n                        .attr(\"width\", wdth + \"px\")\n                        .attr(\"height\", \"15px\")\n                        .attr(\"fill\",\"#ebd9b2\");\n            })\n            .on(\"mouseleave\", function(d) {\n                // Remove tool tip\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"text\")\n                        .attr(\"visibility\", \"hidden\");\n\n                d3.select(d3.event.path[1]).select(\".tool_tip\")\n                    .select(\"rect\")\n                        .attr(\"width\", \"0\")\n                        .attr(\"height\", \"0\")\n                        .attr(\"fill\",\"\")\n                        .text(d);\n            });\n\n    // Add a title to the chart\n    chart.append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Add an x axis line to the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .append(\"path\")\n            .attr(\"class\", \"x\")\n            .attr(\"d\", function(d) {\n                var m_x = margin.left;\n                var m_y = +margin.top + height;\n                var l_x = m_x + width;\n                var l_y = m_y;\n\n                return \"M\" + m_x + \" \" + m_y + \" L \" + l_x + \" \" + l_y;\n            });\n\n    // Declare how high the y axis goes\n    var y = d3.scale.linear()\n        .range([height, 0]);\n\n    // Create a yAxis object\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat( function(d) { return d3.round( d*d3.max(data), 0 ) });\n\n    // Put the y axis on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", (\"y_\" + name))\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis)\n            .select(\".domain\");\n\n    // Put a title for y axis on chart\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#y_\" + name).node()\n                var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n                var top_pad = +margin.top + (axis.getBoundingClientRect().height/2) - 30\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n                return trans;\n            })\n            .text(\"Number of Jobs\");\n\n    // Add color to the chart's bars\n    bar.append(\"rect\")\n        .attr(\"y\", function(d) { return height - (d * zoom); })\n        .attr(\"height\", function(d) { return (d * zoom); })\n        .attr(\"width\", barWidth - 1);\n\n    // Append x axis\n    if(time == \"hours\") {\n        // Append hour lines\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + (barWidth/2) + \", \" + height + \")\"\n            });\n\n        // Append hour numbers\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 10, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\"\n\n                if( hours_array[i].getHours() < 10 ) {\n                    time = \"0\" + String(hours_array[i].getHours());\n                } else {\n                    time = hours_array[i].getHours();\n                }\n\n                return time;\n            });\n\n        // Append day lines\n        var curr_day = \"\";\n        var first = false;\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if(hours_array[i].getDate() != curr_day) {\n                    if(!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n                    \n                    curr_day = hours_array[i].getDate();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append day numbers\n        curr_day = \"\";\n        curr_day_text = \"\";\n        first = false;\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if(hours_array[i].getDate() != curr_day_text) {\n                    time = String(hours_array[i].toLocaleString(locale, { month: \"long\" }));                  \n                    time += \" \" + String(hours_array[i].getDate())\n\n                    curr_day_text = hours_array[i].getDate();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3.select(this).node().getBBox().width;\n\n                if(hours_array[i].getDate() != curr_day) {\n                    if(!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n                    \n                    curr_day = hours_array[i].getDate();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + (text_height) + \" )\"\n            });\n    } else if(time == \"days\") {\n        // Append day lines\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + (barWidth/2) + \", \" + height + \")\"\n            });\n\n        // Append day numbers\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 9, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\"\n\n                if( days_array[i].getDate() < 10 ) {\n                    time = \"0\" + String(days_array[i].getDate());\n                } else {\n                    time = days_array[i].getDate();\n                }\n\n                return time;\n            });\n\n        // Append month lines\n        var curr_month = \"\";\n        var first = false;\n        bar.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if(days_array[i].getMonth() != curr_month) {\n                    if(!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n                    \n                    curr_month = days_array[i].getMonth();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append month numbers\n        curr_month = \"\";\n        curr_month_text = \"\";\n        first = false;\n        bar.append(\"text\")\n            .attr(\"fill\", \"rgb(0,100,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if(days_array[i].getMonth() != curr_month_text) {\n                    time = String(days_array[i].toLocaleString(locale, { month: \"long\" }));                  \n                    time += \" \" + String(days_array[i].getFullYear())\n\n                    curr_month_text = days_array[i].getMonth();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3.select(this).node().getBBox().width;\n\n                if(days_array[i].getMonth() != curr_month) {\n                    if(!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n                    \n                    curr_month = days_array[i].getMonth();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + (text_height) + \" )\"\n            });\n    }\n\n    // Put an invisible tool tip on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\")\n        .append(\"text\");\n\n    // Initialize initial zoomed charts\n    if(name == \"jc_dy_chart\" || name == \"jc_hr_chart\") {\n        d3.select(\"#\" + name)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom)\n            .style(\"cursor\", \"default\");\n    }\n}\n\n//============================================================================================================\n\nfunction create_histogram( inp_data, name, title ) {\n    // Initialize initial variables\n    // inp_data is an array of numbers that are the amount of minutes per run\n    var data = inp_data;\n\n    var chart_zoom = 1.75;\n    var margin = {top: 60, right: 30, bottom: 50, left: 60};\n\n    var height = 150;\n    var chart_height = height + margin.top + margin.bottom;\n\n    var width = 300;\n    var chart_width = width + margin.left + margin.right;\n\n    // Cereate x axis metadata\n    // Used for x axis, histogram creation, and bar initialization\n    var x = d3.scale.linear()\n        .domain([0, d3.max(data)])\n        .range([0, width]);\n\n    // Generate a histogram using twenty uniformly-spaced bins.\n    var data = d3.layout.histogram()\n        .bins(x.ticks(20))(data);\n\n    // Create an array of the sizes of the bars\n    var lengths = [];\n    for(var i = 0; i < data.length; i ++) {\n        lengths.push(data[i].length)\n    }\n\n    // Find the amount needed to magnify the bars\n    if(d3.max(data) != 0) {\n        var zoom = height / d3.max(lengths);\n    } else {\n        var zoom = 1.0;\n    }\n\n    // Create y axis metadata\n    // Used for y axis and bar initialization\n    var y = d3.scale.linear()\n        .domain([0, d3.max(data, function(d) { return d.y; })])\n        .range([height, 0]);\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3.selectAll(\".\" + classes[0]).filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height)\n                .attr(\"width\", chart_width);\n\n        d3.select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n                .duration(750)\n                .attr(\"height\", chart_height*chart_zoom)\n                .attr(\"width\", chart_width*chart_zoom);\n    }\n\n    // Formatter for x axis times (converting minutes to HH:MM).\n    var formatMinutes = function(d) {\n            hours = Math.floor( d / 60 )\n            minutes = Math.floor(d - (hours * 60))\n\n            if(hours < 10) {\n                hours = \"0\" + hours\n            }\n            if(minutes < 10) {\n                minutes = \"0\" + minutes\n            }\n\n            return hours + \":\" + minutes;\n        };\n\n    // Create a chart object\n    var chart = d3.select(\"#\" + name)\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .on(\"click\", click);\n\n    // Put title on chart\n    chart.append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Put bars on chart\n    var bar = chart.selectAll(\".bar\")\n        .data(data)\n      .enter().append(\"g\")\n        .attr(\"class\", \"bar\")\n        .attr(\"transform\", function(d) {\n            return \"translate(\" + (+x(d.x) + +margin.left) + \",\" + (+y(d.y) + +margin.top) + \")\"; })\n        .on(\"mouseenter\", function(d) {\n            // Show tool tip\n            i = 0;\n            size = d.length;\n\n            while( size >= 1) {\n                size = size / 10;\n                i++;\n            }\n            var wdth = (i * 4) + 10;\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"text\")\n                    .attr(\"transform\", \"translate( \" + (margin.left - 5) + \", \" + (height - (d.length * zoom) + +margin.top + 10) + \" )\" )\n                    .attr(\"visibility\", \"visible\")\n                    .text(d.length);\n\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                    .attr(\"transform\", \"translate( \" + ((+margin.left) - wdth) + \", \" + (height - (d.length * zoom) + +margin.top) + \" )\")\n                    .attr(\"width\", wdth + \"px\")\n                    .attr(\"height\", \"15px\")\n                    .attr(\"fill\",\"#ebd9b2\");\n        })\n        .on(\"mouseleave\", function(d) {\n            // Remove tool tip\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"text\")\n                    .attr(\"visibility\", \"hidden\");\n\n            d3.select(d3.event.path[1]).select(\".tool_tip\")\n                .select(\"rect\")\n                    .attr(\"width\", \"0\")\n                    .attr(\"height\", \"0\")\n                    .attr(\"fill\",\"\")\n        });\n\n    // Create bar width\n    var bar_x;\n    if(data[0] == undefined) {\n        bar_x = 1;\n    } else {\n        bar_x = x(data[0].dx);\n    }\n\n    // Add color to bar\n    bar.append(\"rect\")\n        .attr(\"x\", 1)\n        .attr(\"width\", bar_x - 1)\n        .attr(\"height\", function(d) { return height - y(d.y); });\n\n    // Create x axis\n    var xAxis = d3.svg.axis()\n        .scale(x)\n        .orient(\"bottom\")\n        .tickFormat(formatMinutes);\n\n    // Add x axis to chart\n    chart.append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"id\", \"x_\" + name)\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + (+height + +margin.top) + \")\")\n        .call(xAxis);\n\n    // Add a title to the x axis\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#x_\" + name).node()\n                var left_pad = +margin.left + (axis.getBoundingClientRect().width/2) + 30;\n                var top_pad = +margin.top + height + axis.getBoundingClientRect().height + 10\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")\";\n\n                return trans;\n            })\n            .text(\"ETA - hrs:mins\");\n\n    // Create y axis\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\");\n\n    // Add y axis to chart\n    chart.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", (\"y_\" + name))\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis);\n\n    // Add a title to the y axis\n    chart.append(\"g\")\n        .append(\"text\")\n            .attr(\"class\", \"ax_title\")\n            .attr(\"transform\", function(e) {\n                var axis = d3.select(\"#y_\" + name).node()\n                var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n                var top_pad = +margin.top + (axis.getBoundingClientRect().height/2) - 30\n                var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n                return trans;\n            })\n            .text(\"Number of Jobs\");\n\n    // Put an invisible tool tip on the chart\n    chart.append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\")\n        .append(\"text\");\n}\n"]}