{"version":3,"sources":["admin.toolshed.js"],"names":["define","initialize","Backbone","mod_shed_list_view","mod_categories_view","mod_repositories_view","routes","mod_repoqueue_view","sheds","queue","AdminToolshedRouter","Router","extend","status","this","routesHit","history","on","bind","trackPageview","window","workflows","status/r/:repositories","categories/s/:tool_shed","GalaxyAdminToolshedApp","app_config","back","Galaxy","admintoolshedapp","navigate","trigger","replace","GalaxyApp","View","known_views","tool_shed","admin_toolshed_router","adminShedCategoryView","category_id","adminRepoQueueView","reDraw","adminShedListView","adminRepositoryView","ShedListView","repository_id","adminShedCategoriesView","CategoryView","adminWorkflowsView","Category","pushState","mod_repository_view","RepoDetails","repositories","adminRepoStatusView","split","mod_repo_status_view","RepoStatus","mod_workflows_view","Workflows","start"],"mappings":"mDAAAA,QAEQ,8BAFRA,+BAmBQ,iCACIC,+BACI,qCACA,gCACAC,+BAIK,SAGLC,EACHC,EAlBLC,EAoBIC,EACIC,EACAC,EACAC,GAEA,IAAAC,EAAAR,SAA0BS,OALtBC,QAMJC,WAAQ,WACRC,KAAAC,UAAA,EAEAb,SAAAc,QAAAC,GAvByC,QAMrC,WAoBRH,KAAAC,aAjBQD,MAEJA,KAAKI,KAAK,QAASJ,KAAKK,gBAsBxBb,QACIc,GAAAA,YACHZ,MAAM,YACHC,MAAA,QACHY,UAAA,YACJC,yBAAA,SAtCLT,OAAA,SAqBQU,0BAA2B,aAoB/BC,sCAAuCZ,eACvCa,2CAAY,cAgBJC,KAAA,WACIC,KAAAA,UAAOC,EACVR,OAAMJ,QAAAU,OAENZ,KAAAe,SAAA,KAAAC,SAAA,EAAAC,SAAA,OAmFb,OACIC,UA/Ee9B,SAAA+B,KAAArB,QACHe,YACHO,aALL,YAOA,QAGI,SACIP,aACIQ,eADmD,gBAQ9DlC,WAZD,WAaA0B,OAAKS,iBAALtB,KAIIA,KAAAsB,sBAAWR,IAAiBS,EAEpBF,KAAAA,sBAAWA,GAAAA,cAAkB,WAC7BG,OAAAA,iBAAaA,mBAFoCX,OAArDC,iBAAAW,mBAAAC,SAKAb,OAAOC,iBAAiBS,mBAAxB,IAAgD9B,EAAIF,gBAChDS,KAAAsB,sBADJnB,GAAA,kBAAA,WAMHU,OAAAC,iBAAAa,kBAhBLd,OAAAC,iBAAAa,kBAAAD,SAsBQb,OAAOC,iBAAiBc,kBAA5B,IAAiDvC,EAAAwC,eAGzCC,KAAAA,sBAAeA,GAAAA,mBAAAA,SAFgCT,GAKnDR,OAAOC,iBAAiBc,wBAEhBP,OAAAA,iBAAWA,wBADfK,QAEII,UAAAA,EAAeA,QAAAA,MAAAA,SAb/BjB,OAAAC,iBAAAiB,wBAAA,IAAAzC,EAAA0C,cAkBKV,UAAAA,EAAyBL,QAAA,MAAgB,WAIajB,KAAAsB,sBAAnDnB,GAAA,qBAAA,SAGHkB,EACGR,GARRA,OAAAC,iBAAAS,sBAaKD,OAAAA,iBAAyBC,sBAAmBG,QACzCb,UAAOC,EAAiBmB,QAAAA,MAAAA,OACxBpB,YAAOC,IAGVD,OAAAC,iBAAAS,sBAAA,IAAAhC,EAAA2C,UA1CWb,UAAWA,EAAUJ,QAAQ,MAAO,OA6CpDO,YAAyBW,MAK7BjB,KAAAA,sBAAWR,GAAAA,mBAAAA,SADfW,EApKRS,GA6HwBjB,OAAOC,iBAAiBc,oBACxBf,OAAOC,iBAAiBc,oBAAoBF,QACxCL,UAAWA,EAAUJ,QAAQ,MAAO,OACpCa,cAAeA,IAGnBjB,OAAOC,iBAAiBc,oBAAsB,IAAIQ,EAAoBC,aAE9DhB,UAAWA,EAAUJ,QAAQ,MAAO,OACpCa,cAAeA,MAK/B9B,KAAKsB,sBAAsBnB,GAAG,eAAgB,SAC1CmC,GAEIzB,OAAOC,iBAAiByB,oBACxB1B,OAAOC,iBAAiByB,oBAAoBb,QACxCY,aAAcA,EAAaE,MAAM,OAGrC3B,OAAOC,iBAAiByB,oBAAsB,IAAIE,EAAqBC,YACjEJ,aAAcA,EAAaE,MAAM,SAI/CxC,KAAKsB,sBAAsBnB,GAAG,kBAAmB,WACzCU,OAAOC,iBAAiBmB,mBACxBpB,OAAOC,iBAAiBmB,mBAAmBP,SAE3Cb,OAAOC,iBAAiBmB,mBAAqB,IAAIU,EAAmBC,YAI5ExD,SAASc,QAAQ2C,OAAQV,WAAW","file":"../scripts/admin.toolshed.js","sourcesContent":["define(\n    [\n        \"mvc/toolshed/shed-list-view\",\n        \"mvc/toolshed/categories-view\",\n        \"mvc/toolshed/repositories-view\",\n        \"mvc/toolshed/repository-view\",\n        \"mvc/toolshed/repository-queue-view\",\n        \"mvc/toolshed/repo-status-view\",\n        \"mvc/toolshed/workflows-view\"\n    ],\n    function(\n        mod_shed_list_view,\n        mod_categories_view,\n        mod_repositories_view,\n        mod_repository_view,\n        mod_repoqueue_view,\n        mod_repo_status_view,\n        mod_workflows_view\n    ) {\n        var AdminToolshedRouter = Backbone.Router.extend({\n            initialize: function() {\n                this.routesHit = 0;\n                // keep count of number of routes handled by the application\n                Backbone.history.on(\n                    \"route\",\n                    function() {\n                        this.routesHit++;\n                    },\n                    this\n                );\n                this.bind(\"route\", this.trackPageview);\n            },\n\n            routes: {\n                \"\": \"toolsheds\",\n                sheds: \"toolsheds\",\n                queue: \"queue\",\n                workflows: \"workflows\",\n                \"status/r/:repositories\": \"status\",\n                status: \"status\",\n                \"categories/s/:tool_shed\": \"categories\",\n                \"category/s/:tool_shed/c/:cateory_id\": \"repositories\",\n                \"repository/s/:tool_shed/r/:repository_id\": \"repository\"\n            },\n\n            /**\n        * If more than one route has been hit the user did not land on current\n        * page directly so we can go back safely. Otherwise go to the home page.\n        * Use replaceState if available so the navigation doesn't create an\n        * extra history entry\n        */\n            back: function() {\n                if (this.routesHit > 1) {\n                    window.history.back();\n                } else {\n                    this.navigate(\"#\", { trigger: true, replace: true });\n                }\n            }\n        });\n\n        var GalaxyAdminToolshedApp = Backbone.View.extend({\n            app_config: {\n                known_views: [\n                    \"toolsheds\",\n                    \"queue\",\n                    \"status\",\n                    \"categories\",\n                    \"repositories\",\n                    \"repoository\"\n                ]\n            },\n\n            initialize: function() {\n                Galaxy.admintoolshedapp = this;\n                this.admin_toolshed_router = new AdminToolshedRouter();\n\n                this.admin_toolshed_router.on(\"route:queue\", function() {\n                    if (Galaxy.admintoolshedapp.adminRepoQueueView) {\n                        Galaxy.admintoolshedapp.adminRepoQueueView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoQueueView = new mod_repoqueue_view.RepoQueueView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:toolsheds\", function() {\n                    if (Galaxy.admintoolshedapp.adminShedListView) {\n                        Galaxy.admintoolshedapp.adminShedListView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedListView = new mod_shed_list_view.ShedListView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:categories\", function(\n                    tool_shed\n                ) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoriesView) {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView = new mod_categories_view.CategoryView(\n                            { tool_shed: tool_shed.replace(/\\//g, \"%2f\") }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repositories\", function(\n                    tool_shed,\n                    category_id\n                ) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoryView) {\n                        Galaxy.admintoolshedapp.adminShedCategoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            category_id: category_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoryView = new mod_repositories_view.Category(\n                            {\n                                tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                                category_id: category_id\n                            }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repository\", function(\n                    tool_shed,\n                    repository_id\n                ) {\n                    if (Galaxy.admintoolshedapp.adminRepositoryView) {\n                        Galaxy.admintoolshedapp.adminRepositoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            repository_id: repository_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepositoryView = new mod_repository_view.RepoDetails(\n                            {\n                                tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                                repository_id: repository_id\n                            }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:status\", function(\n                    repositories\n                ) {\n                    if (Galaxy.admintoolshedapp.adminRepoStatusView) {\n                        Galaxy.admintoolshedapp.adminRepoStatusView.reDraw({\n                            repositories: repositories.split(\"|\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoStatusView = new mod_repo_status_view.RepoStatus(\n                            { repositories: repositories.split(\"|\") }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:workflows\", function() {\n                    if (Galaxy.admintoolshedapp.adminWorkflowsView) {\n                        Galaxy.admintoolshedapp.adminWorkflowsView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminWorkflowsView = new mod_workflows_view.Workflows();\n                    }\n                });\n\n                Backbone.history.start({ pushState: false });\n            }\n        });\n\n        return {\n            GalaxyApp: GalaxyAdminToolshedApp\n        };\n    }\n);\n"]}