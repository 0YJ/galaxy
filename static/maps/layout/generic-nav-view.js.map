{"version":3,"sources":["layout/generic-nav-view.js"],"names":["define","Modal","GenericNavView","Backbone","View","extend","initialize","this","modal","makeModalIframe","e","host","window","Galaxy","config","communication_server_host","port","communication_server_port","username","escape","user","attributes","persistent_communication_rooms","query_string","src","$el_chat_modal_header","$el_chat_modal_body","iframe_template","$","length","remove","body","height","width","closing_events","title_separator","cls","show","addClass","find","removeAttr","append","click","css","hasClass","removeClass","attr","frame_width","frame_height","render","self","id","icon","tooltip","visible","onclick"],"mappings":"AACAA,QAAQ,mBAAoB,SAAUC,GAEtC,GAAIC,GAAiBC,SAASC,KAAKC,QAE/BC,WAAY,WACRC,KAAKC,MAAQ,MAIjBC,gBAAiB,SAAUC,GAE9B,GAAIC,GAAQC,OAAOC,OAAOC,OAAOC,0BAC7BC,EAAOJ,OAAOC,OAAOC,OAAOG,0BAC5BC,EAAWC,OAAQP,OAAOC,OAAOO,KAAKC,WAAWH,UACjDI,EAAiCH,OAAQP,OAAOC,OAAOC,OAAOQ,gCAC9DC,EAAe,aAAeL,EAAW,mCAAqCI,EAC9EE,EAAMb,EAAO,IAAMK,EAAOO,EAC1BE,EAAwB,KACxBC,EAAsB,KACfC,EAAkB,8DAAgEH,EAAM,cAsD5F,OA7CII,GAAG,eAAgBC,OAAS,GAC5BD,EAAG,eAAgBE,SAG9B5B,EAAeM,MAAQ,GAAIP,GAAMG,MAC7B2B,KAAkBJ,EAClBK,OAXsB,IAYtBC,MAXqB,IAYrBC,gBAAkB,EAClBC,iBAAkB,EACXC,IAbc,wBAiBzBlC,EAAeM,MAAM6B,OACdZ,EAAwBG,EAAG,6BAC3BF,EAAsBE,EAAG,2BAEzBH,EAAsBa,SAAS,qBAC/BZ,EAAoBY,SAAS,qBACpCb,EAAsBc,KAAM,MAAOT,SAC5BL,EAAsBe,WAAY,6BACzCf,EAAsBgB,OA9BO,uPAgC7Bb,EAAG,gBAAiBc,MAAM,SAAUhC,GAChCkB,EAAG,eAAgBe,IAAK,UAAW,UAGhCf,EAAG,0BAA2Bc,MAAM,SAAUhC,GACtCkB,EAAG,0BAA2BgB,SAAU,cACxChB,EAAG,6BAA8BK,MAAO,UACxCL,EAAG,2BAA4BI,OAAQ,SACvCJ,EAAG,0BAA2BiB,YAAa,aAAcP,SAAU,eACnEV,EAAG,0BAA2BkB,KAAK,QAAS,YAC5ClB,EAAG,0BAA2Be,IAAI,cAAe,WAGjDf,EAAG,6BAA8BK,MAAOc,SACxCnB,EAAG,2BAA4BI,OAAQgB,SACvCpB,EAAG,0BAA2BiB,YAAa,eAAgBP,SAAU,aACrEV,EAAG,0BAA2BkB,KAAK,QAAS,YAC5ClB,EAAG,0BAA2Be,IAAI,cAAe,YAIlDpC,MAIX0C,OAAQ,WACJ,GAAIC,GAAO3C,IASX,QANI4C,GAAkB,mBAClBC,KAAkB,eAClBC,QAAkB,cAClBC,SAAkB,EAClBC,QAAkBL,EAAKzC,mBAMnC,QACIP,eAAkBA","file":"../../scripts/layout/generic-nav-view.js","sourcesContent":["/** Real-time Communication feature **/\ndefine(['mvc/ui/ui-modal'], function( Modal ) {\n\nvar GenericNavView = Backbone.View.extend({\n\n    initialize: function ( ) {\n        this.modal = null;\n    },\n\n    /** makes bootstrap modal and iframe inside it */\n    makeModalIframe: function( e ) {\n\t// make modal\n\tvar host =  window.Galaxy.config.communication_server_host,\n\t    port = window.Galaxy.config.communication_server_port,\n\t    username = escape( window.Galaxy.user.attributes.username ),\n\t    persistent_communication_rooms = escape( window.Galaxy.config.persistent_communication_rooms ),\n\t    query_string = \"?username=\" + username + \"&persistent_communication_rooms=\" + persistent_communication_rooms,\n\t    src = host + \":\" + port + query_string,\n\t    $el_chat_modal_header = null,\n\t    $el_chat_modal_body = null,\n            iframe_template = '<iframe class=\"f-iframe fade in communication-iframe\" src=\"' + src + '\"> </iframe>',\n            header_template = '<i class=\"fa fa-comment\" aria-hidden=\"true\" title=\"Communicate with other users\"></i>' +\n                              '<i class=\"fa fa-expand expand-compress-modal\" aria-hidden=\"true\" title=\"Maximize\"></i>' + \n\t                      '<i class=\"fa fa-times close-modal\" aria-hidden=\"true\" title=\"Close\"></i>',\n            frame_height = 350,\n            frame_width = 600,\n            class_names = 'ui-modal chat-modal';\n        \n\t// deletes the chat modal if already present and create one\n        if( $( '.chat-modal' ).length > 0 ) {\n            $( '.chat-modal' ).remove();\n\t}\n        // creates a modal\n\tGenericNavView.modal = new Modal.View({\n\t    body            : iframe_template,\n\t    height          : frame_height,\n\t    width           : frame_width,\n\t    closing_events  : true,\n\t    title_separator : false,\n            cls             : class_names\n\t});\n\n\t// shows modal\n\tGenericNavView.modal.show();\n        $el_chat_modal_header = $( '.chat-modal .modal-header' );\n        $el_chat_modal_body = $( '.chat-modal .modal-body' );\n\t// adjusts the css of bootstrap modal for chat\n        $el_chat_modal_header.addClass('modal-header-body');\n        $el_chat_modal_body.addClass('modal-header-body');\n\t$el_chat_modal_header.find( 'h4' ).remove();\n        $el_chat_modal_header.removeAttr( 'min-height padding border' );\n\t$el_chat_modal_header.append( header_template );\n\t// click event of the close button for chat\n\t$( '.close-modal' ).click(function( e ) {\n\t    $( '.chat-modal' ).css( 'display', 'none' );\n\t});\n        // click event of expand and compress icon\n        $( '.expand-compress-modal' ).click(function( e ) {\n            if( $( '.expand-compress-modal' ).hasClass( 'fa-expand' ) ) {\n                $( '.chat-modal .modal-dialog' ).width( '1000px' );\n                $( '.chat-modal .modal-body' ).height( '575px' );\n                $( '.expand-compress-modal' ).removeClass( 'fa-expand' ).addClass( 'fa-compress' );\n                $( '.expand-compress-modal' ).attr('title', 'Minimize');\n                $( '.expand-compress-modal' ).css('margin-left', '96.2%');\n            }\n            else {\n                $( '.chat-modal .modal-dialog' ).width( frame_width + 'px' );\n                $( '.chat-modal .modal-body' ).height( frame_height + 'px' );\n                $( '.expand-compress-modal' ).removeClass( 'fa-compress' ).addClass( 'fa-expand' );\n                $( '.expand-compress-modal' ).attr('title', 'Maximize');\n                $( '.expand-compress-modal' ).css('margin-left', '93.2%');\n            }\n\t    \n\t});\n        return this;\n    },\n\n    /**renders the chat icon as a nav item*/\n    render: function() {\n        var self = this,\n            navItem = {};\n        navItem = {\n            id              : 'show-chat-online',\n            icon            : 'fa-comment-o',\n            tooltip         : 'Chat online',\n            visible         : false,\n            onclick         : self.makeModalIframe\n        }\n        return navItem;\n    }\n});\n\nreturn {\n    GenericNavView  : GenericNavView\n};\n\n});\n\n"]}