{"version":3,"sources":["layout/generic-nav-view.js"],"names":["GenericNavView","Backbone","View","extend","initialize","this","modal","makeModalIframe","e","$el_chat_modal_header","$el_chat_modal_body","Galaxy","iframe_template","username","window","config","communication_server_host","communication_server_port","escape","user","attributes","persistent_communication_rooms","query_string","$","length","remove","_uiModal2","default","body","header_template","height","frame_height","width","frame_width","closing_events","title_separator","show","addClass","click","css","hasClass","attr","removeClass","navItem","visible","onclick","tooltip","id"],"mappings":"4KAEIA,EAAiBC,SAASC,KAAKC,QAC/BC,WAAY,WACRC,KAAKC,MAAQ,MAIjBC,gBAAiB,SAASC,GAEtB,IADAC,EAAA,KACAC,EAAkBC,KAAlBC,EAEIC,+DAFOC,OAAOH,OAAOI,OAAOC,0BAFnB,IAGFF,OAAOH,OAAOI,OAAOE,2BAPhC,aAQeC,OAAOJ,OAAOH,OAAOQ,KAAKC,WAAWP,UAO5C,mCAN6BK,OAC7BJ,OAAOH,OAAOI,OAAOM,kCAEzBC,eAuER,OAnDIC,EAAA,eAAAC,OAAA,GACAD,EAAA,eAAME,SAGNzB,EAAAM,MAAA,IAAAoB,EAAAC,QAAAzB,MACAF,KAAAA,EACI4B,OAdAC,IAeAC,MAXAC,IAYAC,gBAAOC,EACPC,iBAAAA,EACAC,IAbAF,wBAiBJjC,EAAAM,MAAA8B,OACApC,EAAAuB,EAAqBa,6BACrB3B,EAAAA,EAAAA,2BAEAA,EAAA4B,SAAA,qBACA5B,EAAAA,SAAsB4B,qBACtB3B,EAAAA,KAAoB2B,MAASZ,SAC7BhB,EAAAA,WAA2B,6BAC3BA,EAAAA,OApCIA,uPAsCJc,EAAA,gBAAAe,MAAA,SAAA9B,GACAe,EAAE,eAAFgB,IAAkBD,UAAM,UAGxBf,EAAA,0BAAAe,MAAA,SAAA9B,GACEe,EAAA,0BAA0Be,SAAM,cAC9Bf,EAAA,6BAAIS,MAA4BQ,UAC5BjB,EAAAA,2BAAEO,OAA6BE,SAC/BT,EAAAA,0BACAA,YAAE,aAGFA,SAAE,eACFA,EAAAA,0BAAEkB,KAA0BF,QAAI,YACnChB,EARD,0BAQOgB,IAAA,cAAA,WAEHhB,EAAAA,6BAAAS,MAA6BF,SAC7BP,EAAAA,2BAAEO,OACGY,SAELnB,EAAAA,0BACAA,YAAE,eACLc,SAAA,aAjBLd,EAAA,0BAAAkB,KAAA,QAAA,YAmBAlB,EAAA,0BAAAgB,IAAA,cAAA,YAGJlC,MAIIsC,OAAAA,WAOA,OAHIC,GAAAA,mBACAC,KAAAA,eALMC,QAAV,cAOAF,SAAOD,EACVE,QAPOE,KAOPxC,+BAIDP,eAAgBA","file":"../../scripts/layout/generic-nav-view.js","sourcesContent":["/** Real-time Communication feature **/\nimport Modal from \"mvc/ui/ui-modal\";\nvar GenericNavView = Backbone.View.extend({\n    initialize: function() {\n        this.modal = null;\n    },\n\n    /** makes bootstrap modal and iframe inside it */\n    makeModalIframe: function(e) {\n        // make modal\n        var host = window.Galaxy.config.communication_server_host,\n            port = window.Galaxy.config.communication_server_port,\n            username = escape(window.Galaxy.user.attributes.username),\n            persistent_communication_rooms = escape(\n                window.Galaxy.config.persistent_communication_rooms\n            ),\n            query_string =\n                \"?username=\" +\n                username +\n                \"&persistent_communication_rooms=\" +\n                persistent_communication_rooms,\n            src = host + \":\" + port + query_string,\n            $el_chat_modal_header = null,\n            $el_chat_modal_body = null,\n            iframe_template =\n                '<iframe class=\"f-iframe fade in communication-iframe\" src=\"' +\n                src +\n                '\"> </iframe>',\n            header_template =\n                '<i class=\"fa fa-comment\" aria-hidden=\"true\" title=\"Communicate with other users\"></i>' +\n                '<i class=\"fa fa-expand expand-compress-modal\" aria-hidden=\"true\" title=\"Maximize\"></i>' +\n                '<i class=\"fa fa-times close-modal\" aria-hidden=\"true\" title=\"Close\"></i>',\n            frame_height = 350,\n            frame_width = 600,\n            class_names = \"ui-modal chat-modal\";\n\n        // deletes the chat modal if already present and create one\n        if ($(\".chat-modal\").length > 0) {\n            $(\".chat-modal\").remove();\n        }\n        // creates a modal\n        GenericNavView.modal = new Modal.View({\n            body: iframe_template,\n            height: frame_height,\n            width: frame_width,\n            closing_events: true,\n            title_separator: false,\n            cls: class_names\n        });\n\n        // shows modal\n        GenericNavView.modal.show();\n        $el_chat_modal_header = $(\".chat-modal .modal-header\");\n        $el_chat_modal_body = $(\".chat-modal .modal-body\");\n        // adjusts the css of bootstrap modal for chat\n        $el_chat_modal_header.addClass(\"modal-header-body\");\n        $el_chat_modal_body.addClass(\"modal-header-body\");\n        $el_chat_modal_header.find(\"h4\").remove();\n        $el_chat_modal_header.removeAttr(\"min-height padding border\");\n        $el_chat_modal_header.append(header_template);\n        // click event of the close button for chat\n        $(\".close-modal\").click(function(e) {\n            $(\".chat-modal\").css(\"display\", \"none\");\n        });\n        // click event of expand and compress icon\n        $(\".expand-compress-modal\").click(function(e) {\n            if ($(\".expand-compress-modal\").hasClass(\"fa-expand\")) {\n                $(\".chat-modal .modal-dialog\").width(\"1000px\");\n                $(\".chat-modal .modal-body\").height(\"575px\");\n                $(\".expand-compress-modal\")\n                    .removeClass(\"fa-expand\")\n                    .addClass(\"fa-compress\");\n                $(\".expand-compress-modal\").attr(\"title\", \"Minimize\");\n                $(\".expand-compress-modal\").css(\"margin-left\", \"96.2%\");\n            } else {\n                $(\".chat-modal .modal-dialog\").width(frame_width + \"px\");\n                $(\".chat-modal .modal-body\").height(frame_height + \"px\");\n                $(\".expand-compress-modal\")\n                    .removeClass(\"fa-compress\")\n                    .addClass(\"fa-expand\");\n                $(\".expand-compress-modal\").attr(\"title\", \"Maximize\");\n                $(\".expand-compress-modal\").css(\"margin-left\", \"93.2%\");\n            }\n        });\n        return this;\n    },\n\n    /**renders the chat icon as a nav item*/\n    render: function() {\n        var self = this,\n            navItem = {};\n        navItem = {\n            id: \"show-chat-online\",\n            icon: \"fa-comment-o\",\n            tooltip: \"Chat online\",\n            visible: false,\n            onclick: self.makeModalIframe\n        };\n        return navItem;\n    }\n});\n\nexport default {\n    GenericNavView: GenericNavView\n};\n"]}