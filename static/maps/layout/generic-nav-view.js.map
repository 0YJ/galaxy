{"version":3,"sources":["layout/generic-nav-view.js"],"names":["define","Modal","GenericNavView","Backbone","View","extend","initialize","this","modal","makeModalIframe","e","$el_chat_modal_header","$el_chat_modal_body","iframe_template","class_names","window","Galaxy","config","communication_server_host","communication_server_port","query_string","escape","user","attributes","username","port","title_separator","cls","closing_events","frame_height","show","$","click","addClass","find","remove","removeAttr","append","css","height","hasClass","removeClass","width","attr","frame_width","self","navItem","icon","tooltip","render","id","visible","onclick"],"mappings":"kCACAA,QAAQ,mBAAoB,SAASC,GACjC,IAAIC,EAAiBC,SAASC,KAAKC,QAFvCC,WAAA,WACQC,KAAAC,MAAA,MAICC,gBAHqC,SAAAC,GAKtC,IAGIC,EAmBQ,KAnBRC,EAAA,KAAAC,EAwBIC,+DA3BRC,OAAAC,OAAAC,OAAAC,0BAiBQL,IAhBRJ,OAAiBO,OAAAC,OAAAE,2BAQTC,aAPJC,OAAAN,OAAAC,OAAAM,KAAAC,WAAAC,UAaIb,mCAZ4BO,OAC5BO,OAAOV,OAAOC,OAAOC,kCAyBzB,eAuDU,OA7CNS,EAAAA,eAAAA,OALkC,GAMlCC,EAAAA,eAAKb,SAGTZ,EAAAM,MAAA,IAAAP,EAAAG,MACAF,KAAAA,EACAS,OAXeH,IAYfI,MAXUC,IAYVe,gBAAA,EACAjB,iBAAAA,EACAC,IAbYiB,wBAiBZ3B,EAAAM,MAAAsB,OACAC,EAAkBC,EAAAA,6BACdD,EAAEA,EAAF,2BAEJpB,EAAAsB,SAAA,qBACAF,EAAEE,SAAA,qBACEtB,EAAMuB,KAAA,MAAAC,SACFJ,EAAEK,WAAA,6BACFL,EAAEM,OA9BNN,uPAkCIA,EAAAA,gBAAEC,MAAA,SAAAtB,GACFqB,EAAAA,eAAEO,IAAA,UAAA,UAGFP,EAAAA,0BAAEC,MAAA,SAA2BO,GAC7BR,EAAAA,0BAAES,SACGC,cAELV,EAAAA,6BAAAW,MAAiC,UACjCX,EAAAA,2BAAEQ,OAA8B,SACnCR,EAAA,0BAjBLU,YAAA,aAmBOR,SAAP,eAlFkCF,EAAA,0BAAAY,KAAA,QAAA,YAuE1BZ,EAAE,0BAA0BO,IAAI,cAAe,WAenDP,EAAA,6BAAWW,MAAAE,SACXC,EAAAA,2BAAJN,OAAAV,SACIiB,EAAAA,0BACJA,YAAU,eACFb,SAAA,aACJc,EAAAA,0BAFMJ,KAAA,QAAA,YAGNK,EAAAA,0BAHMV,IAAA,cAAA,YAAV/B,MAHJ0C,OAAQ,WAUJ,OAjGZC,GAAA,mBA4FgBH,KAAM,eACNC,QAAS,cACTG,SAAS,EACTC,QAML7C,KANmBE,oBAM1B,OACIP,eAAgBA","file":"../../scripts/layout/generic-nav-view.js","sourcesContent":["/** Real-time Communication feature **/\ndefine([\"mvc/ui/ui-modal\"], function(Modal) {\n    var GenericNavView = Backbone.View.extend({\n        initialize: function() {\n            this.modal = null;\n        },\n\n        /** makes bootstrap modal and iframe inside it */\n        makeModalIframe: function(e) {\n            // make modal\n            var host = window.Galaxy.config.communication_server_host,\n                port = window.Galaxy.config.communication_server_port,\n                username = escape(window.Galaxy.user.attributes.username),\n                persistent_communication_rooms = escape(\n                    window.Galaxy.config.persistent_communication_rooms\n                ),\n                query_string =\n                    \"?username=\" +\n                    username +\n                    \"&persistent_communication_rooms=\" +\n                    persistent_communication_rooms,\n                src = host + \":\" + port + query_string,\n                $el_chat_modal_header = null,\n                $el_chat_modal_body = null,\n                iframe_template =\n                    '<iframe class=\"f-iframe fade in communication-iframe\" src=\"' +\n                    src +\n                    '\"> </iframe>',\n                header_template =\n                    '<i class=\"fa fa-comment\" aria-hidden=\"true\" title=\"Communicate with other users\"></i>' +\n                    '<i class=\"fa fa-expand expand-compress-modal\" aria-hidden=\"true\" title=\"Maximize\"></i>' +\n                    '<i class=\"fa fa-times close-modal\" aria-hidden=\"true\" title=\"Close\"></i>',\n                frame_height = 350,\n                frame_width = 600,\n                class_names = \"ui-modal chat-modal\";\n\n            // deletes the chat modal if already present and create one\n            if ($(\".chat-modal\").length > 0) {\n                $(\".chat-modal\").remove();\n            }\n            // creates a modal\n            GenericNavView.modal = new Modal.View({\n                body: iframe_template,\n                height: frame_height,\n                width: frame_width,\n                closing_events: true,\n                title_separator: false,\n                cls: class_names\n            });\n\n            // shows modal\n            GenericNavView.modal.show();\n            $el_chat_modal_header = $(\".chat-modal .modal-header\");\n            $el_chat_modal_body = $(\".chat-modal .modal-body\");\n            // adjusts the css of bootstrap modal for chat\n            $el_chat_modal_header.addClass(\"modal-header-body\");\n            $el_chat_modal_body.addClass(\"modal-header-body\");\n            $el_chat_modal_header.find(\"h4\").remove();\n            $el_chat_modal_header.removeAttr(\"min-height padding border\");\n            $el_chat_modal_header.append(header_template);\n            // click event of the close button for chat\n            $(\".close-modal\").click(function(e) {\n                $(\".chat-modal\").css(\"display\", \"none\");\n            });\n            // click event of expand and compress icon\n            $(\".expand-compress-modal\").click(function(e) {\n                if ($(\".expand-compress-modal\").hasClass(\"fa-expand\")) {\n                    $(\".chat-modal .modal-dialog\").width(\"1000px\");\n                    $(\".chat-modal .modal-body\").height(\"575px\");\n                    $(\".expand-compress-modal\")\n                        .removeClass(\"fa-expand\")\n                        .addClass(\"fa-compress\");\n                    $(\".expand-compress-modal\").attr(\"title\", \"Minimize\");\n                    $(\".expand-compress-modal\").css(\"margin-left\", \"96.2%\");\n                } else {\n                    $(\".chat-modal .modal-dialog\").width(frame_width + \"px\");\n                    $(\".chat-modal .modal-body\").height(frame_height + \"px\");\n                    $(\".expand-compress-modal\")\n                        .removeClass(\"fa-compress\")\n                        .addClass(\"fa-expand\");\n                    $(\".expand-compress-modal\").attr(\"title\", \"Maximize\");\n                    $(\".expand-compress-modal\").css(\"margin-left\", \"93.2%\");\n                }\n            });\n            return this;\n        },\n\n        /**renders the chat icon as a nav item*/\n        render: function() {\n            var self = this,\n                navItem = {};\n            navItem = {\n                id: \"show-chat-online\",\n                icon: \"fa-comment-o\",\n                tooltip: \"Chat online\",\n                visible: false,\n                onclick: self.makeModalIframe\n            };\n            return navItem;\n        }\n    });\n\n    return {\n        GenericNavView: GenericNavView\n    };\n});\n"]}