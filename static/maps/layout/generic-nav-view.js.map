{"version":3,"sources":["layout/generic-nav-view.js"],"names":["define","Modal","Backbone","View","extend","initialize","GenericNavView","this","modal","makeModalIframe","e","$el_chat_modal_header","query_string","$el_chat_modal_body","host","iframe_template","config","communication_server_host","persistent_communication_rooms","window","Galaxy","communication_server_port","username","attributes","$","length","remove","body","height","frame_height","width","frame_width","closing_events","title_separator","cls","class_names","addClass","find","removeAttr","click","css","hasClass","removeClass","attr","render","tooltip","visible","onclick","navItem"],"mappings":"aACAA,QAAQ,mBAAoB,SAAUC,GAAtCD,IAAAA,EAAQE,SAAoBC,KAAAC,QAE5BC,WAAIC,WAGIC,KAAKC,MAAQ,MAIjBC,gBAAiB,SAAUC,GAA3BD,IAEHE,EAIIC,KAJJC,EAKUC,KALVC,EAMIJ,+DARDF,OAAAA,OAAiBO,OAAAC,0BAKhBC,IAJJC,OAAAC,OAAAJ,OAAAK,2BAGIC,aAFAR,OAAQK,OAAOC,OAAOJ,KAAdO,WAAqBN,UAEHG,mCADLJ,OAAOK,OAAAA,OAAAA,OAAAA,kCADhC,eA8DO,OA7CAG,EAAA,eAAIC,OAAA,GACAD,EAAAA,eAAAE,SAGXpB,EAAAA,MAAAA,IAAeE,EAAfL,MACIwB,KAAkBZ,EAClBa,OAXOC,IAYPC,MAXOC,IAYPC,gBAAAA,EACAC,iBAAAA,EACOC,IAbAC,wBAiBX7B,EAAAA,MAAAA,OACOK,EAAAA,EAAAA,6BACAE,EAAAA,EAAAA,2BAEAF,EAAAA,SAAsByB,qBACtBvB,EAAAA,SAAoBuB,qBAC3BzB,EAAAA,KAAAA,MAAsB0B,SACf1B,EAAAA,WAAsB2B,6BAC7B3B,EAAAA,OAhCIE,uPAkCJW,EAAAA,gBAAGe,MAAA,SAAuB7B,GACtBc,EAAAA,eAAGgB,IAAA,UAAqB,UAGrBhB,EAAAA,0BAAAe,MAA8BA,SAAM7B,GAChCc,EAAA,0BAAIiB,SAAA,cACAjB,EAAAA,6BAAAM,MAAA,UACAN,EAAAA,2BAAAI,OAAA,SACAJ,EAAAA,0BAAAkB,YAAA,aAAyDN,SAAU,eACnEZ,EAAAA,0BAAAmB,KAA8BA,QAA9B,YACAnB,EAAAA,0BAAAgB,IAA8BA,cAA9B,WAIAhB,EAAAA,6BAA+BI,MAAQC,SACvCL,EAAAA,2BAAAI,OAA8Bc,SAC9BlB,EAAAA,0BAAAkB,YAAmC,eAAnCN,SAAA,aACAZ,EAAAA,0BAAAmB,KAAA,QAAkC,YACrCnB,EAAA,0BAAAgB,IAAA,cAAA,YAGEjC,MAKPqC,OAAA,WA5ER,OAiFYC,GAAkB,mBAClBC,KAJM,eAKNC,QAAuBtC,cALjBqC,SAAV,EAOAC,QAPAC,KAOAvC,oBAID,OA3FPH,eAAAA","file":"../../scripts/layout/generic-nav-view.js","sourcesContent":["/** Real-time Communication feature **/\ndefine(['mvc/ui/ui-modal'], function( Modal ) {\n\nvar GenericNavView = Backbone.View.extend({\n\n    initialize: function ( ) {\n        this.modal = null;\n    },\n\n    /** makes bootstrap modal and iframe inside it */\n    makeModalIframe: function( e ) {\n\t// make modal\n\tvar host =  window.Galaxy.config.communication_server_host,\n\t    port = window.Galaxy.config.communication_server_port,\n\t    username = escape( window.Galaxy.user.attributes.username ),\n\t    persistent_communication_rooms = escape( window.Galaxy.config.persistent_communication_rooms ),\n\t    query_string = \"?username=\" + username + \"&persistent_communication_rooms=\" + persistent_communication_rooms,\n\t    src = host + \":\" + port + query_string,\n\t    $el_chat_modal_header = null,\n\t    $el_chat_modal_body = null,\n            iframe_template = '<iframe class=\"f-iframe fade in communication-iframe\" src=\"' + src + '\"> </iframe>',\n            header_template = '<i class=\"fa fa-comment\" aria-hidden=\"true\" title=\"Communicate with other users\"></i>' +\n                              '<i class=\"fa fa-expand expand-compress-modal\" aria-hidden=\"true\" title=\"Maximize\"></i>' + \n\t                      '<i class=\"fa fa-times close-modal\" aria-hidden=\"true\" title=\"Close\"></i>',\n            frame_height = 350,\n            frame_width = 600,\n            class_names = 'ui-modal chat-modal';\n        \n\t// deletes the chat modal if already present and create one\n        if( $( '.chat-modal' ).length > 0 ) {\n            $( '.chat-modal' ).remove();\n\t}\n        // creates a modal\n\tGenericNavView.modal = new Modal.View({\n\t    body            : iframe_template,\n\t    height          : frame_height,\n\t    width           : frame_width,\n\t    closing_events  : true,\n\t    title_separator : false,\n            cls             : class_names\n\t});\n\n\t// shows modal\n\tGenericNavView.modal.show();\n        $el_chat_modal_header = $( '.chat-modal .modal-header' );\n        $el_chat_modal_body = $( '.chat-modal .modal-body' );\n\t// adjusts the css of bootstrap modal for chat\n        $el_chat_modal_header.addClass('modal-header-body');\n        $el_chat_modal_body.addClass('modal-header-body');\n\t$el_chat_modal_header.find( 'h4' ).remove();\n        $el_chat_modal_header.removeAttr( 'min-height padding border' );\n\t$el_chat_modal_header.append( header_template );\n\t// click event of the close button for chat\n\t$( '.close-modal' ).click(function( e ) {\n\t    $( '.chat-modal' ).css( 'display', 'none' );\n\t});\n        // click event of expand and compress icon\n        $( '.expand-compress-modal' ).click(function( e ) {\n            if( $( '.expand-compress-modal' ).hasClass( 'fa-expand' ) ) {\n                $( '.chat-modal .modal-dialog' ).width( '1000px' );\n                $( '.chat-modal .modal-body' ).height( '575px' );\n                $( '.expand-compress-modal' ).removeClass( 'fa-expand' ).addClass( 'fa-compress' );\n                $( '.expand-compress-modal' ).attr('title', 'Minimize');\n                $( '.expand-compress-modal' ).css('margin-left', '96.2%');\n            }\n            else {\n                $( '.chat-modal .modal-dialog' ).width( frame_width + 'px' );\n                $( '.chat-modal .modal-body' ).height( frame_height + 'px' );\n                $( '.expand-compress-modal' ).removeClass( 'fa-compress' ).addClass( 'fa-expand' );\n                $( '.expand-compress-modal' ).attr('title', 'Maximize');\n                $( '.expand-compress-modal' ).css('margin-left', '93.2%');\n            }\n\t    \n\t});\n        return this;\n    },\n\n    /**renders the chat icon as a nav item*/\n    render: function() {\n        var self = this,\n            navItem = {};\n        navItem = {\n            id              : 'show-chat-online',\n            icon            : 'fa-comment-o',\n            tooltip         : 'Chat online',\n            visible         : false,\n            onclick         : self.makeModalIframe\n        }\n        return navItem;\n    }\n});\n\nreturn {\n    GenericNavView  : GenericNavView\n};\n\n});\n\n"]}