{"version":3,"sources":["libs/raven.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Raven","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","stringify","obj","replacer","spaces","cycleReplacer","JSON","serializer","stack","keys","key","value","slice","indexOf","join","thisPos","splice","push","Infinity","getSerialize","2","RavenConfigError","message","name","prototype","constructor","3","wrapMethod","console","level","callback","originalConsoleLevel","originalConsole","sentryLevel","args","arguments","msg","data","logger","extra","Function","apply","4","now","Date","_hasJSON","_hasDocument","document","_lastCapturedException","_lastEventId","_globalServer","_globalKey","_globalProject","_globalContext","_globalOptions","ignoreErrors","ignoreUrls","whitelistUrls","includePaths","crossOrigin","collectWindowErrors","maxMessageLength","stackTraceLimit","_ignoreOnError","_isRavenInstalled","_originalErrorStackTraceLimit","_originalConsole","_originalConsoleMethods","_plugins","_startTime","_wrappedBuiltIns","_breadcrumbs","_breadcrumbLimit","_lastCapturedEvent","_keypressTimeout","_location","location","_lastHref","href","method","TraceKit","utils","isFunction","isUndefined","isError","isEmptyObject","hasKey","joinRegExp","each","objectMerge","truncate","urlencode","uuid4","htmlTreeAsString","parseUrl","isString","wrapConsoleMethod","dsnKeys","split","dsnPattern","VERSION","debug","config","dsn","options","_logDebug","uri","_parseDSN","lastSlash","path","lastIndexOf","substr","_dsn","user","_globalSecret","pass","_getGlobalServer","_globalEndpoint","install","isSetup","report","subscribe","_handleOnErrorStackInfo","_wrapBuiltIns","_drainPlugins","context","func","undefined","wrap","_before","wrapped","deep","_ignoreNextOnError","captureException","__raven__","__raven_wrapper__","property","__inner__","uninstall","_restoreBuiltIns","ex","captureMessage","computeStackTrace","_handleStackInfo","ex1","test","_send","captureBreadcrumb","crumb","timestamp","shift","addPlugin","plugin","pluginArgs","Array","setUserContext","setExtraContext","_mergeContext","setTagsContext","tags","clearContext","getContext","parse","setEnvironment","environment","setRelease","release","setDataCallback","original","dataCallback","setShouldSendCallback","shouldSendCallback","setTransport","transport","lastException","lastEventId","ravenNotConfiguredError","afterLoad","RavenConfig","showReportDialog","eventId","encode","encodeURIComponent","qs","email","globalServer","script","createElement","async","src","head","body","appendChild","setTimeout","_triggerEvent","eventType","evt","toUpperCase","createEvent","initEvent","createEventObject","dispatchEvent","fireEvent","toLowerCase","_breadcrumbEventHandler","evtName","target","elem","category","_keypressEventHandler","tagName","timeout","clearTimeout","_captureUrlChange","from","to","parsedLoc","parsedTo","parsedFrom","protocol","host","relative","fill","replacement","noUndo","orig","wrapTimeFn","fn","originalCallback","wrapProp","prop","xhr","requestAnimationFrame","cb","addEventListener","attachEvent","eventTargets","proto","hasOwnProperty","capture","secure","handleEvent","err","before","xhrproto","XMLHttpRequest","origOpen","url","__raven_xhr","status_code","origSend","onreadystatechangeHandler","readyState","status","type","props","j","onreadystatechange","chrome","app","runtime","history","pushState","oldOnPopState","onpopstate","currentHref","origPushState","consoleMethodCallback","log","_","$","jQuery","ready","builtin","installer","concat","str","m","exec","allowSecretKey","port","stackInfo","frames","frame","_normalizeFrame","_processException","lineno","normalized","filename","line","colno","column","function","in_app","fileurl","stacktrace","reverse","exception","values","culprit","_trimPacket","max","_getHttpData","httpData","headers","User-Agent","navigator","userAgent","referrer","Referer","globalOptions","baseData","project","platform","request","breadcrumbs","serverName","server_name","event_id","auth","sentry_version","sentry_client","sentry_key","sentry_secret","_makeRequest","onSuccess","onError","opts","handler","XDomainRequest","replace","onload","open","send","setUser","setReleaseContext","6","7","5","RavenConstructor","_Raven","noConflict","what","objectPrototype","toString","isObject","obj1","obj2","object","patterns","pattern","sources","len","source","RegExp","pairs","match","query","fragment","crypto","msCrypto","getRandomValues","arr","Uint16Array","pad","num","v","c","Math","random","nextStr","out","height","sepLength","htmlElementAsString","parentNode","className","classes","attr","id","attrWhitelist","getAttribute","Object","getLocationHref","_slice","UNKNOWN_FUNCTION","ERROR_TYPES_RE","installGlobalHandler","handlers","unsubscribe","unsubscribeAll","uninstallGlobalHandler","notifyHandlers","isWindowError","inner","traceKitWindowOnError","lineNo","colNo","lastExceptionStack","augmentStackTraceWithInitialElement","processLastException","groups","_oldOnerrorHandler","_onErrorHandlerInstalled","onerror","_lastExceptionStack","_lastArgs","lastArgs","rethrow","incomplete","computeStackTraceFromStackProp","parts","element","gecko","winjs","lines","isNative","columnNumber","computeStackTraceFromStacktraceProp","opera10Regex","opera11Regex","computeStackTraceFromOperaMultiLineMessage","lineRE1","lineRE2","lineRE3","getElementsByTagName","item","initial","unshift","partial","computeStackTraceByWalkingCallerChain","depth","functionName","funcs","recursion","curr","caller","input","substring","result","sourceURL","fileName","lineNumber","description"],"mappings":"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","file":"../../scripts/libs/raven.js","sourcesContent":["/*! Raven.js 3.3.0 (74c6c03) | github.com/getsentry/raven-js */\n\n/*\n * Includes TraceKit\n * https://github.com/getsentry/TraceKit\n *\n * Copyright 2016 Matt Robenolt and other contributors\n * Released under the BSD license\n * https://github.com/getsentry/raven-js/blob/master/LICENSE\n *\n */\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Raven = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\nexports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\n\nfunction RavenConfigError(message) {\n    this.name = 'RavenConfigError';\n    this.message = message;\n}\nRavenConfigError.prototype = new Error();\nRavenConfigError.prototype.constructor = RavenConfigError;\n\nmodule.exports = RavenConfigError;\n\n},{}],3:[function(_dereq_,module,exports){\n'use strict';\n\nvar wrapMethod = function(console, level, callback) {\n    var originalConsoleLevel = console[level];\n    var originalConsole = console;\n\n    if (!(level in console)) {\n        return;\n    }\n\n    var sentryLevel = level === 'warn'\n        ? 'warning'\n        : level;\n\n    console[level] = function () {\n        var args = [].slice.call(arguments);\n\n        var msg = '' + args.join(' ');\n        var data = {level: sentryLevel, logger: 'console', extra: {'arguments': args}};\n        callback && callback(msg, data);\n\n        // this fails for some browsers. :(\n        if (originalConsoleLevel) {\n            // IE9 doesn't allow calling apply on console functions directly\n            // See: https://stackoverflow.com/questions/5472938/does-ie9-support-console-log-and-is-it-a-real-function#answer-5473193\n            Function.prototype.apply.call(\n                originalConsoleLevel,\n                originalConsole,\n                args\n            );\n        }\n    };\n};\n\nmodule.exports = {\n    wrapMethod: wrapMethod\n};\n\n},{}],4:[function(_dereq_,module,exports){\n/*global XDomainRequest:false*/\n'use strict';\n\nvar TraceKit = _dereq_(7);\nvar RavenConfigError = _dereq_(2);\nvar utils = _dereq_(6);\nvar stringify = _dereq_(1);\n\nvar isFunction = utils.isFunction;\nvar isUndefined = utils.isUndefined;\nvar isError = utils.isError;\nvar isEmptyObject = utils.isEmptyObject;\nvar hasKey = utils.hasKey;\nvar joinRegExp = utils.joinRegExp;\nvar each = utils.each;\nvar objectMerge = utils.objectMerge;\nvar truncate = utils.truncate;\nvar urlencode = utils.urlencode;\nvar uuid4 = utils.uuid4;\nvar htmlTreeAsString = utils.htmlTreeAsString;\nvar parseUrl = utils.parseUrl;\nvar isString = utils.isString;\n\nvar wrapConsoleMethod = _dereq_(3).wrapMethod;\n\nvar dsnKeys = 'source protocol user pass host port path'.split(' '),\n    dsnPattern = /^(?:(\\w+):)?\\/\\/(?:(\\w+)(:\\w+)?@)?([\\w\\.-]+)(?::(\\d+))?(\\/.*)/;\n\nfunction now() {\n    return +new Date();\n}\n\n// First, check for JSON support\n// If there is no JSON, we no-op the core features of Raven\n// since JSON is required to encode the payload\nfunction Raven() {\n    this._hasJSON = !!(typeof JSON === 'object' && JSON.stringify);\n    // Raven can run in contexts where there's no document (react-native)\n    this._hasDocument = typeof document !== 'undefined';\n    this._lastCapturedException = null;\n    this._lastEventId = null;\n    this._globalServer = null;\n    this._globalKey = null;\n    this._globalProject = null;\n    this._globalContext = {};\n    this._globalOptions = {\n        logger: 'javascript',\n        ignoreErrors: [],\n        ignoreUrls: [],\n        whitelistUrls: [],\n        includePaths: [],\n        crossOrigin: 'anonymous',\n        collectWindowErrors: true,\n        maxMessageLength: 0,\n        stackTraceLimit: 50\n    };\n    this._ignoreOnError = 0;\n    this._isRavenInstalled = false;\n    this._originalErrorStackTraceLimit = Error.stackTraceLimit;\n    // capture references to window.console *and* all its methods first\n    // before the console plugin has a chance to monkey patch\n    this._originalConsole = window.console || {};\n    this._originalConsoleMethods = {};\n    this._plugins = [];\n    this._startTime = now();\n    this._wrappedBuiltIns = [];\n    this._breadcrumbs = [];\n    this._breadcrumbLimit = 20;\n    this._lastCapturedEvent = null;\n    this._keypressTimeout;\n    this._location = window.location;\n    this._lastHref = this._location && this._location.href;\n\n    for (var method in this._originalConsole) {  // eslint-disable-line guard-for-in\n      this._originalConsoleMethods[method] = this._originalConsole[method];\n    }\n}\n\n/*\n * The core Raven singleton\n *\n * @this {Raven}\n */\n\nRaven.prototype = {\n    // Hardcode version string so that raven source can be loaded directly via\n    // webpack (using a build step causes webpack #1617). Grunt verifies that\n    // this value matches package.json during build.\n    //   See: https://github.com/getsentry/raven-js/issues/465\n    VERSION: '3.3.0',\n\n    debug: false,\n\n    TraceKit: TraceKit, // alias to TraceKit\n\n    /*\n     * Configure Raven with a DSN and extra options\n     *\n     * @param {string} dsn The public Sentry DSN\n     * @param {object} options Optional set of of global options [optional]\n     * @return {Raven}\n     */\n    config: function(dsn, options) {\n        var self = this;\n\n        if (this._globalServer) {\n                this._logDebug('error', 'Error: Raven has already been configured');\n            return this;\n        }\n        if (!dsn) return this;\n\n        // merge in options\n        if (options) {\n            each(options, function(key, value){\n                // tags and extra are special and need to be put into context\n                if (key === 'tags' || key === 'extra') {\n                    self._globalContext[key] = value;\n                } else {\n                    self._globalOptions[key] = value;\n                }\n            });\n        }\n\n        var uri = this._parseDSN(dsn),\n            lastSlash = uri.path.lastIndexOf('/'),\n            path = uri.path.substr(1, lastSlash);\n\n        this._dsn = dsn;\n\n        // \"Script error.\" is hard coded into browsers for errors that it can't read.\n        // this is the result of a script being pulled in from an external domain and CORS.\n        this._globalOptions.ignoreErrors.push(/^Script error\\.?$/);\n        this._globalOptions.ignoreErrors.push(/^Javascript error: Script error\\.? on line 0$/);\n\n        // join regexp rules into one big rule\n        this._globalOptions.ignoreErrors = joinRegExp(this._globalOptions.ignoreErrors);\n        this._globalOptions.ignoreUrls = this._globalOptions.ignoreUrls.length ? joinRegExp(this._globalOptions.ignoreUrls) : false;\n        this._globalOptions.whitelistUrls = this._globalOptions.whitelistUrls.length ? joinRegExp(this._globalOptions.whitelistUrls) : false;\n        this._globalOptions.includePaths = joinRegExp(this._globalOptions.includePaths);\n\n        this._globalKey = uri.user;\n        this._globalSecret = uri.pass && uri.pass.substr(1);\n        this._globalProject = uri.path.substr(lastSlash + 1);\n\n        this._globalServer = this._getGlobalServer(uri);\n\n        this._globalEndpoint = this._globalServer +\n            '/' + path + 'api/' + this._globalProject + '/store/';\n\n        TraceKit.collectWindowErrors = !!this._globalOptions.collectWindowErrors;\n\n        // return for chaining\n        return this;\n    },\n\n    /*\n     * Installs a global window.onerror error handler\n     * to capture and report uncaught exceptions.\n     * At this point, install() is required to be called due\n     * to the way TraceKit is set up.\n     *\n     * @return {Raven}\n     */\n    install: function() {\n        var self = this;\n        if (this.isSetup() && !this._isRavenInstalled) {\n            TraceKit.report.subscribe(function () {\n                self._handleOnErrorStackInfo.apply(self, arguments);\n            });\n            this._wrapBuiltIns();\n\n            // Install all of the plugins\n            this._drainPlugins();\n\n            this._isRavenInstalled = true;\n        }\n\n        Error.stackTraceLimit = this._globalOptions.stackTraceLimit;\n        return this;\n    },\n\n    /*\n     * Wrap code within a context so Raven can capture errors\n     * reliably across domains that is executed immediately.\n     *\n     * @param {object} options A specific set of options for this context [optional]\n     * @param {function} func The callback to be immediately executed within the context\n     * @param {array} args An array of arguments to be called with the callback [optional]\n     */\n    context: function(options, func, args) {\n        if (isFunction(options)) {\n            args = func || [];\n            func = options;\n            options = undefined;\n        }\n\n        return this.wrap(options, func).apply(this, args);\n    },\n\n    /*\n     * Wrap code within a context and returns back a new function to be executed\n     *\n     * @param {object} options A specific set of options for this context [optional]\n     * @param {function} func The function to be wrapped in a new context\n     * @param {function} func A function to call before the try/catch wrapper [optional, private]\n     * @return {function} The newly wrapped functions with a context\n     */\n    wrap: function(options, func, _before) {\n        var self = this;\n        // 1 argument has been passed, and it's not a function\n        // so just return it\n        if (isUndefined(func) && !isFunction(options)) {\n            return options;\n        }\n\n        // options is optional\n        if (isFunction(options)) {\n            func = options;\n            options = undefined;\n        }\n\n        // At this point, we've passed along 2 arguments, and the second one\n        // is not a function either, so we'll just return the second argument.\n        if (!isFunction(func)) {\n            return func;\n        }\n\n        // We don't wanna wrap it twice!\n        try {\n            if (func.__raven__) {\n                return func;\n            }\n        } catch (e) {\n            // Just accessing the __raven__ prop in some Selenium environments\n            // can cause a \"Permission denied\" exception (see raven-js#495).\n            // Bail on wrapping and return the function as-is (defers to window.onerror).\n            return func;\n        }\n\n        // If this has already been wrapped in the past, return that\n        if (func.__raven_wrapper__ ){\n            return func.__raven_wrapper__ ;\n        }\n\n        function wrapped() {\n            var args = [], i = arguments.length,\n                deep = !options || options && options.deep !== false;\n\n            if (_before && isFunction(_before)) {\n                _before.apply(this, arguments);\n            }\n\n            // Recursively wrap all of a function's arguments that are\n            // functions themselves.\n            while(i--) args[i] = deep ? self.wrap(options, arguments[i]) : arguments[i];\n\n            try {\n                return func.apply(this, args);\n            } catch(e) {\n                self._ignoreNextOnError();\n                self.captureException(e, options);\n                throw e;\n            }\n        }\n\n        // copy over properties of the old function\n        for (var property in func) {\n            if (hasKey(func, property)) {\n                wrapped[property] = func[property];\n            }\n        }\n        wrapped.prototype = func.prototype;\n\n        func.__raven_wrapper__ = wrapped;\n        // Signal that this function has been wrapped already\n        // for both debugging and to prevent it to being wrapped twice\n        wrapped.__raven__ = true;\n        wrapped.__inner__ = func;\n\n        return wrapped;\n    },\n\n    /*\n     * Uninstalls the global error handler.\n     *\n     * @return {Raven}\n     */\n    uninstall: function() {\n        TraceKit.report.uninstall();\n\n        this._restoreBuiltIns();\n\n        Error.stackTraceLimit = this._originalErrorStackTraceLimit;\n        this._isRavenInstalled = false;\n\n        return this;\n    },\n\n    /*\n     * Manually capture an exception and send it over to Sentry\n     *\n     * @param {error} ex An exception to be logged\n     * @param {object} options A specific set of options for this error [optional]\n     * @return {Raven}\n     */\n    captureException: function(ex, options) {\n        // If not an Error is passed through, recall as a message instead\n        if (!isError(ex)) return this.captureMessage(ex, options);\n\n        // Store the raw exception object for potential debugging and introspection\n        this._lastCapturedException = ex;\n\n        // TraceKit.report will re-raise any exception passed to it,\n        // which means you have to wrap it in try/catch. Instead, we\n        // can wrap it here and only re-raise if TraceKit.report\n        // raises an exception different from the one we asked to\n        // report on.\n        try {\n            var stack = TraceKit.computeStackTrace(ex);\n            this._handleStackInfo(stack, options);\n        } catch(ex1) {\n            if(ex !== ex1) {\n                throw ex1;\n            }\n        }\n\n        return this;\n    },\n\n    /*\n     * Manually send a message to Sentry\n     *\n     * @param {string} msg A plain message to be captured in Sentry\n     * @param {object} options A specific set of options for this message [optional]\n     * @return {Raven}\n     */\n    captureMessage: function(msg, options) {\n        // config() automagically converts ignoreErrors from a list to a RegExp so we need to test for an\n        // early call; we'll error on the side of logging anything called before configuration since it's\n        // probably something you should see:\n        if (!!this._globalOptions.ignoreErrors.test && this._globalOptions.ignoreErrors.test(msg)) {\n            return;\n        }\n\n        // Fire away!\n        this._send(\n            objectMerge({\n                message: msg + ''  // Make sure it's actually a string\n            }, options)\n        );\n\n        return this;\n    },\n\n    captureBreadcrumb: function (obj) {\n        var crumb = objectMerge({\n            timestamp: now() / 1000\n        }, obj);\n\n        this._breadcrumbs.push(crumb);\n        if (this._breadcrumbs.length > this._breadcrumbLimit) {\n            this._breadcrumbs.shift();\n        }\n    },\n\n    addPlugin: function(plugin /*arg1, arg2, ... argN*/) {\n        var pluginArgs = Array.prototype.slice.call(arguments, 1);\n\n        this._plugins.push([plugin, pluginArgs]);\n        if (this._isRavenInstalled) {\n            this._drainPlugins();\n        }\n\n        return this;\n    },\n\n    /*\n     * Set/clear a user to be sent along with the payload.\n     *\n     * @param {object} user An object representing user data [optional]\n     * @return {Raven}\n     */\n    setUserContext: function(user) {\n        // Intentionally do not merge here since that's an unexpected behavior.\n        this._globalContext.user = user;\n\n        return this;\n    },\n\n    /*\n     * Merge extra attributes to be sent along with the payload.\n     *\n     * @param {object} extra An object representing extra data [optional]\n     * @return {Raven}\n     */\n    setExtraContext: function(extra) {\n        this._mergeContext('extra', extra);\n\n        return this;\n    },\n\n    /*\n     * Merge tags to be sent along with the payload.\n     *\n     * @param {object} tags An object representing tags [optional]\n     * @return {Raven}\n     */\n    setTagsContext: function(tags) {\n        this._mergeContext('tags', tags);\n\n        return this;\n    },\n\n    /*\n     * Clear all of the context.\n     *\n     * @return {Raven}\n     */\n    clearContext: function() {\n        this._globalContext = {};\n\n        return this;\n    },\n\n    /*\n     * Get a copy of the current context. This cannot be mutated.\n     *\n     * @return {object} copy of context\n     */\n    getContext: function() {\n        // lol javascript\n        return JSON.parse(stringify(this._globalContext));\n    },\n\n\n    /*\n     * Set environment of application\n     *\n     * @param {string} environment Typically something like 'production'.\n     * @return {Raven}\n     */\n    setEnvironment: function(environment) {\n        this._globalOptions.environment = environment;\n\n        return this;\n    },\n\n    /*\n     * Set release version of application\n     *\n     * @param {string} release Typically something like a git SHA to identify version\n     * @return {Raven}\n     */\n    setRelease: function(release) {\n        this._globalOptions.release = release;\n\n        return this;\n    },\n\n    /*\n     * Set the dataCallback option\n     *\n     * @param {function} callback The callback to run which allows the\n     *                            data blob to be mutated before sending\n     * @return {Raven}\n     */\n    setDataCallback: function(callback) {\n        var original = this._globalOptions.dataCallback;\n        this._globalOptions.dataCallback = isFunction(callback)\n          ? function (data) { return callback(data, original); }\n          : callback;\n\n        return this;\n    },\n\n    /*\n     * Set the shouldSendCallback option\n     *\n     * @param {function} callback The callback to run which allows\n     *                            introspecting the blob before sending\n     * @return {Raven}\n     */\n    setShouldSendCallback: function(callback) {\n        var original = this._globalOptions.shouldSendCallback;\n        this._globalOptions.shouldSendCallback = isFunction(callback)\n            ? function (data) { return callback(data, original); }\n            : callback;\n\n        return this;\n    },\n\n    /**\n     * Override the default HTTP transport mechanism that transmits data\n     * to the Sentry server.\n     *\n     * @param {function} transport Function invoked instead of the default\n     *                             `makeRequest` handler.\n     *\n     * @return {Raven}\n     */\n    setTransport: function(transport) {\n        this._globalOptions.transport = transport;\n\n        return this;\n    },\n\n    /*\n     * Get the latest raw exception that was captured by Raven.\n     *\n     * @return {error}\n     */\n    lastException: function() {\n        return this._lastCapturedException;\n    },\n\n    /*\n     * Get the last event id\n     *\n     * @return {string}\n     */\n    lastEventId: function() {\n        return this._lastEventId;\n    },\n\n    /*\n     * Determine if Raven is setup and ready to go.\n     *\n     * @return {boolean}\n     */\n    isSetup: function() {\n        if (!this._hasJSON) return false;  // needs JSON support\n        if (!this._globalServer) {\n            if (!this.ravenNotConfiguredError) {\n              this.ravenNotConfiguredError = true;\n              this._logDebug('error', 'Error: Raven has not been configured.');\n            }\n            return false;\n        }\n        return true;\n    },\n\n    afterLoad: function () {\n        // TODO: remove window dependence?\n\n        // Attempt to initialize Raven on load\n        var RavenConfig = window.RavenConfig;\n        if (RavenConfig) {\n            this.config(RavenConfig.dsn, RavenConfig.config).install();\n        }\n    },\n\n    showReportDialog: function (options) {\n        if (!window.document) // doesn't work without a document (React native)\n            return;\n\n        options = options || {};\n\n        var lastEventId = options.eventId || this.lastEventId();\n        if (!lastEventId) {\n            throw new RavenConfigError('Missing eventId');\n        }\n\n        var dsn = options.dsn || this._dsn;\n        if (!dsn) {\n            throw new RavenConfigError('Missing DSN');\n        }\n\n        var encode = encodeURIComponent;\n        var qs = '';\n        qs += '?eventId=' + encode(lastEventId);\n        qs += '&dsn=' + encode(dsn);\n\n        var user = options.user || this._globalContext.user;\n        if (user) {\n            if (user.name)  qs += '&name=' + encode(user.name);\n            if (user.email) qs += '&email=' + encode(user.email);\n        }\n\n        var globalServer = this._getGlobalServer(this._parseDSN(dsn));\n\n        var script = document.createElement('script');\n        script.async = true;\n        script.src = globalServer + '/api/embed/error-page/' + qs;\n        (document.head || document.body).appendChild(script);\n    },\n\n    /**** Private functions ****/\n    _ignoreNextOnError: function () {\n        var self = this;\n        this._ignoreOnError += 1;\n        setTimeout(function () {\n            // onerror should trigger before setTimeout\n            self._ignoreOnError -= 1;\n        });\n    },\n\n    _triggerEvent: function(eventType, options) {\n        // NOTE: `event` is a native browser thing, so let's avoid conflicting wiht it\n        var evt, key;\n\n        if (!this._hasDocument)\n            return;\n\n        options = options || {};\n\n        eventType = 'raven' + eventType.substr(0,1).toUpperCase() + eventType.substr(1);\n\n        if (document.createEvent) {\n            evt = document.createEvent('HTMLEvents');\n            evt.initEvent(eventType, true, true);\n        } else {\n            evt = document.createEventObject();\n            evt.eventType = eventType;\n        }\n\n        for (key in options) if (hasKey(options, key)) {\n            evt[key] = options[key];\n        }\n\n        if (document.createEvent) {\n            // IE9 if standards\n            document.dispatchEvent(evt);\n        } else {\n            // IE8 regardless of Quirks or Standards\n            // IE9 if quirks\n            try {\n                document.fireEvent('on' + evt.eventType.toLowerCase(), evt);\n            } catch(e) {\n                // Do nothing\n            }\n        }\n    },\n\n    /**\n     * Wraps addEventListener to capture UI breadcrumbs\n     * @param evtName the event name (e.g. \"click\")\n     * @returns {Function}\n     * @private\n     */\n    _breadcrumbEventHandler: function(evtName) {\n        var self = this;\n        return function (evt) {\n            // reset keypress timeout; e.g. triggering a 'click' after\n            // a 'keypress' will reset the keypress debounce so that a new\n            // set of keypresses can be recorded\n            self._keypressTimeout = null;\n\n            // It's possible this handler might trigger multiple times for the same\n            // event (e.g. event propagation through node ancestors). Ignore if we've\n            // already captured the event.\n            if (self._lastCapturedEvent === evt)\n                return;\n\n            self._lastCapturedEvent = evt;\n            var elem = evt.target;\n\n            var target;\n\n            // try/catch htmlTreeAsString because it's particularly complicated, and\n            // just accessing the DOM incorrectly can throw an exception in some circumstances.\n            try {\n                target = htmlTreeAsString(elem);\n            } catch (e) {\n                target = '<unknown>';\n            }\n\n            self.captureBreadcrumb({\n                category: 'ui.' + evtName, // e.g. ui.click, ui.input\n                message: target\n            });\n        };\n    },\n\n    /**\n     * Wraps addEventListener to capture keypress UI events\n     * @returns {Function}\n     * @private\n     */\n    _keypressEventHandler: function() {\n        var self = this,\n            debounceDuration = 1000; // milliseconds\n\n        // TODO: if somehow user switches keypress target before\n        //       debounce timeout is triggered, we will only capture\n        //       a single breadcrumb from the FIRST target (acceptable?)\n\n        return function (evt) {\n            var target = evt.target,\n                tagName = target && target.tagName;\n\n            // only consider keypress events on actual input elements\n            // this will disregard keypresses targeting body (e.g. tabbing\n            // through elements, hotkeys, etc)\n            if (!tagName || tagName !== 'INPUT' && tagName !== 'TEXTAREA')\n                return;\n\n            // record first keypress in a series, but ignore subsequent\n            // keypresses until debounce clears\n            var timeout = self._keypressTimeout;\n            if (!timeout) {\n                self._breadcrumbEventHandler('input')(evt);\n            }\n            clearTimeout(timeout);\n            self._keypressTimeout = setTimeout(function () {\n               self._keypressTimeout = null;\n            }, debounceDuration);\n        };\n    },\n\n    /**\n     * Captures a breadcrumb of type \"navigation\", normalizing input URLs\n     * @param to the originating URL\n     * @param from the target URL\n     * @private\n     */\n    _captureUrlChange: function(from, to) {\n        var parsedLoc = parseUrl(this._location.href);\n        var parsedTo = parseUrl(to);\n        var parsedFrom = parseUrl(from);\n\n        // because onpopstate only tells you the \"new\" (to) value of location.href, and\n        // not the previous (from) value, we need to track the value of the current URL\n        // state ourselves\n        this._lastHref = to;\n\n        // Use only the path component of the URL if the URL matches the current\n        // document (almost all the time when using pushState)\n        if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host)\n            to = parsedTo.relative;\n        if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host)\n            from = parsedFrom.relative;\n\n        this.captureBreadcrumb({\n            category: 'navigation',\n            data: {\n                to: to,\n                from: from\n            }\n        });\n    },\n\n    /**\n     * Install any queued plugins\n     */\n    _wrapBuiltIns: function() {\n        var self = this;\n\n        function fill(obj, name, replacement, noUndo) {\n            var orig = obj[name];\n            obj[name] = replacement(orig);\n            if (!noUndo) {\n                self._wrappedBuiltIns.push([obj, name, orig]);\n            }\n        }\n\n        function wrapTimeFn(orig) {\n            return function (fn, t) { // preserve arity\n                // Make a copy of the arguments to prevent deoptimization\n                // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n                var args = new Array(arguments.length);\n                for(var i = 0; i < args.length; ++i) {\n                    args[i] = arguments[i];\n                }\n                var originalCallback = args[0];\n                if (isFunction(originalCallback)) {\n                    args[0] = self.wrap(originalCallback);\n                }\n\n                // IE < 9 doesn't support .call/.apply on setInterval/setTimeout, but it\n                // also supports only two arguments and doesn't care what this is, so we\n                // can just call the original function directly.\n                if (orig.apply) {\n                    return orig.apply(this, args);\n                } else {\n                    return orig(args[0], args[1]);\n                }\n            };\n        }\n\n        function wrapEventTarget(global) {\n            var proto = window[global] && window[global].prototype;\n            if (proto && proto.hasOwnProperty && proto.hasOwnProperty('addEventListener')) {\n                fill(proto, 'addEventListener', function(orig) {\n                    return function (evtName, fn, capture, secure) { // preserve arity\n                        try {\n                            if (fn && fn.handleEvent) {\n                                fn.handleEvent = self.wrap(fn.handleEvent);\n                            }\n                        } catch (err) {\n                            // can sometimes get 'Permission denied to access property \"handle Event'\n                        }\n\n\n                        // TODO: more than just click\n                        var before;\n                        if (global === 'EventTarget' || global === 'Node') {\n                            if (evtName === 'click'){\n                                before = self._breadcrumbEventHandler(evtName);\n                            } else if (evtName === 'keypress') {\n                                before = self._keypressEventHandler();\n                            }\n                        }\n                        return orig.call(this, evtName, self.wrap(fn, undefined, before), capture, secure);\n                    };\n                });\n                fill(proto, 'removeEventListener', function (orig) {\n                    return function (evt, fn, capture, secure) {\n                        fn = fn && (fn.__raven_wrapper__ ? fn.__raven_wrapper__  : fn);\n                        return orig.call(this, evt, fn, capture, secure);\n                    };\n                });\n            }\n        }\n\n        function wrapProp(prop, xhr) {\n            if (prop in xhr && isFunction(xhr[prop])) {\n                fill(xhr, prop, function (orig) {\n                    return self.wrap(orig);\n                }, true /* noUndo */); // don't track filled methods on XHR instances\n            }\n        }\n\n        fill(window, 'setTimeout', wrapTimeFn);\n        fill(window, 'setInterval', wrapTimeFn);\n        if (window.requestAnimationFrame) {\n            fill(window, 'requestAnimationFrame', function (orig) {\n                return function (cb) {\n                    return orig(self.wrap(cb));\n                };\n            });\n        }\n\n        // Capture breadcrubms from any click that is unhandled / bubbled up all the way\n        // to the document. Do this before we instrument addEventListener.\n        if (this._hasDocument) {\n            if (document.addEventListener) {\n                document.addEventListener('click', self._breadcrumbEventHandler('click'), false);\n                document.addEventListener('keypress', self._keypressEventHandler(), false);\n            }\n            else {\n                // IE8 Compatibility\n                document.attachEvent('onclick', self._breadcrumbEventHandler('click'));\n                document.attachEvent('onkeypress', self._keypressEventHandler());\n            }\n        }\n\n        // event targets borrowed from bugsnag-js:\n        // https://github.com/bugsnag/bugsnag-js/blob/master/src/bugsnag.js#L666\n        var eventTargets = ['EventTarget', 'Window', 'Node', 'ApplicationCache', 'AudioTrackList', 'ChannelMergerNode', 'CryptoOperation', 'EventSource', 'FileReader', 'HTMLUnknownElement', 'IDBDatabase', 'IDBRequest', 'IDBTransaction', 'KeyOperation', 'MediaController', 'MessagePort', 'ModalWindow', 'Notification', 'SVGElementInstance', 'Screen', 'TextTrack', 'TextTrackCue', 'TextTrackList', 'WebSocket', 'WebSocketWorker', 'Worker', 'XMLHttpRequest', 'XMLHttpRequestEventTarget', 'XMLHttpRequestUpload'];\n        for (var i = 0; i < eventTargets.length; i++) {\n            wrapEventTarget(eventTargets[i]);\n        }\n\n        if ('XMLHttpRequest' in window) {\n            var xhrproto = XMLHttpRequest.prototype;\n            fill(xhrproto, 'open', function(origOpen) {\n                return function (method, url) { // preserve arity\n\n                    // if Sentry key appears in URL, don't capture\n                    if (isString(url) && url.indexOf(self._globalKey) === -1) {\n                        this.__raven_xhr = {\n                            method: method,\n                            url: url,\n                            status_code: null\n                        };\n                    }\n\n                    return origOpen.apply(this, arguments);\n                };\n            });\n\n            fill(xhrproto, 'send', function(origSend) {\n                return function (data) { // preserve arity\n                    var xhr = this;\n\n                    function onreadystatechangeHandler() {\n                        if (xhr.__raven_xhr && (xhr.readyState === 1 || xhr.readyState === 4)) {\n                            try {\n                                // touching statusCode in some platforms throws\n                                // an exception\n                                xhr.__raven_xhr.status_code = xhr.status;\n                            } catch (e) { /* do nothing */ }\n                            self.captureBreadcrumb({\n                                type: 'http',\n                                category: 'xhr',\n                                data: xhr.__raven_xhr\n                            });\n                        }\n                    }\n\n                    var props = ['onload', 'onerror', 'onprogress'];\n                    for (var j = 0; j < props.length; j++) {\n                        wrapProp(props[j], xhr);\n                    }\n\n                    if ('onreadystatechange' in xhr && isFunction(xhr.onreadystatechange)) {\n                        fill(xhr, 'onreadystatechange', function (orig) {\n                            return self.wrap(orig, undefined, onreadystatechangeHandler);\n                        }, true /* noUndo */);\n                    } else {\n                        // if onreadystatechange wasn't actually set by the page on this xhr, we\n                        // are free to set our own and capture the breadcrumb\n                        xhr.onreadystatechange = onreadystatechangeHandler;\n                    }\n\n                    return origSend.apply(this, arguments);\n                };\n            });\n        }\n\n        // record navigation (URL) changes\n        // NOTE: in Chrome App environment, touching history.pushState, *even inside\n        //       a try/catch block*, will cause Chrome to output an error to console.error\n        // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n        var chrome = window.chrome;\n        var isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n        var hasPushState = !isChromePackagedApp && window.history && history.pushState;\n        if (hasPushState) {\n            // TODO: remove onpopstate handler on uninstall()\n            var oldOnPopState = window.onpopstate;\n            window.onpopstate = function () {\n                var currentHref = self._location.href;\n                self._captureUrlChange(self._lastHref, currentHref);\n\n                if (oldOnPopState) {\n                    return oldOnPopState.apply(this, arguments);\n                }\n            };\n\n            fill(history, 'pushState', function (origPushState) {\n                // note history.pushState.length is 0; intentionally not declaring\n                // params to preserve 0 arity\n                return function(/* state, title, url */) {\n                    var url = arguments.length > 2 ? arguments[2] : undefined;\n\n                    // url argument is optional\n                    if (url) {\n                        // coerce to string (this is what pushState does)\n                        self._captureUrlChange(self._lastHref, url + '');\n                    }\n\n                    return origPushState.apply(this, arguments);\n                };\n            });\n        }\n\n        // console\n        var consoleMethodCallback = function (msg, data) {\n            self.captureBreadcrumb({\n                message: msg,\n                level: data.level,\n                category: 'console'\n            });\n        };\n\n        if ('console' in window && console.log) {\n            each(['debug', 'info', 'warn', 'error', 'log'], function (_, level) {\n                wrapConsoleMethod(console, level, consoleMethodCallback);\n            });\n        }\n\n        var $ = window.jQuery || window.$;\n        if ($ && $.fn && $.fn.ready) {\n            fill($.fn, 'ready', function (orig) {\n                return function (fn) {\n                    return orig.call(this, self.wrap(fn));\n                };\n            });\n        }\n    },\n\n    _restoreBuiltIns: function () {\n        // restore any wrapped builtins\n        var builtin;\n        while (this._wrappedBuiltIns.length) {\n            builtin = this._wrappedBuiltIns.shift();\n\n            var obj = builtin[0],\n              name = builtin[1],\n              orig = builtin[2];\n\n            obj[name] = orig;\n        }\n    },\n\n    _drainPlugins: function() {\n        var self = this;\n\n        // FIX ME TODO\n        each(this._plugins, function(_, plugin) {\n            var installer = plugin[0];\n            var args = plugin[1];\n            installer.apply(self, [self].concat(args));\n        });\n    },\n\n    _parseDSN: function(str) {\n        var m = dsnPattern.exec(str),\n            dsn = {},\n            i = 7;\n\n        try {\n            while (i--) dsn[dsnKeys[i]] = m[i] || '';\n        } catch(e) {\n            throw new RavenConfigError('Invalid DSN: ' + str);\n        }\n\n        if (dsn.pass && !this._globalOptions.allowSecretKey) {\n            throw new RavenConfigError('Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key');\n        }\n\n        return dsn;\n    },\n\n    _getGlobalServer: function(uri) {\n        // assemble the endpoint from the uri pieces\n        var globalServer = '//' + uri.host +\n            (uri.port ? ':' + uri.port : '');\n\n        if (uri.protocol) {\n            globalServer = uri.protocol + ':' + globalServer;\n        }\n        return globalServer;\n    },\n\n    _handleOnErrorStackInfo: function() {\n        // if we are intentionally ignoring errors via onerror, bail out\n        if (!this._ignoreOnError) {\n            this._handleStackInfo.apply(this, arguments);\n        }\n    },\n\n    _handleStackInfo: function(stackInfo, options) {\n        var self = this;\n        var frames = [];\n\n        if (stackInfo.stack && stackInfo.stack.length) {\n            each(stackInfo.stack, function(i, stack) {\n                var frame = self._normalizeFrame(stack);\n                if (frame) {\n                    frames.push(frame);\n                }\n            });\n        }\n\n        this._triggerEvent('handle', {\n            stackInfo: stackInfo,\n            options: options\n        });\n\n        this._processException(\n            stackInfo.name,\n            stackInfo.message,\n            stackInfo.url,\n            stackInfo.lineno,\n            frames.slice(0, this._globalOptions.stackTraceLimit),\n            options\n        );\n    },\n\n    _normalizeFrame: function(frame) {\n        if (!frame.url) return;\n\n        // normalize the frames data\n        var normalized = {\n            filename:   frame.url,\n            lineno:     frame.line,\n            colno:      frame.column,\n            'function': frame.func || '?'\n        };\n\n        normalized.in_app = !( // determine if an exception came from outside of our app\n            // first we check the global includePaths list.\n            !!this._globalOptions.includePaths.test && !this._globalOptions.includePaths.test(normalized.filename) ||\n            // Now we check for fun, if the function name is Raven or TraceKit\n            /(Raven|TraceKit)\\./.test(normalized['function']) ||\n            // finally, we do a last ditch effort and check for raven.min.js\n            /raven\\.(min\\.)?js$/.test(normalized.filename)\n        );\n\n        return normalized;\n    },\n\n    _processException: function(type, message, fileurl, lineno, frames, options) {\n        var stacktrace;\n\n        if (!!this._globalOptions.ignoreErrors.test && this._globalOptions.ignoreErrors.test(message)) return;\n\n        message += '';\n\n        if (frames && frames.length) {\n            fileurl = frames[0].filename || fileurl;\n            // Sentry expects frames oldest to newest\n            // and JS sends them as newest to oldest\n            frames.reverse();\n            stacktrace = {frames: frames};\n        } else if (fileurl) {\n            stacktrace = {\n                frames: [{\n                    filename: fileurl,\n                    lineno: lineno,\n                    in_app: true\n                }]\n            };\n        }\n\n        if (!!this._globalOptions.ignoreUrls.test && this._globalOptions.ignoreUrls.test(fileurl)) return;\n        if (!!this._globalOptions.whitelistUrls.test && !this._globalOptions.whitelistUrls.test(fileurl)) return;\n\n        var data = objectMerge({\n            // sentry.interfaces.Exception\n            exception: {\n                values: [{\n                    type: type,\n                    value: message,\n                    stacktrace: stacktrace\n                }]\n            },\n            culprit: fileurl\n        }, options);\n\n        // Fire away!\n        this._send(data);\n    },\n\n    _trimPacket: function(data) {\n        // For now, we only want to truncate the two different messages\n        // but this could/should be expanded to just trim everything\n        var max = this._globalOptions.maxMessageLength;\n        if (data.message) {\n            data.message = truncate(data.message, max);\n        }\n        if (data.exception) {\n            var exception = data.exception.values[0];\n            exception.value = truncate(exception.value, max);\n        }\n\n        return data;\n    },\n\n    _getHttpData: function() {\n        if (!this._hasDocument || !document.location || !document.location.href) {\n            return;\n        }\n\n        var httpData = {\n            headers: {\n                'User-Agent': navigator.userAgent\n            }\n        };\n\n        httpData.url = document.location.href;\n\n        if (document.referrer) {\n            httpData.headers.Referer = document.referrer;\n        }\n\n        return httpData;\n    },\n\n\n    _send: function(data) {\n        var self = this;\n\n        var globalOptions = this._globalOptions;\n\n        var baseData = {\n            project: this._globalProject,\n            logger: globalOptions.logger,\n            platform: 'javascript'\n        }, httpData = this._getHttpData();\n\n        if (httpData) {\n            baseData.request = httpData;\n        }\n\n        data = objectMerge(baseData, data);\n\n        // Merge in the tags and extra separately since objectMerge doesn't handle a deep merge\n        data.tags = objectMerge(objectMerge({}, this._globalContext.tags), data.tags);\n        data.extra = objectMerge(objectMerge({}, this._globalContext.extra), data.extra);\n\n        // Send along our own collected metadata with extra\n        data.extra['session:duration'] = now() - this._startTime;\n\n        if (this._breadcrumbs && this._breadcrumbs.length > 0) {\n            // intentionally make shallow copy so that additions\n            // to breadcrumbs aren't accidentally sent in this request\n            data.breadcrumbs = {\n                values: [].slice.call(this._breadcrumbs, 0)\n            };\n        }\n\n        // If there are no tags/extra, strip the key from the payload alltogther.\n        if (isEmptyObject(data.tags)) delete data.tags;\n\n        if (this._globalContext.user) {\n            // sentry.interfaces.User\n            data.user = this._globalContext.user;\n        }\n\n        // Include the environment if it's defined in globalOptions\n        if (globalOptions.environment) data.environment = globalOptions.environment;\n\n        // Include the release if it's defined in globalOptions\n        if (globalOptions.release) data.release = globalOptions.release;\n\n        // Include server_name if it's defined in globalOptions\n        if (globalOptions.serverName) data.server_name = globalOptions.serverName;\n\n        if (isFunction(globalOptions.dataCallback)) {\n            data = globalOptions.dataCallback(data) || data;\n        }\n\n        // Why??????????\n        if (!data || isEmptyObject(data)) {\n            return;\n        }\n\n        // Check if the request should be filtered or not\n        if (isFunction(globalOptions.shouldSendCallback) && !globalOptions.shouldSendCallback(data)) {\n            return;\n        }\n\n        // Send along an event_id if not explicitly passed.\n        // This event_id can be used to reference the error within Sentry itself.\n        // Set lastEventId after we know the error should actually be sent\n        this._lastEventId = data.event_id || (data.event_id = uuid4());\n\n        // Try and clean up the packet before sending by truncating long values\n        data = this._trimPacket(data);\n\n        this._logDebug('debug', 'Raven about to send:', data);\n\n        if (!this.isSetup()) return;\n\n        var auth = {\n            sentry_version: '7',\n            sentry_client: 'raven-js/' + this.VERSION,\n            sentry_key: this._globalKey\n        };\n        if (this._globalSecret) {\n            auth.sentry_secret = this._globalSecret;\n        }\n\n        var exception = data.exception && data.exception.values[0];\n        this.captureBreadcrumb({\n            category: 'sentry',\n            message: exception\n                ? (exception.type ? exception.type + ': ' : '') + exception.message\n                : data.message,\n            event_id: data.event_id,\n            level: data.level || 'error' // presume error unless specified\n        });\n\n        var url = this._globalEndpoint;\n        (globalOptions.transport || this._makeRequest).call(this, {\n            url: url,\n            auth: auth,\n            data: data,\n            options: globalOptions,\n            onSuccess: function success() {\n                self._triggerEvent('success', {\n                    data: data,\n                    src: url\n                });\n            },\n            onError: function failure() {\n                self._triggerEvent('failure', {\n                    data: data,\n                    src: url\n                });\n            }\n        });\n    },\n\n    _makeRequest: function(opts) {\n        var request = new XMLHttpRequest();\n\n        // if browser doesn't support CORS (e.g. IE7), we are out of luck\n        var hasCORS =\n            'withCredentials' in request ||\n            typeof XDomainRequest !== 'undefined';\n\n        if (!hasCORS) return;\n\n        var url = opts.url;\n        function handler() {\n            if (request.status === 200) {\n                if (opts.onSuccess) {\n                    opts.onSuccess();\n                }\n            } else if (opts.onError) {\n                opts.onError();\n            }\n        }\n\n        if ('withCredentials' in request) {\n            request.onreadystatechange = function () {\n                if (request.readyState !== 4) {\n                    return;\n                }\n                handler();\n            };\n        } else {\n            request = new XDomainRequest();\n            // xdomainrequest cannot go http -> https (or vice versa),\n            // so always use protocol relative\n            url = url.replace(/^https?:/, '');\n\n            // onreadystatechange not supported by XDomainRequest\n            request.onload = handler;\n        }\n\n        // NOTE: auth is intentionally sent as part of query string (NOT as custom\n        //       HTTP header) so as to avoid preflight CORS requests\n        request.open('POST', url + '?' + urlencode(opts.auth));\n        request.send(stringify(opts.data));\n    },\n\n    _logDebug: function(level) {\n        if (this._originalConsoleMethods[level] && this.debug) {\n            // In IE<10 console methods do not have their own 'apply' method\n            Function.prototype.apply.call(\n                this._originalConsoleMethods[level],\n                this._originalConsole,\n                [].slice.call(arguments, 1)\n            );\n        }\n    },\n\n    _mergeContext: function(key, context) {\n        if (isUndefined(context)) {\n            delete this._globalContext[key];\n        } else {\n            this._globalContext[key] = objectMerge(this._globalContext[key] || {}, context);\n        }\n    }\n};\n\n// Deprecations\nRaven.prototype.setUser = Raven.prototype.setUserContext;\nRaven.prototype.setReleaseContext = Raven.prototype.setRelease;\n\nmodule.exports = Raven;\n\n},{\"1\":1,\"2\":2,\"3\":3,\"6\":6,\"7\":7}],5:[function(_dereq_,module,exports){\n/**\n * Enforces a single instance of the Raven client, and the\n * main entry point for Raven. If you are a consumer of the\n * Raven library, you SHOULD load this file (vs raven.js).\n **/\n\n'use strict';\n\nvar RavenConstructor = _dereq_(4);\n\nvar _Raven = window.Raven;\n\nvar Raven = new RavenConstructor();\n\n/*\n * Allow multiple versions of Raven to be installed.\n * Strip Raven from the global context and returns the instance.\n *\n * @return {Raven}\n */\nRaven.noConflict = function () {\n\twindow.Raven = _Raven;\n\treturn Raven;\n};\n\nRaven.afterLoad();\n\nmodule.exports = Raven;\n\n},{\"4\":4}],6:[function(_dereq_,module,exports){\n/*eslint no-extra-parens:0*/\n'use strict';\n\nvar objectPrototype = Object.prototype;\n\nfunction isUndefined(what) {\n    return what === void 0;\n}\n\nfunction isFunction(what) {\n    return typeof what === 'function';\n}\n\nfunction isString(what) {\n    return objectPrototype.toString.call(what) === '[object String]';\n}\n\nfunction isObject(what) {\n    return typeof what === 'object' && what !== null;\n}\n\nfunction isEmptyObject(what) {\n    for (var _ in what) return false;  // eslint-disable-line guard-for-in, no-unused-vars\n    return true;\n}\n\n// Sorta yanked from https://github.com/joyent/node/blob/aa3b4b4/lib/util.js#L560\n// with some tiny modifications\nfunction isError(what) {\n    var toString = objectPrototype.toString.call(what);\n    return isObject(what) &&\n        toString === '[object Error]' ||\n        toString === '[object Exception]' || // Firefox NS_ERROR_FAILURE Exceptions\n        what instanceof Error;\n}\n\nfunction each(obj, callback) {\n    var i, j;\n\n    if (isUndefined(obj.length)) {\n        for (i in obj) {\n            if (hasKey(obj, i)) {\n                callback.call(null, i, obj[i]);\n            }\n        }\n    } else {\n        j = obj.length;\n        if (j) {\n            for (i = 0; i < j; i++) {\n                callback.call(null, i, obj[i]);\n            }\n        }\n    }\n}\n\nfunction objectMerge(obj1, obj2) {\n    if (!obj2) {\n        return obj1;\n    }\n    each(obj2, function(key, value){\n        obj1[key] = value;\n    });\n    return obj1;\n}\n\nfunction truncate(str, max) {\n    return !max || str.length <= max ? str : str.substr(0, max) + '\\u2026';\n}\n\n/**\n * hasKey, a better form of hasOwnProperty\n * Example: hasKey(MainHostObject, property) === true/false\n *\n * @param {Object} host object to check property\n * @param {string} key to check\n */\nfunction hasKey(object, key) {\n    return objectPrototype.hasOwnProperty.call(object, key);\n}\n\nfunction joinRegExp(patterns) {\n    // Combine an array of regular expressions and strings into one large regexp\n    // Be mad.\n    var sources = [],\n        i = 0, len = patterns.length,\n        pattern;\n\n    for (; i < len; i++) {\n        pattern = patterns[i];\n        if (isString(pattern)) {\n            // If it's a string, we need to escape it\n            // Taken from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n            sources.push(pattern.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1'));\n        } else if (pattern && pattern.source) {\n            // If it's a regexp already, we want to extract the source\n            sources.push(pattern.source);\n        }\n        // Intentionally skip other cases\n    }\n    return new RegExp(sources.join('|'), 'i');\n}\n\nfunction urlencode(o) {\n    var pairs = [];\n    each(o, function(key, value) {\n        pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    });\n    return pairs.join('&');\n}\n\n// borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n// intentionally using regex and not <a/> href parsing trick because React Native and other\n// environments where DOM might not be available\nfunction parseUrl(url) {\n    var match = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n    if (!match) return {};\n\n    // coerce to undefined values to empty string so we don't get 'undefined'\n    var query = match[6] || '';\n    var fragment = match[8] || '';\n    return {\n        protocol: match[2],\n        host: match[4],\n        path: match[5],\n        relative: match[5] + query + fragment // everything minus origin\n    };\n}\nfunction uuid4() {\n    var crypto = window.crypto || window.msCrypto;\n\n    if (!isUndefined(crypto) && crypto.getRandomValues) {\n        // Use window.crypto API if available\n        var arr = new Uint16Array(8);\n        crypto.getRandomValues(arr);\n\n        // set 4 in byte 7\n        arr[3] = arr[3] & 0xFFF | 0x4000;\n        // set 2 most significant bits of byte 9 to '10'\n        arr[4] = arr[4] & 0x3FFF | 0x8000;\n\n        var pad = function(num) {\n            var v = num.toString(16);\n            while (v.length < 4) {\n                v = '0' + v;\n            }\n            return v;\n        };\n\n        return pad(arr[0]) + pad(arr[1]) + pad(arr[2]) + pad(arr[3]) + pad(arr[4]) +\n        pad(arr[5]) + pad(arr[6]) + pad(arr[7]);\n    } else {\n        // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n        return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0,\n                v = c === 'x' ? r : r&0x3|0x8;\n            return v.toString(16);\n        });\n    }\n}\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @param elem\n * @returns {string}\n */\nfunction htmlTreeAsString(elem) {\n    var MAX_TRAVERSE_HEIGHT = 5,\n        MAX_OUTPUT_LEN = 80,\n        out = [],\n        height = 0,\n        len = 0,\n        separator = ' > ',\n        sepLength = separator.length,\n        nextStr;\n\n    while (elem && height++ < MAX_TRAVERSE_HEIGHT) {\n\n        nextStr = htmlElementAsString(elem);\n        // bail out if\n        // - nextStr is the 'html' element\n        // - the length of the string that would be created exceeds MAX_OUTPUT_LEN\n        //   (ignore this limit if we are on the first iteration)\n        if (nextStr === 'html' || height > 1 && len + (out.length * sepLength) + nextStr.length >= MAX_OUTPUT_LEN) {\n            break;\n        }\n\n        out.push(nextStr);\n\n        len += nextStr.length;\n        elem = elem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @param HTMLElement\n * @returns {string}\n */\nfunction htmlElementAsString(elem) {\n    var out = [],\n        className,\n        classes,\n        key,\n        attr,\n        i;\n\n    if (!elem || !elem.tagName) {\n        return '';\n    }\n\n    out.push(elem.tagName.toLowerCase());\n    if (elem.id) {\n        out.push('#' + elem.id);\n    }\n\n    className = elem.className;\n    if (className && isString(className)) {\n        classes = className.split(' ');\n        for (i = 0; i < classes.length; i++) {\n            out.push('.' + classes[i]);\n        }\n    }\n    var attrWhitelist = ['type', 'name', 'title', 'alt'];\n    for (i = 0; i < attrWhitelist.length; i++) {\n        key = attrWhitelist[i];\n        attr = elem.getAttribute(key);\n        if (attr) {\n            out.push('[' + key + '=\"' + attr + '\"]');\n        }\n    }\n    return out.join('');\n}\n\nmodule.exports = {\n    isUndefined: isUndefined,\n    isFunction: isFunction,\n    isString: isString,\n    isObject: isObject,\n    isEmptyObject: isEmptyObject,\n    isError: isError,\n    each: each,\n    objectMerge: objectMerge,\n    truncate: truncate,\n    hasKey: hasKey,\n    joinRegExp: joinRegExp,\n    urlencode: urlencode,\n    uuid4: uuid4,\n    htmlTreeAsString: htmlTreeAsString,\n    htmlElementAsString: htmlElementAsString,\n    parseUrl: parseUrl\n};\n\n},{}],7:[function(_dereq_,module,exports){\n'use strict';\n\nvar utils = _dereq_(6);\n\nvar hasKey = utils.hasKey;\nvar isString = utils.isString;\nvar isUndefined = utils.isUndefined;\n\n/*\n TraceKit - Cross brower stack traces - github.com/occ/TraceKit\n MIT license\n*/\n\nvar TraceKit = {\n    collectWindowErrors: true,\n    debug: false\n};\n\n// global reference to slice\nvar _slice = [].slice;\nvar UNKNOWN_FUNCTION = '?';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE = /^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;\n\nfunction getLocationHref() {\n    if (typeof document === 'undefined')\n        return '';\n\n    return document.location.href;\n}\n\n/**\n * TraceKit.report: cross-browser processing of unhandled exceptions\n *\n * Syntax:\n *   TraceKit.report.subscribe(function(stackInfo) { ... })\n *   TraceKit.report.unsubscribe(function(stackInfo) { ... })\n *   TraceKit.report(exception)\n *   try { ...code... } catch(ex) { TraceKit.report(ex); }\n *\n * Supports:\n *   - Firefox: full stack trace with line numbers, plus column number\n *              on top frame; column number is not guaranteed\n *   - Opera:   full stack trace with line and column numbers\n *   - Chrome:  full stack trace with line and column numbers\n *   - Safari:  line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *   - IE:      line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n *   - IE5.5+ (only 8.0 tested)\n *   - Firefox 0.9+ (only 3.5+ tested)\n *   - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n *     Exceptions Have Stacktrace to be enabled in opera:config)\n *   - Safari 3+ (only 4+ tested)\n *   - Chrome 1+ (only 5+ tested)\n *   - Konqueror 3.5+ (untested)\n *\n * Requires TraceKit.computeStackTrace.\n *\n * Tries to catch all unhandled exceptions and report them to the\n * subscribed handlers. Please note that TraceKit.report will rethrow the\n * exception. This is REQUIRED in order to get a useful stack trace in IE.\n * If the exception does not reach the top of the browser, you will only\n * get a stack trace from the point where TraceKit.report was called.\n *\n * Handlers receive a stackInfo object as described in the\n * TraceKit.computeStackTrace docs.\n */\nTraceKit.report = (function reportModuleWrapper() {\n    var handlers = [],\n        lastArgs = null,\n        lastException = null,\n        lastExceptionStack = null;\n\n    /**\n     * Add a crash handler.\n     * @param {Function} handler\n     */\n    function subscribe(handler) {\n        installGlobalHandler();\n        handlers.push(handler);\n    }\n\n    /**\n     * Remove a crash handler.\n     * @param {Function} handler\n     */\n    function unsubscribe(handler) {\n        for (var i = handlers.length - 1; i >= 0; --i) {\n            if (handlers[i] === handler) {\n                handlers.splice(i, 1);\n            }\n        }\n    }\n\n    /**\n     * Remove all crash handlers.\n     */\n    function unsubscribeAll() {\n        uninstallGlobalHandler();\n        handlers = [];\n    }\n\n    /**\n     * Dispatch stack information to all handlers.\n     * @param {Object.<string, *>} stack\n     */\n    function notifyHandlers(stack, isWindowError) {\n        var exception = null;\n        if (isWindowError && !TraceKit.collectWindowErrors) {\n          return;\n        }\n        for (var i in handlers) {\n            if (hasKey(handlers, i)) {\n                try {\n                    handlers[i].apply(null, [stack].concat(_slice.call(arguments, 2)));\n                } catch (inner) {\n                    exception = inner;\n                }\n            }\n        }\n\n        if (exception) {\n            throw exception;\n        }\n    }\n\n    var _oldOnerrorHandler, _onErrorHandlerInstalled;\n\n    /**\n     * Ensures all global unhandled exceptions are recorded.\n     * Supported by Gecko and IE.\n     * @param {string} message Error message.\n     * @param {string} url URL of script that generated the exception.\n     * @param {(number|string)} lineNo The line number at which the error\n     * occurred.\n     * @param {?(number|string)} colNo The column number at which the error\n     * occurred.\n     * @param {?Error} ex The actual Error object.\n     */\n    function traceKitWindowOnError(message, url, lineNo, colNo, ex) {\n        var stack = null;\n\n        if (lastExceptionStack) {\n            TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack, url, lineNo, message);\n            processLastException();\n        } else if (ex) {\n            // New chrome and blink send along a real error object\n            // Let's just report that like a normal error.\n            // See: https://mikewest.org/2013/08/debugging-runtime-errors-with-window-onerror\n            stack = TraceKit.computeStackTrace(ex);\n            notifyHandlers(stack, true);\n        } else {\n            var location = {\n                'url': url,\n                'line': lineNo,\n                'column': colNo\n            };\n\n            var name = undefined;\n            var msg = message; // must be new var or will modify original `arguments`\n            var groups;\n            if (isString(message)) {\n                var groups = message.match(ERROR_TYPES_RE);\n                if (groups) {\n                    name = groups[1];\n                    msg = groups[2];\n                }\n            }\n\n            location.func = UNKNOWN_FUNCTION;\n\n            stack = {\n                'name': name,\n                'message': msg,\n                'url': getLocationHref(),\n                'stack': [location]\n            };\n            notifyHandlers(stack, true);\n        }\n\n        if (_oldOnerrorHandler) {\n            return _oldOnerrorHandler.apply(this, arguments);\n        }\n\n        return false;\n    }\n\n    function installGlobalHandler ()\n    {\n        if (_onErrorHandlerInstalled) {\n            return;\n        }\n        _oldOnerrorHandler = window.onerror;\n        window.onerror = traceKitWindowOnError;\n        _onErrorHandlerInstalled = true;\n    }\n\n    function uninstallGlobalHandler ()\n    {\n        if (!_onErrorHandlerInstalled) {\n            return;\n        }\n        window.onerror = _oldOnerrorHandler;\n        _onErrorHandlerInstalled = false;\n        _oldOnerrorHandler = undefined;\n    }\n\n    function processLastException() {\n        var _lastExceptionStack = lastExceptionStack,\n            _lastArgs = lastArgs;\n        lastArgs = null;\n        lastExceptionStack = null;\n        lastException = null;\n        notifyHandlers.apply(null, [_lastExceptionStack, false].concat(_lastArgs));\n    }\n\n    /**\n     * Reports an unhandled Error to TraceKit.\n     * @param {Error} ex\n     * @param {?boolean} rethrow If false, do not re-throw the exception.\n     * Only used for window.onerror to not cause an infinite loop of\n     * rethrowing.\n     */\n    function report(ex, rethrow) {\n        var args = _slice.call(arguments, 1);\n        if (lastExceptionStack) {\n            if (lastException === ex) {\n                return; // already caught by an inner catch block, ignore\n            } else {\n              processLastException();\n            }\n        }\n\n        var stack = TraceKit.computeStackTrace(ex);\n        lastExceptionStack = stack;\n        lastException = ex;\n        lastArgs = args;\n\n        // If the stack trace is incomplete, wait for 2 seconds for\n        // slow slow IE to see if onerror occurs or not before reporting\n        // this exception; otherwise, we will end up with an incomplete\n        // stack trace\n        window.setTimeout(function () {\n            if (lastException === ex) {\n                processLastException();\n            }\n        }, (stack.incomplete ? 2000 : 0));\n\n        if (rethrow !== false) {\n            throw ex; // re-throw to propagate to the top level (and cause window.onerror)\n        }\n    }\n\n    report.subscribe = subscribe;\n    report.unsubscribe = unsubscribe;\n    report.uninstall = unsubscribeAll;\n    return report;\n}());\n\n/**\n * TraceKit.computeStackTrace: cross-browser stack traces in JavaScript\n *\n * Syntax:\n *   s = TraceKit.computeStackTrace(exception) // consider using TraceKit.report instead (see below)\n * Returns:\n *   s.name              - exception name\n *   s.message           - exception message\n *   s.stack[i].url      - JavaScript or HTML file URL\n *   s.stack[i].func     - function name, or empty for anonymous functions (if guessing did not work)\n *   s.stack[i].args     - arguments passed to the function, if known\n *   s.stack[i].line     - line number, if known\n *   s.stack[i].column   - column number, if known\n *\n * Supports:\n *   - Firefox:  full stack trace with line numbers and unreliable column\n *               number on top frame\n *   - Opera 10: full stack trace with line and column numbers\n *   - Opera 9-: full stack trace with line numbers\n *   - Chrome:   full stack trace with line and column numbers\n *   - Safari:   line and column number for the topmost stacktrace element\n *               only\n *   - IE:       no line numbers whatsoever\n *\n * Tries to guess names of anonymous functions by looking for assignments\n * in the source code. In IE and Safari, we have to guess source file names\n * by searching for function bodies inside all page scripts. This will not\n * work for scripts that are loaded cross-domain.\n * Here be dragons: some function names may be guessed incorrectly, and\n * duplicate functions may be mismatched.\n *\n * TraceKit.computeStackTrace should only be used for tracing purposes.\n * Logging of unhandled exceptions should be done with TraceKit.report,\n * which builds on top of TraceKit.computeStackTrace and provides better\n * IE support by utilizing the window.onerror event to retrieve information\n * about the top of the stack.\n *\n * Note: In IE and Safari, no stack trace is recorded on the Error object,\n * so computeStackTrace instead walks its *own* chain of callers.\n * This means that:\n *  * in Safari, some methods may be missing from the stack trace;\n *  * in IE, the topmost function in the stack trace will always be the\n *    caller of computeStackTrace.\n *\n * This is okay for tracing (because you are likely to be calling\n * computeStackTrace from the function you want to be the topmost element\n * of the stack trace anyway), but not okay for logging unhandled\n * exceptions (because your catch block will likely be far away from the\n * inner function that actually caused the exception).\n *\n */\nTraceKit.computeStackTrace = (function computeStackTraceWrapper() {\n    /**\n     * Escapes special characters, except for whitespace, in a string to be\n     * used inside a regular expression as a string literal.\n     * @param {string} text The string.\n     * @return {string} The escaped string literal.\n     */\n    function escapeRegExp(text) {\n        return text.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#]/g, '\\\\$&');\n    }\n\n    /**\n     * Escapes special characters in a string to be used inside a regular\n     * expression as a string literal. Also ensures that HTML entities will\n     * be matched the same as their literal friends.\n     * @param {string} body The string.\n     * @return {string} The escaped string.\n     */\n    function escapeCodeAsRegExpForMatchingInsideHTML(body) {\n        return escapeRegExp(body).replace('<', '(?:<|&lt;)').replace('>', '(?:>|&gt;)').replace('&', '(?:&|&amp;)').replace('\"', '(?:\"|&quot;)').replace(/\\s+/g, '\\\\s+');\n    }\n\n    // Contents of Exception in various browsers.\n    //\n    // SAFARI:\n    // ex.message = Can't find variable: qq\n    // ex.line = 59\n    // ex.sourceId = 580238192\n    // ex.sourceURL = http://...\n    // ex.expressionBeginOffset = 96\n    // ex.expressionCaretOffset = 98\n    // ex.expressionEndOffset = 98\n    // ex.name = ReferenceError\n    //\n    // FIREFOX:\n    // ex.message = qq is not defined\n    // ex.fileName = http://...\n    // ex.lineNumber = 59\n    // ex.columnNumber = 69\n    // ex.stack = ...stack trace... (see the example below)\n    // ex.name = ReferenceError\n    //\n    // CHROME:\n    // ex.message = qq is not defined\n    // ex.name = ReferenceError\n    // ex.type = not_defined\n    // ex.arguments = ['aa']\n    // ex.stack = ...stack trace...\n    //\n    // INTERNET EXPLORER:\n    // ex.message = ...\n    // ex.name = ReferenceError\n    //\n    // OPERA:\n    // ex.message = ...message... (see the example below)\n    // ex.name = ReferenceError\n    // ex.opera#sourceloc = 11  (pretty much useless, duplicates the info in ex.message)\n    // ex.stacktrace = n/a; see 'opera:config#UserPrefs|Exceptions Have Stacktrace'\n\n    /**\n     * Computes stack trace information from the stack property.\n     * Chrome and Gecko use this property.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceFromStackProp(ex) {\n        if (isUndefined(ex.stack) || !ex.stack) return;\n\n        var chrome = /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n            gecko = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|\\[native).*?)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n            winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n            lines = ex.stack.split('\\n'),\n            stack = [],\n            parts,\n            element,\n            reference = /^(.*) is undefined$/.exec(ex.message);\n\n        for (var i = 0, j = lines.length; i < j; ++i) {\n            if ((parts = chrome.exec(lines[i]))) {\n                var isNative = parts[2] && parts[2].indexOf('native') !== -1;\n                element = {\n                    'url': !isNative ? parts[2] : null,\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'args': isNative ? [parts[2]] : [],\n                    'line': parts[3] ? +parts[3] : null,\n                    'column': parts[4] ? +parts[4] : null\n                };\n            } else if ( parts = winjs.exec(lines[i]) ) {\n                element = {\n                    'url': parts[2],\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'args': [],\n                    'line': +parts[3],\n                    'column': parts[4] ? +parts[4] : null\n                };\n            } else if ((parts = gecko.exec(lines[i]))) {\n                element = {\n                    'url': parts[3],\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'args': parts[2] ? parts[2].split(',') : [],\n                    'line': parts[4] ? +parts[4] : null,\n                    'column': parts[5] ? +parts[5] : null\n                };\n            } else {\n                continue;\n            }\n\n            if (!element.func && element.line) {\n                element.func = UNKNOWN_FUNCTION;\n            }\n\n            stack.push(element);\n        }\n\n        if (!stack.length) {\n            return null;\n        }\n\n        if (!stack[0].column && !isUndefined(ex.columnNumber)) {\n            // FireFox uses this awesome columnNumber property for its top frame\n            // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n            // so adding 1\n            stack[0].column = ex.columnNumber + 1;\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * Computes stack trace information from the stacktrace property.\n     * Opera 10 uses this property.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceFromStacktraceProp(ex) {\n        // Access and store the stacktrace property before doing ANYTHING\n        // else to it because Opera is not very good at providing it\n        // reliably in other circumstances.\n        var stacktrace = ex.stacktrace;\n        if (isUndefined(ex.stacktrace) || !ex.stacktrace) return;\n\n        var opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i,\n          opera11Regex = / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^\\)]+))\\((.*)\\))? in (.*):\\s*$/i,\n          lines = stacktrace.split('\\n'),\n          stack = [],\n          parts;\n\n        for (var line = 0; line < lines.length; line += 2) {\n            var element = null;\n            if ((parts = opera10Regex.exec(lines[line]))) {\n                element = {\n                    'url': parts[2],\n                    'line': +parts[1],\n                    'column': null,\n                    'func': parts[3],\n                    'args':[]\n                };\n            } else if ((parts = opera11Regex.exec(lines[line]))) {\n                element = {\n                    'url': parts[6],\n                    'line': +parts[1],\n                    'column': +parts[2],\n                    'func': parts[3] || parts[4],\n                    'args': parts[5] ? parts[5].split(',') : []\n                };\n            }\n\n            if (element) {\n                if (!element.func && element.line) {\n                    element.func = UNKNOWN_FUNCTION;\n                }\n\n                stack.push(element);\n            }\n        }\n\n        if (!stack.length) {\n            return null;\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * NOT TESTED.\n     * Computes stack trace information from an error message that includes\n     * the stack trace.\n     * Opera 9 and earlier use this method if the option to show stack\n     * traces is turned on in opera:config.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack information.\n     */\n    function computeStackTraceFromOperaMultiLineMessage(ex) {\n        // Opera includes a stack trace into the exception message. An example is:\n        //\n        // Statement on line 3: Undefined variable: undefinedFunc\n        // Backtrace:\n        //   Line 3 of linked script file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.js: In function zzz\n        //         undefinedFunc(a);\n        //   Line 7 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function yyy\n        //           zzz(x, y, z);\n        //   Line 3 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function xxx\n        //           yyy(a, a, a);\n        //   Line 1 of function script\n        //     try { xxx('hi'); return false; } catch(ex) { TraceKit.report(ex); }\n        //   ...\n\n        var lines = ex.message.split('\\n');\n        if (lines.length < 4) {\n            return null;\n        }\n\n        var lineRE1 = /^\\s*Line (\\d+) of linked script ((?:file|https?|blob)\\S+)(?:: in function (\\S+))?\\s*$/i,\n            lineRE2 = /^\\s*Line (\\d+) of inline#(\\d+) script in ((?:file|https?|blob)\\S+)(?:: in function (\\S+))?\\s*$/i,\n            lineRE3 = /^\\s*Line (\\d+) of function script\\s*$/i,\n            stack = [],\n            scripts = document.getElementsByTagName('script'),\n            parts;\n\n        for (var line = 2; line < lines.length; line += 2) {\n            var item = null;\n            if ((parts = lineRE1.exec(lines[line]))) {\n                item = {\n                    'url': parts[2],\n                    'func': parts[3],\n                    'args': [],\n                    'line': +parts[1],\n                    'column': null\n                };\n            } else if ((parts = lineRE2.exec(lines[line]))) {\n                item = {\n                    'url': parts[3],\n                    'func': parts[4],\n                    'args': [],\n                    'line': +parts[1],\n                    'column': null // TODO: Check to see if inline#1 (+parts[2]) points to the script number or column number.\n                };\n                var relativeLine = (+parts[1]); // relative to the start of the <SCRIPT> block\n            } else if ((parts = lineRE3.exec(lines[line]))) {\n                var url = window.location.href.replace(/#.*$/, '');\n                item = {\n                    'url': url,\n                    'func': '',\n                    'args': [],\n                    'line': parts[1],\n                    'column': null\n                };\n            }\n\n            if (item) {\n                if (!item.func) {\n                    item.func = UNKNOWN_FUNCTION;\n                }\n\n                stack.push(item);\n            }\n        }\n\n        if (!stack.length) {\n            return null; // could not parse multiline exception message as Opera stack trace\n        }\n\n        return {\n            'name': ex.name,\n            'message': lines[0],\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * Adds information about the first frame to incomplete stack traces.\n     * Safari and IE require this to get complete data on the first frame.\n     * @param {Object.<string, *>} stackInfo Stack trace information from\n     * one of the compute* methods.\n     * @param {string} url The URL of the script that caused an error.\n     * @param {(number|string)} lineNo The line number of the script that\n     * caused an error.\n     * @param {string=} message The error generated by the browser, which\n     * hopefully contains the name of the object that caused the error.\n     * @return {boolean} Whether or not the stack information was\n     * augmented.\n     */\n    function augmentStackTraceWithInitialElement(stackInfo, url, lineNo, message) {\n        var initial = {\n            'url': url,\n            'line': lineNo\n        };\n\n        if (initial.url && initial.line) {\n            stackInfo.incomplete = false;\n\n            if (!initial.func) {\n                initial.func = UNKNOWN_FUNCTION;\n            }\n\n            if (stackInfo.stack.length > 0) {\n                if (stackInfo.stack[0].url === initial.url) {\n                    if (stackInfo.stack[0].line === initial.line) {\n                        return false; // already in stack trace\n                    } else if (!stackInfo.stack[0].line && stackInfo.stack[0].func === initial.func) {\n                        stackInfo.stack[0].line = initial.line;\n                        return false;\n                    }\n                }\n            }\n\n            stackInfo.stack.unshift(initial);\n            stackInfo.partial = true;\n            return true;\n        } else {\n            stackInfo.incomplete = true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Computes stack trace information by walking the arguments.caller\n     * chain at the time the exception occurred. This will cause earlier\n     * frames to be missed but is the only way to get any stack trace in\n     * Safari and IE. The top frame is restored by\n     * {@link augmentStackTraceWithInitialElement}.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceByWalkingCallerChain(ex, depth) {\n        var functionName = /function\\s+([_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*)?\\s*\\(/i,\n            stack = [],\n            funcs = {},\n            recursion = false,\n            parts,\n            item,\n            source;\n\n        for (var curr = computeStackTraceByWalkingCallerChain.caller; curr && !recursion; curr = curr.caller) {\n            if (curr === computeStackTrace || curr === TraceKit.report) {\n                // console.log('skipping internal function');\n                continue;\n            }\n\n            item = {\n                'url': null,\n                'func': UNKNOWN_FUNCTION,\n                'line': null,\n                'column': null\n            };\n\n            if (curr.name) {\n                item.func = curr.name;\n            } else if ((parts = functionName.exec(curr.toString()))) {\n                item.func = parts[1];\n            }\n\n            if (typeof item.func === 'undefined') {\n              try {\n                item.func = parts.input.substring(0, parts.input.indexOf('{'));\n              } catch (e) { }\n            }\n\n            if (funcs['' + curr]) {\n                recursion = true;\n            }else{\n                funcs['' + curr] = true;\n            }\n\n            stack.push(item);\n        }\n\n        if (depth) {\n            // console.log('depth is ' + depth);\n            // console.log('stack is ' + stack.length);\n            stack.splice(0, depth);\n        }\n\n        var result = {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n        augmentStackTraceWithInitialElement(result, ex.sourceURL || ex.fileName, ex.line || ex.lineNumber, ex.message || ex.description);\n        return result;\n    }\n\n    /**\n     * Computes a stack trace for an exception.\n     * @param {Error} ex\n     * @param {(string|number)=} depth\n     */\n    function computeStackTrace(ex, depth) {\n        var stack = null;\n        depth = (depth == null ? 0 : +depth);\n\n        try {\n            // This must be tried first because Opera 10 *destroys*\n            // its stacktrace property if you try to access the stack\n            // property first!!\n            stack = computeStackTraceFromStacktraceProp(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceFromStackProp(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceFromOperaMultiLineMessage(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceByWalkingCallerChain(ex, depth + 1);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref()\n        };\n    }\n\n    computeStackTrace.augmentStackTraceWithInitialElement = augmentStackTraceWithInitialElement;\n    computeStackTrace.computeStackTraceFromStackProp = computeStackTraceFromStackProp;\n\n    return computeStackTrace;\n}());\n\nmodule.exports = TraceKit;\n\n},{\"6\":6}]},{},[5])(5)\n});"]}