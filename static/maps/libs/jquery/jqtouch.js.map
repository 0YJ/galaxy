{"version":3,"sources":["libs/jquery/jqtouch.js"],"names":["$","jQTouch","options","warn","message","undefined","window","console","jQTSettings","debug","addAnimation","animation","animations","push","addTapHandler","tapHandler","tapHandlers","addPageToHistory","page","history","unshift","hash","attr","id","clickHandler","e","$el","target","is","touchSelectors","join","closest","isExternalLink","preventDefault","support","touch","trigger","doNavigation","fromPage","toPage","goingBack","navigationEndHandler","event","bufferTime","tapBuffer","animationEvents","useAnimations","unbind","removeClass","finalAnimationName","$body","trackScrollPositions","css","data","setTimeout","scroll","each","this","scrollTop","unselect","direction","back","length","fn","hasClass","transform3d","is3d","defaultAnimation","name","replace","reverseAnimation","bind","addClass","lastScroll","pageYOffset","$currentPage","shift","setHash","up","down","left","right","in","out","getOrientation","orientation","goBack","go","from","to","publicObj","goTo","i","max","nextPage","showPageByHref","hashChangeHandler","location","getAnimation","el","selector","insertPages","nodes","targetPage","div","document","createElement","innerHTML","children","index","node","$node","newPageCount","remove","append","orientationChangeHandler","scrollTo","Math","abs","updateHash","start","WebKitAnimationEvent","TouchEvent","navigator","userAgent","indexOf","useFastTouch","supportForTransform3d","ios5","supportIOS5","extensions","isFunction","extend","j","maxTapHandlers","extTapHandlers","addDefaultTapHandlers","k","maxAnimations","defaults","touchSelector","backSelector","submitSelector","anatomyLessons","body","useTouchScroll","fullScreenClass","standalone","statusBar","submitHandler","touchStartHandler","startHash","href","method","callback","$referrer","settings","ajax","url","type","success","firstPage","cacheGetRequests","error","$form","eq","formSelector","serialize","submitParentForm","head","style","result","getElementsByTagName","textContent","appendChild","offsetHeight","parentNode","removeChild","REGEX_IOS_VERSION","agentString","test","exec","selectors","on","isDefaultPrevented","prop","params","len","handler","isSupported","$head","prototype","hairExtensions","addGlossToIcon","fixedViewport","fullScreen","icon","icon4","preloadImages","starter","ready","startupScreen","Image","src","precomposed","prepend","makeActive","obj","submitForm","addExtension","extension"],"mappings":"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","file":"../../../scripts/libs/jquery/jqtouch.js","sourcesContent":["(function() {\n\n    $.jQTouch = function(options) {\n        // Initialize internal jQT variables\n        var $body,\n            $head=$('head'),\n            history=[],\n            newPageCount=0,\n            jQTSettings={},\n            $currentPage='',\n            orientation='portrait',\n            touchSelectors=[],\n            publicObj={},\n            tapBuffer=100, // High click delay = ~350, quickest animation (slide) = 250\n            extensions=$.jQTouch.prototype.extensions,\n            extTapHandlers=$.jQTouch.prototype.tapHandlers,\n            tapHandlers=[],\n            animations=[],\n            hairExtensions='',\n            defaults = {\n                addGlossToIcon: true,\n                backSelector: '.back, .cancel, .goback',\n                cacheGetRequests: true,\n                debug: true,\n                defaultAnimation: 'slideleft',\n                fixedViewport: true,\n                formSelector: 'form',\n                fullScreen: true,\n                fullScreenClass: 'fullscreen',\n                icon: null,\n                icon4: null, // available in iOS 4.2 and later\n                preloadImages: false,\n                starter: $(document).ready,\n                startupScreen: null,\n                statusBar: 'default', // other options: black-translucent, black\n                submitSelector: '.submit',\n                touchSelector: 'a, .touch',\n                trackScrollPositions: true,\n                updateHash: true,\n                useAnimations: true,\n                useFastTouch: true,\n                useTouchScroll: true,\n                animations: [ // highest to lowest priority\n                    {name:'cubeleft', selector:'.cubeleft, .cube', is3d: true},\n                    {name:'cuberight', selector:'.cuberight', is3d: true},\n                    {name:'dissolve', selector:'.dissolve'},\n                    {name:'fade', selector:'.fade'},\n                    {name:'flipleft', selector:'.flipleft, .flip', is3d: true},\n                    {name:'flipright', selector:'.flipright', is3d: true},\n                    {name:'pop', selector:'.pop', is3d: true},\n                    {name:'swapleft', selector:'.swapleft, .swap', is3d: true},\n                    {name:'swapright', selector:'.swapright', is3d: true},\n                    {name:'slidedown', selector:'.slidedown'},\n                    {name:'slideright', selector:'.slideright'},\n                    {name:'slideup', selector:'.slideup'},\n                    {name:'slideleft', selector:'.slideleft, .slide, #jqt > * > ul li a'}\n                ]\n            }; // end defaults\n\n        function warn(message) {\n            if (window.console !== undefined && jQTSettings.debug === true) {\n                console.warn(message);\n            }\n        }\n\n        function addAnimation(animation) {\n            if (typeof(animation.selector) === 'string' && typeof(animation.name) === 'string') {\n                animations.push(animation);\n            }\n        }\n\n        function addTapHandler(tapHandler) {\n            if (typeof(tapHandler.name) === 'string' && typeof(tapHandler.isSupported) === 'function' && typeof(tapHandler.fn) === 'function') {\n                tapHandlers.push(tapHandler);\n            }\n        }\n\n        function addPageToHistory(page, animation) {\n            history.unshift({\n                page: page,\n                animation: animation,\n                hash: '#' + page.attr('id'),\n                id: page.attr('id')\n            });\n        }\n\n        // Unfortunately, we can not assume the 'tap' event\n        // is being used for links, forms, etc.\n        function clickHandler(e) {\n            // Figure out whether to prevent default\n            var $el = $(e.target);\n\n            // Find the nearest tappable ancestor\n            if (!$el.is(touchSelectors.join(', '))) {\n                $el = $(e.target).closest(touchSelectors.join(', '));\n            }\n\n            // Prevent default if we found an internal link\n            // (relative or absolute)\n            if ($el && $el.attr('href') && !$el.isExternalLink()) {\n                warn('Need to prevent default click behavior.');\n                e.preventDefault();\n            } else {\n                warn('No need to prevent default click behavior.');\n            }\n\n            // Trigger a tap event if touchstart is not on the job\n            if ($.support.touch) {\n                warn('Not converting click to a tap event because touch handler is on the job.');\n            } else {\n                warn('Converting click event to a tap event because touch handlers are not present or off.');\n                $(e.target).trigger('tap', e);\n            }\n        }\n\n        function doNavigation(fromPage, toPage, animation, goingBack) {\n\n            goingBack = goingBack ? goingBack : false;\n\n            // Error check for target page\n            if (toPage === undefined || toPage.length === 0) {\n                $.fn.unselect();\n                warn('Target element is missing.');\n                return false;\n            }\n\n            // Error check for fromPage === toPage\n            if (toPage.hasClass('current')) {\n                $.fn.unselect();\n                warn('You are already on the page you are trying to navigate to.');\n                return false;\n            }\n\n            // Collapse the keyboard\n            $(':focus').trigger('blur');\n\n            fromPage.trigger('pageAnimationStart', { direction: 'out', back: goingBack });\n            toPage.trigger('pageAnimationStart', { direction: 'in', back: goingBack });\n\n            if ($.support.animationEvents && animation && jQTSettings.useAnimations) {\n                // Fail over to 2d animation if need be\n                if (!$.support.transform3d && animation.is3d) {\n                    warn('Did not detect support for 3d animations, falling back to ' + jQTSettings.defaultAnimation + '.');\n                    animation.name = jQTSettings.defaultAnimation;\n                }\n\n                // Reverse animation if need be\n                var finalAnimationName = animation.name,\n                    is3d = animation.is3d ? 'animating3d' : '';\n\n                if (goingBack) {\n                    finalAnimationName = finalAnimationName.replace(/left|right|up|down|in|out/, reverseAnimation);\n                }\n\n                warn('finalAnimationName is ' + finalAnimationName + '.');\n\n                // Bind internal 'cleanup' callback\n                fromPage.bind('webkitAnimationEnd', navigationEndHandler);\n\n                // Trigger animations\n                $body.addClass('animating ' + is3d);\n\n                var lastScroll = window.pageYOffset;\n\n                // Position the incoming page so toolbar is at top of\n                // viewport regardless of scroll position on from page\n                if (jQTSettings.trackScrollPositions === true) {\n                    toPage.css('top', window.pageYOffset - (toPage.data('lastScroll') || 0));\n                }\n\n                toPage.addClass(finalAnimationName + ' in current');\n                fromPage.removeClass('current').addClass(finalAnimationName + ' out inmotion');\n\n                if (jQTSettings.trackScrollPositions === true) {\n                    fromPage.data('lastScroll', lastScroll);\n                    $('.scroll', fromPage).each(function() {\n                        $(this).data('lastScroll', this.scrollTop);\n                    });\n                }\n            } else {\n                toPage.addClass('current in');\n                fromPage.removeClass('current');\n                navigationEndHandler();\n            }\n\n            // Housekeeping\n            $currentPage = toPage;\n            if (goingBack) {\n                history.shift();\n            } else {\n                addPageToHistory($currentPage, animation);\n            }\n            setHash($currentPage.attr('id'));\n\n            // Private navigationEnd callback\n            function navigationEndHandler(event) {\n                var bufferTime = tapBuffer;\n\n                if ($.support.animationEvents && animation && jQTSettings.useAnimations) {\n                    fromPage.unbind('webkitAnimationEnd', navigationEndHandler);\n                    fromPage.removeClass(finalAnimationName + ' out inmotion');\n                    if (finalAnimationName) {\n                        toPage.removeClass(finalAnimationName);\n                    }\n                    $body.removeClass('animating animating3d');\n                    if (jQTSettings.trackScrollPositions === true) {\n                        toPage.css('top', -toPage.data('lastScroll'));\n\n                        // Have to make sure the scroll/style resets\n                        // are outside the flow of this function.\n                        setTimeout(function() {\n                            toPage.css('top', 0);\n                            window.scroll(0, toPage.data('lastScroll'));\n                            $('.scroll', toPage).each(function() {\n                                this.scrollTop = - $(this).data('lastScroll');\n                            });\n                        }, 0);\n                    }\n                } else {\n                    fromPage.removeClass(finalAnimationName + ' out inmotion');\n                    if (finalAnimationName) {\n                        toPage.removeClass(finalAnimationName);\n                    }\n                    bufferTime += 260;\n                }\n\n                // 'in' class is intentionally delayed,\n                // as it is our ghost click hack\n                setTimeout(function() {\n                    toPage.removeClass('in');\n                    window.scroll(0,0);\n                }, bufferTime);\n\n                fromPage.unselect();\n\n                // Trigger custom events\n                toPage.trigger('pageAnimationEnd', {\n                    direction:'in',\n                    animation: animation,\n                    back: goingBack\n                });\n                fromPage.trigger('pageAnimationEnd', {\n                    direction:'out',\n                    animation: animation,\n                    back: goingBack\n                });\n            }\n\n            return true;\n        }\n\n        function reverseAnimation(animation) {\n            var opposites={\n                'up' : 'down',\n                'down' : 'up',\n                'left' : 'right',\n                'right' : 'left',\n                'in' : 'out',\n                'out' : 'in'\n            };\n\n            return opposites[animation] || animation;\n        }\n\n        function getOrientation() {\n            return orientation;\n        }\n\n        function goBack() {\n            // Error checking\n            if (history.length < 1) {\n                warn('History is empty.');\n            }\n\n            if (history.length === 1) {\n                warn('You are on the first panel.');\n                window.history.go(-1);\n            }\n\n            var from = history[0],\n                to = history[1];\n\n            if (doNavigation(from.page, to.page, from.animation, true)) {\n                return publicObj;\n            } else {\n                warn('Could not go back.');\n                return false;\n            }\n        }\n\n        function goTo(toPage, animation) {\n            var fromPage = history[0].page;\n\n            if (typeof animation === 'string') {\n                for (var i=0, max=animations.length; i < max; i++) {\n                    if (animations[i].name === animation) {\n                        animation = animations[i];\n                        break;\n                    }\n                }\n            }\n\n            if (typeof toPage === 'string') {\n                var nextPage = $(toPage);\n\n                if (nextPage.length < 1) {\n                    showPageByHref(toPage, {\n                        animation: animation\n                    });\n                    return;\n                } else {\n                    toPage = nextPage;\n                }\n            }\n            if (doNavigation(fromPage, toPage, animation)) {\n                return publicObj;\n            } else {\n                warn('Could not animate pages.');\n                return false;\n            }\n        }\n\n        function hashChangeHandler(e) {\n            if (location.hash === history[0].hash) {\n                warn('We are on the right panel.');\n                return true;\n            } else if (location.hash === '') {\n                goBack();\n                return true;\n            } else if (history[1] && location.hash === history[1].hash) {\n                goBack();\n                return true;\n            } else {\n                // Lastly, just try going to the ID...\n                warn('Could not find ID in history, just forwarding to DOM element.');\n                goTo($(location.hash), jQTSettings.defaultAnimation);\n            }\n        }\n\n        function initHairExtensions(options) {\n            // Preload images\n            if (jQTSettings.preloadImages) {\n                for (var i = jQTSettings.preloadImages.length - 1; i >= 0; i--) {\n                    (new Image()).src = jQTSettings.preloadImages[i];\n                }\n            }\n\n            // Set appropriate icon\n            // (retina display available in iOS 4.2 and later.)\n            var precomposed = (jQTSettings.addGlossToIcon) ? '' : '-precomposed';\n            if (jQTSettings.icon) {\n                hairExtensions += '<link rel=\"apple-touch-icon' + precomposed + '\" href=\"' + jQTSettings.icon + '\" />';\n            }\n            if (jQTSettings.icon4) {\n                hairExtensions += '<link rel=\"apple-touch-icon' + precomposed + '\" sizes=\"114x114\" href=\"' + jQTSettings.icon4 + '\" />';\n            }\n            // Set startup screen\n            if (jQTSettings.startupScreen) {\n                hairExtensions += '<link rel=\"apple-touch-startup-image\" href=\"' + jQTSettings.startupScreen + '\" />';\n            }\n\n            // Set viewport\n            if (jQTSettings.fixedViewport) {\n                hairExtensions += '<meta name=\"viewport\" content=\"initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"/>';\n            }\n\n            // Set full-screen\n            if (jQTSettings.fullScreen) {\n                hairExtensions += '<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />';\n                if (jQTSettings.statusBar) {\n                    hairExtensions += '<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"' + jQTSettings.statusBar + '\" />';\n                }\n            }\n\n            // Attach hair extensions\n            if (hairExtensions) {\n                $head.prepend(hairExtensions);\n            }\n        }\n\n        function initFXExtensions() {\n            // Define public jQuery functions\n            $.fn.isExternalLink = function() {\n                var $el = $(this);\n                return ($el.attr('target') === '_blank' || $el.attr('rel') === 'external' || $el.is('a[href^=\"http://maps.google.com\"], a[href^=\"mailto:\"], a[href^=\"tel:\"], a[href^=\"javascript:\"], a[href*=\"youtube.com/v\"], a[href*=\"youtube.com/watch\"]'));\n            };\n            $.fn.makeActive = function() {\n                return $(this).addClass('active');\n            };\n            $.fn.unselect = function(obj) {\n                if (obj) {\n                    obj.removeClass('active');\n                } else {\n                    $('.active').removeClass('active');\n                }\n            };\n        }\n\n        function getAnimation(el) {\n            var animation;\n\n            for (var i=0, max=animations.length; i < max; i++) {\n                if (el.is(animations[i].selector)) {\n                    animation = animations[i];\n                    break;\n                }\n            }\n\n            if (!animation) {\n                warn('Animation could not be found. Using ' + jQTSettings.defaultAnimation + '.');\n                animation = jQTSettings.defaultAnimation;\n            }\n            return animation;\n        }\n\n        function insertPages(nodes, animation) {\n\n            var targetPage = null;\n\n            // Call dom.createElement element directly\n            // instead of relying on $(nodes), to work around:\n            // https://github.com/madrobby/zepto/issues/312\n            var div = document.createElement('div');\n            div.innerHTML = nodes;\n\n            $(div).children().each(function(index, node) {\n                var $node = $(this);\n                if (!$node.attr('id')) {\n                    $node.attr('id', 'page-' + (++newPageCount));\n                }\n\n                // Remove any existing instance\n                $('#' + $node.attr('id')).remove();\n\n                $body.append($node);\n                $body.trigger('pageInserted', {page: $node});\n\n                if ($node.hasClass('current') || !targetPage) {\n                    targetPage = $node;\n                }\n            });\n            if (targetPage !== null) {\n                goTo(targetPage, animation);\n                return targetPage;\n            } else {\n                return false;\n            }\n        }\n\n        function orientationChangeHandler() {\n            scrollTo(0,0);\n            orientation = Math.abs(window.orientation) === 90 ? 'landscape' : 'portrait';\n            $body.removeClass('portrait landscape').addClass(orientation).trigger('turn', {orientation: orientation});\n        }\n\n        function setHash(hash) {\n            // Sanitize\n            if (jQTSettings.updateHash) {\n                location.hash = '#' + hash.replace(/^#/, '');\n            }\n        }\n\n        // Document ready stuff\n        function start() {\n            // Store some properties in a support object\n            if (!$.support) $.support = {};\n            $.support.animationEvents = (typeof window.WebKitAnimationEvent !== 'undefined');\n            $.support.touch = (typeof window.TouchEvent !== 'undefined') && (window.navigator.userAgent.indexOf('Mobile') > -1) && jQTSettings.useFastTouch;\n            $.support.transform3d = supportForTransform3d();\n            $.support.ios5 = supportIOS5();\n\n            if (!$.support.touch) {\n                warn('This device does not support touch interaction, or it has been deactivated by the developer. Some features might be unavailable.');\n            }\n            if (!$.support.transform3d) {\n                warn('This device does not support 3d animation. 2d animations will be used instead.');\n            }\n\n            // Add extensions\n            for (var i=0, max=extensions.length; i < max; i++) {\n                var fn = extensions[i];\n                if ($.isFunction(fn)) {\n                    $.extend(publicObj, fn(publicObj));\n                }\n            }\n\n            // Add extensions tapHandlers\n            for (var j=0, maxTapHandlers=extTapHandlers.length; j < maxTapHandlers; j++) {\n                addTapHandler(extTapHandlers[j]);\n            }\n            // Add default tapHandlers\n            addDefaultTapHandlers();\n\n            // Add animations\n            for (var k=0, maxAnimations=defaults.animations.length; k < maxAnimations; k++) {\n                var animation = defaults.animations[k];\n                if (jQTSettings[animation.name + 'Selector'] !== undefined) {\n                    animation.selector = jQTSettings[animation.name + 'Selector'];\n                }\n                addAnimation(animation);\n            }\n\n            // Create an array of stuff that needs touch event handling\n            touchSelectors.push(jQTSettings.touchSelector);\n            touchSelectors.push(jQTSettings.backSelector);\n            touchSelectors.push(jQTSettings.submitSelector);\n            $(touchSelectors.join(', ')).css('-webkit-touch-callout', 'none');\n\n            // Make sure we have a jqt element\n            $body = $('#jqt');\n            var anatomyLessons = [];\n\n            if ($body.length === 0) {\n                warn('Could not find an element with the id \"jqt\", so the body id has been set to \"jqt\". If you are having any problems, wrapping your panels in a div with the id \"jqt\" might help.');\n                $body = $(document.body).attr('id', 'jqt');\n            }\n\n            // Add some specific css if need be\n            if ($.support.transform3d) {\n                anatomyLessons.push('supports3d');\n            }\n\n            if (jQTSettings.useTouchScroll) {\n                if ($.support.ios5) {\n                    anatomyLessons.push('touchscroll');\n                } else {\n                    anatomyLessons.push('autoscroll');\n                }\n            }\n\n            if (jQTSettings.fullScreenClass && window.navigator.standalone === true) {\n                anatomyLessons.push(jQTSettings.fullScreenClass, jQTSettings.statusBar);\n            }\n\n            // Bind events\n            $body\n                .addClass(anatomyLessons.join(' '))\n                .bind('click', clickHandler)\n                .bind('orientationchange', orientationChangeHandler)\n                .bind('submit', submitHandler)\n                .bind('tap', tapHandler)\n                .bind($.support.touch ? 'touchstart' : 'mousedown', touchStartHandler)\n                .trigger('orientationchange');\n\n            $(window).bind('hashchange', hashChangeHandler);\n\n            var startHash = location.hash;\n\n            // Determine what the initial view should be\n            if ($('#jqt > .current').length === 0) {\n                $currentPage = $('#jqt > *:first-child').addClass('current');\n            } else {\n                $currentPage = $('#jqt > .current');\n            }\n\n            setHash($currentPage.attr('id'));\n            addPageToHistory($currentPage);\n\n            if ($(startHash).length === 1) {\n                goTo(startHash);\n            }\n        }\n\n        function showPageByHref(href, options) {\n\n            var defaults = {\n                data: null,\n                method: 'GET',\n                animation: null,\n                callback: null,\n                $referrer: null\n            };\n\n            var settings = $.extend({}, defaults, options);\n\n            if (href !== '#') {\n                $.ajax({\n                    url: href,\n                    data: settings.data,\n                    type: settings.method,\n                    success: function (data) {\n                        var firstPage = insertPages(data, settings.animation);\n                        if (firstPage) {\n                            if (settings.method === 'GET' && jQTSettings.cacheGetRequests === true && settings.$referrer) {\n                                settings.$referrer.attr('href', '#' + firstPage.attr('id'));\n                            }\n                            if (settings.callback) {\n                                settings.callback(true);\n                            }\n                        }\n                    },\n                    error: function (data) {\n                        if (settings.$referrer) {\n                            settings.$referrer.unselect();\n                        }\n                        if (settings.callback) {\n                            settings.callback(false);\n                        }\n                    }\n                });\n            } else if (settings.$referrer) {\n                settings.$referrer.unselect();\n            }\n        }\n\n        function submitHandler(e, callback) {\n\n            $(':focus').trigger('blur');\n\n            e.preventDefault();\n\n            var $form = (typeof(e)==='string') ? $(e).eq(0) : (e.target ? $(e.target) : $(e));\n\n            if ($form.length && $form.is(jQTSettings.formSelector) && $form.attr('action')) {\n                showPageByHref($form.attr('action'), {\n                    data: $form.serialize(),\n                    method: $form.attr('method') || 'POST',\n                    animation: getAnimation($form),\n                    callback: callback\n                });\n                return false;\n            }\n            return true;\n        }\n\n        function submitParentForm($el) {\n\n            var $form = $el.closest('form');\n            if ($form.length === 0) {\n                warn('No parent form found.');\n            } else {\n                warn('About to submit parent form.');\n                $form.trigger('submit');\n                return false;\n            }\n            return true;\n        }\n\n        function supportForTransform3d() {\n\n            var head, body, style, div, result;\n\n            head = document.getElementsByTagName('head')[0];\n            body = document.body;\n\n            style = document.createElement('style');\n            style.textContent = '@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#jqt-3dtest{height:3px}}';\n\n            div = document.createElement('div');\n            div.id = 'jqt-3dtest';\n\n            // Add to the page\n            head.appendChild(style);\n            body.appendChild(div);\n\n            // Check the result\n            result = div.offsetHeight === 3;\n\n            // Clean up\n            style.parentNode.removeChild(style);\n            div.parentNode.removeChild(div);\n\n            // Pass back result\n            warn('Support for 3d transforms: ' + result + '.');\n            return result;\n        }\n\n        function supportIOS5() {\n            var support = false;\n            var REGEX_IOS_VERSION = /OS (\\d+)(_\\d+)* like Mac OS X/i;\n\n            var agentString = window.navigator.userAgent;\n            if (REGEX_IOS_VERSION.test(agentString)) {\n                support = (REGEX_IOS_VERSION.exec(agentString)[1] >= 5);\n            }\n            return support;\n        }\n\n        function touchStartHandler(e) {\n\n            var $el = $(e.target),\n                selectors = touchSelectors.join(', ');\n\n            // Find the nearest tappable ancestor\n            if (!$el.is(selectors)) {\n                $el = $el.closest(selectors);\n            }\n\n            // Make sure we have a tappable element\n            if ($el.length && $el.attr('href')) {\n                $el.addClass('active');\n            }\n\n            // Remove our active class if we move\n            $el.on($.support.touch ? 'touchmove' : 'mousemove', function() {\n                $el.removeClass('active');\n            });\n\n            $el.on('touchend', function() {\n                $el.unbind('touchmove mousemove');\n            });\n        }\n\n        function tapHandler(e) {\n\n            if (e.isDefaultPrevented()) {\n                return true;\n            }\n\n            // Grab the target element\n            var $el = $(e.target);\n\n            // Find the nearest tappable ancestor\n            if (!$el.is(touchSelectors.join(', '))) {\n                $el = $el.closest(touchSelectors.join(', '));\n            }\n\n            // Make sure we have a tappable element\n            if (!$el.length || !$el.attr('href')) {\n                warn('Could not find a link related to tapped element.');\n                return true;\n            }\n\n            // Init some vars\n            var target = $el.attr('target'),\n                hash = $el.prop('hash'),\n                href = $el.attr('href');\n\n            var params = {\n                e: e,\n                $el: $el,\n                target: target,\n                hash: hash,\n                href: href,\n                jQTSettings: jQTSettings\n            };\n\n            // Loop thru all handlers\n            for (var i=0, len=tapHandlers.length; i<len; i++) {\n                var handler = tapHandlers[i];\n                var supported = handler.isSupported(e, params);\n                if (supported) {\n                    var flag = handler.fn(e, params);\n                    return flag;\n                }\n            }\n        }\n\n        function addDefaultTapHandlers() {\n            addTapHandler({\n                name: 'external-link',\n                isSupported: function(e, params) {\n                    return params.$el.isExternalLink();\n                },\n                fn: function(e, params) {\n                    params.$el.unselect();\n                    return true;\n                }\n            });\n            addTapHandler({\n                name: 'back-selector',\n                isSupported: function(e, params) {\n                    return params.$el.is(params.jQTSettings.backSelector);\n                },\n                fn: function(e, params) {\n                    // User clicked or tapped a back button\n                    goBack(params.hash);\n                }\n            });\n            addTapHandler({\n                name: 'submit-selector',\n                isSupported: function(e, params) {\n                    return params.$el.is(params.jQTSettings.submitSelector);\n                },\n                fn: function(e, params) {\n                    // User clicked or tapped a submit element\n                    submitParentForm(params.$el);\n                }\n            });\n            addTapHandler({\n                name: 'webapp',\n                isSupported: function(e, params) {\n                    return params.target === '_webapp';\n                },\n                fn: function(e, params) {\n                    // User clicked or tapped an internal link, fullscreen mode\n                    window.location = params.href;\n                    return false;\n                }\n            });\n            addTapHandler({\n                name: 'no-op',\n                isSupported: function(e, params) {\n                    return params.href === '#';\n                },\n                fn: function(e, params) {\n                    // Allow tap on item with no href\n                    params.$el.unselect();\n                    return true;\n                }\n            });\n            addTapHandler({\n                name: 'standard',\n                isSupported: function(e, params) {\n                    return params.hash && params.hash !== '#';\n                },\n                fn: function(e, params) {\n                    var animation = getAnimation(params.$el);\n                    // Internal href\n                    params.$el.addClass('active');\n                    goTo(\n                        $(params.hash).data('referrer', params.$el),\n                        animation,\n                        params.$el.hasClass('reverse')\n                    );\n                    return false;\n                }\n            });\n            addTapHandler({\n                name: 'external',\n                isSupported: function(e, params) {\n                    return true;\n                },\n                fn: function(e, params) {\n                    var animation = getAnimation(params.$el);\n\n                    // External href\n                    params.$el.addClass('loading active');\n                    showPageByHref(params.$el.attr('href'), {\n                        animation: animation,\n                        callback: function() {\n                            params.$el.removeClass('loading');\n                            setTimeout($.fn.unselect, 250, params.$el);\n                        },\n                        $referrer: params.$el\n                    });\n                    return false;\n                }\n            });\n        }\n\n        // Get the party started\n        jQTSettings = $.extend({}, defaults, options);\n\n        initHairExtensions(options);\n\n        initFXExtensions();\n\n        // Expose public methods and properties\n        publicObj = {\n            addAnimation: addAnimation,\n            animations: animations,\n            getOrientation: getOrientation,\n            goBack: goBack,\n            insertPages: insertPages,\n            goTo: goTo,\n            history: history,\n            settings: jQTSettings,\n            submitForm: submitHandler\n        };\n        \n        // must be called publicObj assignement to prevent timing problem with extension loading. \n        jQTSettings.starter(start);\n\n        return publicObj;\n    };\n\n    $.jQTouch.prototype.extensions = [];\n    $.jQTouch.prototype.tapHandlers = [];\n\n    // Extensions directly manipulate the jQTouch object,\n    // before it's initialized\n    $.jQTouch.addExtension = function(extension) {\n        $.jQTouch.prototype.extensions.push(extension);\n    };\n\n    // Experimental tap handlers that can bypass\n    // default jQTouch tap handling\n    $.jQTouch.addTapHandler = function(extension) {\n        $.jQTouch.prototype.tapHandlers.push(extension);\n    };\n\n})(); // Double closure, ALL THE WAY ACROSS THE SKY\n"]}