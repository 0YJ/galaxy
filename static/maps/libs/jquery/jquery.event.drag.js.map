{"version":3,"sources":["libs/jquery/jquery.event.drag.js"],"names":["$","fn","drag","str","arg","opts","type","isFunction","indexOf","this","bind","trigger","$event","event","$special","special","defaults","which","distance","not","handle","relative","drop","click","datakey","noBubble","add","obj","data","related","each","key","def","undefined","remove","setup","extend","init","attachEvent","dontstart","teardown","removeData","textselect","detachEvent","touched","results","dd","target","is","closest","currentTarget","length","propagates","mousedown","interactions","interaction","pageX","pageY","dragging","hijack","flatten","push","handler","document","live","elem","offset","top","left","callback","droppable","preventDefault","Math","pow","Date","getTime","x","result","ia","orig","originalEvent","mode","i","len","isNaN","cancelled","properties","p","subject","isPropagationStopped","dispatch","call","element","proxy","update","startX","startY","deltaX","deltaY","originalX","originalY","offsetX","offsetY","slice","available","jquery","nodeType","arr","map","member","makeArray","bool","css","unselectable","prototype","locate","$dispatch","apply","arguments","touchHooks","fixHooks","touchstart","touchmove","touchend","touchcancel","props","split","filter","touches","changedTouches","prop","draginit","dragstart","dragend","jQuery"],"mappings":"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","file":"../../../scripts/libs/jquery/jquery.event.drag.js","sourcesContent":["/*! \n * jquery.event.drag - v 2.2\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\n * Open Source MIT License - http://threedubmedia.com/code/license\n */\n// Created: 2008-06-04 \n// Updated: 2012-05-21\n// REQUIRES: jquery 1.7.x\n\n;(function( $ ){\n\n// add the jquery instance method\n$.fn.drag = function( str, arg, opts ){\n\t// figure out the event type\n\tvar type = typeof str == \"string\" ? str : \"\",\n\t// figure out the event handler...\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\n\t// fix the event type\n\tif ( type.indexOf(\"drag\") !== 0 ) \n\t\ttype = \"drag\"+ type;\n\t// were options passed\n\topts = ( str == fn ? arg : opts ) || {};\n\t// trigger or bind event handler\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\n};\n\n// local refs (increase compression)\nvar $event = $.event, \n$special = $event.special,\n// configure the drag special event \ndrag = $special.drag = {\n\t\n\t// these are the default settings\n\tdefaults: {\n\t\twhich: 1, // mouse button pressed to start drag sequence\n\t\tdistance: 0, // distance dragged before dragstart\n\t\tnot: ':input', // selector to suppress dragging on target elements\n\t\thandle: null, // selector to match handle target elements\n\t\trelative: false, // true to use \"position\", false to use \"offset\"\n\t\tdrop: true, // false to suppress drop events, true or selector to allow\n\t\tclick: false // false to suppress click events after dragend (no proxy)\n\t},\n\t\n\t// the key name for stored drag data\n\tdatakey: \"dragdata\",\n\t\n\t// prevent bubbling for better performance\n\tnoBubble: true,\n\t\n\t// count bound related events\n\tadd: function( obj ){ \n\t\t// read the interaction data\n\t\tvar data = $.data( this, drag.datakey ),\n\t\t// read any passed options \n\t\topts = obj.data || {};\n\t\t// count another realted event\n\t\tdata.related += 1;\n\t\t// extend data options bound with this event\n\t\t// don't iterate \"opts\" in case it is a node \n\t\t$.each( drag.defaults, function( key, def ){\n\t\t\tif ( opts[ key ] !== undefined )\n\t\t\t\tdata[ key ] = opts[ key ];\n\t\t});\n\t},\n\t\n\t// forget unbound related events\n\tremove: function(){\n\t\t$.data( this, drag.datakey ).related -= 1;\n\t},\n\t\n\t// configure interaction, capture settings\n\tsetup: function(){\n\t\t// check for related events\n\t\tif ( $.data( this, drag.datakey ) ) \n\t\t\treturn;\n\t\t// initialize the drag data with copied defaults\n\t\tvar data = $.extend({ related:0 }, drag.defaults );\n\t\t// store the interaction data\n\t\t$.data( this, drag.datakey, data );\n\t\t// bind the mousedown event, which starts drag interactions\n\t\t$event.add( this, \"touchstart mousedown\", drag.init, data );\n\t\t// prevent image dragging in IE...\n\t\tif ( this.attachEvent ) \n\t\t\tthis.attachEvent(\"ondragstart\", drag.dontstart ); \n\t},\n\t\n\t// destroy configured interaction\n\tteardown: function(){\n\t\tvar data = $.data( this, drag.datakey ) || {};\n\t\t// check for related events\n\t\tif ( data.related ) \n\t\t\treturn;\n\t\t// remove the stored data\n\t\t$.removeData( this, drag.datakey );\n\t\t// remove the mousedown event\n\t\t$event.remove( this, \"touchstart mousedown\", drag.init );\n\t\t// enable text selection\n\t\tdrag.textselect( true ); \n\t\t// un-prevent image dragging in IE...\n\t\tif ( this.detachEvent ) \n\t\t\tthis.detachEvent(\"ondragstart\", drag.dontstart ); \n\t},\n\t\t\n\t// initialize the interaction\n\tinit: function( event ){ \n\t\t// sorry, only one touch at a time\n\t\tif ( drag.touched ) \n\t\t\treturn;\n\t\t// the drag/drop interaction data\n\t\tvar dd = event.data, results;\n\t\t// check the which directive\n\t\tif ( event.which != 0 && dd.which > 0 && event.which != dd.which ) \n\t\t\treturn; \n\t\t// check for suppressed selector\n\t\tif ( $( event.target ).is( dd.not ) ) \n\t\t\treturn;\n\t\t// check for handle selector\n\t\tif ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) \n\t\t\treturn;\n\n\t\tdrag.touched = event.type == 'touchstart' ? this : null;\n\t\tdd.propagates = 1;\n\t\tdd.mousedown = this;\n\t\tdd.interactions = [ drag.interaction( this, dd ) ];\n\t\tdd.target = event.target;\n\t\tdd.pageX = event.pageX;\n\t\tdd.pageY = event.pageY;\n\t\tdd.dragging = null;\n\t\t// handle draginit event... \n\t\tresults = drag.hijack( event, \"draginit\", dd );\n\t\t// early cancel\n\t\tif ( !dd.propagates )\n\t\t\treturn;\n\t\t// flatten the result set\n\t\tresults = drag.flatten( results );\n\t\t// insert new interaction elements\n\t\tif ( results && results.length ){\n\t\t\tdd.interactions = [];\n\t\t\t$.each( results, function(){\n\t\t\t\tdd.interactions.push( drag.interaction( this, dd ) );\n\t\t\t});\n\t\t}\n\t\t// remember how many interactions are propagating\n\t\tdd.propagates = dd.interactions.length;\n\t\t// locate and init the drop targets\n\t\tif ( dd.drop !== false && $special.drop ) \n\t\t\t$special.drop.handler( event, dd );\n\t\t// disable text selection\n\t\tdrag.textselect( false ); \n\t\t// bind additional events...\n\t\tif ( drag.touched )\n\t\t\t$event.add( drag.touched, \"touchmove touchend\", drag.handler, dd );\n\t\telse \n\t\t\t$event.add( document, \"mousemove mouseup\", drag.handler, dd );\n\t\t// helps prevent text selection or scrolling\n\t\tif ( !drag.touched || dd.live )\n\t\t\treturn false;\n\t},\t\n\t\n\t// returns an interaction object\n\tinteraction: function( elem, dd ){\n\t\tvar offset = $( elem )[ dd.relative ? \"position\" : \"offset\" ]() || { top:0, left:0 };\n\t\treturn {\n\t\t\tdrag: elem, \n\t\t\tcallback: new drag.callback(), \n\t\t\tdroppable: [],\n\t\t\toffset: offset\n\t\t};\n\t},\n\t\n\t// handle drag-releatd DOM events\n\thandler: function( event ){ \n\t\t// read the data before hijacking anything\n\t\tvar dd = event.data;\t\n\t\t// handle various events\n\t\tswitch ( event.type ){\n\t\t\t// mousemove, check distance, start dragging\n\t\t\tcase !dd.dragging && 'touchmove': \n\t\t\t\tevent.preventDefault();\n\t\t\tcase !dd.dragging && 'mousemove':\n\t\t\t\t//  drag tolerance, x� + y� = distance�\n\t\t\t\tif ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) \n\t\t\t\t\tbreak; // distance tolerance not reached\n\t\t\t\tevent.target = dd.target; // force target from \"mousedown\" event (fix distance issue)\n\t\t\t\tdrag.hijack( event, \"dragstart\", dd ); // trigger \"dragstart\"\n\t\t\t\tif ( dd.propagates ) // \"dragstart\" not rejected\n\t\t\t\t\tdd.dragging = true; // activate interaction\n\t\t\t// mousemove, dragging\n\t\t\tcase 'touchmove':\n\t\t\t\tevent.preventDefault();\n\t\t\tcase 'mousemove':\n\t\t\t\tif ( dd.dragging ){\n\t\t\t\t\t// trigger \"drag\"\t\t\n\t\t\t\t\tdrag.hijack( event, \"drag\", dd );\n\t\t\t\t\tif ( dd.propagates ){\n\t\t\t\t\t\t// manage drop events\n\t\t\t\t\t\tif ( dd.drop !== false && $special.drop )\n\t\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"dropstart\", \"dropend\"\t\t\t\t\t\t\t\n\t\t\t\t\t\tbreak; // \"drag\" not rejected, stop\t\t\n\t\t\t\t\t}\n\t\t\t\t\tevent.type = \"mouseup\"; // helps \"drop\" handler behave\n\t\t\t\t}\n\t\t\t// mouseup, stop dragging\n\t\t\tcase 'touchend': \n\t\t\tcase 'mouseup': \n\t\t\tdefault:\n\t\t\t\tif ( drag.touched )\n\t\t\t\t\t$event.remove( drag.touched, \"touchmove touchend\", drag.handler ); // remove touch events\n\t\t\t\telse \n\t\t\t\t\t$event.remove( document, \"mousemove mouseup\", drag.handler ); // remove page events\t\n\t\t\t\tif ( dd.dragging ){\n\t\t\t\t\tif ( dd.drop !== false && $special.drop )\n\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"drop\"\n\t\t\t\t\tdrag.hijack( event, \"dragend\", dd ); // trigger \"dragend\"\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdrag.hijack( event, \"dragclickonly\", dd ); // trigger \"dragclickonly\"\t\n\t\t\t\t}\n\t\t\t\tdrag.textselect( true ); // enable text selection\n\t\t\t\t// if suppressing click events...\n\t\t\t\tif ( dd.click === false && dd.dragging )\n\t\t\t\t\t$.data( dd.mousedown, \"suppress.click\", new Date().getTime() + 5 );\n\t\t\t\tdd.dragging = drag.touched = false; // deactivate element\t\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t\t\n\t// re-use event object for custom events\n\thijack: function( event, type, dd, x, elem ){\n\t\t// not configured\n\t\tif ( !dd ) \n\t\t\treturn;\n\t\t// remember the original event and type\n\t\tvar orig = { event:event.originalEvent, type:event.type },\n\t\t// is the event drag related or drog related?\n\t\tmode = type.indexOf(\"drop\") ? \"drag\" : \"drop\",\n\t\t// iteration vars\n\t\tresult, i = x || 0, ia, $elems, callback,\n\t\tlen = !isNaN( x ) ? x : dd.interactions.length;\n\t\t// modify the event type\n\t\tevent.type = type;\n\t\t// remove the original event\n\t\tevent.originalEvent = null;\n\t\t// initialize the results\n\t\tdd.results = [];\n\t\t// handle each interacted element\n\t\tdo if ( ia = dd.interactions[ i ] ){\n\t\t\t// validate the interaction\n\t\t\tif ( type !== \"dragend\" && ia.cancelled )\n\t\t\t\tcontinue;\n\t\t\t// set the dragdrop properties on the event object\n\t\t\tcallback = drag.properties( event, dd, ia );\n\t\t\t// prepare for more results\n\t\t\tia.results = [];\n\t\t\t// handle each element\n\t\t\t$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){\n\t\t\t\t// identify drag or drop targets individually\n\t\t\t\tcallback.target = subject;\n\t\t\t\t// force propagtion of the custom event\n\t\t\t\tevent.isPropagationStopped = function(){ return false; };\n\t\t\t\t// handle the event\t\n\t\t\t\tresult = subject ? $event.dispatch.call( subject, event, callback ) : null;\n\t\t\t\t// stop the drag interaction for this element\n\t\t\t\tif ( result === false ){\n\t\t\t\t\tif ( mode == \"drag\" ){\n\t\t\t\t\t\tia.cancelled = true;\n\t\t\t\t\t\tdd.propagates -= 1;\n\t\t\t\t\t}\n\t\t\t\t\tif ( type == \"drop\" ){\n\t\t\t\t\t\tia[ mode ][p] = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// assign any dropinit elements\n\t\t\t\telse if ( type == \"dropinit\" )\n\t\t\t\t\tia.droppable.push( drag.element( result ) || subject );\n\t\t\t\t// accept a returned proxy element \n\t\t\t\tif ( type == \"dragstart\" )\n\t\t\t\t\tia.proxy = $( drag.element( result ) || ia.drag )[0];\n\t\t\t\t// remember this result\t\n\t\t\t\tia.results.push( result );\n\t\t\t\t// forget the event result, for recycling\n\t\t\t\tdelete event.result;\n\t\t\t\t// break on cancelled handler\n\t\t\t\tif ( type !== \"dropinit\" )\n\t\t\t\t\treturn result;\n\t\t\t});\t\n\t\t\t// flatten the results\t\n\t\t\tdd.results[ i ] = drag.flatten( ia.results );\t\n\t\t\t// accept a set of valid drop targets\n\t\t\tif ( type == \"dropinit\" )\n\t\t\t\tia.droppable = drag.flatten( ia.droppable );\n\t\t\t// locate drop targets\n\t\t\tif ( type == \"dragstart\" && !ia.cancelled )\n\t\t\t\tcallback.update(); \n\t\t}\n\t\twhile ( ++i < len )\n\t\t// restore the original event & type\n\t\tevent.type = orig.type;\n\t\tevent.originalEvent = orig.event;\n\t\t// return all handler results\n\t\treturn drag.flatten( dd.results );\n\t},\n\t\t\n\t// extend the callback object with drag/drop properties...\n\tproperties: function( event, dd, ia ){\t\t\n\t\tvar obj = ia.callback;\n\t\t// elements\n\t\tobj.drag = ia.drag;\n\t\tobj.proxy = ia.proxy || ia.drag;\n\t\t// starting mouse position\n\t\tobj.startX = dd.pageX;\n\t\tobj.startY = dd.pageY;\n\t\t// current distance dragged\n\t\tobj.deltaX = event.pageX - dd.pageX;\n\t\tobj.deltaY = event.pageY - dd.pageY;\n\t\t// original element position\n\t\tobj.originalX = ia.offset.left;\n\t\tobj.originalY = ia.offset.top;\n\t\t// adjusted element position\n\t\tobj.offsetX = obj.originalX + obj.deltaX; \n\t\tobj.offsetY = obj.originalY + obj.deltaY;\n\t\t// assign the drop targets information\n\t\tobj.drop = drag.flatten( ( ia.drop || [] ).slice() );\n\t\tobj.available = drag.flatten( ( ia.droppable || [] ).slice() );\n\t\treturn obj;\t\n\t},\n\t\n\t// determine is the argument is an element or jquery instance\n\telement: function( arg ){\n\t\tif ( arg && ( arg.jquery || arg.nodeType == 1 ) )\n\t\t\treturn arg;\n\t},\n\t\n\t// flatten nested jquery objects and arrays into a single dimension array\n\tflatten: function( arr ){\n\t\treturn $.map( arr, function( member ){\n\t\t\treturn member && member.jquery ? $.makeArray( member ) : \n\t\t\t\tmember && member.length ? drag.flatten( member ) : member;\n\t\t});\n\t},\n\t\n\t// toggles text selection attributes ON (true) or OFF (false)\n\ttextselect: function( bool ){ \n\t\t$( document )[ bool ? \"unbind\" : \"bind\" ](\"selectstart\", drag.dontstart )\n\t\t\t.css(\"MozUserSelect\", bool ? \"\" : \"none\" );\n\t\t// .attr(\"unselectable\", bool ? \"off\" : \"on\" )\n\t\tdocument.unselectable = bool ? \"off\" : \"on\"; \n\t},\n\t\n\t// suppress \"selectstart\" and \"ondragstart\" events\n\tdontstart: function(){ \n\t\treturn false; \n\t},\n\t\n\t// a callback instance contructor\n\tcallback: function(){}\n\t\n};\n\n// callback methods\ndrag.callback.prototype = {\n\tupdate: function(){\n\t\tif ( $special.drop && this.available.length )\n\t\t\t$.each( this.available, function( i ){\n\t\t\t\t$special.drop.locate( this, i );\n\t\t\t});\n\t}\n};\n\n// patch $.event.$dispatch to allow suppressing clicks\nvar $dispatch = $event.dispatch;\n$event.dispatch = function( event ){\n\tif ( $.data( this, \"suppress.\"+ event.type ) - new Date().getTime() > 0 ){\n\t\t$.removeData( this, \"suppress.\"+ event.type );\n\t\treturn;\n\t}\n\treturn $dispatch.apply( this, arguments );\n};\n\n// event fix hooks for touch events...\nvar touchHooks = \n$event.fixHooks.touchstart = \n$event.fixHooks.touchmove = \n$event.fixHooks.touchend =\n$event.fixHooks.touchcancel = {\n\tprops: \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\n\tfilter: function( event, orig ) {\n\t\tif ( orig ){\n\t\t\tvar touched = ( orig.touches && orig.touches[0] )\n\t\t\t\t|| ( orig.changedTouches && orig.changedTouches[0] )\n\t\t\t\t|| null; \n\t\t\t// iOS webkit: touchstart, touchmove, touchend\n\t\t\tif ( touched ) \n\t\t\t\t$.each( touchHooks.props, function( i, prop ){\n\t\t\t\t\tevent[ prop ] = touched[ prop ];\n\t\t\t\t});\n\t\t}\n\t\treturn event;\n\t}\n};\n\n// share the same special event configuration with related events...\n$special.draginit = $special.dragstart = $special.dragend = drag;\n\n})( jQuery );"]}