{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","tracks","visualization","mod_icon_btn","query_string","GridView","Base","this","initialize","apply","arguments","extend","Backbone","Model","TracksterUI","baseURL","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","f-dbkey","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","then","chrom_info","overview_drawable_name","undefined","change_chrom","i","length","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","attr","append","resize_window","galaxy_config","app","view_existing","get","choose_existing_or_new","view_new","listTracksParams","dataset_params","dataset_id","hda_ldda","gene_region","View in saved visualization","view_in_saved","View in new visualization","tracks_grid","url_base","dict_format","embedded","Add to visualization","parent","find","val","param","container","init_editor","alert","response","template_view_new","Create","create_browser","dbkeys_in_genomes","map","r","default_dbkey","contains","focus","select2","html","trigger","add_dataset","data_type","track_data","on","GalaxyApp"],"mappings":"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"}