{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","tracks","visualization","mod_icon_btn","query_string","Base","this","initialize","apply","arguments","extend","Backbone","Model","TracksterUI","baseURL","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","f-dbkey","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","then","chrom_info","overview_drawable_name","undefined","change_chrom","i","length","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","attr","append","resize_window","galaxy_config","app","view_existing","get","choose_existing_or_new","view_new","listTracksParams","dataset_params","dataset_id","hda_ldda","param","alert","table_html","view_in_saved","show_choice","Add to visualization","parent","find","val","View in saved visualization","View in new visualization","console","debug","container","init_editor","response","template_view_new","Create","create_browser","dbkeys_in_genomes","map","r","default_dbkey","contains","focus","select2","html","trigger","gene_region","add_dataset","data_type","track_data","on","GalaxyApp"],"mappings":"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"}