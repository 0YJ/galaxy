{"version":3,"file":"metrics-logger.js","sources":["../../src/utils/metrics-logger.js"],"names":["define","MetricsLogger","options","self","this","userId","window","bootstrapped","user","id","consoleLogger","_init","LoggingCache","ALL","DEBUG","INFO","WARN","ERROR","METRIC","NONE","defaultOptions","logLevel","consoleLevel","defaultNamespace","consoleNamespaceWhitelist","clientPrefix","maxCacheSize","postSize","addTime","cacheKeyPrefix","postUrl","delayPostInMs","getPingData","undefined","onServerResponse","prototype","k","hasOwnProperty","_parseLevel","_sending","_waiting","_postSize","_initCache","cache","maxSize","key","err","_emitToConsole","level","type","upper","toUpperCase","Error","emit","namespace","logArguments","_addToCache","arguments","length","newLength","add","_buildEntry","_postCache","entry","args","time","Date","toISOString","jQuery","when","count","entries","get","entriesLength","postData","metrics","JSON","stringify","post","always","fail","xhr","readyState","status","responseJSON","responseText","done","response","remove","_delayPost","setTimeout","whitelist","indexOf","Array","slice","call","unshift","info","apply","error","warn","debug","log","metric","_hasStorage","_initStorage","test","localStorage","setItem","removeItem","e","getItem","empty","_cache","_fetchAndParse","overage","splice","push","_unparseAndStore","parse","removed","print","console"],"mappings":"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"}