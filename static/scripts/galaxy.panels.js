window.jQuery=jQuery,window.$=jQuery,window._=_,window.Backbone=Backbone,window.Handlebars=Handlebars,console.debug("globals loaded:",window.jQuery,window.Backbone,"..."),!function(a){"use strict";function b(){l.hide()}function c(a,b,c,d,e){l.setContent({title:a,body:b,buttons:c,extra_buttons:d}),l.show({backdrop:!0},e)}function d(a,b,c,d,e){l.setContent({title:a,body:b,buttons:c,extra_buttons:d}),l.show({backdrop:!1},e)}function e(a){var c=a.width||"600",d=a.height||"400",e=a.scroll||"auto";$("#overlay-background").bind("click.overlay",function(){b(),$("#overlay-background").unbind("click.overlay")}),l.setContent({closeButton:!0,title:"&nbsp;",body:$("<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='"+a.url+"' width='"+c+"' height='"+d+"' scrolling='"+e+"' frameborder='0'></iframe></div>")}),l.show({backdrop:!0})}function f(a,b){a?($(".loggedin-only").show(),$(".loggedout-only").hide(),$("#user-email").text(a),b&&$(".admin-only").show()):($(".loggedin-only").hide(),$(".loggedout-only").show(),$(".admin-only").hide())}var g=function(){0==$("#DD-helper").length&&$("<div id='DD-helper'/>").appendTo("body").hide()},h=160,i=800,j=function(a){this.$panel=a.panel,this.$center=a.center,this.$drag=a.drag,this.$toggle=a.toggle,this.left=!a.right,this.hidden=!1,this.hidden_by_tool=!1,this.saved_size=null,this.init()};$.extend(j.prototype,{resize:function(a){this.$panel.css("width",a),this.left?this.$center.css("left",a):this.$center.css("right",a),document.recalc&&document.recalc()},do_toggle:function(){var a=this;this.hidden?(this.$toggle.removeClass("hidden"),this.left?this.$panel.css("left",-this.saved_size).show().animate({left:0},"fast",function(){a.resize(a.saved_size)}):this.$panel.css("right",-this.saved_size).show().animate({right:0},"fast",function(){a.resize(a.saved_size)}),a.hidden=!1):(a.saved_size=this.$panel.width(),document.recalc&&document.recalc(),this.left?this.$panel.animate({left:-this.saved_size},"fast"):this.$panel.animate({right:-this.saved_size},"fast"),this.left?this.$center.css("left",0):this.$center.css("right",0),a.hidden=!0,a.$toggle.addClass("hidden")),this.hidden_by_tool=!1},handle_minwidth_hint:function(a){var b=this.$center.width()-(this.hidden?this.saved_size:0);a>b?this.hidden||(this.do_toggle(),this.hidden_by_tool=!0):this.hidden_by_tool&&(this.do_toggle(),this.hidden_by_tool=!1)},force_panel:function(a){(this.hidden&&"show"==a||!this.hidden&&"hide"==a)&&this.do_toggle()},init:function(){function a(a){var d=a.pageX-b;b=a.pageX;var e=c.$panel.width(),f=c.left?e+d:e-d;f=Math.min(i,Math.max(h,f)),c.resize(f)}var b,c=this;c.$toggle.remove().appendTo("body"),c.$toggle.on("click",function(){c.do_toggle()}),this.$drag.on("mousedown",function(c){b=c.pageX,$("#DD-helper").show().on("mousemove",a).one("mouseup",function(){$(this).hide().off("mousemove",a)})}),window.force_left_panel=function(a){c.force_panel(a)},window.handle_minwidth_hint=function(a){c.handle_minwidth_hint(a)}}});var k=function(a){this.$overlay=a.overlay,this.$dialog=a.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=a.backdrop,this.$header.find(".close").on("click",$.proxy(this.hide,this))};$.extend(k.prototype,{setContent:function(a){this.$header.hide(),a.title&&(this.$header.find(".title").html(a.title),this.$header.show()),a.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();var b=this.$footer.find(".buttons").html("");a.buttons&&($.each(a.buttons,function(a,c){b.append($("<button></button> ").text(a).click(c)).append(" ")}),this.$footer.show());var c=this.$footer.find(".extra_buttons").html("");a.extra_buttons&&($.each(a.extra_buttons,function(a,b){c.append($("<button></button>").text(a).click(b)).append(" ")}),this.$footer.show());var d=a.body;"progress"==d&&(d=$("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(d)},show:function(a,b){this.$dialog.is(":visible")||(a.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",$(window).height()-this.$footer.outerHeight()-this.$header.outerHeight()-parseInt(this.$dialog.css("padding-top"),10)-parseInt(this.$dialog.css("padding-bottom"),10))),b&&b()},hide:function(){var a=this;a.$dialog.fadeOut(function(){a.$overlay.hide(),a.$backdrop.removeClass("in"),a.$body.children().remove(),a.$body.css("min-width",void 0)})}});var l;$(function(){l=new k({overlay:$("#top-modal"),dialog:$("#top-modal-dialog"),backdrop:$("#top-modal-backdrop")})}),$(function(){var a=$("#masthead ul.nav > li.dropdown > .dropdown-menu");$("body").on("click.nav_popups",function(b){if(a.hide(),$("#DD-helper").hide(),!$(b.target).closest("#masthead ul.nav > li.dropdown > .dropdown-menu").length){var c=$(b.target).closest("#masthead ul.nav > li.dropdown");c.length&&($("#DD-helper").show(),c.children(".dropdown-menu").show(),b.preventDefault())}})}),a.ensure_dd_helper=g,a.Panel=j,a.Modal=k,a.hide_modal=b,a.show_modal=c,a.show_message=d,a.show_in_overlay=e,a.user_changed=f}(window);
//# sourceMappingURL=../maps/galaxy.panels.js.map