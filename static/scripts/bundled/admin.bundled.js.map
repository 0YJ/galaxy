{"version":3,"sources":["webpack:///./galaxy/scripts/apps/admin.js","webpack:///./galaxy/scripts/apps/panels/admin-panel.js","webpack:///./galaxy/scripts/mvc/form/form-wrapper.js","webpack:///./galaxy/scripts/mvc/form/form-view.js","webpack:///./galaxy/scripts/mvc/ui/ui-portlet.js","webpack:///./galaxy/scripts/mvc/ui/ui-misc.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-default.js","webpack:///./galaxy/scripts/mvc/ui/ui-buttons.js","webpack:///./galaxy/scripts/mvc/ui/ui-slider.js","webpack:///./galaxy/scripts/mvc/ui/ui-options.js","webpack:///./galaxy/scripts/mvc/ui/ui-drilldown.js","webpack:///./galaxy/scripts/mvc/form/form-section.js","webpack:///./galaxy/scripts/mvc/form/form-repeat.js","webpack:///./galaxy/scripts/mvc/form/form-input.js","webpack:///./galaxy/scripts/mvc/form/form-parameters.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-content.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-library.js","webpack:///./galaxy/scripts/mvc/ui/ui-table.js","webpack:///./galaxy/scripts/mvc/ui/ui-list.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-ftp.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-genomespace.js","webpack:///./galaxy/scripts/mvc/tool/tool-genomespace.js","webpack:///./galaxy/scripts/mvc/ui/ui-color-picker.js","webpack:///./galaxy/scripts/mvc/form/form-data.js","webpack:///./galaxy/scripts/mvc/grid/grid-view.js","webpack:///./galaxy/scripts/mvc/grid/grid-model.js","webpack:///./galaxy/scripts/mvc/grid/grid-template.js","webpack:///./galaxy/scripts/mvc/ui/popup-menu.js","webpack:///./galaxy/scripts/layout/router.js"],"names":["jQuery","require","$","GalaxyApp","AdminPanel","FormWrapper","GridView","Ui","QueryStringParsing","Router","Utils","Page","window","app","options","bootstrapped","Galaxy","debug","AdminRouter","extend","routes","authenticate","args","name","user","id","get","show_users","page","display","url_base","root","url_data","params","dict_format","show_roles","show_groups","show_tool_versions","show_quotas","show_forms","show_form","form_id","form_defs","reset_user_password","title","url","icon","submit_title","redirect","manage_roles_and_groups_for_user","manage_users_and_groups_for_role","manage_users_and_roles_for_group","manage_users_and_groups_for_quota","create_role","create_group","create_quota","rename_role","rename_group","rename_quota","edit_quota","set_quota_default","create_form","edit_form","View","_","config","active_view","setWindowTitle","Left","_l","Backbone","initialize","self","settings","message","status","model","Model","categories","Collection","items","enabled","is_tool_shed_installed","enable_beta_ts_api_install","installing_repository_ids","is_repo_installed","target","allow_user_impersonation","enable_quotas","setElement","_template","render","$el","empty","each","category","$section","_templateSection","attributes","$entries","find","item","undefined","$link","attr","href","text","on","e","preventDefault","router","push","append","addClass","prop","join","toString","module","exports","Form","ajax","type","done","response","form","inputs","buttons","Button","tooltip","submit_tooltip","submit_icon","cls","onclick","_submit","fail","Message","persistent","data","JSON","stringify","create","contentType","success_message","location","param","matchModel","input","input_id","field_list","value","_showMessage","responseJSON","err_msg","$panel","parents","filter","indexOf","css","first","animate","scrollTop","update","Portlet","FormSection","FormData","initial_errors","always_refresh","onchange","set","new_model","node","input_list","isEqual","field","new_options","i","opt","length","label","trigger","emit","wait","active","is_dynamic","unwait","highlight","silent","input_element","element_list","error","portlet","expand","offset","top","errors","error_messages","matchResponse","off","Manager","_renderForm","current_check","checksum","refresh_on_change","new_check","reset","remove","UnescapedMessage","section","operations","collapsible","collapsed","onchange_title","visible","uid","body","scrollable","nopadding","collapsible_button","$body","$title_text","$title_icon","$header","$content","$backdrop","$buttons","$operations","ButtonIcon","removeClass","html","show","hide","collapse","make_text_editable","on_finish","new_title","header","fadeIn","enableButton","disableButton","hideOperation","showOperation","setOperation","callback","height","setIcon","disable","enable","Select","Slider","Options","Drilldown","Buttons","Modal","Label","tagName","listenTo","fade","messageForDisplay","timeout","clearTimeout","setTimeout","fadeOut","escape","Input","placeholder","disabled","readonly","area","color","style","events","new_val","datalist","isArray","autocomplete","source","request","change","_onchange","val","attr_name","removeAttr","Hidden","$info","$hidden","Upload","$file","$text","$wait","_readFile","file","files","reader","FileReader","onload","result","readAsText","ButtonDefault","ButtonCheck","ButtonMenu","ButtonLink","RadioButton","Checkbox","Radio","data2","error_text","empty_text","multiple","searchable","optional","individual","pagesize","_changeData","_changeDisabled","_changeWait","_changeVisible","_changeValue","_renderSearchable","_renderClassic","$select","_getValue","$dropdown","$resize","$resize_icon","event","currentY","pageY","currentHeight","minHeight","Math","max","select2","all_button","new_value","option","prepend","_match","term","String","toUpperCase","index","order","tags","matched_tags","closeOnSelect","query","q","results","found","tag","slice","more","formatResult","reduce","memo","_setValue","exists","findWhere","v","d","add","sorter","keep","sort","setOnChange","selected","a","b","isEmpty","wait_text","wait_cls","percentage","$icon","$title","$progress","$progress_bar","placement","width","icons","total","$button","$menu","pull","onunload","collection","$root","where","submodel","suboptions","divider","addMenu","merge","min","step","precise","split","$slider","pressed","which","_isParameter","opts","has_slider","slider","ui","isNaN","round","substring","Base","$message","$options","_templateOptions","_templateOption","_messageShow","values","BaseIcons","pair","prototype","call","closest","header_index","list","element","_setState","header_id","is_expanded","$subgroup","attach","iterate","$tmpl","level","has_options","new_header","$group","Repeat","InputElement","Parameters","parameters","input_def","_addConditional","_addRepeat","_addSection","_addRow","test_param","selectedCase","matchCase","cases","case_def","section_row","nonhidden","j","hidden","sub_section","_append","block_index","repeat","onnew","sub_section_id","ondel","del","n_cache","size","cache","default","hideOptions","help","expanded","hide_label","text_value","collapsible_value","collapsible_preview","argument","backdrop","fixed","button_new","$list","button_delete","_refresh","delAll","app_options","text_enable","text_disable","cls_enable","cls_disable","$field","$preview","$collapsible","$collapsible_text","$collapsible_icon","$error_text","$error","help_text","help_argument","collapsible_state","SelectContent","SelectLibrary","SelectFtp","SelectGenomeSpace","ColorPicker","types","fieldClass","_fieldSelect","_fieldText","_fieldData","extensions","flavor","is_workflow","SelectClass","_fieldDrilldown","str_value","_fieldSlider","_fieldHidden","info","_fieldBoolean","_fieldColor","_fieldLibrary","_fieldFtp","_fieldGenomeSpace","_fieldUpload","Batch","DISABLED","ENABLED","LINKED","Configurations","src","batch","data_multiple","data_collection","workflow_data","workflow_data_multiple","workflow_data_collection","module_data","module_data_collection","src_labels","pagelimit","statustimer","button_product","$batch_div","$batch","linked","clone","lastenter","_handleDrop","history","_changeCurrent","_changeType","current","id_list","fields","_batch","details","hid","$batchfield","batchmode","button_type","config_id","textify","button_data","c","button_width","select_options","ev","drop_data","parse","originalEvent","dataTransfer","getData","new_id","new_src","history_content_type","current_value","_handleDropStatus","hdca","map_over_type","Table","List","Libraries","LibraryDatasets","library_id","fetch","libraries","datasets","library_select","dataset_list","library_current","success","content","ondblclick","onconfirm","selectable","cls_tr","$thead","$tbody","$tmessage","row","_row","row_count","addHeader","appendHeader","align","wrapper","_commit","before","after","_onclick","old_value","_ondblclick","select","button","v_id","v_name","lst","_templateRow","ftpfile_list","GenomespaceBrowser","browse_button","browseGenomeSpace","filename_textbox","token_textbox","openFileBrowser","successCallback","destination","token","GS_UI_URL","genomespace_ui_url","GS_UPLOAD_URL","newWin","open","successCalBack","addEventListener","focus","setCallbackOnGSUploadError","colors","standard","base","theme","$view","$value","_build","$boxes","_templateCheck","rgb","match","hex","x","parseInt","_content","line_def","_templateContent","$line","$box","_templateBox","bottom","sum","dict","_iterate","result_dict","flat_dict","flat_id","input_value","convert","identifier","head","section_label","block_indices","block_prefix","block_label","pos","substr","flat","ignore","payload","p_id","visitInputs","search","separator","Array","parent","children","child","hasClass","truevalue","falsevalue","prefix","context","key","ajaxSettings","traditional","GridModel","Templates","PopupMenu","grid","grid_config","add_tag_to_grid_filter","tag_name","tag_value","advanced_search","is","slideToggle","add_filter_condition","filters","k","embedded","init_grid","use_panels","padding","overflow","handle_refresh","refresh_frames","inArray","currHistoryPanel","loadCurrentHistory","allow_title_display","replace","footer","use_hide_message","init_grid_elements","init_grid_controls","init_refresh_on_change","click","submit_operation","keyup","set_sort_condition","submit","column_key","text_input_obj","text_input","remove_filter_condition","set_categorical_filter","check_all_items","checkboxes","check_count","update_checked","rating","set_page","execute","items_length","popup","operation","_add_operation","operation_config","allowed","allow_popup","addItem","url_args","confirmation_text","confirm","func","encode_id","findItemByHtml","add_filter","t","filter_element","container","go_page_one","remove_filter","col_key","cur_sort","new_sort","sort_arrow","category_filter","cur_value","trim","filter_value","new_page","page_num","cur_page","operation_button","operation_name","number_of_checked_ids","item_ids","check","state","href_parts","href_parms_str","href_parms","toLowerCase","get_url_data","can_async_op","update_grid","go_to","async","$div","load","method","alert","response_text","insert","json","parseJSON","complete","defaults","async_ops","categorical_filters","sort_key","show_item_checkboxes","num_pages","op","cur_val","condition","condition_index","pairs","get_url","tmpl","grid_header","grid_table","info_text","global_actions","show_popup","action","grid_filters","columns","column","extra","num_rows_rendered","encoded_id","popupmenu_id","current_item_id","nowrap","column_settings","column_config","link","attach_popup","label_id_prefix","use_paging","num_page_links","cur_page_num","page_link_range","min_page","min_offset","max_range","max_page","max_offset","page_index","allow_multiple","found_global","global_operation","legend","default_filter_dict","advanced_search_display","show_advanced_search_link","filterable","f_key","d_key","standard_search_display","grid_column_filter","column_label","is_text","temp_column","column_filter","seperator","cf_label","cf","cf_key","cf_arg","filter_key","sanitize","menu","_renderAndShow","clickEvent","appendTo","_getShownPosition","_setUpCloseBehavior","position","template","li","map","checked","menuWidth","pageX","document","scrollLeft","left","closePopup","err","contents","one","splice","removeItem","findIndexByHtml","has","_create","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","convertLinksToOptions","$parent","selector","elem","linkHref","linkTarget","confirmText","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom","QUERY_STRING","__identifer","random","isEmptyObject","navigate","queryObj","pop","apply","access_denied"],"mappings":"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","file":"admin.bundled.js","sourcesContent":["var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    GalaxyApp = require( 'galaxy' ).GalaxyApp,\n    AdminPanel = require( './panels/admin-panel' ),\n    FormWrapper = require( 'mvc/form/form-wrapper' ),\n    GridView = require( 'mvc/grid/grid-view' ),\n    Ui = require( 'mvc/ui/ui-misc' ),\n    QueryStringParsing = require( 'utils/query-string-parsing' ),\n    Router = require( 'layout/router' ),\n    Utils = require( 'utils/utils' ),\n    Page = require( 'layout/page' );\n\nwindow.app = function app( options, bootstrapped ){\n    window.Galaxy = new GalaxyApp( options, bootstrapped );\n    Galaxy.debug( 'admin app' );\n\n    /** Routes */\n    var AdminRouter = Router.extend({\n        routes: {\n            '(/)admin(/)users' : 'show_users',\n            '(/)admin(/)roles' : 'show_roles',\n            '(/)admin(/)groups' : 'show_groups',\n            '(/)admin(/)tool_versions' : 'show_tool_versions',\n            '(/)admin(/)quotas' : 'show_quotas',\n            '(/)admin(/)forms' : 'show_forms',\n            '(/)admin(/)form(/)(:form_id)' : 'show_form'\n        },\n\n        authenticate: function( args, name ) {\n            return Galaxy.user && Galaxy.user.id && Galaxy.user.get( 'is_admin' );\n        },\n\n        show_users: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/users_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_roles: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/roles_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_groups: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/groups_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_tool_versions: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/tool_versions_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_quotas: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/quotas_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_forms: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'forms/forms_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_form : function( form_id ) {\n            var id = '?id=' + QueryStringParsing.get( 'id' );\n            var form_defs = {\n                reset_user_password: {\n                    title           : 'Reset passwords',\n                    url             : 'admin/reset_user_password' + id,\n                    icon            : 'fa-user',\n                    submit_title    : 'Save new password',\n                    redirect        : 'admin/users'\n                },\n                manage_roles_and_groups_for_user: {\n                    url             : 'admin/manage_roles_and_groups_for_user' + id,\n                    icon            : 'fa-users',\n                    redirect        : 'admin/users'\n                },\n                manage_users_and_groups_for_role: {\n                    url             : 'admin/manage_users_and_groups_for_role' + id,\n                    redirect        : 'admin/roles'\n                },\n                manage_users_and_roles_for_group: {\n                    url             : 'admin/manage_users_and_roles_for_group' + id,\n                    redirect        : 'admin/groups'\n                },\n                manage_users_and_groups_for_quota: {\n                    url             : 'admin/manage_users_and_groups_for_quota' + id,\n                    redirect        : 'admin/quotas'\n                },\n                create_role: {\n                    url             : 'admin/create_role',\n                    redirect        : 'admin/roles'\n                },\n                create_group: {\n                    url             : 'admin/create_group',\n                    redirect        : 'admin/groups'\n                },\n                create_quota: {\n                    url             : 'admin/create_quota',\n                    redirect        : 'admin/quotas'\n                },\n                rename_role: {\n                    url             : 'admin/rename_role' + id,\n                    redirect        : 'admin/roles'\n                },\n                rename_group: {\n                    url             : 'admin/rename_group' + id,\n                    redirect        : 'admin/groups'\n                },\n                rename_quota: {\n                    url             : 'admin/rename_quota' + id,\n                    redirect        : 'admin/quotas'\n                },\n                edit_quota: {\n                    url             : 'admin/edit_quota' + id,\n                    redirect        : 'admin/quotas'\n                },\n                set_quota_default: {\n                    url             : 'admin/set_quota_default' + id,\n                    redirect        : 'admin/quotas'\n                },\n                create_form: {\n                    url             : 'forms/create_form',\n                    redirect        : 'admin/forms'\n                },\n                edit_form: {\n                    url             : 'forms/edit_form' + id,\n                    redirect        : 'admin/forms'\n                },\n            };\n            this.page.display( new FormWrapper.View ( form_defs[ form_id ] ) );\n        }\n    });\n\n    $(function() {\n        _.extend( options.config, { active_view : 'admin' } );\n        Utils.setWindowTitle(\"Administration\");\n        Galaxy.page = new Page.View( _.extend( options, {\n            Left    : AdminPanel,\n            Router  : AdminRouter\n        } ) );\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/admin.js","var _l = require( 'utils/localization' );\n\nvar AdminPanel = Backbone.View.extend({\n    initialize: function( page, options ) {\n        var self = this;\n        this.page       = page;\n        this.root       = options.root;\n        this.config     = options.config;\n        this.settings   = options.settings;\n        this.message    = options.message;\n        this.status     = options.status;\n        this.model = new Backbone.Model({\n            title   : _l( 'Administration' )\n        });\n        this.categories = new Backbone.Collection([{\n            title : 'Server',\n            items : [ {\n                title   : 'Data types registry',\n                url     : 'admin/view_datatypes_registry'\n            },{\n                title   : 'Data tables registry',\n                url     : 'admin/view_tool_data_tables'\n            },{\n                title   : 'Display applications',\n                url     : 'admin/display_applications'\n            },{\n                title   : 'Manage jobs',\n                url     : 'admin/jobs'\n            } ]\n        },{\n            title : 'Tools and Tool Shed',\n            items : [ {\n                title   : 'Search Tool Shed',\n                url     : 'admin_toolshed/browse_tool_sheds',\n                enabled : self.settings.is_tool_shed_installed\n            },{\n                title   : 'Search Tool Shed (Beta)',\n                url     : 'admin_toolshed/browse_toolsheds',\n                enabled : self.settings.is_tool_shed_installed && self.config.enable_beta_ts_api_install\n            },{\n                title   : 'Monitor installing repositories',\n                url     : 'admin_toolshed/monitor_repository_installation?installing_repository_ids=' + self.settings.installing_repository_ids,\n                enabled : self.settings.installing_repository_ids\n            },{\n                title   : 'Manage installed tools',\n                url     : 'admin_toolshed/browse_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Reset metadata',\n                url     : 'admin_toolshed/reset_metadata_on_selected_installed_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Download local tool',\n                url     : 'admin/package_tool'\n            },{\n                title   : 'Tool lineage',\n                url     : 'admin/tool_versions',\n                target  : '__use_router__'\n            },{\n                title   : 'Reload a tool\\'s configuration',\n                url     : 'admin/reload_tool'\n            },{\n                title   : 'Review tool migration stages',\n                url     : 'admin/review_tool_migration_stages'\n            },{\n                title   : 'View Tool Error Logs',\n                url     : 'admin/tool_errors'\n            },{\n                title   : 'Manage Display Whitelist',\n                url     : 'admin/sanitize_whitelist'\n            },{\n                title   : 'Manage Tool Dependencies',\n                url     : 'admin/manage_tool_dependencies'\n            } ]\n        },{\n            title : 'User Management',\n            items : [ {\n                title   : 'Users',\n                url     : 'admin/users',\n                target  : '__use_router__'\n            },{\n                title   : 'Groups',\n                url     : 'admin/groups',\n                target  : '__use_router__'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles',\n                target  : '__use_router__'\n            },{\n                title   : 'API keys',\n                url     : 'userskeys/all_users'\n            },{\n                title   : 'Impersonate a user',\n                url     : 'admin/impersonate',\n                enabled : self.config.allow_user_impersonation\n            } ]\n        },{\n            title : 'Data',\n            items : [ {\n                title   : 'Quotas',\n                url     : 'admin/quotas',\n                target  : '__use_router__',\n                enabled : self.config.enable_quotas\n            },{\n                title   : 'Data libraries',\n                url     : 'library_admin/browse_libraries'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles',\n                target  : '__use_router__'\n            },{\n                title   : 'Local data',\n                url     : 'data_manager'\n            } ]\n        },{\n            title : 'Form Definitions',\n            items : [ {\n                title   : 'Form definitions',\n                url     : 'admin/forms',\n                target  : '__use_router__'\n            } ]\n        },{\n            title : 'Sample Tracking',\n            items : [ {\n                title   : 'Sequencers and external services',\n                url     : 'external_service/browse_external_services'\n            },{\n                title   : 'Request types',\n                url     : 'request_type/browse_request_types'\n            },{\n                title   : 'Sequencing requests',\n                url     : 'requests_admin/browse_requests'\n            },{\n                title   : 'Find samples',\n                url     : 'requests_common/find_samples?cntrller=requests_admin'\n            } ]\n        }]);\n        this.setElement( this._template() );\n    },\n\n    render : function() {\n        var self = this;\n        this.$el.empty();\n        this.categories.each( function( category ) {\n            var $section = $( self._templateSection( category.attributes ) );\n            var $entries = $section.find( '.ui-side-section-body' );\n            _.each( category.get( 'items' ), function( item ) {\n                if ( item.enabled === undefined || item.enabled ) {\n                    var $link = $( '<a/>' ).attr( { href : self.root + item.url } ).text( _l( item.title ) );\n                    if ( item.target == '__use_router__' ) {\n                        $link.on( 'click', function( e ) { e.preventDefault(); self.page.router.push( item.url ); } );\n                    } else {\n                        $link.attr( 'target', 'galaxy_main' );\n                    }\n                    $entries.append( $( '<div/>' ).addClass( 'ui-side-section-body-title' ).append( $link ) );\n                }\n            });\n            self.$el.append( $section );\n        });\n        this.page.$( '#galaxy_main' ).prop( 'src', this.root + 'admin/center?message=' + this.message + '&status=' + this.status );\n    },\n\n    _templateSection : function( options ) {\n        return [\n            '<div>',\n                '<div class=\"ui-side-section-title\">' + _l( options.title ) + '</div>',\n                '<div class=\"ui-side-section-body\"/>',\n            '</div>'\n        ].join('');\n    },\n\n    _template : function() {\n        return '<div class=\"ui-side-panel\"/>';\n    },\n\n    toString : function() { return 'adminPanel' }\n});\n\nmodule.exports = AdminPanel;\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/panels/admin-panel.js","/** Generic form view */\ndefine( [ 'mvc/form/form-view', 'mvc/ui/ui-misc' ], function( Form, Ui ) {\n\n    var View = Backbone.View.extend({\n\n        initialize: function( options ) {\n            this.model = new Backbone.Model( options );\n            this.url = this.model.get( 'url' );\n            this.redirect = this.model.get( 'redirect' );\n            this.setElement( '<div/>' );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            $.ajax({\n                url     : Galaxy.root + this.url,\n                type    : 'GET'\n            }).done( function( response ) {\n                var options = $.extend( {}, self.model.attributes, response );\n                var form = new Form({\n                    title  : options.title,\n                    message: options.message,\n                    status : options.status || 'warning',\n                    icon   : options.icon,\n                    inputs : options.inputs,\n                    buttons: {\n                        'submit': new Ui.Button({\n                            tooltip  : options.submit_tooltip,\n                            title    : options.submit_title || 'Save',\n                            icon     : options.submit_icon || 'fa-save',\n                            cls      : 'btn btn-primary ui-clear-float',\n                            onclick  : function() { self._submit( form ) }\n                        })\n                    }\n                });\n                self.$el.empty().append( form.$el );\n            }).fail( function( response ) {\n                self.$el.empty().append( new Ui.Message({\n                    message     : 'Failed to load resource ' + self.url + '.',\n                    status      : 'danger',\n                    persistent  : true\n                }).$el );\n            });\n        },\n\n        _submit: function( form ) {\n            var self = this;\n            $.ajax( {\n                url         : Galaxy.root + self.url,\n                data        : JSON.stringify( form.data.create() ),\n                type        : 'PUT',\n                contentType : 'application/json'\n            }).done( function( response ) {\n                var success_message = { message: response.message, status: 'success', persistent: false };\n                if ( self.redirect ) {\n                    window.location = Galaxy.root + self.redirect + '?' + $.param( success_message );\n                } else {\n                    form.data.matchModel( response, function ( input, input_id ) {\n                        form.field_list[ input_id ].value( input.value );\n                    });\n                    self._showMessage( form, success_message );\n                }\n            }).fail( function( response ) {\n                self._showMessage( form, { message: response.responseJSON.err_msg, status: 'danger', persistent: false } );\n            });\n        },\n\n        _showMessage: function( form, options ) {\n            var $panel = form.$el.parents().filter(function() {\n                return [ 'auto', 'scroll' ].indexOf( $( this ).css( 'overflow' ) ) != -1;\n            }).first();\n            $panel.animate( { scrollTop : 0 }, 500 );\n            form.message.update( options );\n        }\n    });\n\n    return {\n        View  : View\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-wrapper.js","/**\n    This is the main class of the form plugin. It is referenced as 'app' in lower level modules.\n*/\ndefine( [ 'utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc', 'mvc/form/form-section', 'mvc/form/form-data' ],\nfunction( Utils, Portlet, Ui, FormSection, FormData ) {\n    return Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = new Backbone.Model({\n                initial_errors  : false,\n                cls             : 'ui-portlet-limited',\n                icon            : null,\n                always_refresh  : true,\n                status          : 'warning',\n                onchange        : function(){}\n            }).set( options );\n            this.setElement( '<div/>' );\n            this.render();\n        },\n\n        /** Update available options */\n        update: function( new_model ){\n            var self = this;\n            this.data.matchModel( new_model, function( node, input_id ) {\n                var input = self.input_list[ input_id ];\n                if ( input && input.options ) {\n                    if ( !_.isEqual( input.options, node.options ) ) {\n                        input.options = node.options;\n                        var field = self.field_list[ input_id ];\n                        if ( field.update ) {\n                            var new_options = [];\n                            if ( ( [ 'data', 'data_collection', 'drill_down' ] ).indexOf( input.type ) != -1 ) {\n                                new_options = input.options;\n                            } else {\n                                for ( var i in node.options ) {\n                                    var opt = node.options[ i ];\n                                    if ( opt.length > 2 ) {\n                                        new_options.push( { label: opt[ 0 ], value: opt[ 1 ] } );\n                                    }\n                                }\n                            }\n                            field.update( new_options );\n                            field.trigger( 'change' );\n                            Galaxy.emit.debug( 'form-view::update()', 'Updating options for ' + input_id );\n                        }\n                    }\n                }\n            });\n        },\n\n        /** Set form into wait mode */\n        wait: function( active ) {\n            for ( var i in this.input_list ) {\n                var field = this.field_list[ i ];\n                var input = this.input_list[ i ];\n                if ( input.is_dynamic && field.wait && field.unwait ) {\n                    field[ active ? 'wait' : 'unwait' ]();\n                }\n            }\n        },\n\n        /** Highlight and scroll to input element (currently only used for error notifications) */\n        highlight: function ( input_id, message, silent ) {\n            var input_element = this.element_list[ input_id ];\n            if ( input_element ) {\n                input_element.error( message || 'Please verify this parameter.' );\n                this.portlet.expand();\n                this.trigger( 'expand', input_id );\n                if ( !silent ) {\n                    var $panel = this.$el.parents().filter(function() {\n                        return [ 'auto', 'scroll' ].indexOf( $( this ).css( 'overflow' ) ) != -1;\n                    }).first();\n                    $panel.animate( { scrollTop : $panel.scrollTop() + input_element.$el.offset().top - 120 }, 500 );\n                }\n            }\n        },\n\n        /** Highlights errors */\n        errors: function( options ) {\n            this.trigger( 'reset' );\n            if ( options && options.errors ) {\n                var error_messages = this.data.matchResponse( options.errors );\n                for ( var input_id in this.element_list ) {\n                    var input = this.element_list[ input_id ];\n                    if ( error_messages[ input_id ] ) {\n                        this.highlight( input_id, error_messages[ input_id ], true );\n                    }\n                }\n            }\n        },\n\n        /** Render tool form */\n        render: function() {\n            var self = this;\n            this.off('change');\n            this.off('reset');\n            // contains the dom field elements as created by the parameter factory i.e. form-parameters\n            this.field_list = {};\n            // contains input definitions/dictionaries as provided by the parameters to_dict() function through the api\n            this.input_list = {};\n            // contains the dom elements of each input element i.e. form-input which wraps the actual input field\n            this.element_list = {};\n            // converts the form into a json data structure\n            this.data = new FormData.Manager( this );\n            this._renderForm();\n            this.data.create();\n            this.model.get( 'initial_errors' ) && this.errors( this.model.attributes );\n            // add listener which triggers on checksum change, and reset the form input wrappers\n            var current_check = this.data.checksum();\n            this.on( 'change', function( input_id ) {\n                var input = self.input_list[ input_id ];\n                if ( !input || input.refresh_on_change || self.model.get( 'always_refresh' ) ) {\n                    var new_check = self.data.checksum();\n                    if ( new_check != current_check ) {\n                        current_check = new_check;\n                        self.model.get( 'onchange' )();\n                    }\n                }\n            });\n            this.on('reset', function() {\n                _.each( self.element_list, function( input_element ) { input_element.reset() } );\n            });\n            return this;\n        },\n\n        /** Renders/appends dom elements of the form */\n        _renderForm: function() {\n            $( '.tooltip' ).remove();\n            var options = this.model.attributes;\n            this.message = new Ui.UnescapedMessage();\n            this.section = new FormSection.View( this, { inputs: options.inputs } );\n            this.portlet = new Portlet.View({\n                icon            : options.icon,\n                title           : options.title,\n                cls             : options.cls,\n                operations      : options.operations,\n                buttons         : options.buttons,\n                collapsible     : options.collapsible,\n                collapsed       : options.collapsed,\n                onchange_title  : options.onchange_title\n            });\n            this.portlet.append( this.message.$el );\n            this.portlet.append( this.section.$el );\n            this.$el.empty();\n            options.inputs && this.$el.append( this.portlet.$el );\n            options.message && this.message.update( { persistent: true, status: options.status, message: options.message } );\n            Galaxy.emit.debug( 'form-view::initialize()', 'Completed' );\n        }\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-view.js","define([ 'utils/utils', 'mvc/ui/ui-misc' ], function( Utils, Ui ) {\nvar View = Backbone.View.extend({\n    visible     : false,\n    initialize  : function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model( {\n            id                  : Utils.uid(),\n            cls                 : 'ui-portlet',\n            title               : '',\n            icon                : '',\n            buttons             : null,\n            body                : null,\n            scrollable          : true,\n            nopadding           : false,\n            operations          : null,\n            collapsible         : false,\n            collapsible_button  : false,\n            collapsed           : false,\n            onchange_title      : null\n        } ).set( options );\n        this.setElement( this._template() );\n\n        // link all dom elements\n        this.$body          = this.$( '.portlet-body' );\n        this.$title_text    = this.$( '.portlet-title-text' );\n        this.$title_icon    = this.$( '.portlet-title-icon' );\n        this.$header        = this.$( '.portlet-header' );\n        this.$content       = this.$( '.portlet-content' );\n        this.$backdrop      = this.$( '.portlet-backdrop' );\n        this.$buttons       = this.$( '.portlet-buttons' );\n        this.$operations    = this.$( '.portlet-operations' );\n\n        // add body to component list\n        this.model.get( 'body' ) && this.append( this.model.get( 'body' ) );\n\n        // add icon for collapsible option\n        this.collapsible_button = new Ui.ButtonIcon({\n            icon    : 'fa-eye',\n            tooltip : 'Collapse/Expand',\n            cls     : 'ui-button-icon-plain',\n            onclick : function() { self[ self.collapsed ? 'expand' : 'collapse' ]() }\n        });\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.$el.removeClass().addClass( options.cls ).attr( 'id', options.id );\n        this.$header[ options.title ? 'show' : 'hide' ]();\n        this.$title_text.html( options.title );\n        _.each( [ this.$content, this.$body ], function( $el ) {\n            $el[ options.nopadding ? 'addClass' : 'removeClass' ]( 'no-padding' );\n        });\n\n        // render title icon\n        if ( options.icon ) {\n            this.$title_icon.removeClass().addClass( 'portlet-title-icon fa' ).addClass( options.icon ).show();\n        } else {\n            this.$title_icon.hide();\n        }\n\n        // make portlet collapsible\n        this.$title_text[ options.collapsible ? 'addClass' : 'removeClass' ]( 'no-highlight collapsible' ).off();\n        if ( options.collapsible ) {\n            this.$title_text.on( 'click', function() { self[ self.collapsed ? 'expand' : 'collapse' ]() } );\n            options.collapsed ? this.collapse() : this.expand();\n        }\n\n        // allow title editing\n        this.$title_text.prop( 'disabled', !options.onchange_title );\n        options.onchange_title && this.$title_text.make_text_editable({\n            on_finish: function( new_title ) {\n                options.onchange_title( new_title );\n            }\n        });\n\n        // render buttons\n        if ( options.buttons ) {\n            this.$buttons.empty().show();\n            $.each( this.model.get( 'buttons' ), function( name, item ) {\n                item.$el.prop( 'id', name );\n                self.$buttons.append( item.$el );\n            });\n        } else {\n            this.$buttons.hide();\n        }\n\n        // render operations\n        this.$operations.empty;\n        if ( options.collapsible_button ) {\n            this.$operations.append( this.collapsible_button.$el );\n        }\n        if ( options.operations ) {\n            $.each( options.operations, function( name, item ) {\n                item.$el.prop( 'id', name );\n                self.$operations.append( item.$el );\n            });\n        }\n        return this;\n    },\n\n    /** Append new doms to body */\n    append: function( $el ) {\n        this.$body.append( $el );\n    },\n\n    /** Remove all content */\n    empty: function() {\n        this.$body.empty();\n    },\n\n    /** Return header element */\n    header: function() {\n        return this.$header;\n    },\n\n    /** Return body element */\n    body: function() {\n        return this.$body;\n    },\n\n    /** Show portlet */\n    show: function(){\n        this.visible = true;\n        this.$el.fadeIn( 'fast' );\n    },\n\n    /** Hide portlet */\n    hide: function(){\n        this.visible = false;\n        this.$el.hide();\n    },\n\n    /** Enable a particular button */\n    enableButton: function( id ) {\n        this.$buttons.find( '#' + id ).prop( 'disabled', false );\n    },\n\n    /** Disable a particular button */\n    disableButton: function( id ) {\n        this.$buttons.find( '#' + id ).prop( 'disabled', true );\n    },\n\n    /** Hide a particular operation */\n    hideOperation: function( id ) {\n        this.$operations.find( '#' + id ).hide();\n    },\n\n    /** Show a particular operation */\n    showOperation: function( id ) {\n        this.$operations.find( '#' + id ).show();\n    },\n\n    /** Replaces the event callback of an existing operation */\n    setOperation: function( id, callback ) {\n        this.$operations.find( '#' + id ).off( 'click' ).on( 'click', callback );\n    },\n\n    /** Change title */\n    title: function( new_title ) {\n        new_title && this.$title_text.html( new_title );\n        return this.$title_text.html();\n    },\n\n    /** Collapse portlet */\n    collapse: function() {\n        this.collapsed = true;\n        this.$content.height( '0%' );\n        this.$body.hide();\n        this.collapsible_button.setIcon( 'fa-eye-slash' );\n    },\n\n    /** Expand portlet */\n    expand: function() {\n        this.collapsed = false;\n        this.$content.height( '100%' );\n        this.$body.fadeIn( 'fast' );\n        this.collapsible_button.setIcon( 'fa-eye' );\n    },\n\n    /** Disable content access */\n    disable: function() {\n        this.$backdrop.show();\n    },\n\n    /** Enable content access */\n    enable: function() {\n        this.$backdrop.hide();\n    },\n\n    _template: function() {\n        return $( '<div/>' ).append( $( '<div/>' ).addClass( 'portlet-header' )\n                                .append( $( '<div/>' ).addClass( 'portlet-operations' ) )\n                                .append( $( '<div/>' ).addClass( 'portlet-title' )\n                                    .append( $( '<i/>' ).addClass( 'portlet-title-icon' ) )\n                                    .append( $( '<span/>' ).addClass( 'portlet-title-text' ) ) ) )\n                            .append( $( '<div/>' ).addClass( 'portlet-content' )\n                                .append( $( '<div/>' ).addClass( 'portlet-body' ) )\n                                .append( $( '<div/>' ).addClass( 'portlet-buttons' ) ) )\n                            .append( $( '<div/>' ).addClass( 'portlet-backdrop' ) );\n    }\n});\nreturn {\n    View : View\n}\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-portlet.js","/**\n *  This class contains backbone wrappers for basic ui elements such as Images, Labels, Buttons, Input fields etc.\n */\ndefine(['utils/utils',\n    'mvc/ui/ui-select-default',\n    'mvc/ui/ui-slider',\n    'mvc/ui/ui-options',\n    'mvc/ui/ui-drilldown',\n    'mvc/ui/ui-buttons',\n    'mvc/ui/ui-modal'],\n    function( Utils, Select, Slider, Options, Drilldown, Buttons, Modal ) {\n\n    /** Label wrapper */\n    var Label = Backbone.View.extend({\n        tagName: 'label',\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.tagName = options.tagName || this.tagName;\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        title: function( new_title ) {\n            this.model.set( 'title', new_title );\n        },\n        value: function() {\n            return this.model.get( 'title' );\n        },\n        render: function() {\n            this.$el.removeClass()\n                    .addClass( 'ui-label' )\n                    .addClass( this.model.get( 'cls' ) )\n                    .html( this.model.get( 'title' ) );\n            return this;\n        }\n    });\n\n    /** Displays messages used e.g. in the tool form */\n    var Message = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                message     : null,\n                status      : 'info',\n                cls         : '',\n                persistent  : false,\n                fade        : true\n            }).set( options );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        update: function( options ) {\n            this.model.set( options );\n        },\n        render: function() {\n            this.$el.removeClass().addClass( 'ui-message' ).addClass( this.model.get( 'cls' ) );\n            var status = this.model.get( 'status' );\n            if ( this.model.get( 'large' ) ) {\n                this.$el.addClass((( status == 'success' && 'done' ) ||\n                                   ( status == 'danger' && 'error' ) ||\n                                     status ) + 'messagelarge' );\n            } else {\n                this.$el.addClass( 'alert' ).addClass( 'alert-' + status );\n            }\n            if ( this.model.get( 'message' ) ) {\n                this.$el.html( this.messageForDisplay() );\n                this.$el[ this.model.get( 'fade' ) ? 'fadeIn' : 'show' ]();\n                this.timeout && window.clearTimeout( this.timeout );\n                if ( !this.model.get( 'persistent' ) ) {\n                    var self = this;\n                    this.timeout = window.setTimeout( function() {\n                        self.model.set( 'message', '' );\n                    }, 3000 );\n                }\n            } else {\n                this.$el.fadeOut();\n            }\n            return this;\n        },\n        messageForDisplay: function() {\n            return _.escape( this.model.get( 'message' ) );\n        }\n    });\n\n    var UnescapedMessage = Message.extend({\n        messageForDisplay: function() {\n            return this.model.get( 'message' );\n        }\n    });\n\n    /** Renders an input element used e.g. in the tool form */\n    var Input = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                type            : 'text',\n                placeholder     : '',\n                disabled        : false,\n                readonly        : false,\n                visible         : true,\n                cls             : '',\n                area            : false,\n                color           : null,\n                style           : null\n            }).set( options );\n            this.tagName = this.model.get( 'area' ) ? 'textarea' : 'input';\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        events: {\n            'input': '_onchange'\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', typeof new_val === 'string' ? new_val : '' );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            var self = this;\n            this.$el.removeClass()\n                    .addClass( 'ui-' + this.tagName )\n                    .addClass( this.model.get( 'cls' ) )\n                    .addClass( this.model.get( 'style' ) )\n                    .attr( 'id', this.model.id )\n                    .attr( 'type', this.model.get( 'type' ) )\n                    .attr( 'placeholder', this.model.get( 'placeholder' ) )\n                    .css( 'color', this.model.get( 'color' ) || '' )\n                    .css( 'border-color', this.model.get( 'color' ) || '' );\n            var datalist = this.model.get( 'datalist' );\n            if ( $.isArray( datalist ) && datalist.length > 0 ) {\n                this.$el.autocomplete( { source : function( request, response ) { response( self.model.get( 'datalist' ) ) },\n                                         change : function() { self._onchange() } } );\n            }\n            if ( this.model.get( 'value' ) !== this.$el.val() ) {\n                this.$el.val( this.model.get( 'value' ) );\n            }\n            _.each( [ 'readonly', 'disabled' ], function( attr_name ) {\n                self.model.get( attr_name ) ? self.$el.attr( attr_name, true ) : self.$el.removeAttr( attr_name );\n            });\n            this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n            return this;\n        },\n        _onchange: function() {\n            this.value( this.$el.val() );\n            this.model.get( 'onchange' ) && this.model.get( 'onchange' )( this.model.get( 'value' ) );\n        }\n    });\n\n    /** Creates a hidden element input field used e.g. in the tool form */\n    var Hidden = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$hidden = $( '<div/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.$hidden.val( this.model.get( 'value' ) );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            return this;\n        }\n    });\n\n    /** Creates a upload element input field */\n    var Upload = Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$file = $( '<input/>' ).attr( 'type', 'file' ).addClass( 'ui-margin-bottom' ) )\n                                           .append( this.$text = $( '<textarea/>' ).addClass( 'ui-textarea' ).attr( 'disabled', true ) )\n                                           .append( this.$wait = $( '<i/>' ).addClass( 'fa fa-spinner fa-spin' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.$file.on( 'change', function( e ) { self._readFile( e ) } );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            this.model.get( 'value' ) ? this.$text.text( this.model.get( 'value' ) ).show() : this.$text.hide();\n            this.model.get( 'wait' ) ? this.$wait.show() : this.$wait.hide();\n            return this;\n        },\n        _readFile: function( e ) {\n            var self = this;\n            var file = e.target.files && e.target.files[ 0 ];\n            if ( file ) {\n                var reader = new FileReader();\n                reader.onload = function() {\n                    self.model.set( { wait: false, value: this.result } );\n                }\n                this.model.set( { wait: true, value: null } );\n                reader.readAsText( file );\n            }\n        }\n    });\n\n    return {\n        Button           : Buttons.ButtonDefault,\n        ButtonIcon       : Buttons.ButtonIcon,\n        ButtonCheck      : Buttons.ButtonCheck,\n        ButtonMenu       : Buttons.ButtonMenu,\n        ButtonLink       : Buttons.ButtonLink,\n        Input            : Input,\n        Label            : Label,\n        Message          : Message,\n        UnescapedMessage : UnescapedMessage,\n        Upload           : Upload,\n        Modal            : Modal,\n        RadioButton      : Options.RadioButton,\n        Checkbox         : Options.Checkbox,\n        Radio            : Options.Radio,\n        Select           : Select,\n        Hidden           : Hidden,\n        Slider           : Slider,\n        Drilldown        : Drilldown\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-misc.js","/**\n *  This class creates/wraps a default html select field as backbone class.\n */\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar View = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.data  = [];\n        this.data2 = [];\n        this.model = options && options.model || new Backbone.Model({\n            id          : Utils.uid(),\n            cls         : 'ui-select',\n            error_text  : 'No options available',\n            empty_text  : 'Nothing selected',\n            visible     : true,\n            wait        : false,\n            multiple    : false,\n            searchable  : true,\n            optional    : false,\n            disabled    : false,\n            onchange    : function(){},\n            value       : null,\n            individual  : false,\n            pagesize    : 20\n        }).set( options );\n        this.on( 'change', function() { self.model.get( 'onchange' ) && self.model.get( 'onchange' )( self.value() ) } );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:disabled', this._changeDisabled, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:multiple change:searchable change:cls change:id', this.render, this );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.model.get( 'searchable' ) ? this._renderSearchable() : this._renderClassic();\n        this.$el.addClass( this.model.get( 'cls' ) )\n                .attr( 'id', this.model.get( 'id' ) );\n        this.$select.empty().addClass( 'select' )\n                    .attr( 'id', this.model.get( 'id' ) + '_select' )\n                    .prop( 'multiple', this.model.get( 'multiple' ) )\n                    .on( 'change', function() {\n                        self.value( self._getValue() );\n                        self.trigger( 'change' );\n                    });\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n        this._changeDisabled();\n    },\n\n    /** Renders the classic selection field */\n    _renderClassic: function() {\n        var self = this;\n        this.$el.addClass( this.model.get( 'multiple' ) ? 'ui-select-multiple' : 'ui-select' )\n                .append( this.$select      = $( '<select/>' ) )\n                .append( this.$dropdown    = $( '<div/>' ) )\n                .append( this.$resize      = $( '<div/>' )\n                .append( this.$resize_icon = $( '<i/>' ) ) );\n        if ( this.model.get( 'multiple' ) ) {\n            this.$dropdown.hide();\n            this.$resize_icon.addClass( 'fa fa-angle-double-right fa-rotate-45' ).show();\n            this.$resize.removeClass()\n                        .addClass( 'icon-resize' )\n                        .show()\n                        .off( 'mousedown' ).on( 'mousedown', function( event ) {\n                            var currentY = event.pageY;\n                            var currentHeight = self.$select.height();\n                            self.minHeight = self.minHeight || currentHeight;\n                            $( '#dd-helper' ).show().on( 'mousemove', function( event ) {\n                                self.$select.height( Math.max( currentHeight + ( event.pageY - currentY ), self.minHeight ) );\n                            }).on( 'mouseup mouseleave', function() {\n                                $( '#dd-helper' ).hide().off();\n                            });\n                        });\n        } else {\n            this.$dropdown.show();\n            this.$resize.hide();\n            this.$resize_icon.hide();\n        }\n    },\n\n    /** Renders the default select2 field */\n    _renderSearchable: function() {\n        var self = this;\n        this.$el.append( this.$select   = $( '<div/>' ) )\n                .append( this.$dropdown = $( '<div/>' ) );\n        this.$dropdown.hide();\n        if ( !this.model.get( 'multiple' ) ) {\n            this.$dropdown.show().on( 'click', function() {\n                self.$select.select2 && self.$select.select2( 'open' );\n            });\n        }\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) && !this.model.get( 'individual' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    var new_value = [];\n                    self.all_button.value() !== 0 && _.each( self.model.get( 'data' ), function( option ) {\n                        new_value.push( option.value );\n                    });\n                    self.value( new_value );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$el.prepend( this.all_button.$el );\n        }\n    },\n\n    /** Matches a search term with a given text */\n    _match: function( term, text ) {\n        return !term || term == '' || String( text ).toUpperCase().indexOf( term.toUpperCase() ) >= 0\n    },\n\n    /** Updates the selection options */\n    _changeData: function() {\n        var self = this;\n        this.data = [];\n        if ( !this.model.get( 'multiple' ) && this.model.get( 'optional' ) ) {\n            this.data.push( { value: '__null__', label: self.model.get( 'empty_text' ) } );\n        }\n        _.each( this.model.get( 'data' ), function( option ) {\n            self.data.push( option );\n        });\n        if ( this.length() == 0 ) {\n            this.data.push( { value: '__null__', label: this.model.get( 'error_text' ) } );\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            this.data2 = [];\n            _.each( this.data, function( option, index ) {\n                self.data2.push( { order: index, id: option.value, text: option.label, tags: option.tags } );\n            });\n            this.$select.data( 'select2' ) && this.$select.select2( 'destroy' );\n            this.matched_tags = {};\n            this.$select.select2({\n                data            : self.data2,\n                closeOnSelect   : !this.model.get( 'multiple' ),\n                multiple        : this.model.get( 'multiple' ),\n                query           : function( q ) {\n                    self.matched_tags = {};\n                    var pagesize = self.model.get( 'pagesize' );\n                    var results = _.filter( self.data2, function ( e ) {\n                        var found = false;\n                        _.each( e.tags, function( tag ) {\n                            if ( self._match( q.term, tag ) ) {\n                                found = self.matched_tags[ tag ] = true;\n                            }\n                        });\n                        return found || self._match( q.term, e.text );\n                    });\n                    q.callback({\n                        results: results.slice( ( q.page - 1 ) * pagesize, q.page * pagesize ),\n                        more   : results.length >= q.page * pagesize\n                    });\n                },\n                formatResult    : function( result ) {\n                    return _.escape( result.text ) +\n                        '<div class=\"ui-tags\">' +\n                            _.reduce( result.tags, function( memo, tag ) {\n                                if ( self.matched_tags[ tag ] ) {\n                                    return memo + '&nbsp;' +\n                                        '<div class=\"label label-info\">' +\n                                            _.escape( tag ) +\n                                        '</div>'\n                                }\n                                return memo;\n                            }, '' ) +\n                        '</div>';\n                }\n            });\n            this.$( '.select2-container .select2-search input' ).off( 'blur' );\n        } else {\n            this.$select.find( 'option' ).remove();\n            _.each( this.data, function( option ) {\n                self.$select.append( $( '<option/>' ).attr( 'value', option.value ).html( _.escape( option.label ) ) );\n            });\n        }\n        this.model.set( 'disabled', this.length() == 0 );\n        this._changeValue();\n    },\n\n    /** Handles field enabling/disabling, usually used when no options are available */\n    _changeDisabled: function() {\n        if ( this.model.get( 'searchable' ) ) {\n            this.$select.select2( this.model.get( 'disabled' ) ? 'disable' : 'enable' );\n        } else {\n            this.$select.prop( 'disabled', this.model.get( 'disabled' ) );\n        }\n    },\n\n    /** Searchable fields may display a spinner e.g. while waiting for a server response */\n    _changeWait: function() {\n        this.$dropdown.removeClass()\n                      .addClass( 'icon-dropdown fa' )\n                      .addClass( this.model.get( 'wait' ) ? 'fa-spinner fa-spin' : 'fa-caret-down' );\n    },\n\n    /** Handles field visibility */\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n        this.$select[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    /** Synchronizes the model value with the actually selected field value */\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this.model.get( 'multiple' ) ) {\n            if ( this.all_button ) {\n                var value = this._getValue();\n                this.all_button.value( $.isArray( value ) ? value.length : 0, this.length() );\n            }\n        } else if ( this._getValue() === null && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return the first select option */\n    first: function() {\n        return this.data.length > 0 ? this.data[ 0 ].value : null;\n    },\n\n    /** Check if a value is an existing option */\n    exists: function( value ) {\n        return _.findWhere( this.data, { value: value } );\n    },\n\n    /** Return the label/text of the current selection */\n    text: function () {\n        var v = this._getValue();\n        var d = this.exists( $.isArray( v ) ? v[ 0 ] : v );\n        return d ? d.label : '';\n    },\n\n    /** Show the select field */\n    show: function() {\n        this.model.set( 'visible', true );\n    },\n\n    /** Hide the select field */\n    hide: function() {\n        this.model.set( 'visible', false );\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns true if the field is disabled */\n    disabled: function() {\n        return this.model.get( 'disabled' );\n    },\n\n    /** Enable the select field */\n    enable: function() {\n        this.model.set( 'disabled', false );\n    },\n\n    /** Disable the select field */\n    disable: function() {\n        this.model.set( 'disabled', true );\n    },\n\n    /** Update all available options at once */\n    add: function( options, sorter ) {\n        _.each( this.model.get( 'data' ), function( v ) {\n            v.keep && !_.findWhere( options, { value: v.value } ) && options.push( v );\n        });\n        sorter && options && options.sort( sorter );\n        this.model.set( 'data', options );\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    /** Set the custom onchange callback function */\n    setOnChange: function( callback ) {\n        this.model.set( 'onchange', callback );\n    },\n\n    /** Number of available options */\n    length: function() {\n        return $.isArray( this.model.get( 'data' ) ) ? this.model.get( 'data' ).length : 0;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if( new_value === null || new_value === undefined ) {\n            new_value = '__null__';\n        }\n        if ( this.model.get( 'multiple' ) ) {\n            new_value = $.isArray( new_value ) ? new_value : [ new_value ];\n        } else if ( $.isArray( new_value ) ) {\n            if ( new_value.length > 0 ) {\n                new_value = new_value[ 0 ];\n            } else {\n                new_value = '__null__';\n            }\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            if ( $.isArray( new_value ) ) {\n                var val = [];\n                _.each( new_value, function( v ) {\n                    var d = _.findWhere( self.data2, { id: v } );\n                    d && val.push( d );\n                });\n                new_value = val;\n            } else {\n                var d = _.findWhere( this.data2, { id: new_value } );\n                new_value = d;\n            }\n            this.$select.select2( 'data', new_value );\n        } else {\n            this.$select.val( new_value );\n        }\n    },\n\n    /** Get value from dom */\n    _getValue: function() {\n        var val = null;\n        if ( this.model.get( 'searchable' ) ) {\n            var selected = this.$select.select2( 'data' );\n            if ( selected ) {\n                if ( $.isArray( selected ) ) {\n                    val = [];\n                    selected.sort( function( a, b ) { return a.order - b.order } );\n                    _.each( selected, function( v ) { val.push( v.id ) } );\n                } else {\n                    val = selected.id;\n                }\n            }\n        } else {\n            val = this.$select.val();\n        }\n        return Utils.isEmpty( val ) ? null : val;\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-default.js","/** This module contains all button views. */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    /** This renders the default button which is used e.g. at the bottom of the upload modal. */\n    var ButtonDefault = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                icon        : '',\n                cls         : 'btn btn-default',\n                wait        : false,\n                wait_text   : 'Sending...',\n                wait_cls    : 'btn btn-info',\n                disabled    : false,\n                percentage  : -1\n            }).set( options );\n            this.setElement( $( '<button/>' ).attr( 'type', 'button' )\n                                             .append( this.$icon        = $( '<i/>' ) )\n                                             .append( this.$title       = $( '<span/>' ) )\n                                             .append( this.$progress    = $( '<div/>' ).append( this.$progress_bar = $( '<div/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'ui-button-default' )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'id', options.id )\n                    .attr( 'disabled', options.disabled )\n                    .off( 'click' ).on( 'click' , function() {\n                        $( '.tooltip' ).hide();\n                        options.onclick && !self.disabled && options.onclick();\n                    })\n                    .tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$progress.addClass( 'progress' ).css( 'display', options.percentage !== -1 ? 'block' : 'none' );\n            this.$progress_bar.addClass( 'progress-bar' ).css( { width : options.percentage + '%' } );\n            this.$icon.removeClass().addClass( 'icon fa' );\n            this.$title.removeClass().addClass( 'title' );\n            if ( options.wait ) {\n                this.$el.addClass( options.wait_cls ).prop( 'disabled', true );\n                this.$icon.addClass( 'fa-spinner fa-spin ui-margin-right' );\n                this.$title.html( options.wait_text );\n            } else {\n                this.$el.addClass( options.cls );\n                this.$icon.addClass( options.icon );\n                this.$title.html( options.title );\n                options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            }\n        },\n\n        /** Show button */\n        show: function() {\n            this.$el.show();\n        },\n\n        /** Hide button */\n        hide: function() {\n            this.$el.hide();\n        },\n\n        /** Disable button */\n        disable: function() {\n            this.model.set( 'disabled', true );\n        },\n\n        /** Enable button */\n        enable: function() {\n            this.model.set( 'disabled', false );\n        },\n\n        /** Show spinner to indicate that the button is not ready to be clicked */\n        wait: function() {\n            this.model.set( 'wait', true );\n        },\n\n        /** Hide spinner to indicate that the button is ready to be clicked */\n        unwait: function() {\n            this.model.set( 'wait', false );\n        },\n\n        /** Change icon */\n        setIcon: function( icon ) {\n            this.model.set( 'icon', icon );\n        }\n    });\n\n    /** This button allows the right-click/open-in-new-tab feature, its used e.g. for panel buttons. */\n    var ButtonLink = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                icon        : '',\n                cls         : ''\n            }).set( options );\n            this.setElement( $( '<a/>' ).append( this.$icon  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .attr( { id         : options.id,\n                             href       : options.href || 'javascript:void(0)',\n                             title      : options.title,\n                             target     : options.target || '_top',\n                             disabled   : options.disabled } )\n                    .tooltip( { placement: 'bottom' } )\n                    .off( 'click' ).on( 'click' , function() {\n                        options.onclick && !options.disabled && options.onclick();\n                    });\n            this.$icon.removeClass().addClass( options.icon );\n        }\n    });\n\n    /** The check button is used in the tool form and allows to distinguish between multiple states e.g. all, partially and nothing selected. */\n    var ButtonCheck = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : 'Select/Unselect all',\n                icons       : [ 'fa-square-o', 'fa-minus-square-o', 'fa-check-square-o' ],\n                value       : 0,\n                onchange    : function(){}\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$icon   = $( '<span/>' ) )\n                                          .append( this.$title  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.addClass( 'ui-button-check' )\n                    .off( 'click' ).on('click', function() {\n                        self.model.set( 'value', ( self.model.get( 'value' ) === 0 && 2 ) || 0 );\n                        options.onclick && options.onclick();\n                    });\n            this.$title.html( options.title );\n            this.$icon.removeClass()\n                      .addClass( 'icon fa ui-margin-right' )\n                      .addClass( options.icons[ options.value ] );\n        },\n\n        /* Sets a new value and/or returns the value.\n        * @param{Integer}   new_val - Set a new value 0=unchecked, 1=partial and 2=checked.\n        * OR:\n        * @param{Integer}   new_val - Number of selected options.\n        * @param{Integer}   total   - Total number of available options.\n        */\n        value: function ( new_val, total ) {\n            if ( new_val !== undefined ) {\n                if ( total && new_val !== 0 ) {\n                    new_val = ( new_val !== total ) && 1 || 2;\n                }\n                this.model.set( 'value', new_val );\n                this.model.get( 'onchange' )( this.model.get( 'value' ) );\n            }\n            return this.model.get( 'value' );\n        }\n    });\n\n    /** This renders a differently styled, more compact button version. */\n    var ButtonIcon = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                icon        : '',\n                cls         : 'ui-button-icon',\n                disabled    : false\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$button = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                               .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render : function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'disabled', options.disabled )\n                    .attr( 'id', options.id )\n                    .off( 'click' ).on( 'click', function() {\n                        $( '.tooltip' ).hide();\n                        !options.disabled && options.onclick && options.onclick();\n                    });\n            this.$button.addClass( 'button' ).tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n        }\n    });\n\n    /** This class creates a button with dropdown menu. */\n    var ButtonMenu = ButtonDefault.extend({\n        $menu: null,\n        initialize: function ( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id              : '',\n                title           : '',\n                pull            : 'right',\n                icon            : null,\n                onclick         : null,\n                cls             : 'ui-button-icon ui-button-menu',\n                tooltip         : '',\n                target          : '',\n                href            : '',\n                onunload        : null,\n                visible         : true,\n                tag             : ''\n            }).set( options );\n            this.collection = new Backbone.Collection();\n            this.setElement( $( '<div/>' ).append( this.$root = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                             .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.listenTo( this.collection, 'change add remove reset', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'dropdown' )\n                    .addClass( options.cls )\n                    .attr( 'id', options.id )\n                    .css( { display : options.visible && this.collection.where( { visible: true } ).length > 0 ? 'block' : 'none' } );\n            this.$root.addClass( 'root button dropdown-toggle' )\n                      .attr( 'data-toggle', 'dropdown' )\n                      .tooltip( { title: options.tooltip, placement: 'bottom' } )\n                      .off( 'click' ).on( 'click', function( e ) {\n                            $( '.tooltip' ).hide();\n                            e.preventDefault();\n                            options.onclick && options.onclick();\n                      } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.removeClass().addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            this.$menu && this.$menu.remove();\n            if ( this.collection.length > 0 ) {\n                this.$menu = $( '<ul/>' ).addClass( 'menu dropdown-menu' )\n                                         .addClass( 'pull-' + self.model.get( 'pull' ) )\n                                         .attr( 'role', 'menu' );\n                this.$el.append( this.$menu );\n            }\n            this.collection.each( function( submodel ) {\n                var suboptions = submodel.attributes;\n                if ( suboptions.visible ) {\n                    var $link = $( '<a/>' ).addClass( 'dropdown-item' )\n                                           .attr( { href : suboptions.href, target : suboptions.target } )\n                                           .append( $( '<i/>' ).addClass( 'fa' )\n                                                               .addClass( suboptions.icon )\n                                                               .css( 'display', suboptions.icon ? 'inline-block' : 'none' ) )\n                                           .append( suboptions.title )\n                                           .on( 'click', function( e ) {\n                                                if ( suboptions.onclick ) {\n                                                    e.preventDefault();\n                                                    suboptions.onclick();\n                                                }\n                                           } );\n                    self.$menu.append( $( '<li/>' ).append( $link ) );\n                    suboptions.divider && self.$menu.append( $( '<li/>' ).addClass( 'divider' ) );\n                }\n            });\n        },\n\n        /** Add a new menu item */\n        addMenu: function ( options ) {\n            this.collection.add( Utils.merge( options, {\n                title       : '',\n                target      : '',\n                href        : '',\n                onclick     : null,\n                divider     : false,\n                visible     : true,\n                icon        : null,\n                cls         : 'button-menu btn-group'\n            }));\n        }\n    });\n\n    return {\n        ButtonDefault   : ButtonDefault,\n        ButtonLink      : ButtonLink,\n        ButtonIcon      : ButtonIcon,\n        ButtonCheck     : ButtonCheck,\n        ButtonMenu      : ButtonMenu\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-buttons.js","define([ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model({\n                id       : Utils.uid(),\n                min      : null,\n                max      : null,\n                step     : null,\n                precise  : false,\n                split    : 10000,\n                value    : null,\n                onchange : function(){}\n            }).set( options );\n\n            // create new element\n            this.setElement( this._template() );\n            this.$el.attr( 'id', this.model.id );\n            this.$text   = this.$( '.ui-form-slider-text' );\n            this.$slider = this.$( '.ui-form-slider-element' );\n\n            // add text field event\n            var pressed = [];\n            this.$text.on( 'change', function () {\n                self.value( $( this ).val() );\n            }).on( 'keyup', function( e ) {\n                pressed[e.which] = false;\n            }).on( 'keydown', function ( e ) {\n                var v = e.which;\n                pressed[ v ] = true;\n                if ( self.model.get( 'is_workflow' ) && pressed[ 16 ] && v == 52 ) {\n                    self.value( '$' );\n                    event.preventDefault();\n                } else if (!( v == 8 || v == 9 || v == 13 || v == 37 || v == 39 || ( v >= 48 && v <= 57 && !pressed[ 16 ] ) || ( v >= 96 && v <= 105 )\n                    || ( ( v == 190 || v == 110 ) && $( this ).val().indexOf( '.' ) == -1 && self.model.get( 'precise' ) )\n                    || ( ( v == 189 || v == 109 ) && $( this ).val().indexOf( '-' ) == -1 )\n                    || self._isParameter( $( this ).val() )\n                    || pressed[ 91 ] || pressed[ 17 ] ) ) {\n                    event.preventDefault();\n                }\n            });\n\n            // build slider, cannot be rebuild in render\n            var opts = this.model.attributes;\n            this.has_slider = opts.max !== null && opts.min !== null && opts.max > opts.min;\n            var step = opts.step;\n            if ( !step ) {\n                if ( opts.precise && this.has_slider ) {\n                    step = ( opts.max - opts.min ) / opts.split;\n                } else {\n                    step = 1.0;\n                }\n            }\n            if ( this.has_slider ) {\n                this.$text.addClass( 'ui-form-slider-left' );\n                this.$slider.slider( { min: opts.min, max: opts.max, step: step } )\n                            .on( 'slide', function ( event, ui ) { self.value( ui.value ) } );\n            } else {\n                this.$slider.hide();\n            }\n\n            // add listeners\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var value = this.model.get( 'value' );\n            this.has_slider && this.$slider.slider( 'value', value );\n            value !== this.$text.val() && this.$text.val( value );\n        },\n\n        /** Set and return the current value */\n        value : function ( new_val ) {\n            var options = this.model.attributes;\n            if ( new_val !== undefined ) {\n                if ( new_val !== null && new_val !== '' && !this._isParameter( new_val ) ) {\n                    isNaN( new_val ) && ( new_val = 0 );\n                    !options.precise && ( new_val = Math.round( new_val ) );\n                    options.max !== null && ( new_val = Math.min( new_val, options.max ) );\n                    options.min !== null && ( new_val = Math.max( new_val, options.min ) );\n                }\n                this.model.set( 'value', new_val );\n                this.model.trigger( 'change' );\n                options.onchange( new_val );\n            }\n            return this.model.get( 'value' );\n        },\n\n        /** Return true if the field contains a workflow parameter i.e. $('name') */\n        _isParameter: function( value ) {\n            return this.model.get( 'is_workflow' ) && String( value ).substring( 0, 1 ) === '$';\n        },\n\n        /** Slider template */\n        _template: function() {\n            return  '<div class=\"ui-form-slider\">' +\n                        '<input class=\"ui-form-slider-text\" type=\"text\"/>' +\n                        '<div class=\"ui-form-slider-element\"/>' +\n                    '</div>';\n        }\n    });\n\n    return {\n        View : View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-slider.js","/** Base class for options based ui elements **/\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar Base = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model({\n            visible     : true,\n            data        : [],\n            id          : Utils.uid(),\n            error_text  : 'No options available.',\n            wait_text   : 'Please wait...',\n            multiple    : false,\n            optional    : false,\n            onchange    : function(){}\n        }).set( options );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.on( 'change', function() { self.model.get( 'onchange' )( self.value() ) } );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.$el.empty()\n                .removeClass()\n                .addClass( 'ui-options' )\n                .append( this.$message   = $( '<div/>' ) )\n                .append( this.$menu      = $( '<div/>' ).addClass( 'ui-options-menu' ) )\n                .append( this.$options   = $( this._template() ) );\n\n        // add select/unselect all button\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    self.$( 'input' ).prop( 'checked', self.all_button.value() !== 0 );\n                    self.value( self._getValue() );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$menu.append( this.all_button.$el );\n        }\n\n        // finalize dom\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    _changeData: function() {\n        var self = this;\n        this.$options.empty();\n        if ( this._templateOptions ) {\n            this.$options.append( this._templateOptions( this.model.get( 'data' ) ) );\n        } else {\n            _.each( this.model.get( 'data' ), function( option ) {\n                self.$options.append( $( self._templateOption( option ) )\n                                        .addClass( 'ui-option' )\n                                        .tooltip( { title: option.tooltip, placement: 'bottom' } ) );\n            });\n        }\n        var self = this;\n        this.$( 'input' ).on( 'change', function() {\n            self.value( self._getValue() );\n            self.trigger( 'change' );\n        });\n        this._changeValue();\n        this._changeWait();\n    },\n\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    _changeWait: function() {\n        if ( this.model.get( 'wait' ) ) {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'wait_text' ), 'info' );\n                this.$options.hide();\n                this.$menu.hide();\n            }\n        } else {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'error_text' ), 'danger' );\n                this.$options.hide();\n                this.$menu.hide();\n            } else {\n                this.$message.hide();\n                this.$options.css( 'display', 'inline-block' );\n                this.$menu.show();\n            }\n        }\n    },\n\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this._getValue() === null && !this.model.get( 'multiple' ) && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n        this.all_button && this.all_button.value( $.isArray( this._getValue() ) ? this._getValue().length : 0, this.length() );\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return first available option */\n    first: function() {\n        var options = this.$( 'input' ).first();\n        return options.length > 0 ? options.val() : null;\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns the number of options */\n    length: function() {\n        return this.$( '.ui-option' ).length;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            if ( new_value !== null ) {\n                var values = $.isArray( new_value ) ? new_value : [ new_value ];\n                _.each( values, function( v ) {\n                    self.$( 'input[value=\"' + v + '\"]' ).first().prop( 'checked', true );\n                });\n            }\n        }\n    },\n\n    /** Return current selection */\n    _getValue: function() {\n        var selected = [];\n        this.$( ':checked' ).each( function() {\n            selected.push( $( this ).val() );\n        });\n        if ( Utils.isEmpty( selected ) ) {\n            return null;\n        }\n        return this.model.get( 'multiple' ) ? selected : selected[ 0 ];\n    },\n\n    /** Show message instead if options */\n    _messageShow: function( text, status ) {\n        this.$message.show()\n                     .removeClass()\n                     .addClass( 'ui-message alert alert-' + status )\n                     .html( text );\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list' );\n    }\n});\n\n/** Iconized **/\nvar BaseIcons = Base.extend({\n    _templateOption: function( pair ) {\n        var id = Utils.uid();\n        return  $( '<div/>' ).addClass( 'ui-option' )\n                    .append( $( '<input/>' ).attr( {\n                        id      : id,\n                        type    : this.model.get( 'type' ),\n                        name    : this.model.id,\n                        value   : pair.value } ) )\n                    .append( $( '<label/>' ).addClass( 'ui-options-label' )\n                                            .attr( 'for', id )\n                                            .html( pair.label ) );\n    }\n});\n\n/** Radio button field **/\nvar Radio = {};\nRadio.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'radio';\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Checkbox options field **/\nvar Checkbox = {};\nCheckbox.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'checkbox';\n        options.multiple = true;\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Radio button options field styled as classic buttons **/\nvar RadioButton = {};\nRadioButton.View = Base.extend({\n    initialize: function( options ) {\n        Base.prototype.initialize.call( this, options );\n    },\n\n    /** Set current value */\n    _setValue: function ( new_value ) {\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            this.$( 'label' ).removeClass( 'active' );\n            this.$( '[value=\"' + new_value + '\"]' ).prop( 'checked', true ).closest( 'label' ).addClass( 'active' );\n        }\n    },\n\n    /** Template for a single option */\n    _templateOption: function( pair ) {\n        var $el =  $( '<label/>' ).addClass( 'btn btn-default' );\n        pair.icon && $el.append( $( '<i/>' ).addClass( 'fa' ).addClass( pair.icon ).addClass( !pair.label && 'no-padding' ) );\n        $el.append( $( '<input/>' ).attr( { type: 'radio', name: this.model.id, value: pair.value } ) );\n        pair.label && $el.append( pair.label );\n        return $el;\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'btn-group ui-radiobutton' ).attr( 'data-toggle', 'buttons' );\n    }\n});\n\nreturn {\n    Base        : Base,\n    BaseIcons   : BaseIcons,\n    Radio       : Radio,\n    RadioButton : RadioButton,\n    Checkbox    : Checkbox\n};\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-options.js","/** This class creates/wraps a drill down element. */\ndefine([ 'utils/utils', 'mvc/ui/ui-options' ], function( Utils, Options ) {\n\nvar View = Options.BaseIcons.extend({\n    initialize: function( options ) {\n        options.type     = options.display || 'checkbox';\n        options.multiple = ( options.type == 'checkbox' );\n        Options.BaseIcons.prototype.initialize.call( this, options );\n    },\n\n    /** Set states for selected values */\n    _setValue: function ( new_value ) {\n        Options.BaseIcons.prototype._setValue.call( this, new_value );\n        if ( new_value !== undefined && new_value !== null && this.header_index ) {\n            var self = this;\n            var values = $.isArray( new_value ) ? new_value : [ new_value ];\n            _.each( values, function( v ) {\n                var list = self.header_index[ v ];\n                _.each( list, function( element ) {\n                    self._setState( element, true );\n                });\n            });\n        }\n    },\n\n    /** Expand/collapse a sub group */\n    _setState: function ( header_id, is_expanded ) {\n        var $button = this.$( '.button-' + header_id );\n        var $subgroup = this.$( '.subgroup-' + header_id );\n        $button.data( 'is_expanded', is_expanded );\n        if ( is_expanded ) {\n            $subgroup.show();\n            $button.removeClass( 'fa-plus-square' ).addClass( 'fa-minus-square' );\n        } else {\n            $subgroup.hide();\n            $button.removeClass( 'fa-minus-square' ).addClass( 'fa-plus-square' );\n        }\n    },\n\n    /** Template to create options tree */\n    _templateOptions: function() {\n        var self = this;\n        this.header_index = {};\n\n        // attach event handler\n        function attach( $el, header_id ) {\n            var $button = $el.find( '.button-' + header_id );\n            $button.on( 'click', function() {\n                self._setState( header_id, !$button.data( 'is_expanded' ) );\n            });\n        }\n\n        // recursive function which iterates through options\n        function iterate ( $tmpl, options, header ) {\n            header = header || [];\n            for (var i in options ) {\n                var level = options[ i ];\n                var has_options = level.options && level.options.length > 0;\n                var new_header = header.slice( 0 );\n                self.header_index[ level.value ] = new_header.slice( 0 );\n                var $group = $( '<div/>' );\n                if ( has_options ) {\n                    var header_id = Utils.uid();\n                    var $button = $( '<span/>' ).addClass( 'button-' + header_id ).addClass( 'ui-drilldown-button fa fa-plus-square' );\n                    var $subgroup = $( '<div/>' ).addClass( 'subgroup-' + header_id ).addClass( 'ui-drilldown-subgroup' );\n                    $group.append( $( '<div/>' )\n                                        .append( $button )\n                                        .append( self._templateOption( { label: level.name, value: level.value } ) ) );\n                    new_header.push( header_id );\n                    iterate ( $subgroup, level.options, new_header );\n                    $group.append( $subgroup );\n                    attach( $group, header_id );\n                } else {\n                    $group.append( self._templateOption( { label: level.name, value: level.value } ) );\n                }\n                $tmpl.append( $group );\n            }\n        }\n\n        // iterate through options and create dom\n        var $tmpl = $( '<div/>' );\n        iterate( $tmpl, this.model.get( 'data' ) );\n        return $tmpl;\n    },\n\n    /** Template for drill down view */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list drilldown-container' ).attr( 'id', this.model.id );\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-drilldown.js","/**\n    This class creates a form section and populates it with input elements. It also handles repeat blocks and conditionals by recursively creating new sub sections.\n*/\ndefine([ 'utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-portlet', 'mvc/form/form-repeat', 'mvc/form/form-input', 'mvc/form/form-parameters' ],\nfunction( Utils, Ui, Portlet, Repeat, InputElement, Parameters ) {\n    var View = Backbone.View.extend({\n        initialize: function( app, options ) {\n            this.app = app;\n            this.inputs = options.inputs;\n            this.parameters = new Parameters();\n            this.setElement( $( '<div/>' ) );\n            this.render();\n        },\n\n        /** Render section view */\n        render: function() {\n            var self = this;\n            this.$el.empty();\n            _.each( this.inputs, function( input ) { self.add( input ) } );\n        },\n\n        /** Add a new input element */\n        add: function( input ) {\n            var input_def = jQuery.extend( true, {}, input );\n            input_def.id = input.id = Utils.uid();\n            this.app.input_list[ input_def.id ] = input_def;\n            switch( input_def.type ) {\n                case 'conditional':\n                    this._addConditional( input_def );\n                    break;\n                case 'repeat':\n                    this._addRepeat( input_def );\n                    break;\n                case 'section':\n                    this._addSection( input_def );\n                    break;\n                default:\n                    this._addRow( input_def );\n            }\n        },\n\n        /** Add a conditional block */\n        _addConditional: function( input_def ) {\n            var self = this;\n            input_def.test_param.id = input_def.id;\n            this.app.model.get( 'sustain_conditionals' ) && ( input_def.test_param.disabled = true );\n            var field = this._addRow( input_def.test_param );\n\n            // set onchange event for test parameter\n            field.model && field.model.set( 'onchange', function( value ) {\n                var selectedCase = self.app.data.matchCase( input_def, value );\n                for ( var i in input_def.cases ) {\n                    var case_def = input_def.cases[ i ];\n                    var section_row = self.$( '#' + input_def.id + '-section-' + i );\n                    var nonhidden = false;\n                    for ( var j in case_def.inputs ) {\n                        if ( !case_def.inputs[ j ].hidden ) {\n                            nonhidden = true;\n                            break;\n                        }\n                    }\n                    if ( i == selectedCase && nonhidden ) {\n                        section_row.fadeIn( 'fast' );\n                    } else {\n                        section_row.hide();\n                    }\n                }\n                self.app.trigger( 'change' );\n            });\n\n            // add conditional sub sections\n            for ( var i in input_def.cases ) {\n                var sub_section = new View( this.app, { inputs: input_def.cases[ i ].inputs } );\n                this._append( sub_section.$el.addClass( 'ui-form-section' ), input_def.id + '-section-' + i );\n            }\n\n            // trigger refresh on conditional input field after all input elements have been created\n            field.trigger( 'change' );\n        },\n\n        /** Add a repeat block */\n        _addRepeat: function( input_def ) {\n            var self = this;\n            var block_index = 0;\n\n            // create repeat block element\n            var repeat = new Repeat.View({\n                title           : input_def.title || 'Repeat',\n                min             : input_def.min,\n                max             : input_def.max,\n                onnew           : function() { create( input_def.inputs ); self.app.trigger( 'change' ); }\n            });\n\n            // helper function to create new repeat blocks\n            function create ( inputs ) {\n                var sub_section_id = input_def.id + '-section-' + ( block_index++ );\n                var sub_section = new View( self.app, { inputs: inputs } );\n                repeat.add( { id      : sub_section_id,\n                              $el     : sub_section.$el,\n                              ondel   : function() { repeat.del( sub_section_id ); self.app.trigger( 'change' ); } } );\n            }\n\n            //\n            // add parsed/minimum number of repeat blocks\n            //\n            var n_cache = _.size( input_def.cache );\n            for ( var i = 0; i < Math.max( Math.max( n_cache, input_def.min || 0 ), input_def.default || 0 ); i++ ) {\n                create( i < n_cache ? input_def.cache[ i ] : input_def.inputs );\n            }\n\n            // hide options\n            this.app.model.get( 'sustain_repeats' ) && repeat.hideOptions();\n\n            // create input field wrapper\n            var input_element = new InputElement( this.app, {\n                label   : input_def.title || input_def.name,\n                help    : input_def.help,\n                field   : repeat\n            });\n            this._append( input_element.$el, input_def.id );\n        },\n\n        /** Add a customized section */\n        _addSection: function( input_def ) {\n            var portlet = new Portlet.View({\n                title               : input_def.title || input_def.name,\n                cls                 : 'ui-portlet-section',\n                collapsible         : true,\n                collapsible_button  : true,\n                collapsed           : !input_def.expanded\n            });\n            portlet.append( new View( this.app, { inputs: input_def.inputs } ).$el );\n            portlet.append( $( '<div/>' ).addClass( 'ui-form-info' ).html( input_def.help ) );\n            this.app.on( 'expand', function( input_id ) { ( portlet.$( '#' + input_id ).length > 0 ) && portlet.expand(); } );\n            this._append( portlet.$el, input_def.id );\n        },\n\n        /** Add a single input field element */\n        _addRow: function( input_def ) {\n            var self = this;\n            var id = input_def.id;\n            input_def.onchange = input_def.onchange || function() { self.app.trigger( 'change', id ) };\n            var field = this.parameters.create( input_def );\n            this.app.field_list[ id ] = field;\n            var input_element = new InputElement( this.app, {\n                name                : input_def.name,\n                label               : input_def.hide_label ? '' : input_def.label || input_def.name,\n                value               : input_def.value,\n                text_value          : input_def.text_value,\n                collapsible_value   : input_def.collapsible_value,\n                collapsible_preview : input_def.collapsible_preview,\n                help                : input_def.help,\n                argument            : input_def.argument,\n                disabled            : input_def.disabled,\n                color               : input_def.color,\n                style               : input_def.style,\n                backdrop            : input_def.backdrop,\n                hidden              : input_def.hidden,\n                fixed               : input_def.fixed,\n                field               : field\n            });\n            this.app.element_list[ id ] = input_element;\n            this._append( input_element.$el, input_def.id );\n            return field;\n        },\n\n        /** Append a new element to the form i.e. input element, repeat block, conditionals etc. */\n        _append: function( $el, id ) {\n            this.$el.append( $el.addClass( 'section-row' ).attr( 'id', id ) );\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-section.js","/** This class creates a ui component which enables the dynamic creation of portlets */\ndefine( [ 'utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc' ],\nfunction( Utils, Portlet, Ui ) {\n    var View = Backbone.View.extend({\n        initialize: function( options ) {\n            this.list = {};\n            this.options = Utils.merge( options, {\n                title       : 'Repeat',\n                empty_text  : 'Not available.',\n                max         : null,\n                min         : null\n            });\n            this.button_new = new Ui.ButtonIcon({\n                icon    : 'fa-plus',\n                title   : 'Insert ' + this.options.title,\n                tooltip : 'Add new ' + this.options.title + ' block',\n                cls     : 'ui-button-icon ui-clear-float form-repeat-add',\n                onclick : function() { options.onnew && options.onnew() }\n            });\n            this.setElement( $( '<div/>' ).append( this.$list = $( '<div/>' ) )\n                                          .append( $( '<div/>' ).append( this.button_new.$el ) ) );\n        },\n\n        /** Number of repeat blocks */\n        size: function() {\n            return _.size( this.list );\n        },\n\n        /** Add new repeat block */\n        add: function( options ) {\n            if ( !options.id || this.list[ options.id ] ) {\n                Galaxy.emit.debug( 'form-repeat::add()', 'Duplicate or invalid repeat block id.' );\n                return;\n            }\n            var button_delete = new Ui.ButtonIcon({\n                icon    : 'fa-trash-o',\n                tooltip : 'Delete this repeat block',\n                cls     : 'ui-button-icon-plain form-repeat-delete',\n                onclick : function() { options.ondel && options.ondel() }\n            });\n            var portlet = new Portlet.View({\n                id              : options.id,\n                title           : 'placeholder',\n                cls             : options.cls || 'ui-portlet-repeat',\n                operations      : { button_delete: button_delete }\n            });\n            portlet.append( options.$el );\n            portlet.$el.addClass( 'section-row' ).hide();\n            this.list[ options.id ] = portlet;\n            this.$list.append( portlet.$el.fadeIn( 'fast' ) );\n            this.options.max > 0 && this.size() >= this.options.max && this.button_new.disable();\n            this._refresh();\n        },\n\n        /** Delete repeat block */\n        del: function( id ) {\n            if ( !this.list[ id ] ) {\n                Galaxy.emit.debug( 'form-repeat::del()', 'Invalid repeat block id.' );\n                return;\n            }\n            this.$list.find( '#' + id ).remove();\n            delete this.list[ id ];\n            this.button_new.enable();\n            this._refresh();\n        },\n\n        /** Remove all */\n        delAll: function() {\n            for( var id in this.list ) {\n                this.del( id );\n            }\n        },\n\n        /** Hides add/del options */\n        hideOptions: function() {\n            this.button_new.$el.hide();\n            _.each( this.list, function( portlet ) { portlet.hideOperation( 'button_delete' ) } );\n            _.isEmpty( this.list ) && this.$el.append( $( '<div/>' ).addClass( 'ui-form-info' ).html( this.options.empty_text ) );\n        },\n\n        /** Refresh view */\n        _refresh: function() {\n            var index = 0;\n            for ( var id in this.list ) {\n                var portlet = this.list[ id ];\n                portlet.title( ++index + ': ' + this.options.title );\n                portlet[ this.size() > this.options.min ? 'showOperation' : 'hideOperation' ]( 'button_delete' );\n            }\n        }\n    });\n\n    return {\n        View : View\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-repeat.js","/**\n    This class creates a form input element wrapper\n*/\ndefine([], function() {\n    return Backbone.View.extend({\n        initialize: function( app, options ) {\n            this.app = app;\n            this.app_options = app.model ? app.model.attributes : {};\n            this.field = options && options.field || new Backbone.View();\n            this.model = options && options.model || new Backbone.Model({\n                text_enable     : this.app_options.text_enable   || 'Enable',\n                text_disable    : this.app_options.text_disable  || 'Disable',\n                cls_enable      : this.app_options.cls_enable    || 'fa fa-caret-square-o-down',\n                cls_disable     : this.app_options.cls_disable   || 'fa fa-caret-square-o-up',\n                always_refresh  : this.app_options.always_refresh\n            }).set( options );\n\n            // set element and link components\n            this.setElement( this._template() );\n            this.$field             = this.$( '.ui-form-field' );\n            this.$info              = this.$( '.ui-form-info' );\n            this.$preview           = this.$( '.ui-form-preview' );\n            this.$collapsible       = this.$( '.ui-form-collapsible' );\n            this.$collapsible_text  = this.$( '.ui-form-collapsible-text' );\n            this.$collapsible_icon  = this.$( '.ui-form-collapsible-icon' );\n            this.$title             = this.$( '.ui-form-title' );\n            this.$title_text        = this.$( '.ui-form-title-text' );\n            this.$error_text        = this.$( '.ui-form-error-text' );\n            this.$error             = this.$( '.ui-form-error' );\n            this.$backdrop          = this.$( '.ui-form-backdrop' );\n\n            // add field element\n            this.$field.prepend( this.field.$el );\n\n            // decide wether to expand or collapse fields\n            var collapsible_value = this.model.get( 'collapsible_value' );\n            this.field.collapsed = collapsible_value !== undefined && JSON.stringify( this.model.get( 'value' ) ) == JSON.stringify( collapsible_value );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n\n            // add click handler\n            var self = this;\n            this.$collapsible.on( 'click', function() {\n                self.field.collapsed = !self.field.collapsed;\n                app.trigger && app.trigger( 'change' );\n                self.render();\n            });\n\n            // hide error on value change\n            if ( this.field.model && !this.model.get( 'always_refresh' ) ) {\n                this.listenTo( this.field.model, 'change:value', function() { self.reset() } );\n            }\n        },\n\n        /** Set backdrop for input element */\n        backdrop: function() {\n            this.model.set( 'backdrop', true );\n        },\n\n        /** Set error text */\n        error: function( text ) {\n            this.model.set( 'error_text', text );\n        },\n\n        /** Reset this view */\n        reset: function() {\n            !this.model.get( 'fixed' ) && this.model.set( 'error_text', null );\n        },\n\n        render: function() {\n            // render help\n            $( '.tooltip' ).hide();\n            var help_text = this.model.get( 'help', '' );\n            var help_argument = this.model.get( 'argument' );\n            if ( help_argument && help_text.indexOf( '(' + help_argument + ')' ) == -1 ) {\n                help_text += ' (' + help_argument + ')';\n            }\n            this.$info.html( help_text );\n            // render visibility\n            this.$el[ this.model.get( 'hidden' ) ? 'hide' : 'show' ]();\n            // render preview view for collapsed fields\n            this.$preview[ ( this.field.collapsed && this.model.get( 'collapsible_preview' ) || this.model.get( 'disabled' ) ) ? 'show' : 'hide' ]()\n                         .html( _.escape( this.model.get( 'text_value' ) ) );\n            // render error messages\n            var error_text = this.model.get( 'error_text' );\n            this.$error[ error_text ? 'show' : 'hide' ]();\n            this.$el[ error_text ? 'addClass' : 'removeClass' ]( 'ui-error' );\n            this.$error_text.html( error_text );\n            // render backdrop\n            this.$backdrop[ this.model.get( 'backdrop' ) ? 'show' : 'hide' ]();\n            // render input field\n            this.field.collapsed || this.model.get( 'disabled' ) ? this.$field.hide() : this.$field.show();\n            // render input field color and style\n            this.field.model && this.field.model.set( { 'color': this.model.get( 'color' ), 'style': this.model.get( 'style' ) } );\n            // render collapsible options\n            if ( !this.model.get( 'disabled' ) && this.model.get( 'collapsible_value' ) !== undefined ) {\n                var collapsible_state = this.field.collapsed ? 'enable' : 'disable';\n                this.$title_text.hide();\n                this.$collapsible.show();\n                this.$collapsible_text.text( this.model.get( 'label' ) );\n                this.$collapsible_icon.removeClass().addClass( 'icon' )\n                                      .addClass( this.model.get( 'cls_' +  collapsible_state ) )\n                                      .attr( 'data-original-title', this.model.get( 'text_' + collapsible_state ) )\n                                      .tooltip( { placement: 'bottom' } );\n            } else {\n                this.$title_text.show().text( this.model.get( 'label' ) );\n                this.$collapsible.hide();\n            }\n        },\n\n        _template: function() {\n            return  $( '<div/>' ).addClass( 'ui-form-element' )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-error ui-error' )\n                                    .append( $( '<span/>' ).addClass( 'fa fa-arrow-down' ) )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-error-text' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-title' )\n                                    .append( $( '<div/>' ).addClass( 'ui-form-collapsible' )\n                                        .append( $( '<i/>' ).addClass( 'ui-form-collapsible-icon' ) )\n                                        .append( $( '<span/>' ).addClass( 'ui-form-collapsible-text' ) )\n                                    )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-title-text' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-field' )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-info' ) )\n                                    .append( $( '<div/>' ).addClass( 'ui-form-backdrop' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-preview' ) );\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-input.js","/**\n    This class creates input elements. New input parameter types should be added to the types dictionary.\n*/\ndefine(['utils/utils',\n        'mvc/ui/ui-misc',\n        'mvc/ui/ui-select-content',\n        'mvc/ui/ui-select-library',\n        'mvc/ui/ui-select-ftp',\n        'mvc/ui/ui-select-genomespace',\n        'mvc/ui/ui-color-picker'],\n    function( Utils, Ui, SelectContent, SelectLibrary, SelectFtp, SelectGenomeSpace, ColorPicker ) {\n\n    // create form view\n    return Backbone.Model.extend({\n        /** Available parameter types */\n        types: {\n            'text'              : '_fieldText',\n            'password'          : '_fieldText',\n            'select'            : '_fieldSelect',\n            'data_column'       : '_fieldSelect',\n            'genomebuild'       : '_fieldSelect',\n            'data'              : '_fieldData',\n            'data_collection'   : '_fieldData',\n            'integer'           : '_fieldSlider',\n            'float'             : '_fieldSlider',\n            'boolean'           : '_fieldBoolean',\n            'drill_down'        : '_fieldDrilldown',\n            'color'             : '_fieldColor',\n            'hidden'            : '_fieldHidden',\n            'hidden_data'       : '_fieldHidden',\n            'baseurl'           : '_fieldHidden',\n            'library_data'      : '_fieldLibrary',\n            'ftpfile'           : '_fieldFtp',\n            'upload'            : '_fieldUpload',\n            'genomespacefile'   : '_fieldGenomeSpace'\n        },\n\n        /** Returns an input field for a given field type */\n        create: function( input_def ) {\n            var fieldClass = this.types[ input_def.type ];\n            var field = typeof( this[ fieldClass ] ) === 'function' ? this[ fieldClass ].call( this, input_def ) : null;\n            if ( !field ) {\n                field = input_def.options ? this._fieldSelect( input_def ) : this._fieldText( input_def );\n                Galaxy.emit.debug('form-parameters::_addRow()', 'Auto matched field type (' + input_def.type + ').');\n            }\n            input_def.value === undefined && ( input_def.value = null );\n            field.value( input_def.value );\n            return field;\n        },\n\n        /** Data input field */\n        _fieldData: function( input_def ) {\n            return new SelectContent.View({\n                id          : 'field-' + input_def.id,\n                extensions  : input_def.extensions,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                type        : input_def.type,\n                flavor      : input_def.flavor,\n                data        : input_def.options,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Select/Checkbox/Radio options field */\n        _fieldSelect: function ( input_def ) {\n            // show text field e.g. in workflow editor\n            if( input_def.is_workflow ) {\n                return this._fieldText( input_def );\n            }\n\n            // customize properties\n            if ( input_def.type == 'data_column' ) {\n                input_def.error_text = 'Missing columns in referenced dataset.'\n            }\n\n            // identify available options\n            var data = input_def.data;\n            if( !data ) {\n                data = [];\n                _.each( input_def.options, function( option ) {\n                    data.push( { label: option[ 0 ], value: option[ 1 ] } );\n                });\n            }\n\n            // identify display type\n            var SelectClass = Ui.Select;\n            switch ( input_def.display ) {\n                case 'checkboxes':\n                    SelectClass = Ui.Checkbox;\n                    break;\n                case 'radio':\n                    SelectClass = Ui.Radio;\n                    break;\n                case 'radiobutton':\n                    SelectClass = Ui.RadioButton;\n                    break;\n            }\n\n            // create select field\n            return new SelectClass.View({\n                id          : 'field-' + input_def.id,\n                data        : data,\n                error_text  : input_def.error_text || 'No options available',\n                multiple    : input_def.multiple,\n                optional    : input_def.optional,\n                onchange    : input_def.onchange,\n                individual  : input_def.individual,\n                searchable  : input_def.flavor !== 'workflow'\n            });\n        },\n\n        /** Drill down options field */\n        _fieldDrilldown: function ( input_def ) {\n            // show text field e.g. in workflow editor\n            if( input_def.is_workflow ) {\n                return this._fieldText( input_def );\n            }\n\n            // create drill down field\n            return new Ui.Drilldown.View({\n                id          : 'field-' + input_def.id,\n                data        : input_def.options,\n                display     : input_def.display,\n                optional    : input_def.optional,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Text input field */\n        _fieldText: function( input_def ) {\n            // field replaces e.g. a select field\n            if ( input_def.options && input_def.data ) {\n                input_def.area = input_def.multiple;\n                if ( Utils.isEmpty( input_def.value ) ) {\n                    input_def.value = null;\n                } else {\n                    if ( $.isArray( input_def.value ) ) {\n                        var str_value = '';\n                        for ( var i in input_def.value ) {\n                            str_value += String( input_def.value[ i ] );\n                            if ( !input_def.multiple ) {\n                                break;\n                            }\n                            str_value += '\\n';\n                        }\n                        input_def.value = str_value;\n                    }\n                }\n            }\n            // create input element\n            return new Ui.Input({\n                id          : 'field-' + input_def.id,\n                type        : input_def.type,\n                area        : input_def.area,\n                readonly    : input_def.readonly,\n                placeholder : input_def.placeholder,\n                datalist    : input_def.datalist,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Slider field */\n        _fieldSlider: function( input_def ) {\n            return new Ui.Slider.View({\n                id          : 'field-' + input_def.id,\n                precise     : input_def.type == 'float',\n                is_workflow : input_def.is_workflow,\n                min         : input_def.min,\n                max         : input_def.max,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Hidden field */\n        _fieldHidden: function( input_def ) {\n            return new Ui.Hidden({\n                id          : 'field-' + input_def.id,\n                info        : input_def.info\n            });\n        },\n\n        /** Boolean field */\n        _fieldBoolean: function( input_def ) {\n            return new Ui.RadioButton.View({\n                id          : 'field-' + input_def.id,\n                data        : [ { label : 'Yes', value : 'true'  },\n                                { label : 'No',  value : 'false' }],\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Color picker field */\n        _fieldColor: function( input_def ) {\n            return new ColorPicker({\n                id          : 'field-' + input_def.id,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Library dataset field */\n        _fieldLibrary: function( input_def ) {\n            return new SelectLibrary.View({\n                id          : 'field-' + input_def.id,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** FTP file field */\n        _fieldFtp: function( input_def ) {\n            return new SelectFtp.View({\n                id          : 'field-' + input_def.id,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** GenomeSpace file select field\n         */\n        _fieldGenomeSpace: function( input_def ) {\n             var self = this;\n             return new SelectGenomeSpace.View({\n                 id          : 'field-' + input_def.id,\n                 onchange    : function() {\n                     self.app.trigger( 'change' );\n                 }\n             });\n         },\n\n        /** Upload file field */\n        _fieldUpload: function( input_def ) {\n            return new Ui.Upload({\n                id          : 'field-' + input_def.id,\n                onchange    : input_def.onchange\n            });\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-parameters.js","define([ 'utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-select-default' ], function( Utils, Ui, Select ) {\n\n/** Batch mode variations */\nvar Batch = { DISABLED: 'disabled', ENABLED: 'enabled', LINKED: 'linked' };\n\n/** List of available content selectors options */\nvar Configurations = {\n    data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.LINKED     },\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.LINKED     } ],\n    data_multiple: [\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.DISABLED   },\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collections',  multiple: true,    batch: Batch.DISABLED   } ],\n    data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   } ],\n    workflow_data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   } ],\n    workflow_data_multiple: [\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.DISABLED   } ],\n    workflow_data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   } ],\n    module_data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.ENABLED    } ],\n    module_data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hdca', icon: 'fa-folder',   tooltip: 'Multiple collections', multiple: true,    batch: Batch.ENABLED    } ]\n};\n\n/** View for hda and hdca content selector ui elements */\nvar View = Backbone.View.extend({\n    initialize : function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model({\n            src_labels  : { 'hda' : 'dataset', 'hdca': 'dataset collection' },\n            pagelimit   : 100,\n            statustimer : 1000\n        }).set( options );\n        this.setElement( $( '<div/>' ).addClass( 'ui-select-content' ) );\n        this.button_product = new Ui.RadioButton.View( {\n            value       : 'false',\n            data        : [ { icon: 'fa fa-chain', value: 'false',\n                              tooltip: 'Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads.' },\n                            { icon: 'fa fa-chain-broken',  value: 'true',\n                              tooltip: 'Unlinked dataset inputs will be run against *all* other inputs.' } ] } );\n        var $batch_div = $( '<div/>' ).addClass( 'ui-form-info' )\n                            .append( $( '<i/>' ).addClass( 'fa fa-sitemap' ) )\n                            .append( $( '<span/>' ).html( 'This is a batch mode input field. Separate jobs will be triggered for each dataset selection.' ) );\n        this.$batch = {\n            linked  : $batch_div.clone(),\n            enabled : $batch_div.clone().append( $( '<div/>' )\n                                                    .append( $( '<div/>' ).addClass( 'ui-form-title' ).html( 'Batch options:' ) )\n                                                    .append( this.button_product.$el ) )\n                                                    .append( $( '<div/>' ).css( 'clear', 'both' ) )\n        };\n\n        // add drag-drop event handlers\n        this.$el.on( 'dragenter', function( e ) { this.lastenter = e.target; self.$el.addClass( 'ui-dragover' ); } )\n                .on( 'dragover',  function( e ) { e.preventDefault(); } )\n                .on( 'dragleave', function( e ) { this.lastenter === e.target && self.$el.removeClass( 'ui-dragover' ); } )\n                .on( 'drop',      function( e ) { self._handleDrop( e ); } );\n\n        // track current history elements\n        this.history = {};\n\n        // add listeners\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:current', this._changeCurrent, this );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:type change:optional change:multiple change:extensions', this._changeType, this );\n        this.render();\n\n        // add change event\n        this.on( 'change', function() { options.onchange && options.onchange( self.value() ) } );\n    },\n\n    render: function() {\n        this._changeType();\n        this._changeValue();\n        this._changeWait();\n    },\n\n    /** Indicate that select fields are being updated */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Indicate that the options update has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Update data representing selectable options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    /** Return the currently selected dataset values */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        var current = this.model.get( 'current' );\n        if ( this.config[ current ] ) {\n            var id_list = this.fields[ current ].value();\n            if (id_list !== null) {\n                id_list = $.isArray( id_list ) ? id_list : [ id_list ];\n                if ( id_list.length > 0 ) {\n                    var result = this._batch( { values: [] } );\n                    for ( var i in id_list ) {\n                        var details = this.history[ id_list[ i ] + '_' + this.config[ current ].src ];\n                        if ( details ) {\n                            result.values.push( details );\n                        } else {\n                            Galaxy.emit.debug( 'ui-select-content::value()', 'Requested details not found for \\'' + id_list[ i ] + '\\'.'  );\n                            return null;\n                        }\n                    }\n                    result.values.sort( function( a, b ) { return a.hid - b.hid } );\n                    return result;\n                }\n            }\n        } else {\n            Galaxy.emit.debug( 'ui-select-content::value()', 'Invalid value/source \\'' + new_value + '\\'.'  );\n        }\n        return null;\n    },\n\n    /** Change of current select field */\n    _changeCurrent: function() {\n        var self = this;\n        _.each( this.fields, function( field, i ) {\n            if ( self.model.get( 'current' ) == i ) {\n                field.$el.show();\n                _.each( self.$batch, function( $batchfield, batchmode ) {\n                    $batchfield[ self.config[ i ].batch == batchmode ? 'show' : 'hide' ]();\n                });\n                self.button_type.value( i );\n            } else {\n                field.$el.hide();\n            }\n        });\n    },\n\n    /** Change of type */\n    _changeType: function() {\n        var self = this;\n\n        // identify selector type identifier i.e. [ flavor ]_[ type ]_[ multiple ]\n        var config_id = ( this.model.get( 'flavor' ) ? this.model.get( 'flavor' ) + '_' : '' ) +\n                        String( this.model.get( 'type' ) ) + ( this.model.get( 'multiple' ) ? '_multiple' : '' );\n        if ( Configurations[ config_id ] ) {\n            this.config = Configurations[ config_id ];\n        } else {\n            this.config = Configurations[ 'data' ];\n            Galaxy.emit.debug( 'ui-select-content::_changeType()', 'Invalid configuration/type id \\'' + config_id + '\\'.'  );\n        }\n\n        // prepare extension component of error message\n        var data = self.model.get( 'data' );\n        var extensions = Utils.textify( this.model.get( 'extensions' ) );\n        var src_labels = this.model.get( 'src_labels' );\n\n        // build views\n        this.fields = [];\n        this.button_data = [];\n        _.each( this.config, function( c, i ) {\n            self.button_data.push({\n                value   : i,\n                icon    : c.icon,\n                tooltip : c.tooltip\n            });\n            self.fields.push(\n                new Select.View({\n                    optional    : self.model.get( 'optional' ),\n                    multiple    : c.multiple,\n                    searchable  : !c.multiple || ( data && data[ c.src ] && data[ c.src ].length > self.model.get( 'pagelimit' ) ),\n                    individual  : true,\n                    error_text  : 'No ' + ( extensions ? extensions + ' ' : '' ) + ( src_labels[ c.src ] || 'content' ) + ' available.',\n                    onchange    : function() {\n                        self.trigger( 'change' );\n                    }\n                })\n            );\n        });\n        this.button_type = new Ui.RadioButton.View({\n            value   : this.model.get( 'current' ),\n            data    : this.button_data,\n            onchange: function( value ) {\n                self.model.set( 'current', value );\n                self.trigger( 'change' );\n            }\n        });\n\n        // append views\n        this.$el.empty();\n        var button_width = 0;\n        if ( this.fields.length > 1 ) {\n            this.$el.append( this.button_type.$el );\n            button_width = Math.max( 0, this.fields.length * 36 ) + 'px';\n        }\n        _.each( this.fields, function( field ) {\n            self.$el.append( field.$el.css( { 'margin-left': button_width } ) );\n        });\n        _.each( this.$batch, function( $batchfield, batchmode ) {\n            self.$el.append( $batchfield.css( { 'margin-left': button_width } ) );\n        });\n        this.model.set( 'current', 0 );\n        this._changeCurrent();\n        this._changeData();\n    },\n\n    /** Change of wait flag */\n    _changeWait: function() {\n        var self = this;\n        _.each( this.fields, function( field ) { field[ self.model.get( 'wait' ) ? 'wait' : 'unwait' ]() } );\n    },\n\n    /** Change of available options */\n    _changeData: function() {\n        var options = this.model.get( 'data' );\n        var self = this;\n        var select_options = {};\n        _.each( options, function( items, src ) {\n            select_options[ src ] = [];\n            _.each( items, function( item ) {\n                select_options[ src ].push({\n                    hid  : item.hid,\n                    keep : item.keep,\n                    label: item.hid + ': ' + item.name,\n                    value: item.id,\n                    tags : item.tags\n                });\n                self.history[ item.id + '_' + src ] = item;\n            });\n        });\n        _.each( this.config, function( c, i ) {\n            select_options[ c.src ] && self.fields[ i ].add( select_options[ c.src ], function( a, b ) { return b.hid - a.hid } );\n        });\n    },\n\n    /** Change of incoming value */\n    _changeValue: function () {\n        var new_value = this.model.get( 'value' );\n        if ( new_value && new_value.values && new_value.values.length > 0 ) {\n            // create list with content ids\n            var list = [];\n            _.each( new_value.values, function( value ) {\n                list.push( value.id );\n            });\n            // sniff first suitable field type from config list\n            var src = new_value.values[ 0 ].src;\n            var multiple = new_value.values.length > 1;\n            for( var i = 0; i < this.config.length; i++ ) {\n                var field = this.fields[ i ];\n                var c = this.config[ i ];\n                if ( c.src == src && [ multiple, true ].indexOf( c.multiple ) !== -1 ) {\n                    this.model.set( 'current', i );\n                    field.value( list );\n                    break;\n                }\n            }\n        } else {\n            _.each( this.fields, function( field ) {\n                field.value( null );\n            });\n        }\n    },\n\n    /** Handles drop events e.g. from history panel */\n    _handleDrop: function( ev ) {\n        try {\n            var data      = this.model.get( 'data' );\n            var current   = this.model.get( 'current' );\n            var config    = this.config[ current ];\n            var field     = this.fields[ current ];\n            var drop_data = JSON.parse( ev.originalEvent.dataTransfer.getData( 'text' ) )[ 0 ];\n            var new_id    = drop_data.id;\n            var new_src   = drop_data.history_content_type == 'dataset' ? 'hda' : 'hdca';\n            var new_value = { id: new_id, src: new_src };\n            if ( data && _.findWhere( data[ new_src ], new_value ) ) {\n                if ( config.src == new_src ) {\n                    var current_value = field.value();\n                    if ( current_value && config.multiple ) {\n                        if ( current_value.indexOf( new_id ) == -1 ) {\n                            current_value.push( new_id );\n                        }\n                    } else {\n                        current_value = new_id;\n                    }\n                    field.value( current_value );\n                } else {\n                    this.model.set( 'value', { values: [ new_value ] } );\n                    this.model.trigger( 'change:value' );\n                }\n                this.trigger( 'change' );\n                this._handleDropStatus( 'success' );\n            } else {\n                this._handleDropStatus( 'danger' );\n            }\n        } catch( e ) {\n            this._handleDropStatus( 'danger' );\n        }\n        ev.preventDefault();\n    },\n\n    /** Highlight drag result */\n    _handleDropStatus: function( status ) {\n        var self = this;\n        this.$el.removeClass( 'ui-dragover' ).addClass( 'ui-dragover-' + status );\n        setTimeout( function() { self.$el.removeClass( 'ui-dragover-' + status ) }, this.model.get( 'statustimer' ) );\n    },\n\n    /** Assists in identifying the batch mode */\n    _batch: function( result ) {\n        result[ 'batch' ] = false;\n        var current = this.model.get( 'current' );\n        var config = this.config[ current ];\n        if ( config.src == 'hdca' && !config.multiple ) {\n            var hdca = this.history[ this.fields[ current ].value() + '_hdca' ];\n            if ( hdca && hdca.map_over_type ) {\n                result[ 'batch' ] = true;\n            }\n        }\n        if ( config.batch == Batch.LINKED || config.batch == Batch.ENABLED ) {\n            result[ 'batch' ] = true;\n            if ( config.batch == Batch.ENABLED && this.button_product.value() === 'true' ) {\n                result[ 'product' ] = true;\n            }\n        }\n        return result;\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-content.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-table', 'mvc/ui/ui-list'],\n        function(Utils, Ui, Table, List) {\n\n// collection of libraries\nvar Libraries = Backbone.Collection.extend({\n    url: Galaxy.root + 'api/libraries?deleted=false'\n});\n\n// collection of dataset\nvar LibraryDatasets = Backbone.Collection.extend({\n    initialize: function() {\n        var self = this;\n        this.config = new Backbone.Model({ library_id: null });\n        this.config.on('change', function() {\n            self.fetch({ reset: true });\n        });\n    },\n    url: function() {\n        return Galaxy.root + 'api/libraries/' + this.config.get('library_id') + '/contents';\n    }\n});\n\n// hda/hdca content selector ui element\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // collections\n        this.libraries  = new Libraries();\n        this.datasets   = new LibraryDatasets();\n\n        // link app and options\n        this.options = options;\n\n        // select field for the library\n        // TODO: Remove this once the library API supports searching for library datasets\n        this.library_select = new Ui.Select.View({\n            onchange    : function(value) {\n                self.datasets.config.set('library_id', value);\n            }\n        });\n\n        // create ui-list view to keep track of selected data libraries\n        this.dataset_list = new List.View({\n            name        : 'dataset',\n            optional    : options.optional,\n            multiple    : options.multiple,\n            onchange    : function() {\n                self.trigger('change');\n            }\n        });\n\n        // add reset handler for fetched libraries\n        this.libraries.on('reset', function() {\n            var data = [];\n            self.libraries.each(function(model) {\n                data.push({\n                    value   : model.id,\n                    label   : model.get('name')\n                });\n            });\n            self.library_select.update(data);\n        });\n\n        // add reset handler for fetched library datasets\n        this.datasets.on('reset', function() {\n            var data = [];\n            var library_current = self.library_select.text();\n            if (library_current !== null) {\n                self.datasets.each(function(model) {\n                    if (model.get('type') === 'file') {\n                        data.push({\n                            value   : model.id,\n                            label   : model.get('name')\n                        });\n                    }\n                });\n            }\n            self.dataset_list.update(data);\n        });\n\n        // add change event. fires on trigger\n        this.on('change', function() {\n            options.onchange && options.onchange(self.value());\n        });\n\n        // create elements\n        this.setElement(this._template());\n        this.$('.library-select').append(this.library_select.$el);\n        this.$el.append(this.dataset_list.$el);\n\n        // initial fetch of libraries\n        this.libraries.fetch({\n            reset: true,\n            success: function() {\n                self.library_select.trigger('change');\n                if (self.options.value !== undefined) {\n                    self.value(self.options.value);\n                }\n            }\n        });\n    },\n\n    /** Return/Set currently selected library datasets */\n    value: function(val) {\n        return this.dataset_list.value(val);\n    },\n\n    /** Template */\n    _template: function() {\n        return  '<div class=\"ui-select-library\">' +\n                    '<div class=\"library ui-margin-bottom\">' +\n                        '<span class=\"library-title\">Select Library</span>' +\n                        '<span class=\"library-select\"/>' +\n                    '</div>' +\n                '</div>';\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-library.js","/** This class creates a ui table element. */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function(options) {\n            this.options = Utils.merge(options, {\n                content     : 'No content available.',\n                onchange    : null,\n                ondblclick  : null,\n                onconfirm   : null,\n                cls         : 'ui-table',\n                selectable  : true,\n                cls_tr      : ''\n            });\n            this.setElement( this._template() );\n            this.$thead     = this.$('thead');\n            this.$tbody     = this.$('tbody');\n            this.$tmessage  = this.$('tmessage');\n            this.row = this._row();\n            this.row_count = 0;\n        },\n\n        events : {\n            'click'     : '_onclick',\n            'dblclick'  : '_ondblclick'\n        },\n\n        /** Add cell to header row */\n        addHeader: function( $el ) {\n            this.row.append( $( '<th/>' ).append( $el ) );\n        },\n\n        /** Append header row to table */\n        appendHeader: function() {\n            this.$thead.append( this.row );\n            this.row = $( '<tr/>' );\n        },\n\n        /** Add cell to row */\n        add: function($el, width, align) {\n            var wrapper = $( '<td/>' );\n            if ( width ) {\n                wrapper.css( 'width', width );\n            }\n            if ( align ) {\n                wrapper.css( 'text-align', align );\n            }\n            this.row.append( wrapper.append( $el ) );\n        },\n        \n        /** Append row to table */\n        append: function( id, fade ) {\n            this._commit( id, fade, false );\n        },\n        \n        /** Prepend row to table */\n        prepend: function( id, fade ) {\n            this._commit( id, fade, true );\n        },\n        \n        /** Helper to get row element */\n        get: function( id ) {\n            return this.$( '#' + id );\n        },\n\n        /** Delete row by id */\n        del: function( id ) {\n            var item = this.$tbody.find( '#' + id );\n            if ( item.length > 0 ) {\n                item.remove();\n                this.row_count--;\n                this._refresh();\n            }\n        },\n\n        /** Delete all rows */\n        delAll: function() {\n            this.$tbody.empty();\n            this.row_count = 0;\n            this._refresh();\n        },\n\n        /** Set a value i.e. selects/highlights a particular row by id */\n        value: function( new_value ) {\n            if ( this.options.selectable ) {\n                this.before = this.$tbody.find( '.current' ).attr( 'id' );\n                if ( new_value !== undefined ) {\n                    this.$tbody.find( 'tr' ).removeClass( 'current' );\n                    if ( new_value ) {\n                        this.$tbody.find( '#' + new_value ).addClass( 'current' );\n                    }\n                }\n                var after = this.$tbody.find( '.current' ).attr( 'id' );\n                if ( after === undefined ) {\n                    return null;\n                } else {\n                    if ( after != this.before && this.options.onchange ) {\n                        this.options.onchange( new_value );\n                    }\n                    return after;\n                }\n            }\n        },\n\n        /** Return the number of rows */\n        size: function() {\n            return this.$tbody.find( 'tr' ).length;\n        },\n\n        /** Helper to append rows */\n        _commit: function( id, fade, prepend ) {\n            this.del( id );\n            this.row.attr( 'id', id );\n            if ( prepend ) {\n                this.$tbody.prepend( this.row );\n            } else {\n                this.$tbody.append( this.row );\n            }\n            if ( fade ) {\n                this.row.hide();\n                this.row.fadeIn();\n            }\n            this.row = this._row();\n            this.row_count++;\n            this._refresh();\n        },\n\n        /** Helper to create new row */\n        _row: function() {\n            return $( '<tr class=\"' + this.options.cls_tr + '\"></tr>' );\n        },\n\n        /** Handles onclick events */\n        _onclick: function(e) {\n            var old_value = this.value();\n            var new_value = $( e.target ).closest( 'tr' ).attr( 'id' );\n            if ( new_value != '' ){\n                if ( new_value && old_value != new_value ) {\n                    if ( this.options.onconfirm ) {\n                        this.options.onconfirm( new_value );\n                    } else {\n                        this.value( new_value );\n                    }\n                }\n            }\n        },\n\n        /** Handles ondblclick events */\n        _ondblclick: function( e ) {\n            var value = this.value();\n            if ( value && this.options.ondblclick ) {\n                this.options.ondblclick( value );\n            }\n        },\n\n        /** Refresh helper */\n        _refresh: function() {\n            if ( this.row_count == 0 ) {\n                this.$tmessage.show();\n            } else {\n                this.$tmessage.hide();\n            }\n        },\n\n        /** Template */\n        _template: function() {\n            return  '<div>' +\n                        '<table class=\"' + this.options.cls + '\">' +\n                            '<thead/>' +\n                            '<tbody/>' +\n                        '</table>' +\n                        '<tmessage>' + this.options.content + '</tmessage>' +\n                    '<div>';\n        }\n    });\n\n    return {\n        View: View\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-table.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc'], function(Utils, Portlet, Ui) {\n\n// ui list element\nvar View = Backbone.View.extend({\n    // create portlet to keep track of selected list elements\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // initialize options\n        this.options = options;\n        this.name = options.name || 'element';\n        this.multiple = options.multiple || false;\n\n        // create message handler\n        this.message = new Ui.Message();\n\n        // create portlet\n        this.portlet = new Portlet.View({ cls: 'ui-portlet-section' });\n\n        // create select field containing the options which can be inserted into the list\n        this.select = new Ui.Select.View({ optional : options.optional });\n\n        // create insert new list element button\n        this.button = new Ui.ButtonIcon({\n            icon        : 'fa fa-sign-in',\n            tooltip     : 'Insert new ' + this.name,\n            onclick     : function() {\n                self.add({\n                    id      : self.select.value(),\n                    name    : self.select.text()\n                });\n            }\n        });\n\n        // build main element\n        this.setElement(this._template(options));\n        this.$('.ui-list-message').append(this.message.$el);\n        this.$('.ui-list-portlet').append(this.portlet.$el);\n        this.$('.ui-list-button').append(this.button.$el);\n        this.$('.ui-list-select').append(this.select.$el);\n    },\n\n    /** Return/Set currently selected list elements */\n    value: function(val) {\n        // set new value\n        if (val !== undefined) {\n            this.portlet.empty();\n            if ($.isArray(val)) {\n                for (var i in val) {\n                    var v = val[i];\n                    var v_id = null;\n                    var v_name = null;\n                    if ($.type(v) != 'string') {\n                        v_id = v.id;\n                        v_name = v.name;\n                    } else {\n                        v_id = v_name = v;\n                    }\n                    if (v_id != null) {\n                        this.add({\n                            id      : v_id,\n                            name    : v_name\n                        });\n                    }\n                }\n            }\n            this._refresh();\n        }\n        // get current value\n        var lst = [];\n        this.$('.ui-list-id').each(function() {\n            lst.push({\n                id      : $(this).prop('id'),\n                name    : $(this).find('.ui-list-name').html()\n            });\n        });\n        if (lst.length == 0) {\n            return null;\n        }\n        return lst;\n    },\n\n    /** Add row */\n    add: function(options) {\n        var self = this;\n        if (this.$('[id=\"' + options.id + '\"]').length === 0) {\n            if (!Utils.isEmpty(options.id)) {\n                var $el = $(this._templateRow({\n                    id      : options.id,\n                    name    : options.name\n                }));\n                $el.on('click', function() {\n                    $el.remove();\n                    self._refresh();\n                });\n                $el.on('mouseover', function() {\n                    $el.addClass('portlet-highlight');\n                });\n                $el.on('mouseout', function() {\n                    $el.removeClass('portlet-highlight');\n                });\n                this.portlet.append($el);\n                this._refresh();\n            } else {\n                this.message.update({ message: 'Please select a valid ' + this.name + '.', status: 'danger' });\n            }\n        } else {\n            this.message.update({ message: 'This ' + this.name + ' is already in the list.' });\n        }\n    },\n\n    /** Update available options */\n    update: function(options) {\n        this.select.update(options);\n    },\n\n    /** Refresh view */\n    _refresh: function() {\n        if (this.$('.ui-list-id').length > 0) {\n            !this.multiple && this.button.disable();\n            this.$('.ui-list-portlet').show();\n        } else {\n            this.button.enable();\n            this.$('.ui-list-portlet').hide();\n        }\n        this.options.onchange && this.options.onchange();\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return  '<div class=\"ui-list\">' +\n                    '<div class=\"ui-margin-top\">' +\n                        '<span class=\"ui-list-button\"/>' +\n                        '<span class=\"ui-list-select\"/>' +\n                    '</div>' +\n                    '<div class=\"ui-list-message\"/>' +\n                    '<div class=\"ui-list-portlet\"/>' +\n                '</div>';\n    },\n\n    /** Row Template */\n    _templateRow: function(options) {\n        return  '<div id=\"' + options.id + '\" class=\"ui-list-id\">' +\n                    '<span class=\"ui-list-delete fa fa-trash\"/>' +\n                    '<span class=\"ui-list-name\">' + options.name + '</span>' +\n                '</div>';\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-list.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-list'],\n        function(Utils, List) {\n\n/**\n * FTP file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // create ui-list view to keep track of selected ftp files\n        this.ftpfile_list = new List.View({\n            name        : 'file',\n            optional    : options.optional,\n            multiple    : options.multiple,\n            onchange    : function() {\n                options.onchange && options.onchange(self.value());\n            }\n        });\n\n        // create elements\n        this.setElement(this.ftpfile_list.$el);\n\n        // initial fetch of ftps\n        Utils.get({\n            url     : Galaxy.root + 'api/remote_files',\n            success : function(response) {\n                var data = [];\n                for (var i in response) {\n                    data.push({\n                        value   : response[i]['path'],\n                        label   : response[i]['path']\n                    });\n                }\n                self.ftpfile_list.update(data);\n            }\n        });\n    },\n\n    /** Return/Set currently selected ftp datasets */\n    value: function(val) {\n        return this.ftpfile_list.value(val);\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-ftp.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-misc', 'mvc/tool/tool-genomespace'],\n        function(Utils, Ui, GenomespaceBrowser) {\n\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n\n        // link this\n        var self = this;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title       : 'Browse',\n            icon        : 'fa fa-sign-in',\n            tooltip     : 'Browse GenomeSpace',\n            onclick     : function() {\n                self.browseGenomeSpace();\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create genomespace token textbox\n        this.token_textbox = new Ui.Input({\n          type       : 'password'        \n        });\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$('.ui-gs-browse-button').append(this.browse_button.$el);\n        this.$('.ui-gs-filename-textbox').append(this.filename_textbox.$el);\n        this.$('.ui-gs-token-textbox').append(this.token_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(data.destination + \"^\" + data.token);\n            }\n        });\n    },\n    \n    /** Main Template */\n    _template: function(options) {\n        return  '<div class=\"ui-gs-select-file\">' +\n                    '<div class=\"ui-gs-browse-field\">' +\n                        '<span class=\"ui-gs-browse-button\" />' +\n                        '<span class=\"ui-gs-filename-textbox\" />' +\n                    '</div>' +\n                    '<div class=\"ui-gs-token-field\">' +\n                        '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n                        '<span class=\"ui-gs-token-textbox\" />' +\n                    '</div>' +\n                '</div>';\n    },\n    \n    /** Return/Set currently selected genomespace filename/token */\n    value : function (new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        }\n        else {\n          return this._getValue();\n        }\n    },\n    \n    // get value\n    _getValue: function() {\n        return this.filename_textbox.value() +\n            \"^\" + this.token_textbox.value();\n    },\n    \n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n          values = new_value.split(\"^\");\n          this.filename_textbox.value(values[0]);\n          this.token_textbox.value(values[1]);\n        }\n    },\n    \n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-genomespace.js","// Provides support for interacting with the GenomeSpace File Browser popup dialogue\ndefine([], function() {\n\n// tool form templates\nreturn {\n    openFileBrowser: function( options ) {\n        var GS_UI_URL = window.Galaxy.config.genomespace_ui_url;\n        var GS_UPLOAD_URL = GS_UI_URL + 'upload/loadUrlToGenomespace.html?getLocation=true'\n\n        var newWin = window.open(GS_UPLOAD_URL, \"GenomeSpace File Browser\", \"height=360px,width=600px\");\n         \n        successCalBack = options['successCallback'];\n        window.addEventListener( \"message\", function (e) {\n             successCalBack(e.data);    \n          }, false);\n      \n        newWin.focus();\n       \n        if (options['errorCallback'] != null) newWin.setCallbackOnGSUploadError = config['errorCallback'];  \n    }\n\n};\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/tool/tool-genomespace.js","/** Renders the color picker used e.g. in the tool form **/\ndefine(['utils/utils'], function( Utils ) {\n    return Backbone.View.extend({\n        colors: {\n            standard: ['c00000','ff0000','ffc000','ffff00','92d050','00b050','00b0f0','0070c0','002060','7030a0'],\n            base    : ['ffffff','000000','eeece1','1f497d','4f81bd','c0504d','9bbb59','8064a2','4bacc6','f79646'],\n            theme   :[['f2f2f2','7f7f7f','ddd9c3','c6d9f0','dbe5f1','f2dcdb','ebf1dd','e5e0ec','dbeef3','fdeada'],\n                      ['d8d8d8','595959','c4bd97','8db3e2','b8cce4','e5b9b7','d7e3bc','ccc1d9','b7dde8','fbd5b5'],\n                      ['bfbfbf','3f3f3f','938953','548dd4','95b3d7','d99694','c3d69b','b2a2c7','92cddc','fac08f'],\n                      ['a5a5a5','262626','494429','17365d','366092','953734','76923c','5f497a','31859b','e36c09'],\n                      ['7f7f7e','0c0c0c','1d1b10','0f243e','244061','632423','4f6128','3f3151','205867','974806']]\n        },\n\n        initialize : function( options ) {\n            this.options = Utils.merge( options, {} );\n            this.setElement( this._template() );\n            this.$panel = this.$( '.ui-color-picker-panel' );\n            this.$view = this.$( '.ui-color-picker-view' );\n            this.$value = this.$( '.ui-color-picker-value' );\n            this.$header = this.$( '.ui-color-picker-header' );\n            this._build();\n            this.visible = false;\n            this.value( this.options.value );\n            this.$boxes = this.$( '.ui-color-picker-box' );\n            var self = this;\n            this.$boxes.on( 'click', function() {\n                self.value( $( this ).css( 'background-color' ) );\n                self.$header.trigger( 'click' );\n            } );\n            this.$header.on( 'click', function() {\n                self.visible = !self.visible;\n                if ( self.visible ) {\n                    self.$view.fadeIn( 'fast' );\n                } else {\n                    self.$view.fadeOut( 'fast' );\n                }\n            } );\n        },\n\n        /** Get/set value */\n        value : function ( new_val ) {\n            if ( new_val !== undefined && new_val !== null ) {\n                this.$value.css( 'background-color', new_val );\n                this.$( '.ui-color-picker-box' ).empty();\n                this.$( this._getValue() ).html( this._templateCheck() );\n                this.options.onchange && this.options.onchange( new_val );\n            }\n            return this._getValue();\n        },\n\n        /** Get value from dom */\n        _getValue: function() {\n            var rgb = this.$value.css( 'background-color' );\n            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n            if ( rgb ) {\n                function hex( x ) {\n                    return ( '0' + parseInt( x ).toString( 16 ) ).slice( -2 );\n                }\n                return '#' + hex( rgb[ 1] ) + hex( rgb[ 2 ] ) + hex( rgb[ 3 ] );\n            } else {\n                return null;\n            }\n        },\n\n        /** Build color panel */\n        _build: function() {\n            this._content( { colors : this.colors.base } );\n            for ( var i in this.colors.theme ) {\n                var line_def = {};\n                if ( i == 0 ) {\n                    line_def[ 'bottom' ] = true;\n                } else if ( i != this.colors.theme.length - 1 ) {\n                    line_def[ 'top' ]     = true;\n                    line_def[ 'bottom' ]  = true;\n                } else {\n                    line_def[ 'top' ]     = true;\n                }\n                line_def[ 'colors' ] = this.colors.theme[ i ];\n                this._content( line_def );\n            }\n            this._content( { colors : this.colors.standard } );\n        },\n\n        /** Create content */\n        _content: function( options ) {\n            var colors   = options.colors;\n            var $content = $( this._templateContent() );\n            var $line = $content.find( '.line' );\n            this.$panel.append( $content );\n            for ( var i in colors ) {\n                var $box = $( this._templateBox( colors[ i ] ) );\n                if ( options.top ) {\n                    $box.css( 'border-top', 'none' );\n                    $box.css( 'border-top-left-radius', '0px' );\n                    $box.css( 'border-top-right-radius', '0px' );\n                }\n                if ( options.bottom ) {\n                    $box.css( 'border-bottom', 'none' );\n                    $box.css( 'border-bottom-left-radius', '0px' );\n                    $box.css( 'border-bottom-right-radius', '0px' );\n                }\n                $line.append( $box );\n            }\n            return $content;\n        },\n\n        /** Check icon */\n        _templateCheck: function() {\n            return  '<div class=\"ui-color-picker-check fa fa-check\"/>';\n        },\n\n        /** Content template */\n        _templateContent: function() {\n            return  '<div class=\"ui-color-picker-content\">' +\n                        '<div class=\"line\"/>' +\n                    '</div>';\n        },\n\n        /** Box template */\n        _templateBox: function( color ) {\n            return '<div id=\"' + color + '\" class=\"ui-color-picker-box\" style=\"background-color: #' + color + ';\"/>';\n        },\n\n        /** Main template */\n        _template: function() {\n            return  '<div class=\"ui-color-picker\">' +\n                        '<div class=\"ui-color-picker-header\">' +\n                            '<div class=\"ui-color-picker-value\"/>' +\n                            '<div class=\"ui-color-picker-label\">Select a color</div>' +\n                        '</div>' +\n                        '<div class=\"ui-color-picker-view ui-input\">' +\n                            '<div class=\"ui-color-picker-panel\"/>' +\n                        '</div>'\n                    '</div>';\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-color-picker.js","/* This class maps the form dom to an api compatible javascript dictionary. */\ndefine([ 'utils/utils' ], function( Utils ) {\n    var Manager = Backbone.Model.extend({\n        initialize: function( app ) {\n            this.app = app;\n        },\n\n        /** Creates a checksum. */\n        checksum: function() {\n            var sum = '';\n            var self = this;\n            this.app.section.$el.find( '.section-row' ).each( function() {\n                var id = $(this).attr( 'id' );\n                var field = self.app.field_list[ id ];\n                if ( field ) {\n                    sum += id + ':' + JSON.stringify( field.value && field.value() ) + ':' + field.collapsed + ';';\n                }\n            });\n            return sum;\n        },\n\n        /** Convert dom into a dictionary of flat id/value pairs used e.g. on job submission. */\n        create: function() {\n            var self = this;\n\n            // get raw dictionary from dom\n            var dict = {};\n            this._iterate( this.app.section.$el, dict );\n\n            // add to result dictionary, label elements\n            var result_dict = {};\n            this.flat_dict = {};\n            function add( flat_id, input_id, input_value ) {\n                self.flat_dict[ flat_id ] = input_id;\n                result_dict[ flat_id ] = input_value;\n                self.app.element_list[ input_id ] && self.app.element_list[ input_id ].$el.attr( 'tour_id', flat_id );\n            }\n            // converter between raw dictionary and job dictionary\n            function convert( identifier, head ) {\n                for ( var index in head ) {\n                    var node = head[ index ];\n                    if ( node.input ) {\n                        var input = node.input;\n                        var flat_id = identifier;\n                        if ( identifier != '' ) {\n                            flat_id += '|';\n                        }\n                        flat_id += input.name;\n                        switch ( input.type ) {\n                            case 'repeat':\n                                var section_label = 'section-';\n                                var block_indices = [];\n                                var block_prefix = null;\n                                for ( var block_label in node ) {\n                                    var pos = block_label.indexOf( section_label );\n                                    if ( pos != -1 ) {\n                                        pos += section_label.length;\n                                        block_indices.push( parseInt( block_label.substr( pos ) ));\n                                        if ( !block_prefix ) {\n                                            block_prefix = block_label.substr( 0, pos );\n                                        }\n                                    }\n                                }\n                                block_indices.sort( function( a, b ) { return a - b; });\n                                var index = 0;\n                                for ( var i in block_indices ) {\n                                    convert( flat_id + '_' + index++, node[ block_prefix + block_indices[ i ] ]);\n                                }\n                                break;\n                            case 'conditional':\n                                var value = self.app.field_list[ input.id ].value();\n                                add( flat_id + '|' + input.test_param.name, input.id, value );\n                                var selectedCase = matchCase( input, value );\n                                if ( selectedCase != -1 ) {\n                                    convert( flat_id, head[ input.id + '-section-' + selectedCase ] );\n                                }\n                                break;\n                            case 'section':\n                                convert( !input.flat && flat_id || '', node );\n                                break;\n                            default:\n                                var field = self.app.field_list[ input.id ];\n                                if ( field && field.value ) {\n                                    var value = field.value();\n                                    if ( input.ignore === undefined || input.ignore != value ) {\n                                        if ( field.collapsed && input.collapsible_value ) {\n                                            value = input.collapsible_value;\n                                        }\n                                        add( flat_id, input.id, value );\n                                        if ( input.payload ) {\n                                            for ( var p_id in input.payload ) {\n                                                add( p_id, input.id, input.payload[ p_id ] );\n                                            }\n                                        }\n                                    }\n                                }\n                        }\n                    }\n                }\n            }\n            convert( '', dict );\n            return result_dict;\n        },\n\n        /** Matches flat ids to corresponding input element\n         * @param{string} flat_id - Flat input id to be looked up.\n         */\n        match: function ( flat_id ) {\n            return this.flat_dict && this.flat_dict[ flat_id ];\n        },\n\n        /** Match conditional values to selected cases\n        */\n        matchCase: function( input, value ) {\n            return matchCase( input, value );\n        },\n\n        /** Matches a new tool model to the current input elements e.g. used to update dynamic options\n        */\n        matchModel: function( model, callback ) {\n            var self = this;\n            visitInputs( model.inputs, function( input, name ) {\n                self.flat_dict[ name ] && callback ( input, self.flat_dict[ name ] );\n            });\n        },\n\n        /** Matches identifier from api response to input elements e.g. used to display validation errors\n        */\n        matchResponse: function( response ) {\n            var result = {};\n            var self = this;\n            function search ( id, head ) {\n                if ( typeof head === 'string' ) {\n                    var input_id = self.flat_dict[ id ];\n                    input_id && ( result[ input_id ] = head );\n                } else {\n                    for ( var i in head ) {\n                        var new_id = i;\n                        if ( id !== '' ) {\n                            var separator = '|';\n                            if ( head instanceof Array ) {\n                                separator = '_';\n                            }\n                            new_id = id + separator + new_id;\n                        }\n                        search ( new_id, head[ i ] );\n                    }\n                }\n            }\n            search( '', response );\n            return result;\n        },\n\n        /** Map dom tree to dictionary tree with input elements.\n        */\n        _iterate: function( parent, dict ) {\n            var self = this;\n            var children = $( parent ).children();\n            children.each( function() {\n                var child = this;\n                var id = $( child ).attr( 'id' );\n                if ( $( child ).hasClass( 'section-row' ) ) {\n                    var input = self.app.input_list[ id ];\n                    dict[ id ] = ( input && { input : input } ) || {};\n                    self._iterate( child, dict[ id ] );\n                } else {\n                    self._iterate( child, dict );\n                }\n            });\n        }\n    });\n\n    /** Match conditional values to selected cases\n     * @param{dict}   input     - Definition of conditional input parameter\n     * @param{dict}   value     - Current value\n     */\n    var matchCase = function( input, value ) {\n        if ( input.test_param.type == 'boolean' ) {\n            if ( value == 'true' ) {\n                value = input.test_param.truevalue || 'true';\n            } else {\n                value = input.test_param.falsevalue || 'false';\n            }\n        }\n        for ( var i in input.cases ) {\n            if ( input.cases[ i ].value == value ) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    /** Visits tool inputs\n     * @param{dict}   inputs    - Nested dictionary of input elements\n     * @param{dict}   callback  - Called with the mapped dictionary object and corresponding model node\n     */\n    var visitInputs = function( inputs, callback, prefix, context ) {\n        context = $.extend( true, {}, context );\n        _.each( inputs, function ( input ) {\n            if ( input && input.type && input.name ) {\n                context[ input.name ] = input;\n            }\n        });\n        for ( var key in inputs ) {\n            var node = inputs[ key ];\n            node.name = node.name || key;\n            var name = prefix ? prefix + '|' + node.name : node.name;\n            switch ( node.type ) {\n                case 'repeat':\n                    _.each( node.cache, function( cache, j ) {\n                        visitInputs( cache, callback, name + '_' + j, context );\n                    });\n                    break;\n                case 'conditional':\n                    if ( node.test_param ) {\n                        callback( node.test_param, name + '|' + node.test_param.name, context );\n                        var selectedCase = matchCase( node, node.test_param.value );\n                        if ( selectedCase != -1 ) {\n                            visitInputs( node.cases[ selectedCase ].inputs, callback, name, context );\n                        } else {\n                            Galaxy.emit.debug( 'form-data::visitInputs() - Invalid case for ' + name + '.' );\n                        }\n                    } else {\n                        Galaxy.emit.debug( 'form-data::visitInputs() - Conditional test parameter missing for ' + name  + '.' );\n                    }\n                    break;\n                case 'section':\n                    visitInputs( node.inputs, callback, name, context )\n                    break;\n                default:\n                    callback( node, name, context );\n            }\n        }\n    };\n\n    return {\n        Manager         : Manager,\n        visitInputs     : visitInputs\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-data.js","// This is necessary so that, when nested arrays are used in ajax/post/get methods, square brackets ('[]') are\n// not appended to the identifier of a nested array.\njQuery.ajaxSettings.traditional = true;\n\n// dependencies\ndefine([\n    'utils/utils',\n    'mvc/grid/grid-model',\n    'mvc/grid/grid-template',\n    'mvc/ui/popup-menu'\n], function(Utils, GridModel, Templates, PopupMenu) {\n\n// grid view\nreturn Backbone.View.extend({\n\n    // model\n    grid: null,\n\n    // Initialize\n    initialize: function(grid_config) {\n        this.grid = new GridModel();\n        this.dict_format = grid_config.dict_format;\n        this.title = grid_config.title;\n        var self = this;\n        window.add_tag_to_grid_filter = function( tag_name, tag_value ){\n            // Put tag name and value together.\n            var tag = tag_name + ( tag_value !== undefined && tag_value !== \"\" ? \":\" + tag_value : \"\" );\n            var advanced_search = $( '#advanced-search').is(\":visible\" );\n            if( !advanced_search ){\n                $('#standard-search').slideToggle('fast');\n                $('#advanced-search').slideToggle('fast');\n            }\n            self.add_filter_condition( \"tags\", tag );\n        };\n\n        // set element\n        if ( this.dict_format ) {\n            this.setElement('<div/>');\n            if ( grid_config.url_base && !grid_config.items ) {\n                var url_data = grid_config.url_data || {};\n                _.each(grid_config.filters, function(v, k) {\n                    url_data['f-' + k] = v;\n                });\n                $.ajax({\n                    url     : grid_config.url_base + '?' + $.param( url_data ),\n                    success : function( response ) {\n                        response.embedded = grid_config.embedded;\n                        response.filters  = grid_config.filters || {};\n                        self.init_grid( response );\n                    }\n                });\n            } else {\n                this.init_grid(grid_config);\n            }\n        } else {\n            this.setElement('#grid-container');\n            this.init_grid(grid_config);\n        }\n\n        // fix padding\n        if (grid_config.use_panels) {\n            $('#center').css ({\n                padding     : '10px',\n                overflow    : 'auto'\n            });\n        }\n    },\n\n    // refresh frames\n    handle_refresh: function (refresh_frames) {\n        if (refresh_frames) {\n            if ($.inArray('history', refresh_frames) > -1) {\n                if( top.Galaxy && top.Galaxy.currHistoryPanel ){\n                    top.Galaxy.currHistoryPanel.loadCurrentHistory();\n                }\n            }\n        }\n    },\n\n    // Initialize\n    init_grid: function(grid_config) {\n        this.grid.set( grid_config );\n\n        // get options\n        var options = this.grid.attributes;\n\n        if (this.allow_title_display && options.title){\n            Utils.setWindowTitle(options.title);\n        }\n        // handle refresh requests\n        this.handle_refresh(options.refresh_frames);\n\n        // strip protocol and domain\n        var url = this.grid.get('url_base');\n        url = url.replace(/^.*\\/\\/[^\\/]+/, '');\n        this.grid.set('url_base', url);\n\n        // append main template\n        this.$el.html(Templates.grid(options));\n\n        // update div contents\n        this.$el.find('#grid-table-header').html(Templates.header(options));\n        this.$el.find('#grid-table-body').html(Templates.body(options));\n        this.$el.find('#grid-table-footer').html(Templates.footer(options));\n\n        // update message\n        if (options.message) {\n            this.$el.find('#grid-message').html(Templates.message(options));\n            var self = this;\n            if (options.use_hide_message) {\n                setTimeout( function() { self.$el.find('#grid-message').html(''); }, 5000);\n            }\n        }\n\n        // configure elements\n        this.init_grid_elements();\n        this.init_grid_controls();\n\n        // attach global event handler\n        // TODO: redundant (the onload/standard page handlers do this) - but needed because these are constructed after page ready\n        init_refresh_on_change();\n    },\n\n    // Initialize grid controls\n    init_grid_controls: function() {\n\n        // link\n        var self = this;\n\n        // Initialize grid operation button.\n        this.$el.find('.operation-button').each(function() {\n            $(this).off();\n            $(this).click(function() {\n                self.submit_operation(this);\n                return false;\n            });\n        });\n\n        // Initialize text filters to select text on click and use normal font when user is typing.\n        this.$el.find('input[type=text]').each(function() {\n            $(this).off();\n            $(this).click(function() { $(this).select(); } )\n                   .keyup(function () { $(this).css('font-style', 'normal'); });\n        });\n\n        // Initialize sort links.\n        this.$el.find('.sort-link').each( function() {\n            $(this).off();\n            $(this).click( function() {\n               self.set_sort_condition( $(this).attr('sort_key') );\n               return false;\n            });\n        });\n\n        // Initialize text filters.\n        this.$el.find('.text-filter-form').each( function() {\n            $(this).off();\n            $(this).submit( function() {\n                var column_key = $(this).attr('column_key');\n                var text_input_obj = $('#input-' + column_key + '-filter');\n                var text_input = text_input_obj.val();\n                text_input_obj.val('');\n                self.add_filter_condition(column_key, text_input);\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.text-filter-val > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                // Remove visible element.\n                $(this).parent().remove();\n\n                // Remove filter condition.\n                self.remove_filter_condition ($(this).attr('filter_key'), $(this).attr('filter_val'));\n\n                // Return\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.categorical-filter > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.set_categorical_filter( $(this).attr('filter_key'), $(this).attr('filter_val') );\n                return false;\n            });\n        });\n\n        // Initialize standard, advanced search toggles.\n        this.$el.find('.advanced-search-toggle').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.$el.find('#standard-search').slideToggle('fast');\n                self.$el.find('#advanced-search').slideToggle('fast');\n                return false;\n            });\n        });\n\n        // Add event to check all box\n        this.$el.find('#check_all').off();\n        this.$el.find('#check_all').on('click', function() {\n            self.check_all_items();\n        });\n    },\n\n    // Initialize grid elements.\n    init_grid_elements : function() {\n        // Initialize grid selection checkboxes.\n        this.$el.find('.grid').each( function() {\n            var checkboxes = $(this).find(\"input.grid-row-select-checkbox\");\n            var check_count = $(this).find(\"span.grid-selected-count\");\n            var update_checked = function() {\n                check_count.text( $(checkboxes).filter(\":checked\").length );\n            };\n\n            $(checkboxes).each( function() {\n                $(this).change(update_checked);\n            });\n            update_checked();\n        });\n\n        // Initialize ratings.\n        if (this.$el.find('.community_rating_star').length !== 0)\n            this.$el.find('.community_rating_star').rating({});\n\n        // get options\n        var options = this.grid.attributes;\n        var self = this;\n\n        //\n        // add page click events\n        //\n        this.$el.find('.page-link > a').each( function() {\n            $(this).click( function() {\n               self.set_page( $(this).attr('page_num') );\n               return false;\n            });\n        });\n\n        //\n        // add inbound/outbound events\n        //\n        this.$el.find('.use-target').each( function() {\n            $(this).click( function(e) {\n                self.execute({\n                    href : $(this).attr('href'),\n                    target : $(this).attr('target')\n                });\n                return false;\n\n            });\n        });\n\n        // empty grid?\n        var items_length = options.items.length;\n        if (items_length == 0) {\n            return;\n        }\n\n        // add operation popup menus\n        _.each( options.items, function( item, index ) {\n            var button = self.$( '#grid-' + index + '-popup' ).off();\n            var popup = new PopupMenu( button );\n            _.each( options[ 'operations' ], function( operation ) {\n                self._add_operation( popup, operation, item );\n            });\n        });\n    },\n\n    /** Add an operation to the items menu */\n    _add_operation: function( popup, operation, item ) {\n        var self = this;\n        var settings = item.operation_config[ operation.label ];\n        if ( settings.allowed && operation.allow_popup ) {\n            popup.addItem({\n                html                : operation.label,\n                href                : settings.url_args,\n                target              : settings.target,\n                confirmation_text   : operation.confirm,\n                func                : function( e ) {\n                    e.preventDefault();\n                    var label = $( e.target ).html();\n                    if ( operation.onclick ) {\n                        operation.onclick( item.encode_id );\n                    } else {\n                        self.execute( this.findItemByHtml( label ) );\n                    }\n                }\n            });\n        }\n    },\n\n    // Add a condition to the grid filter; this adds the condition and refreshes the grid.\n    add_filter_condition: function (name, value) {\n        // Do nothing is value is empty.\n        if (value === \"\") {\n            return false;\n        }\n\n        // Add condition to grid.\n        this.grid.add_filter(name, value, true);\n\n        // Add button that displays filter and provides a button to delete it.\n        var t = $(Templates.filter_element(name, value));\n        var self = this;\n        t.click(function() {\n            // Remove visible element.\n            $(this).remove();\n\n            // Remove filter condition.\n            self.remove_filter_condition(name, value);\n        });\n\n        // append to container\n        var container = this.$el.find('#' + name + '-filtering-criteria');\n        container.append(t);\n\n        // execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Remove a condition to the grid filter; this adds the condition and refreshes the grid.\n    remove_filter_condition: function (name, value) {\n        // Remove filter condition.\n        this.grid.remove_filter(name, value);\n\n        // Execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set sort condition for grid.\n    set_sort_condition: function (col_key) {\n        // Set new sort condition. New sort is col_key if sorting new column; if reversing sort on\n        // currently sorted column, sort is reversed.\n        var cur_sort = this.grid.get('sort_key');\n        var new_sort = col_key;\n        if (cur_sort.indexOf(col_key) !== -1) {\n            // Reverse sort.\n            if (cur_sort.substring(0, 1) !== '-') {\n                new_sort = '-' + col_key;\n            }\n        }\n\n        // Remove sort arrows elements.\n        this.$el.find('.sort-arrow').remove();\n\n        // Add sort arrow element to new sort column.\n        var sort_arrow = (new_sort.substring(0,1) == '-') ? '&uarr;' : '&darr;';\n        var t = $('<span>' + sort_arrow + '</span>').addClass('sort-arrow');\n\n        // Add to header\n        this.$el.find('#' + col_key + '-header').append(t);\n\n        // Update grid.\n        this.grid.set('sort_key', new_sort);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set new value for categorical filter.\n    set_categorical_filter: function (name, new_value) {\n        // Update filter hyperlinks to reflect new filter value.\n        var category_filter = this.grid.get('categorical_filters')[name],\n            cur_value = this.grid.get('filters')[name];\n        var self = this;\n        this.$el.find('.' + name + '-filter').each( function() {\n            var text = $.trim( $(this).text() );\n            var filter = category_filter[text];\n            var filter_value = filter[name];\n            if (filter_value == new_value) {\n                // Remove filter link since grid will be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                $(this).empty();\n                $(this).addClass('current-filter');\n                $(this).append(text);\n            } else if (filter_value == cur_value) {\n                // Add hyperlink for this filter since grid will no longer be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                $(this).empty();\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_categorical_filter( name, filter_value );\n                });\n                $(this).removeClass('current-filter');\n                $(this).append(t);\n            }\n        });\n\n        // Update grid.\n        this.grid.add_filter(name, new_value);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set page to view.\n    set_page: function (new_page) {\n        // Update page hyperlink to reflect new page.\n        var self = this;\n        this.$el.find('.page-link').each( function() {\n            var id = $(this).attr('id'),\n                page_num = parseInt( id.split('-')[2], 10 ), // Id has form 'page-link-<page_num>\n                cur_page = self.grid.get('cur_page'),\n                text;\n            if (page_num === new_page) {\n                // Remove link to page since grid will be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                text = $(this).children().text();\n                $(this).empty();\n                $(this).addClass('inactive-link');\n                $(this).text(text);\n            }\n            else if (page_num === cur_page) {\n                // Add hyperlink to this page since grid will no longer be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                text = $(this).text();\n                $(this).empty();\n                $(this).removeClass('inactive-link');\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_page(page_num);\n                });\n                $(this).append(t);\n            }\n        });\n\n        if (new_page === 'all') {\n            this.grid.set('cur_page', new_page);\n        } else {\n            this.grid.set('cur_page', parseInt(new_page, 10));\n        }\n        this.execute();\n    },\n\n    // confirmation/submission of operation request\n    submit_operation: function (operation_button, confirmation_text) {\n        // identify operation\n        var operation_name = $(operation_button).val();\n\n        // verify in any item is selected\n        var number_of_checked_ids = this.$el.find('input[name=\"id\"]:checked').length;\n        if (!number_of_checked_ids > 0) {\n            return false;\n        }\n\n        // Check to see if there's grid confirmation text for this operation\n        var operation = _.findWhere(this.grid.attributes.operations, {label: operation_name});\n        if (operation && !confirmation_text){\n            confirmation_text = operation.confirm || '';\n        }\n\n        // collect ids\n        var item_ids = [];\n        this.$el.find('input[name=id]:checked').each(function() {\n            item_ids.push( $(this).val() );\n        });\n\n        // execute operation\n        var options = {\n            operation           : operation_name,\n            id                  : item_ids,\n            confirmation_text   : confirmation_text\n        };\n        if ( operation.target == 'top' ) {\n            options = _.extend( options, {\n                href   : operation.href,\n                target : operation.target\n            });\n        }\n        this.execute( options );\n        return true;\n    },\n\n    check_all_items: function () {\n        var check = this.$('.grid-row-select-checkbox');\n        var state = this.$( '#check_all' ).prop( 'checked' );\n        _.each( check, function( c ) {\n            $( c ).prop( 'checked', state );\n        });\n        this.init_grid_elements();\n    },\n\n    // Go back to page one; this is useful when a filter is applied.\n    go_page_one: function () {\n        // Need to go back to page 1 if not showing all.\n        var cur_page = this.grid.get('cur_page');\n        if (cur_page !== null && cur_page !== undefined && cur_page !== 'all') {\n            this.grid.set('cur_page', 1);\n        }\n    },\n\n    //\n    // execute operations and hyperlink requests\n    //\n    execute: function (options) {\n        // get url\n        var id = null;\n        var href = null;\n        var operation = null;\n        var confirmation_text = null;\n        var target = null;\n\n        // check for options\n        if (options) {\n            // get options\n            href = options.href;\n            operation = options.operation;\n            id = options.id;\n            confirmation_text = options.confirmation_text;\n            target = options.target;\n\n            // check if input contains the operation tag\n            if (href !== undefined && href.indexOf('operation=') != -1) {\n                // Get operation, id in hyperlink's href.\n                var href_parts = href.split(\"?\");\n                if (href_parts.length > 1) {\n                    var href_parms_str = href_parts[1];\n                    var href_parms = href_parms_str.split(\"&\");\n                    for (var index = 0; index < href_parms.length; index++) {\n                        if (href_parms[index].indexOf('operation') != -1) {\n                            // Found operation parm; get operation value.\n                            operation = href_parms[index].split('=')[1];\n                            operation = operation.replace (/\\+/g, ' ');\n                        } else if (href_parms[index].indexOf('id') != -1) {\n                            // Found id parm; get id value.\n                            id = href_parms[index].split('=')[1];\n                        }\n                    }\n                }\n            }\n        }\n\n        // check for operation details\n        if (operation && id) {\n            // show confirmation box\n            if (confirmation_text && confirmation_text != '' && confirmation_text != 'None' && confirmation_text != 'null')\n                if(!confirm(confirmation_text))\n                    return false;\n\n            // use small characters for operation?!\n            operation = operation.toLowerCase();\n\n            // Update grid.\n            this.grid.set({\n                operation: operation,\n                item_ids: id\n            });\n\n            // Do operation. If operation cannot be performed asynchronously, redirect to location.\n            if ( target == 'top' ) {\n                window.top.location = href + '?' + $.param( this.grid.get_url_data() );\n            } else if ( this.grid.can_async_op(operation) || this.dict_format ) {\n                this.update_grid();\n            } else {\n                this.go_to(target, href);\n            }\n\n            // done\n            return false;\n        }\n\n        // refresh grid\n        if (href) {\n            this.go_to(target, href);\n            return false;\n        }\n\n        // refresh grid\n        if (this.grid.get('async') || this.dict_format) {\n            this.update_grid();\n        } else {\n            this.go_to(target, href);\n        }\n\n        // done\n        return false;\n    },\n\n    // go to url\n    go_to: function (target, href) {\n        // get aysnc status\n        var async = this.grid.get('async');\n        this.grid.set('async', false);\n\n        // get slide status\n        var advanced_search = this.$el.find('#advanced-search').is(':visible');\n        this.grid.set('advanced_search', advanced_search);\n\n        // get default url\n        if(!href) {\n            href = this.grid.get('url_base') + '?' + $.param(this.grid.get_url_data());\n        }\n\n        // clear grid of transient request attributes.\n        this.grid.set({\n            operation: undefined,\n            item_ids: undefined,\n            async: async\n        });\n        switch (target) {\n            case 'inbound':\n                // this currently assumes that there is only a single grid shown at a time\n                var $div = $('.grid-header').closest('.inbound');\n                if ($div.length !== 0) {\n                    $div.load(href);\n                    return;\n                }\n                break;\n            case 'top':\n                window.top.location = href;\n                break;\n            default:\n                window.location = href;\n        }\n    },\n\n    // Update grid.\n    update_grid: function () {\n        // If there's an operation, do POST; otherwise, do GET.\n        var method = (this.grid.get('operation') ? 'POST' : 'GET' );\n\n        // Show overlay to indicate loading and prevent user actions.\n        this.$el.find('.loading-elt-overlay').show();\n        var self = this;\n        $.ajax({\n            type: method,\n            url: self.grid.get('url_base'),\n            data: self.grid.get_url_data(),\n            error: function(response) { alert( 'Grid refresh failed' );},\n            success: function(response_text) {\n\n                // backup\n                var embedded = self.grid.get('embedded');\n                var insert = self.grid.get('insert');\n                var advanced_search = self.$el.find('#advanced-search').is(':visible');\n\n                // request new configuration\n                var json = self.dict_format ? response_text : $.parseJSON(response_text);\n\n                // update\n                json.embedded = embedded;\n                json.insert = insert;\n                json.advanced_search = advanced_search;\n\n                // Initialize new grid config\n                self.init_grid(json);\n\n                // Hide loading overlay.\n                self.$el.find('.loading-elt-overlay').hide();\n            },\n            complete: function() {\n                // Clear grid of transient request attributes.\n                self.grid.set({\n                    operation: undefined,\n                    item_ids: undefined\n                });\n            }\n        });\n    }\n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-view.js","// dependencies\ndefine([], function() {\n\n// grid model\nreturn Backbone.Model.extend({\n    defaults: {\n        url_base: '',\n        async: false,\n        async_ops: [],\n        categorical_filters: [],\n        filters: {},\n        sort_key: null,\n        show_item_checkboxes: false,\n        advanced_search: false,\n        cur_page: 1,\n        num_pages: 1,\n        operation: undefined,\n        item_ids: undefined\n    },\n\n    /**\n     * Return true if operation can be done asynchronously.\n     */\n    can_async_op: function(op) {\n        return _.indexOf(this.attributes.async_ops, op) !== -1;\n    },\n\n    /**\n     * Add filtering criterion.\n     */\n    add_filter: function(key, value, append) {\n        // Update URL arg with new condition.            \n        if (append) {\n            // Update or append value.\n            var cur_val = this.attributes.filters[key],\n                new_val;\n            if (cur_val === null || cur_val === undefined) {\n                new_val = value;\n            } else if (typeof(cur_val) == 'string') {\n                if (cur_val == 'All' || cur_val == value) {\n                    new_val = value;\n                } else {\n                    // Replace string with array.\n                    var values = [];\n                    values[0] = cur_val;\n                    values[1] = value;\n                    new_val = values;\n                }\n            } else {\n                // Current value is an array.\n                new_val = cur_val;\n                if ( new_val.indexOf( value ) === -1 ) {\n                    new_val.push(value);\n                }\n            }\n            this.attributes.filters[key] = new_val;\n        } \n        else {\n            // Replace value.\n            this.attributes.filters[key] = value;\n        }\n    },\n\n    /**\n     * Remove filtering criterion.\n     */\n    remove_filter: function(key, condition) {\n        var cur_val = this.attributes.filters[key];\n        if (cur_val === null || cur_val === undefined) {\n            return false;            \n        }\n\n        if (typeof(cur_val) === 'string') {\n            // overwrite/remove condition.\n            this.attributes.filters[key] = '';\n        } else {\n            // filter contains an array of conditions.\n            var condition_index = _.indexOf(cur_val, condition);\n            if (condition_index !== -1) {\n                cur_val[condition_index] = '';\n            }\n        }\n    },\n\n    /**\n     * Returns URL data for obtaining a new grid.\n     */\n    get_url_data: function() {\n        var url_data = {\n            async: this.attributes.async,\n            sort: this.attributes.sort_key,\n            page: this.attributes.cur_page,\n            show_item_checkboxes: this.attributes.show_item_checkboxes,\n            advanced_search: this.attributes.advanced_search\n        };\n\n        // Add operation, item_ids only if they have values.\n        if (this.attributes.operation) {\n            url_data.operation = this.attributes.operation;\n        }\n        if (this.attributes.item_ids) {\n            url_data.id = this.attributes.item_ids;\n        }\n\n        // Add filter arguments to data, placing \"f-\" in front of all arguments.\n        var self = this;\n        _.each(_.pairs(self.attributes.filters), function(k) {\n            url_data['f-' + k[0]] = k[1];\n        });\n        return url_data;\n    },\n    \n    // Return URL for obtaining a new grid\n    get_url: function (args) {\n        return this.get('url_base') + '?' + $.param(this.get_url_data()) + '&' + $.param(args);\n    }\n    \n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-model.js","// dependencies\ndefine(['utils/utils'], function(Utils) {\n\n// grid view templates\nreturn {\n    // template\n    grid: function(options) {\n        var tmpl = '';\n        if (options.embedded) {\n            tmpl = this.grid_header(options) + this.grid_table(options);\n        } else {\n            tmpl = '<div class=\"loading-elt-overlay\"></div>' +\n                    '<table>' +\n                        '<tr>' +\n                            '<td width=\"75%\">' +\n                                this.grid_header(options) +\n                            '</td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                        '<tr>' +\n                            '<td width=\"100%\" id=\"grid-message\" valign=\"top\"></td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                    '</table>' +\n                    this.grid_table(options);\n        }\n       \n        // add info text\n        if (options.info_text) {\n            tmpl += '<br><div class=\"toolParamHelp\" style=\"clear: both;\">' + options.info_text + '</div>';\n        }\n       \n        // return\n        return tmpl;\n    },\n    \n    // template\n    grid_table: function(options) {\n        return  '<form method=\"post\" onsubmit=\"return false;\">' +\n                    '<table id=\"grid-table\" class=\"grid\">' +\n                        '<thead id=\"grid-table-header\"></thead>' +\n                        '<tbody id=\"grid-table-body\"></tbody>' +\n                        '<tfoot id=\"grid-table-footer\"></tfoot>' +\n                    '</table>' +\n                '</form>';\n    },\n    \n    // template\n    grid_header: function(options) {\n        var tmpl =  '<div class=\"grid-header\">';\n        if (!options.embedded) {\n            tmpl +=     '<h2>' + options.title + '</h2>';\n        }\n        if (options.global_actions) {\n            tmpl +=     '<ul class=\"manage-table-actions\">';\n            var show_popup = (options.global_actions.length >= 3);\n            if (show_popup) {\n                tmpl +=     '<li><a class=\"action-button\" id=\"popup-global-actions\" class=\"menubutton\">Actions</a></li>' +\n                            '<div popupmenu=\"popup-global-actions\">';\n            }\n            for (var i in options.global_actions) {\n                var action = options.global_actions[i];\n                tmpl +=         '<li>' +\n                                    '<a class=\"action-button use-target\" target=\"' + action.target + '\" href=\"' + action.url_args + '\" onclick=\"return false;\" >' + action.label + '</a>' +\n                                '</li>';\n            }\n            if (show_popup) {\n                tmpl +=     '</div>';\n            }\n            tmpl +=     '</ul>';\n        }\n        if (options.insert) {\n            tmpl +=     options.insert;\n        }\n       \n        // add grid filters\n        tmpl +=     this.grid_filters(options);\n        tmpl += '</div>'\n        \n        // return template\n        return tmpl;\n    },\n\n    // template\n    header: function(options) {\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        // add checkbox\n        if (options.show_item_checkboxes) {\n            tmpl +=         '<th>';\n            if (options.items.length > 0) {\n                tmpl +=         '<input type=\"checkbox\" id=\"check_all\" name=select_all_checkbox value=\"true\">' +\n                                '<input type=\"hidden\" name=select_all_checkbox value=\"true\">';\n            }\n            tmpl +=         '</th>';\n        }\n        \n        // create header elements\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.visible) {\n                tmpl +=     '<th id=\"' + column.key + '-header\">';\n                if (column.href) {\n                    tmpl +=     '<a href=\"' + column.href + '\" class=\"sort-link\" sort_key=\"' + column.key + '\">' + column.label + '</a>';\n                } else {\n                    tmpl +=     column.label;\n                }\n                tmpl +=         '<span class=\"sort-arrow\">' + column.extra + '</span>' +\n                            '</th>';\n            }\n        }\n        \n        // finalize\n        tmpl +=        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template\n    body: function(options) {\n        // initialize\n        var tmpl = '';\n        var num_rows_rendered = 0;\n        var items_length = options.items.length;\n        \n        // empty grid?\n        if (items_length == 0) {\n            // No results.\n            tmpl += '<tr><td colspan=\"100\"><em>No Items</em></td></tr>';\n            num_rows_rendered = 1;\n        }\n        \n        // create rows\n        for (var i in options.items) {\n        \n            // encode ids\n            var item = options.items[i];\n            var encoded_id = item.encode_id;\n            var popupmenu_id = 'grid-' + i + '-popup';\n            \n            // Tag current\n            tmpl += '<tr ';\n            if (options.current_item_id == item.id) {\n                tmpl += 'class=\"current\"';\n            }\n            tmpl += '>';\n            \n            // Item selection column\n            if (options.show_item_checkboxes) {\n                tmpl += '<td style=\"width: 1.5em;\">' +\n                            '<input type=\"checkbox\" name=\"id\" value=\"' + encoded_id + '\" id=\"' + encoded_id + '\" class=\"grid-row-select-checkbox\" />' +\n                        '</td>';\n            }\n            \n            // Data columns\n            for (var j in options.columns) {\n                var column = options.columns[j];\n                if (column.visible) {\n                    // Nowrap\n                    var nowrap = '';\n                    if (column.nowrap) {\n                        nowrap = 'style=\"white-space:nowrap;\"';\n                    }\n                    \n                    // get column settings\n                    var column_settings = item.column_config[column.label];\n                    \n                    // load attributes\n                    var link = column_settings.link;\n                    var value = column_settings.value;\n                    var target = column_settings.target;\n                        \n                    // unescape value\n                    if (jQuery.type( value ) === 'string') {\n                        value = value.replace(/\\/\\//g, '/');\n                    }\n                    \n                    // Attach popup menu?\n                    var id = '';\n                    var cls = '';\n                    if (column.attach_popup) {\n                        id = 'grid-' + i + '-popup';\n                        cls = 'menubutton';\n                        if (link != '') {\n                            cls += ' split';\n                        }\n                        cls += ' popup';\n                    }\n                    \n                    // Check for row wrapping\n                    tmpl += '<td ' + nowrap + '>';\n                \n                    // Link\n                    if (link) {\n                        if (options.operations.length != 0) {\n                            tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\" style=\"float: left;\">';\n                        }\n                        tmpl += '<a class=\"menubutton-label use-target\" target=\"' + target + '\" href=\"' + link + '\" onclick=\"return false;\">' + value + '</a>';\n                        if (options.operations.length != 0) {\n                            tmpl += '</div>';\n                        }\n                    } else {\n                        tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\"><label id=\"' + column.label_id_prefix + encoded_id + '\" for=\"' + encoded_id + '\">' + (value || '') + '</label></div>';\n                    }\n                    tmpl += '</td>';\n                }\n            }\n            tmpl += '</tr>';\n            num_rows_rendered++;\n        }\n        return tmpl;\n    },\n\n    // template\n    footer: function(options) {\n    \n        // create template string\n        var tmpl = '';\n        \n        // paging\n        if (options.use_paging && options.num_pages > 1) {\n            // get configuration\n            var num_page_links      = options.num_page_links;\n            var cur_page_num        = options.cur_page_num;\n            var num_pages           = options.num_pages;\n            \n            // First pass on min page.\n            var page_link_range     = num_page_links / 2;\n            var min_page            = cur_page_num - page_link_range\n            var min_offset          = 0;\n            if (min_page <= 0) {\n                // Min page is too low.\n                min_page = 1;\n                min_offset = page_link_range - ( cur_page_num - min_page );\n            }\n            \n            // Set max page.\n            var max_range = page_link_range + min_offset;\n            var max_page = cur_page_num + max_range;\n            var max_offset;\n            if (max_page <= num_pages) {\n                // Max page is fine.\n                max_offset = 0;\n            } else {\n                // Max page is too high.\n                max_page = num_pages;\n                // +1 to account for the +1 in the loop below.\n                max_offset = max_range - ( max_page + 1 - cur_page_num );\n            }\n            \n            // Second and final pass on min page to add any unused\n            // offset from max to min.\n            if (max_offset != 0) {\n                min_page -= max_offset\n                if (min_page < 1) {\n                    min_page = 1\n                }\n            }\n            \n            // template header\n            tmpl += '<tr id=\"page-links-row\">';\n            if (options.show_item_checkboxes) {\n                tmpl += '<td></td>';\n            }\n            tmpl +=     '<td colspan=\"100\">' +\n                            '<span id=\"page-link-container\">' +\n                                'Page:';\n            \n            if (min_page > 1) {\n                tmpl +=         '<span class=\"page-link\" id=\"page-link-1\"><a href=\"javascript:void(0);\" page_num=\"1\" onclick=\"return false;\">1</a></span> ...';\n            }\n            \n            // create page urls\n            for (var page_index = min_page; page_index < max_page + 1; page_index++) {\n                \n                if (page_index == options.cur_page_num) {\n                    tmpl +=     '<span class=\"page-link inactive-link\" id=\"page-link-' + page_index + '\">' + page_index + '</span>';\n                } else {\n                    tmpl +=     '<span class=\"page-link\" id=\"page-link-' + page_index + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + page_index + '\">' + page_index + '</a></span>';\n                }\n            }\n            \n            // show last page\n            if (max_page < num_pages) {\n                    tmpl +=     '...' +\n                                '<span class=\"page-link\" id=\"page-link-' + num_pages + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + num_pages + '\">' + num_pages + '</a></span>';\n            }\n            tmpl +=         '</span>';\n            \n            // Show all link\n            tmpl +=         '<span class=\"page-link\" id=\"show-all-link-span\"> | <a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"all\">Show All</a></span>' +\n                        '</td>' +\n                    '</tr>';\n        }\n        \n        // Grid operations for multiple items.\n        if (options.show_item_checkboxes) {\n            // start template\n            tmpl += '<tr>' +\n                        '<input type=\"hidden\" id=\"operation\" name=\"operation\" value=\"\">' +\n                        '<td></td>' +\n                        '<td colspan=\"100\">' +\n                            'For <span class=\"grid-selected-count\"></span> selected items: ';\n            \n            // configure buttons for operations\n            for (var i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.allow_multiple) {\n                    tmpl += '<input type=\"button\" value=\"' + operation.label + '\" class=\"operation-button action-button\">&nbsp;';\n                }\n            }\n            \n            // finalize template\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n    \n        // count global operations\n        var found_global = false;\n        for (i in options.operations) {\n            if (options.operations[i].global_operation) {\n                found_global = true;\n                break;\n            }\n        }\n    \n        // add global operations\n        if (found_global) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">';\n            for (i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.global_operation) {\n                    tmpl += '<a class=\"action-button\" href=\"' + operation.global_operation + '\">' + operation.label + '</a>';\n                }\n            }\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n        \n        // add legend\n        if (options.legend) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">' + options.legend + '</td>' +\n                    '</tr>';\n        }\n        \n        // return\n        return tmpl;\n    },\n        \n    // template\n    message: function(options) {\n        var status = options.status == 'success' ? 'done' : options.status;\n        return  '<p>' +\n                    '<div class=\"' + status + 'message transient-message\">' + _.escape( options.message ) + '</div>' +\n                    '<div style=\"clear: both\"></div>' +\n                '</p>';\n    },\n    \n    // template\n    grid_filters: function (options) {\n    \n        // get filters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n\n        // show advanced search if flag set or if there are filters for advanced search fields\n        var advanced_search_display = 'none';\n        if (options.advanced_search) {\n            advanced_search_display = 'block';\n        }\n        \n        // identify columns with advanced filtering\n        var show_advanced_search_link = false;\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                var column_key = column.key;\n                var f_key = filters[column_key];\n                var d_key = default_filter_dict[column_key];\n                if (f_key && d_key && f_key != d_key) {\n                    advanced_search_display = 'block';\n                }\n                show_advanced_search_link = true;\n            }\n        }\n        \n        // hide standard search if advanced is shown\n        var standard_search_display = 'block';\n        if (advanced_search_display == 'block') {\n            standard_search_display = 'none';\n        }\n\n        //\n        // standard search\n        //\n        var tmpl =  '<div id=\"standard-search\" style=\"display: ' + standard_search_display + ';\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"padding: 0;\">' +\n                                    '<table>';\n        \n        // add standard filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'standard') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize standard search\n        tmpl +=                     '</table>' +\n                                '</td>' +\n                            '</tr>' +\n                            '<tr>' +\n                                '<td>';\n                \n        // show advanced search link in standard display\n        if (show_advanced_search_link) {\n            tmpl +=                 '<a href=\"\" class=\"advanced-search-toggle\">Advanced Search</a>';\n        }\n        \n        // finalize standard search display\n        tmpl +=                 '</td>' +\n                            '</tr>' +\n                        '</table>' +\n                    '</div>';\n    \n        //\n        // advanced search\n        //\n        tmpl +=     '<div id=\"advanced-search\" style=\"display: ' + advanced_search_display + '; margin-top: 5px; border: 1px solid #ccc;\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"text-align: left\" colspan=\"100\">' +\n                                    '<a href=\"\" class=\"advanced-search-toggle\">Close Advanced Search</a>' +\n                                '</td>' +\n                            '</tr>';\n        \n        // add advanced filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize advanced search template\n        tmpl +=         '</table>' +\n                    '</div>';\n\n        // return template\n        return tmpl;\n    },\n    \n    // template\n    grid_column_filter: function(options, column) {\n        \n        // collect parameters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n        var column_label = column.label;\n        var column_key = column.key;\n        if (column.filterable == 'advanced') {\n            column_label = column_label.toLowerCase();\n        }\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        if (column.filterable == 'advanced') {\n            tmpl +=         '<td align=\"left\" style=\"padding-left: 10px\">' + column_label + ':</td>';\n        }\n        tmpl +=             '<td style=\"padding-bottom: 1px;\">';\n        if (column.is_text) {\n            tmpl +=             '<form class=\"text-filter-form\" column_key=\"' + column_key + '\" action=\"' + options.url + '\" method=\"get\" >';\n            // Carry forward filtering criteria with hidden inputs.\n            for (i in options.columns) {\n                var temp_column = options.columns[i];\n                var filter_value = filters[temp_column.key];\n                if (filter_value) {\n                    if (filter_value != 'All') {\n                        if (temp_column.is_text) {\n                            filter_value = JSON.stringify( filter_value )\n                        }\n                        tmpl +=     '<input type=\"hidden\" id=\"' + temp_column.key + '\" name=\"f-' + temp_column.key + '\" value=\"' + filter_value + '\"/>';\n                    }\n                }\n            }\n            // Print current filtering criteria and links to delete.\n            tmpl +=                 '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add filters\n            var column_filter = filters[column_key];\n            if (column_filter) {\n                // identify type\n                var type = jQuery.type(column_filter);\n                \n                // single filter value\n                if (type == 'string') {\n                    if (column_filter != 'All') {\n                        // append template\n                        tmpl +=         this.filter_element(column_key, column_filter);\n                    }\n                }\n                \n                // multiple filter values\n                if (type == 'array') {\n                    for (var i in column_filter ) {\n                        // get filter\n                        var filter = column_filter[i];\n                        \n                        // copy filters and remove entry\n                        var params = column_filter;\n                        params = params.slice(i);\n\n                        // append template\n                        tmpl +=         this.filter_element(column_key, filter);\n                    }\n                }\n            }\n            \n            // close span\n            tmpl +=                 '</span>';\n            \n            // Set value, size of search input field. Minimum size is 20 characters.\n            var value = '';\n            if (column.filterable == 'standard') {\n                value = column.label.toLowerCase();\n                var size = value.length;\n                if (size < 20) {\n                    size = 20;\n                }\n                // +4 to account for space after placeholder\n                size = size + 4;\n            }\n            \n            // print input field for column\n            tmpl +=                 '<span class=\"search-box\">' +\n                                        '<input class=\"search-box-input\" id=\"input-' + column_key + '-filter\" name=\"f-' + column_key + '\" type=\"text\" placeholder=\"' + value + '\" size=\"' + size + '\"/>' +\n                                        '<button type=\"submit\" style=\"background: transparent; border: none; padding: 4px; margin: 0px;\">' +\n                                            '<i class=\"fa fa-search\"></i>' +\n                                        '</button>' +\n                                    '</span>' +\n                                '</form>';\n        } else {\n            // filter criteria\n            tmpl +=             '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add category filters\n            var seperator = false;\n            for (var cf_label in options.categorical_filters[column_key]) {\n                // get category filter\n                var cf = options.categorical_filters[column_key][cf_label];\n                \n                // each filter will have only a single argument, so get that single argument\n                var cf_key = '';\n                var cf_arg = '';\n                for (var key in cf) {\n                    cf_key = key;\n                    cf_arg = cf[key];\n                }\n                \n                // add seperator\n                if (seperator) {\n                    tmpl += ' | ';\n                }\n                seperator = true;\n                \n                // add category\n                var filter = filters[column_key];\n                if (filter && cf[column_key] && filter == cf_arg) {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter current-filter\">' + cf_label + '</span>';\n                } else {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter\">' +\n                                        '<a href=\"javascript:void(0);\" filter_key=\"' + cf_key + '\" filter_val=\"' + cf_arg + '\">' + cf_label + '</a>' +\n                                    '</span>';\n                }\n            }\n            tmpl +=             '</span>';\n        }\n        tmpl +=             '</td>' +\n                        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template for filter items\n    filter_element: function(filter_key, filter_value) {\n        filter_value = Utils.sanitize(filter_value);\n        return  '<span class=\"text-filter-val\">' + filter_value +\n                    '<a href=\"javascript:void(0);\" filter_key=\"' + filter_key + '\" filter_val=\"' + filter_value + '\">' +\n                        '<i class=\"fa fa-times\" style=\"padding-left: 5px; padding-bottom: 6px;\"/>' +\n                    '</a>' +\n                '</span>';\n\n    }\n};\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-template.js","define([\n    //jquery\n    //backbone\n], function(){\n// =============================================================================\n/**\n * view for a popup menu\n */\nvar PopupMenu = Backbone.View.extend({\n//TODO: maybe better as singleton off the Galaxy obj\n    /** Cache the desired button element and options, set up the button click handler\n     *  NOTE: attaches this view as HTML/jQ data on the button for later use.\n     */\n    initialize: function( $button, options ){\n        // default settings\n        this.$button = $button;\n        if( !this.$button.length ){\n            this.$button = $( '<div/>' );\n        }\n        this.options = options || [];\n        this.$button.data( 'popupmenu', this );\n\n        // set up button click -> open menu behavior\n        var menu = this;\n        this.$button.click( function( event ){\n            // if there's already a menu open, remove it\n            $( '.popmenu-wrapper' ).remove();\n            menu._renderAndShow( event );\n            return false;\n        });\n    },\n\n    // render the menu, append to the page body at the click position, and set up the 'click-away' handlers, show\n    _renderAndShow: function( clickEvent ){\n        this.render();\n        this.$el.appendTo( 'body' ).css( this._getShownPosition( clickEvent )).show();\n        this._setUpCloseBehavior();\n    },\n\n    // render the menu\n    // this menu doesn't attach itself to the DOM ( see _renderAndShow )\n    render: function(){\n        // render the menu body absolute and hidden, fill with template\n        this.$el.addClass( 'popmenu-wrapper' ).hide()\n            .css({ position : 'absolute' })\n            .html( this.template( this.$button.attr( 'id' ), this.options ));\n\n        // set up behavior on each link/anchor elem\n        if( this.options.length ){\n            var menu = this;\n            //precondition: there should be one option per li\n            this.$el.find( 'li' ).each( function( i, li ){\n                var option = menu.options[i];\n\n                // if the option has 'func', call that function when the anchor is clicked\n                if( option.func ){\n                    $( this ).children( 'a.popupmenu-option' ).click( function( event ){\n                        option.func.call( menu, event, option );\n                        // We must preventDefault otherwise clicking \"cancel\"\n                        // on a purge or something still navigates and causes\n                        // the action.\n                        event.preventDefault();\n                        // bubble up so that an option click will call the close behavior\n                    });\n                }\n            });\n        }\n        return this;\n    },\n\n    template : function( id, options ){\n        return [\n            '<ul id=\"', id, '-menu\" class=\"dropdown-menu\">', this._templateOptions( options ), '</ul>'\n        ].join( '' );\n    },\n\n    _templateOptions : function( options ){\n        if( !options.length ){\n            return '<li>(no options)</li>';\n        }\n        return _.map( options, function( option ){\n            if( option.divider ){\n                return '<li class=\"divider\"></li>';\n            } else if( option.header ){\n                return [ '<li class=\"head\"><a href=\"javascript:void(0);\">', option.html, '</a></li>' ].join( '' );\n            }\n            var href   = option.href || 'javascript:void(0);',\n                target = ( option.target  )?( ' target=\"' + option.target + '\"' ):( '' ),\n                check  = ( option.checked )?( '<span class=\"fa fa-check\"></span>' ):( '' );\n            return [\n                '<li><a class=\"popupmenu-option\" href=\"', href, '\"', target, '>',\n                    check, option.html,\n                '</a></li>'\n            ].join( '' );\n        }).join( '' );\n    },\n\n    // get the absolute position/offset for the menu\n    _getShownPosition : function( clickEvent ){\n\n        // display menu horiz. centered on click...\n        var menuWidth = this.$el.width();\n        var x = clickEvent.pageX - menuWidth / 2 ;\n\n        // adjust to handle horiz. scroll and window dimensions ( draw entirely on visible screen area )\n        x = Math.min( x, $( document ).scrollLeft() + $( window ).width() - menuWidth - 5 );\n        x = Math.max( x, $( document ).scrollLeft() + 5 );\n        return {\n            top: clickEvent.pageY,\n            left: x\n        };\n    },\n\n    // bind an event handler to all available frames so that when anything is clicked\n    // the menu is removed from the DOM and the event handler unbinds itself\n    _setUpCloseBehavior: function(){\n        var menu = this;\n//TODO: alternately: focus hack, blocking overlay, jquery.blockui\n\n        // function to close popup and unbind itself\n        function closePopup( event ){\n            $( document ).off( 'click.close_popup' );\n            if( window && window.parent !== window ){\n                try {\n                    $( window.parent.document ).off( \"click.close_popup\" );\n                } catch( err ){}\n            } else {\n                try {\n                    $( 'iframe#galaxy_main' ).contents().off( \"click.close_popup\" );\n                } catch( err ){}\n            }\n            menu.remove();\n        }\n\n        $( 'html' ).one( \"click.close_popup\", closePopup );\n        if( window && window.parent !== window ){\n            try {\n                $( window.parent.document ).find( 'html' ).one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        } else {\n            try {\n                $( 'iframe#galaxy_main' ).contents().one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        }\n    },\n\n    // add a menu option/item at the given index\n    addItem: function( item, index ){\n        // append to end if no index\n        index = ( index >= 0 ) ? index : this.options.length;\n        this.options.splice( index, 0, item );\n        return this;\n    },\n\n    // remove a menu option/item at the given index\n    removeItem: function( index ){\n        if( index >=0 ){\n            this.options.splice( index, 1 );\n        }\n        return this;\n    },\n\n    // search for a menu option by its html\n    findIndexByHtml: function( html ){\n        for( var i = 0; i < this.options.length; i++ ){\n            if( _.has( this.options[i], 'html' ) && ( this.options[i].html === html )){\n                return i;\n            }\n        }\n        return null;\n    },\n\n    // search for a menu option by its html\n    findItemByHtml: function( html ){\n        return this.options[( this.findIndexByHtml( html ))];\n    },\n\n    // string representation\n    toString: function(){\n        return 'PopupMenu';\n    }\n});\n/** shortcut to new for when you don't need to preserve the ref */\nPopupMenu.create = function _create( $button, options ){\n    return new PopupMenu( $button, options );\n};\n\n// -----------------------------------------------------------------------------\n// the following class functions are bridges from the original make_popupmenu and make_popup_menus\n// to the newer backbone.js PopupMenu\n\n/** Create a PopupMenu from simple map initial_options activated by clicking button_element.\n *      Converts initial_options to object array used by PopupMenu.\n *  @param {jQuery|DOMElement} button_element element which, when clicked, activates menu\n *  @param {Object} initial_options map of key -> values, where\n *      key is option text, value is fn to call when option is clicked\n *  @returns {PopupMenu} the PopupMenu created\n */\nPopupMenu.make_popupmenu = function( button_element, initial_options ){\n    var convertedOptions = [];\n    _.each( initial_options, function( optionVal, optionKey ){\n        var newOption = { html: optionKey };\n\n        // keys with null values indicate: header\n        if( optionVal === null ){ // !optionVal? (null only?)\n            newOption.header = true;\n\n        // keys with function values indicate: a menu option\n        } else if( jQuery.type( optionVal ) === 'function' ){\n            newOption.func = optionVal;\n        }\n        //TODO:?? any other special optionVals?\n        // there was no divider option originally\n        convertedOptions.push( newOption );\n    });\n    return new PopupMenu( $( button_element ), convertedOptions );\n};\n\n/** Find all anchors in $parent (using selector) and covert anchors into a PopupMenu options map.\n *  @param {jQuery} $parent the element that contains the links to convert to options\n *  @param {String} selector jq selector string to find links\n *  @returns {Object[]} the options array to initialize a PopupMenu\n */\n//TODO: lose parent and selector, pass in array of links, use map to return options\nPopupMenu.convertLinksToOptions = function( $parent, selector ){\n    $parent = $( $parent );\n    selector = selector || 'a';\n    var options = [];\n    $parent.find( selector ).each( function( elem, i ){\n        var option = {}, $link = $( elem );\n\n        // convert link text to the option text (html) and the href into the option func\n        option.html = $link.text();\n        if( $link.attr( 'href' ) ){\n            var linkHref    = $link.attr( 'href' ),\n                linkTarget  = $link.attr( 'target' ),\n                confirmText = $link.attr( 'confirm' );\n\n            option.func = function(){\n                // if there's a \"confirm\" attribute, throw up a confirmation dialog, and\n                //  if the user cancels - do nothing\n                if( ( confirmText ) && ( !confirm( confirmText ) ) ){ return; }\n\n                // if there's no confirm attribute, or the user accepted the confirm dialog:\n                switch( linkTarget ){\n                    // relocate the center panel\n                    case '_parent':\n                        window.parent.location = linkHref;\n                        break;\n\n                    // relocate the entire window\n                    case '_top':\n                        window.top.location = linkHref;\n                        break;\n\n                    // relocate this panel\n                    default:\n                        window.location = linkHref;\n                }\n            };\n        }\n        options.push( option );\n    });\n    return options;\n};\n\n/** Create a single popupmenu from existing DOM button and anchor elements\n *  @param {jQuery} $buttonElement the element that when clicked will open the menu\n *  @param {jQuery} $menuElement the element that contains the anchors to convert into a menu\n *  @param {String} menuElementLinkSelector jq selector string used to find anchors to be made into menu options\n *  @returns {PopupMenu} the PopupMenu (Backbone View) that can render, control the menu\n */\nPopupMenu.fromExistingDom = function( $buttonElement, $menuElement, menuElementLinkSelector ){\n    $buttonElement = $( $buttonElement );\n    $menuElement = $( $menuElement );\n    var options = PopupMenu.convertLinksToOptions( $menuElement, menuElementLinkSelector );\n    // we're done with the menu (having converted it to an options map)\n    $menuElement.remove();\n    return new PopupMenu( $buttonElement, options );\n};\n\n/** Create all popupmenus within a document or a more specific element\n *  @param {DOMElement} parent the DOM element in which to search for popupmenus to build (defaults to document)\n *  @param {String} menuSelector jq selector string to find popupmenu menu elements (defaults to \"div[popupmenu]\")\n *  @param {Function} buttonSelectorBuildFn the function to build the jq button selector.\n *      Will be passed $menuElement, parent.\n *      (Defaults to return '#' + $menuElement.attr( 'popupmenu' ); )\n *  @returns {PopupMenu[]} array of popupmenus created\n */\nPopupMenu.make_popup_menus = function( parent, menuSelector, buttonSelectorBuildFn ){\n    parent = parent || document;\n    // orig. Glx popupmenu menus have a (non-std) attribute 'popupmenu'\n    //  which contains the id of the button that activates the menu\n    menuSelector = menuSelector || 'div[popupmenu]';\n    // default to (orig. Glx) matching button to menu by using the popupmenu attr of the menu as the id of the button\n    buttonSelectorBuildFn = buttonSelectorBuildFn || function( $menuElement, parent ){\n        return '#' + $menuElement.attr( 'popupmenu' );\n    };\n\n    // aggregate and return all PopupMenus\n    var popupMenusCreated = [];\n    $( parent ).find( menuSelector ).each( function(){\n        var $menuElement    = $( this ),\n            $buttonElement  = $( parent ).find( buttonSelectorBuildFn( $menuElement, parent ) );\n        popupMenusCreated.push( PopupMenu.fromDom( $buttonElement, $menuElement ) );\n        $buttonElement.addClass( 'popup' );\n    });\n    return popupMenusCreated;\n};\n\n\n// =============================================================================\n    return PopupMenu;\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/popup-menu.js","var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    QUERY_STRING = require( 'utils/query-string-parsing' ),\n    Ui = require( 'mvc/ui/ui-misc' );\n\nvar Router = Backbone.Router.extend({\n    // TODO: not many client routes at this point - fill and remove from server.\n    // since we're at root here, this may be the last to be routed entirely on the client.\n    initialize : function( page, options ){\n        this.page = page;\n        this.options = options;\n    },\n\n    /** helper to push a new navigation state */\n    push: function( url, data ) {\n        data = data || {};\n        data.__identifer = Math.random().toString( 36 ).substr( 2 );\n        if ( !$.isEmptyObject( data ) ) {\n            url += url.indexOf( '?' ) == -1 ? '?' : '&';\n            url += $.param( data , true );\n        }\n        Galaxy.params = {};\n        this.navigate( url, { 'trigger': true } );\n    },\n\n    /** override to parse query string into obj and send to each route */\n    execute: function( callback, args, name ){\n        Galaxy.debug( 'router execute:', callback, args, name );\n        var queryObj = QUERY_STRING.parse( args.pop() );\n        args.push( queryObj );\n        if( callback ){\n            if ( this.authenticate( args, name ) ) {\n                callback.apply( this, args );\n            } else {\n                this.access_denied();\n            }\n        }\n    },\n\n    authenticate: function( args, name ) {\n        return true;\n    },\n\n    access_denied: function() {\n        this.page.display( new Ui.Message( { status: 'danger', message: 'You must be logged in with proper credentials to make this request.', persistent: true } ) );\n    }\n});\n\nmodule.exports = Router\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/layout/router.js"],"sourceRoot":""}