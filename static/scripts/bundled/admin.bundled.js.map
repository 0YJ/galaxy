{"version":3,"sources":["webpack:///admin.bundled.js","webpack:///./galaxy/scripts/apps/admin.js","webpack:///./galaxy/scripts/mvc/ui/ui-misc.js?fd98*","webpack:///./galaxy/scripts/mvc/ui/ui-portlet.js?0568*","webpack:///./galaxy/scripts/mvc/ui/ui-buttons.js?4ced*","webpack:///./galaxy/scripts/mvc/form/form-view.js?db3b*","webpack:///./galaxy/scripts/mvc/grid/grid-view.js?be4f*","webpack:///./galaxy/scripts/mvc/ui/ui-list.js?ecf1*","webpack:///./galaxy/scripts/mvc/ui/ui-options.js?405a*","webpack:///./galaxy/scripts/mvc/ui/ui-select-default.js?402d*","webpack:///./galaxy/scripts/mvc/ui/popup-menu.js?a948*","webpack:///./galaxy/scripts/mvc/form/form-data.js?6144*","webpack:///./galaxy/scripts/mvc/ui/ui-table.js?4ded*","webpack:///./galaxy/scripts/mvc/form/form-input.js?af7f*","webpack:///./galaxy/scripts/mvc/form/form-parameters.js?0ee1*","webpack:///./galaxy/scripts/mvc/form/form-repeat.js?7c22*","webpack:///./galaxy/scripts/mvc/form/form-section.js?2ccb*","webpack:///./galaxy/scripts/mvc/grid/grid-model.js?e551*","webpack:///./galaxy/scripts/mvc/grid/grid-template.js?73e1*","webpack:///./galaxy/scripts/mvc/ui/ui-color-picker.js?fa1d*","webpack:///./galaxy/scripts/mvc/ui/ui-drilldown.js?de06*","webpack:///./galaxy/scripts/mvc/ui/ui-select-content.js?e092*","webpack:///./galaxy/scripts/mvc/ui/ui-select-ftp.js?cf41*","webpack:///./galaxy/scripts/mvc/ui/ui-select-library.js?fd76*","webpack:///./galaxy/scripts/mvc/ui/ui-slider.js?93a7*","webpack:///./galaxy/scripts/layout/router.js?1c11","webpack:///./galaxy/scripts/mvc/form/form-wrapper.js?ceac","webpack:///./galaxy/scripts/apps/panels/admin-panel.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_","jQuery","$","GalaxyApp","AdminPanel","FormWrapper","GridView","QueryStringParsing","Router","Page","window","app","options","bootstrapped","Galaxy","debug","AdminRouter","extend","routes","(/)admin(/)users","(/)admin(/)roles","(/)admin(/)forms(/)(:form_id)","authenticate","args","name","user","id","get","show_users","this","page","display","url_base","root","url_data","params","dict_format","show_roles","show_forms","form_id","form_defs","reset_user_password","title","url","icon","submit_title","redirect","manage_roles_and_groups_for_user","rename_role","View","config","active_view","Left","call","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Backbone","Utils","Select","Slider","Options","Drilldown","Buttons","Modal","Label","tagName","initialize","model","Model","setElement","listenTo","render","new_title","set","value","$el","removeClass","addClass","html","Message","message","status","cls","persistent","fade","update","messageForDisplay","timeout","clearTimeout","self","setTimeout","fadeOut","escape","UnescapedMessage","Input","type","placeholder","disabled","readonly","visible","area","color","style","events","input","new_val","undefined","attr","css","datalist","isArray","length","autocomplete","source","request","response","change","_onchange","val","each","attr_name","removeAttr","Hidden","append","$info","$hidden","show","text","hide","Upload","$file","$text","$wait","on","e","_readFile","file","target","files","reader","FileReader","onload","wait","result","readAsText","Button","ButtonDefault","ButtonIcon","ButtonCheck","ButtonMenu","ButtonLink","RadioButton","Checkbox","Radio","apply","Ui","uid","buttons","body","scrollable","nopadding","operations","collapsible","collapsible_button","collapsed","onchange_title","_template","$body","$title_text","$title_icon","$header","$content","$backdrop","$buttons","$operations","tooltip","onclick","attributes","off","collapse","expand","prop","make_text_editable","on_finish","empty","item","header","fadeIn","enableButton","find","disableButton","hideOperation","showOperation","setOperation","callback","height","setIcon","disable","enable","floating","wait_text","wait_cls","percentage","$icon","$title","$progress","$progress_bar","placement","width","unwait","href","icons","onchange","total","$button","$menu","pull","onunload","tag","collection","Collection","$root","float","where","preventDefault","remove","submodel","suboptions","$link","divider","addMenu","add","merge","Portlet","FormSection","FormData","initial_errors","always_refresh","new_model","data","matchModel","node","input_id","input_list","isEqual","field","field_list","new_options","indexOf","i","opt","push","label","trigger","emit","active","is_dynamic","highlight","silent","input_element","element_list","error","portlet","$panel","parents","filter","first","animate","scrollTop","offset","top","errors","error_messages","matchResponse","Manager","_renderForm","create","current_check","checksum","refresh_on_change","new_check","reset","section","inputs","ajaxSettings","traditional","GridModel","Templates","PopupMenu","grid","grid_config","add_tag_to_grid_filter","tag_name","tag_value","advanced_search","is","slideToggle","add_filter_condition","items","filters","v","k","ajax","param","success","embedded","init_grid","use_panels","padding","overflow","handle_refresh","refresh_frames","inArray","currHistoryPanel","loadCurrentHistory","replace","footer","use_hide_message","init_grid_elements","init_grid_controls","init_refresh_on_change","click","submit_operation","select","keyup","set_sort_condition","submit","column_key","text_input_obj","text_input","parent","remove_filter_condition","set_categorical_filter","check_all_items","checkboxes","check_count","update_checked","rating","set_page","execute","items_length","index","button","popup","operation","_add_operation","settings","operation_config","allowed","allow_popup","addItem","url_args","confirmation_text","confirm","func","encode_id","findItemByHtml","add_filter","t","filter_element","container","go_page_one","remove_filter","col_key","cur_sort","new_sort","substring","sort_arrow","new_value","category_filter","cur_value","trim","filter_value","new_page","page_num","parseInt","split","cur_page","children","operation_button","operation_name","number_of_checked_ids","findWhere","item_ids","check","state","c","href_parts","href_parms_str","href_parms","toLowerCase","location","get_url_data","can_async_op","update_grid","go_to","async","$div","closest","load","method","alert","response_text","insert","json","parseJSON","complete","multiple","optional","v_id","v_name","_refresh","lst","isEmpty","_templateRow","Base","error_text","_changeValue","_changeWait","_changeData","_changeVisible","$message","$options","all_button","_getValue","_templateOptions","option","_templateOption","_messageShow","_setValue","values","selected","BaseIcons","pair","prototype","data2","empty_text","searchable","selectall","pagesize","_changeDisabled","_renderSearchable","_renderClassic","$select","$dropdown","$resize","$resize_icon","event","currentY","pageY","currentHeight","minHeight","Math","max","select2","prepend","_match","term","String","toUpperCase","order","tags","matched_tags","closeOnSelect","query","q","results","found","slice","more","formatResult","reduce","memo","exists","d","sorter","keep","sort","setOnChange","a","b","menu","_renderAndShow","clickEvent","appendTo","_getShownPosition","_setUpCloseBehavior","position","template","li","join","map","checked","menuWidth","x","pageX","min","document","scrollLeft","left","closePopup","err","contents","one","splice","removeItem","findIndexByHtml","has","toString","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","convertLinksToOptions","$parent","selector","elem","linkHref","linkTarget","confirmText","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom","sum","JSON","stringify","flat_id","input_value","flat_dict","result_dict","convert","identifier","head","section_label","block_indices","block_prefix","block_label","pos","substr","test_param","selectedCase","matchCase","flat","ignore","collapsible_value","payload","p_id","dict","_iterate","match","visitInputs","search","new_id","separator","Array","child","hasClass","truevalue","falsevalue","cases","prefix","context","key","cache","j","content","ondblclick","onconfirm","selectable","cls_tr","$thead","$tbody","$tmessage","row","_row","row_count","dblclick","addHeader","appendHeader","align","wrapper","_commit","del","delAll","before","after","size","_onclick","old_value","_ondblclick","app_options","text_enable","text_disable","cls_enable","cls_disable","$field","$preview","$collapsible","$collapsible_text","$collapsible_icon","$error_text","$error","backdrop","help_text","help_argument","collapsible_state","SelectContent","SelectLibrary","SelectFtp","ColorPicker","types","password","data_column","genomebuild","data_collection","integer","boolean","drill_down","hidden","hidden_data","baseurl","library_data","ftpfile","upload","input_def","fieldClass","_fieldSelect","_fieldText","_fieldData","extensions","flavor","is_workflow","SelectClass","_fieldDrilldown","str_value","_fieldSlider","precise","_fieldHidden","info","_fieldBoolean","_fieldColor","_fieldLibrary","_fieldFtp","_fieldUpload","list","button_new","onnew","$list","button_delete","ondel","hideOptions","Repeat","InputElement","Parameters","parameters","_addConditional","_addRepeat","_addSection","_addRow","case_def","section_row","nonhidden","sub_section","_append","sub_section_id","block_index","repeat","n_cache","default","help","expanded","hide_label","text_value","collapsible_preview","argument","fixed","defaults","async_ops","categorical_filters","sort_key","show_item_checkboxes","num_pages","op","cur_val","condition","condition_index","pairs","get_url","tmpl","grid_header","grid_table","info_text","global_actions","show_popup","action","grid_filters","columns","column","extra","num_rows_rendered","encoded_id","current_item_id","nowrap","column_settings","column_config","link","attach_popup","label_id_prefix","use_paging","num_page_links","cur_page_num","page_link_range","min_page","min_offset","max_range","max_page","max_offset","page_index","allow_multiple","found_global","global_operation","legend","default_filter_dict","advanced_search_display","show_advanced_search_link","filterable","f_key","d_key","standard_search_display","grid_column_filter","column_label","is_text","temp_column","column_filter","seperator","cf_label","cf","cf_key","cf_arg","filter_key","sanitize","colors","standard","base","theme","$view","$value","_build","$boxes","_templateCheck","hex","rgb","_content","line_def","_templateContent","$line","$box","_templateBox","bottom","header_index","element","_setState","header_id","is_expanded","$subgroup","attach","iterate","$tmpl","level","has_options","new_header","$group","Batch","DISABLED","ENABLED","LINKED","Configurations","src","batch","data_multiple","workflow_data","workflow_data_multiple","workflow_data_collection","module_data","module_data_collection","src_labels","hda","hdca","pagelimit","statustimer","button_product","$batch_div","$batch","linked","clone","enabled","lastenter","_handleDrop","history","_changeCurrent","_changeType","current","id_list","fields","_batch","details","hid","$batchfield","batchmode","button_type","config_id","textify","button_data","button_width","margin-left","select_options","ev","drop_data","parse","originalEvent","dataTransfer","getData","new_src","history_content_type","current_value","_handleDropStatus","map_over_type","List","ftpfile_list","Table","Libraries","LibraryDatasets","library_id","fetch","libraries","datasets","library_select","dataset_list","library_current","step","$slider","pressed","which","_isParameter","opts","has_slider","slider","ui","isNaN","round","QUERY_STRING","__identifer","random","isEmptyObject","navigate","queryObj","pop","access_denied","Form","done","form","submit_tooltip","submit_icon","_submit","fail","contentType","success_message","responseJSON","err_msg","_l","categories","is_tool_shed_installed","enable_beta_ts_api_install","installing_repository_ids","is_repo_installed","allow_user_impersonation","enable_quotas","category","$section","_templateSection","$entries","router"],"mappings":"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","file":"admin.bundled.js","sourcesContent":["webpackJsonp([4],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {var jQuery = __webpack_require__(1),\n\t    $ = jQuery,\n\t    GalaxyApp = __webpack_require__(49).GalaxyApp,\n\t    AdminPanel = __webpack_require__(100),\n\t    FormWrapper = __webpack_require__(59),\n\t    GridView = __webpack_require__(12),\n\t    Ui = __webpack_require__(5),\n\t    QueryStringParsing = __webpack_require__(42),\n\t    Router = __webpack_require__(52),\n\t    Page = __webpack_require__(50);\n\t\n\twindow.app = function app(options, bootstrapped) {\n\t    window.Galaxy = new GalaxyApp(options, bootstrapped);\n\t    Galaxy.debug('admin app');\n\t\n\t    /** Routes */\n\t    var AdminRouter = Router.extend({\n\t        routes: {\n\t            '(/)admin(/)users': 'show_users',\n\t            '(/)admin(/)roles': 'show_roles',\n\t            '(/)admin(/)forms(/)(:form_id)': 'show_forms'\n\t        },\n\t\n\t        authenticate: function (args, name) {\n\t            return Galaxy.user && Galaxy.user.id && Galaxy.user.get('is_admin');\n\t        },\n\t\n\t        show_users: function () {\n\t            this.page.display(new GridView({ url_base: Galaxy.root + 'admin/users_list', url_data: Galaxy.params, dict_format: true }));\n\t        },\n\t\n\t        show_roles: function () {\n\t            this.page.display(new GridView({ url_base: Galaxy.root + 'admin/roles_list', url_data: Galaxy.params, dict_format: true }));\n\t        },\n\t\n\t        show_forms: function (form_id) {\n\t            var form_defs = {\n\t                reset_user_password: {\n\t                    title: 'Reset passwords',\n\t                    url: 'admin/reset_user_password?id=' + QueryStringParsing.get('id'),\n\t                    icon: 'fa-user',\n\t                    submit_title: 'Save new password',\n\t                    redirect: Galaxy.root + 'admin/users'\n\t                },\n\t                manage_roles_and_groups_for_user: {\n\t                    url: 'admin/manage_roles_and_groups_for_user?id=' + QueryStringParsing.get('id'),\n\t                    icon: 'fa-users',\n\t                    redirect: Galaxy.root + 'admin/users'\n\t                },\n\t                rename_role: {\n\t                    url: 'admin/rename_role?id=' + QueryStringParsing.get('id'),\n\t                    icon: 'fa-users',\n\t                    redirect: Galaxy.root + 'admin/users'\n\t                }\n\t            };\n\t            this.page.display(new FormWrapper.View(form_defs[form_id]));\n\t        }\n\t    });\n\t\n\t    $(function () {\n\t        _.extend(options.config, { active_view: 'admin' });\n\t        Galaxy.page = new Page.View(_.extend(options, {\n\t            Left: AdminPanel,\n\t            Router: AdminRouter\n\t        }));\n\t    });\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/**\n\t *  This class contains backbone wrappers for basic ui elements such as Images, Labels, Buttons, Input fields etc.\n\t */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(15), __webpack_require__(39), __webpack_require__(14), __webpack_require__(35), __webpack_require__(10), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Select, Slider, Options, Drilldown, Buttons, Modal) {\n\t\n\t    /** Label wrapper */\n\t    var Label = Backbone.View.extend({\n\t        tagName: 'label',\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model(options);\n\t            this.tagName = options.tagName || this.tagName;\n\t            this.setElement($('<' + this.tagName + '/>'));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t        title: function (new_title) {\n\t            this.model.set('title', new_title);\n\t        },\n\t        value: function () {\n\t            return this.model.get('title');\n\t        },\n\t        render: function () {\n\t            this.$el.removeClass().addClass('ui-label').addClass(this.model.get('cls')).html(this.model.get('title'));\n\t            return this;\n\t        }\n\t    });\n\t\n\t    /** Displays messages used e.g. in the tool form */\n\t    var Message = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                message: null,\n\t                status: 'info',\n\t                cls: '',\n\t                persistent: false,\n\t                fade: true\n\t            }).set(options);\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t        update: function (options) {\n\t            this.model.set(options);\n\t        },\n\t        render: function () {\n\t            this.$el.removeClass().addClass('ui-message').addClass(this.model.get('cls'));\n\t            var status = this.model.get('status');\n\t            if (this.model.get('large')) {\n\t                this.$el.addClass((status == 'success' && 'done' || status == 'danger' && 'error' || status) + 'messagelarge');\n\t            } else {\n\t                this.$el.addClass('alert').addClass('alert-' + status);\n\t            }\n\t            if (this.model.get('message')) {\n\t                this.$el.html(this.messageForDisplay());\n\t                this.$el[this.model.get('fade') ? 'fadeIn' : 'show']();\n\t                this.timeout && window.clearTimeout(this.timeout);\n\t                if (!this.model.get('persistent')) {\n\t                    var self = this;\n\t                    this.timeout = window.setTimeout(function () {\n\t                        self.model.set('message', '');\n\t                    }, 3000);\n\t                }\n\t            } else {\n\t                this.$el.fadeOut();\n\t            }\n\t            return this;\n\t        },\n\t        messageForDisplay: function () {\n\t            return _.escape(this.model.get('message'));\n\t        }\n\t    });\n\t\n\t    var UnescapedMessage = Message.extend({\n\t        messageForDisplay: function () {\n\t            return this.model.get('message');\n\t        }\n\t    });\n\t\n\t    /** Renders an input element used e.g. in the tool form */\n\t    var Input = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                type: 'text',\n\t                placeholder: '',\n\t                disabled: false,\n\t                readonly: false,\n\t                visible: true,\n\t                cls: '',\n\t                area: false,\n\t                color: null,\n\t                style: null\n\t            }).set(options);\n\t            this.tagName = this.model.get('area') ? 'textarea' : 'input';\n\t            this.setElement($('<' + this.tagName + '/>'));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t        events: {\n\t            'input': '_onchange'\n\t        },\n\t        value: function (new_val) {\n\t            new_val !== undefined && this.model.set('value', typeof new_val === 'string' ? new_val : '');\n\t            return this.model.get('value');\n\t        },\n\t        render: function () {\n\t            var self = this;\n\t            this.$el.removeClass().addClass('ui-' + this.tagName).addClass(this.model.get('cls')).addClass(this.model.get('style')).attr('id', this.model.id).attr('type', this.model.get('type')).attr('placeholder', this.model.get('placeholder')).css('color', this.model.get('color') || '').css('border-color', this.model.get('color') || '');\n\t            var datalist = this.model.get('datalist');\n\t            if ($.isArray(datalist) && datalist.length > 0) {\n\t                this.$el.autocomplete({ source: function (request, response) {\n\t                        response(self.model.get('datalist'));\n\t                    },\n\t                    change: function () {\n\t                        self._onchange();\n\t                    } });\n\t            }\n\t            if (this.model.get('value') !== this.$el.val()) {\n\t                this.$el.val(this.model.get('value'));\n\t            }\n\t            _.each(['readonly', 'disabled'], function (attr_name) {\n\t                self.model.get(attr_name) ? self.$el.attr(attr_name, true) : self.$el.removeAttr(attr_name);\n\t            });\n\t            this.$el[this.model.get('visible') ? 'show' : 'hide']();\n\t            return this;\n\t        },\n\t        _onchange: function () {\n\t            this.value(this.$el.val());\n\t            this.model.get('onchange') && this.model.get('onchange')(this.model.get('value'));\n\t        }\n\t    });\n\t\n\t    /** Creates a hidden element input field used e.g. in the tool form */\n\t    var Hidden = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model(options);\n\t            this.setElement($('<div/>').append(this.$info = $('<div/>')).append(this.$hidden = $('<div/>')));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t        value: function (new_val) {\n\t            new_val !== undefined && this.model.set('value', new_val);\n\t            return this.model.get('value');\n\t        },\n\t        render: function () {\n\t            this.$el.attr('id', this.model.id);\n\t            this.$hidden.val(this.model.get('value'));\n\t            this.model.get('info') ? this.$info.show().text(this.model.get('info')) : this.$info.hide();\n\t            return this;\n\t        }\n\t    });\n\t\n\t    /** Creates a upload element input field */\n\t    var Upload = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.model = options && options.model || new Backbone.Model(options);\n\t            this.setElement($('<div/>').append(this.$info = $('<div/>')).append(this.$file = $('<input/>').attr('type', 'file').addClass('ui-margin-bottom')).append(this.$text = $('<textarea/>').addClass('ui-textarea').attr('disabled', true)).append(this.$wait = $('<i/>').addClass('fa fa-spinner fa-spin')));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.$file.on('change', function (e) {\n\t                self._readFile(e);\n\t            });\n\t            this.render();\n\t        },\n\t        value: function (new_val) {\n\t            new_val !== undefined && this.model.set('value', new_val);\n\t            return this.model.get('value');\n\t        },\n\t        render: function () {\n\t            this.$el.attr('id', this.model.id);\n\t            this.model.get('info') ? this.$info.show().text(this.model.get('info')) : this.$info.hide();\n\t            this.model.get('value') ? this.$text.text(this.model.get('value')).show() : this.$text.hide();\n\t            this.model.get('wait') ? this.$wait.show() : this.$wait.hide();\n\t            return this;\n\t        },\n\t        _readFile: function (e) {\n\t            var self = this;\n\t            var file = e.target.files && e.target.files[0];\n\t            if (file) {\n\t                var reader = new FileReader();\n\t                reader.onload = function () {\n\t                    self.model.set({ wait: false, value: this.result });\n\t                };\n\t                this.model.set({ wait: true, value: null });\n\t                reader.readAsText(file);\n\t            }\n\t        }\n\t    });\n\t\n\t    return {\n\t        Button: Buttons.ButtonDefault,\n\t        ButtonIcon: Buttons.ButtonIcon,\n\t        ButtonCheck: Buttons.ButtonCheck,\n\t        ButtonMenu: Buttons.ButtonMenu,\n\t        ButtonLink: Buttons.ButtonLink,\n\t        Input: Input,\n\t        Label: Label,\n\t        Message: Message,\n\t        UnescapedMessage: UnescapedMessage,\n\t        Upload: Upload,\n\t        Modal: Modal,\n\t        RadioButton: Options.RadioButton,\n\t        Checkbox: Options.Checkbox,\n\t        Radio: Options.Radio,\n\t        Select: Select,\n\t        Hidden: Hidden,\n\t        Slider: Slider,\n\t        Drilldown: Drilldown\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Ui) {\n\t    var View = Backbone.View.extend({\n\t        visible: false,\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                cls: 'ui-portlet',\n\t                title: '',\n\t                icon: '',\n\t                buttons: null,\n\t                body: null,\n\t                scrollable: true,\n\t                nopadding: false,\n\t                operations: null,\n\t                collapsible: false,\n\t                collapsible_button: false,\n\t                collapsed: false,\n\t                onchange_title: null\n\t            }).set(options);\n\t            this.setElement(this._template());\n\t\n\t            // link all dom elements\n\t            this.$body = this.$('.portlet-body');\n\t            this.$title_text = this.$('.portlet-title-text');\n\t            this.$title_icon = this.$('.portlet-title-icon');\n\t            this.$header = this.$('.portlet-header');\n\t            this.$content = this.$('.portlet-content');\n\t            this.$backdrop = this.$('.portlet-backdrop');\n\t            this.$buttons = this.$('.portlet-buttons');\n\t            this.$operations = this.$('.portlet-operations');\n\t\n\t            // add body to component list\n\t            this.model.get('body') && this.append(this.model.get('body'));\n\t\n\t            // add icon for collapsible option\n\t            this.collapsible_button = new Ui.ButtonIcon({\n\t                icon: 'fa-eye',\n\t                tooltip: 'Collapse/Expand',\n\t                cls: 'ui-button-icon-plain',\n\t                onclick: function () {\n\t                    self[self.collapsed ? 'expand' : 'collapse']();\n\t                }\n\t            });\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            var options = this.model.attributes;\n\t            this.$el.removeClass().addClass(options.cls).attr('id', options.id);\n\t            this.$header[options.title ? 'show' : 'hide']();\n\t            this.$title_text.html(options.title);\n\t            _.each([this.$content, this.$body], function ($el) {\n\t                $el[options.nopadding ? 'addClass' : 'removeClass']('no-padding');\n\t            });\n\t\n\t            // render title icon\n\t            if (options.icon) {\n\t                this.$title_icon.removeClass().addClass('portlet-title-icon fa').addClass(options.icon).show();\n\t            } else {\n\t                this.$title_icon.hide();\n\t            }\n\t\n\t            // make portlet collapsible\n\t            this.$title_text[options.collapsible ? 'addClass' : 'removeClass']('no-highlight collapsible').off();\n\t            if (options.collapsible) {\n\t                this.$title_text.on('click', function () {\n\t                    self[self.collapsed ? 'expand' : 'collapse']();\n\t                });\n\t                options.collapsed ? this.collapse() : this.expand();\n\t            }\n\t\n\t            // allow title editing\n\t            this.$title_text.prop('disabled', !options.onchange_title);\n\t            options.onchange_title && this.$title_text.make_text_editable({\n\t                on_finish: function (new_title) {\n\t                    options.onchange_title(new_title);\n\t                }\n\t            });\n\t\n\t            // render buttons\n\t            if (options.buttons) {\n\t                this.$buttons.empty().show();\n\t                $.each(this.model.get('buttons'), function (name, item) {\n\t                    item.$el.prop('id', name);\n\t                    self.$buttons.append(item.$el);\n\t                });\n\t            } else {\n\t                this.$buttons.hide();\n\t            }\n\t\n\t            // render operations\n\t            this.$operations.empty;\n\t            if (options.collapsible_button) {\n\t                this.$operations.append(this.collapsible_button.$el);\n\t            }\n\t            if (options.operations) {\n\t                $.each(options.operations, function (name, item) {\n\t                    item.$el.prop('id', name);\n\t                    self.$operations.append(item.$el);\n\t                });\n\t            }\n\t            return this;\n\t        },\n\t\n\t        /** Append new doms to body */\n\t        append: function ($el) {\n\t            this.$body.append($el);\n\t        },\n\t\n\t        /** Remove all content */\n\t        empty: function () {\n\t            this.$body.empty();\n\t        },\n\t\n\t        /** Return header element */\n\t        header: function () {\n\t            return this.$header;\n\t        },\n\t\n\t        /** Return body element */\n\t        body: function () {\n\t            return this.$body;\n\t        },\n\t\n\t        /** Show portlet */\n\t        show: function () {\n\t            this.visible = true;\n\t            this.$el.fadeIn('fast');\n\t        },\n\t\n\t        /** Hide portlet */\n\t        hide: function () {\n\t            this.visible = false;\n\t            this.$el.hide();\n\t        },\n\t\n\t        /** Enable a particular button */\n\t        enableButton: function (id) {\n\t            this.$buttons.find('#' + id).prop('disabled', false);\n\t        },\n\t\n\t        /** Disable a particular button */\n\t        disableButton: function (id) {\n\t            this.$buttons.find('#' + id).prop('disabled', true);\n\t        },\n\t\n\t        /** Hide a particular operation */\n\t        hideOperation: function (id) {\n\t            this.$operations.find('#' + id).hide();\n\t        },\n\t\n\t        /** Show a particular operation */\n\t        showOperation: function (id) {\n\t            this.$operations.find('#' + id).show();\n\t        },\n\t\n\t        /** Replaces the event callback of an existing operation */\n\t        setOperation: function (id, callback) {\n\t            this.$operations.find('#' + id).off('click').on('click', callback);\n\t        },\n\t\n\t        /** Change title */\n\t        title: function (new_title) {\n\t            new_title && this.$title_text.html(new_title);\n\t            return this.$title_text.html();\n\t        },\n\t\n\t        /** Collapse portlet */\n\t        collapse: function () {\n\t            this.collapsed = true;\n\t            this.$content.height('0%');\n\t            this.$body.hide();\n\t            this.collapsible_button.setIcon('fa-eye-slash');\n\t        },\n\t\n\t        /** Expand portlet */\n\t        expand: function () {\n\t            this.collapsed = false;\n\t            this.$content.height('100%');\n\t            this.$body.fadeIn('fast');\n\t            this.collapsible_button.setIcon('fa-eye');\n\t        },\n\t\n\t        /** Disable content access */\n\t        disable: function () {\n\t            this.$backdrop.show();\n\t        },\n\t\n\t        /** Enable content access */\n\t        enable: function () {\n\t            this.$backdrop.hide();\n\t        },\n\t\n\t        _template: function () {\n\t            return $('<div/>').append($('<div/>').addClass('portlet-header').append($('<div/>').addClass('portlet-operations')).append($('<div/>').addClass('portlet-title').append($('<i/>').addClass('portlet-title-icon')).append($('<span/>').addClass('portlet-title-text')))).append($('<div/>').addClass('portlet-content').append($('<div/>').addClass('portlet-body')).append($('<div/>').addClass('portlet-buttons'))).append($('<div/>').addClass('portlet-backdrop'));\n\t        }\n\t    });\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {/** This module contains all button views. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t    /** This renders the default button which is used e.g. at the bottom of the upload modal. */\n\t    var ButtonDefault = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                title: '',\n\t                floating: 'right',\n\t                icon: '',\n\t                cls: 'btn btn-default',\n\t                wait: false,\n\t                wait_text: 'Sending...',\n\t                wait_cls: 'btn btn-info',\n\t                disabled: false,\n\t                percentage: -1\n\t            }).set(options);\n\t            this.setElement($('<button/>').attr('type', 'button').append(this.$icon = $('<i/>')).append(this.$title = $('<span/>')).append(this.$progress = $('<div/>').append(this.$progress_bar = $('<div/>'))));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            var options = this.model.attributes;\n\t            this.$el.removeClass().addClass('ui-button-default').addClass(options.disabled && 'disabled').attr('id', options.id).attr('disabled', options.disabled).css('float', options.floating).off('click').on('click', function () {\n\t                $('.tooltip').hide();\n\t                options.onclick && !self.disabled && options.onclick();\n\t            }).tooltip({ title: options.tooltip, placement: 'bottom' });\n\t            this.$progress.addClass('progress').css('display', options.percentage !== -1 ? 'block' : 'none');\n\t            this.$progress_bar.addClass('progress-bar').css({ width: options.percentage + '%' });\n\t            this.$icon.removeClass().addClass('icon fa');\n\t            this.$title.removeClass().addClass('title');\n\t            if (options.wait) {\n\t                this.$el.addClass(options.wait_cls).prop('disabled', true);\n\t                this.$icon.addClass('fa-spinner fa-spin ui-margin-right');\n\t                this.$title.html(options.wait_text);\n\t            } else {\n\t                this.$el.addClass(options.cls);\n\t                this.$icon.addClass(options.icon);\n\t                this.$title.html(options.title);\n\t                options.icon && options.title && this.$icon.addClass('ui-margin-right');\n\t            }\n\t        },\n\t\n\t        /** Show button */\n\t        show: function () {\n\t            this.$el.show();\n\t        },\n\t\n\t        /** Hide button */\n\t        hide: function () {\n\t            this.$el.hide();\n\t        },\n\t\n\t        /** Disable button */\n\t        disable: function () {\n\t            this.model.set('disabled', true);\n\t        },\n\t\n\t        /** Enable button */\n\t        enable: function () {\n\t            this.model.set('disabled', false);\n\t        },\n\t\n\t        /** Show spinner to indicate that the button is not ready to be clicked */\n\t        wait: function () {\n\t            this.model.set('wait', true);\n\t        },\n\t\n\t        /** Hide spinner to indicate that the button is ready to be clicked */\n\t        unwait: function () {\n\t            this.model.set('wait', false);\n\t        },\n\t\n\t        /** Change icon */\n\t        setIcon: function (icon) {\n\t            this.model.set('icon', icon);\n\t        }\n\t    });\n\t\n\t    /** This button allows the right-click/open-in-new-tab feature, its used e.g. for panel buttons. */\n\t    var ButtonLink = ButtonDefault.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                title: '',\n\t                icon: '',\n\t                cls: ''\n\t            }).set(options);\n\t            this.setElement($('<a/>').append(this.$icon = $('<span/>')));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var options = this.model.attributes;\n\t            this.$el.removeClass().addClass(options.cls).attr({ id: options.id,\n\t                href: options.href || 'javascript:void(0)',\n\t                title: options.title,\n\t                target: options.target || '_top',\n\t                disabled: options.disabled }).tooltip({ placement: 'bottom' }).off('click').on('click', function () {\n\t                options.onclick && !options.disabled && options.onclick();\n\t            });\n\t            this.$icon.removeClass().addClass(options.icon);\n\t        }\n\t    });\n\t\n\t    /** The check button is used in the tool form and allows to distinguish between multiple states e.g. all, partially and nothing selected. */\n\t    var ButtonCheck = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                title: 'Select/Unselect all',\n\t                icons: ['fa-square-o', 'fa-minus-square-o', 'fa-check-square-o'],\n\t                value: 0,\n\t                onchange: function () {}\n\t            }).set(options);\n\t            this.setElement($('<div/>').append(this.$icon = $('<span/>')).append(this.$title = $('<span/>')));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function (options) {\n\t            var self = this;\n\t            var options = this.model.attributes;\n\t            this.$el.addClass('ui-button-check').off('click').on('click', function () {\n\t                self.model.set('value', self.model.get('value') === 0 && 2 || 0);\n\t                options.onclick && options.onclick();\n\t            });\n\t            this.$title.html(options.title);\n\t            this.$icon.removeClass().addClass('icon fa ui-margin-right').addClass(options.icons[options.value]);\n\t        },\n\t\n\t        /* Sets a new value and/or returns the value.\n\t        * @param{Integer}   new_val - Set a new value 0=unchecked, 1=partial and 2=checked.\n\t        * OR:\n\t        * @param{Integer}   new_val - Number of selected options.\n\t        * @param{Integer}   total   - Total number of available options.\n\t        */\n\t        value: function (new_val, total) {\n\t            if (new_val !== undefined) {\n\t                if (total && new_val !== 0) {\n\t                    new_val = new_val !== total && 1 || 2;\n\t                }\n\t                this.model.set('value', new_val);\n\t                this.model.get('onchange')(this.model.get('value'));\n\t            }\n\t            return this.model.get('value');\n\t        }\n\t    });\n\t\n\t    /** This renders a differently styled, more compact button version. */\n\t    var ButtonIcon = ButtonDefault.extend({\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                title: '',\n\t                floating: 'right',\n\t                icon: '',\n\t                cls: 'ui-button-icon',\n\t                disabled: false\n\t            }).set(options);\n\t            this.setElement($('<div/>').append(this.$button = $('<div/>').append(this.$icon = $('<i/>')).append(this.$title = $('<span/>'))));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function (options) {\n\t            var self = this;\n\t            var options = this.model.attributes;\n\t            this.$el.removeClass().addClass(options.cls).addClass(options.disabled && 'disabled').attr('disabled', options.disabled).attr('id', options.id).css('float', options.floating).off('click').on('click', function () {\n\t                $('.tooltip').hide();\n\t                !options.disabled && options.onclick && options.onclick();\n\t            });\n\t            this.$button.addClass('button').tooltip({ title: options.tooltip, placement: 'bottom' });\n\t            this.$icon.removeClass().addClass('icon fa').addClass(options.icon);\n\t            this.$title.addClass('title').html(options.title);\n\t            options.icon && options.title && this.$icon.addClass('ui-margin-right');\n\t        }\n\t    });\n\t\n\t    /** This class creates a button with dropdown menu. */\n\t    var ButtonMenu = ButtonDefault.extend({\n\t        $menu: null,\n\t        initialize: function (options) {\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: '',\n\t                title: '',\n\t                floating: 'right',\n\t                pull: 'right',\n\t                icon: null,\n\t                onclick: null,\n\t                cls: 'ui-button-icon ui-button-menu',\n\t                tooltip: '',\n\t                target: '',\n\t                href: '',\n\t                onunload: null,\n\t                visible: true,\n\t                tag: ''\n\t            }).set(options);\n\t            this.collection = new Backbone.Collection();\n\t            this.setElement($('<div/>').append(this.$root = $('<div/>').append(this.$icon = $('<i/>')).append(this.$title = $('<span/>'))));\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.listenTo(this.collection, 'change add remove reset', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            var options = this.model.attributes;\n\t            this.$el.removeClass().addClass('dropdown').addClass(options.cls).attr('id', options.id).css({ float: options.floating,\n\t                display: options.visible && this.collection.where({ visible: true }).length > 0 ? 'block' : 'none' });\n\t            this.$root.addClass('root button dropdown-toggle').attr('data-toggle', 'dropdown').tooltip({ title: options.tooltip, placement: 'bottom' }).off('click').on('click', function (e) {\n\t                $('.tooltip').hide();\n\t                e.preventDefault();\n\t                options.onclick && options.onclick();\n\t            });\n\t            this.$icon.removeClass().addClass('icon fa').addClass(options.icon);\n\t            this.$title.removeClass().addClass('title').html(options.title);\n\t            options.icon && options.title && this.$icon.addClass('ui-margin-right');\n\t            this.$menu && this.$menu.remove();\n\t            if (this.collection.length > 0) {\n\t                this.$menu = $('<ul/>').addClass('menu dropdown-menu').addClass('pull-' + self.model.get('pull')).attr('role', 'menu');\n\t                this.$el.append(this.$menu);\n\t            }\n\t            this.collection.each(function (submodel) {\n\t                var suboptions = submodel.attributes;\n\t                if (suboptions.visible) {\n\t                    var $link = $('<a/>').addClass('dropdown-item').attr({ href: suboptions.href, target: suboptions.target }).append($('<i/>').addClass('fa').addClass(suboptions.icon).css('display', suboptions.icon ? 'inline-block' : 'none')).append(suboptions.title).on('click', function (e) {\n\t                        if (suboptions.onclick) {\n\t                            e.preventDefault();\n\t                            suboptions.onclick();\n\t                        }\n\t                    });\n\t                    self.$menu.append($('<li/>').append($link));\n\t                    suboptions.divider && self.$menu.append($('<li/>').addClass('divider'));\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Add a new menu item */\n\t        addMenu: function (options) {\n\t            this.collection.add(Utils.merge(options, {\n\t                title: '',\n\t                target: '',\n\t                href: '',\n\t                onclick: null,\n\t                divider: false,\n\t                visible: true,\n\t                icon: null,\n\t                cls: 'button-menu btn-group'\n\t            }));\n\t        }\n\t    });\n\t\n\t    return {\n\t        ButtonDefault: ButtonDefault,\n\t        ButtonLink: ButtonLink,\n\t        ButtonIcon: ButtonIcon,\n\t        ButtonCheck: ButtonCheck,\n\t        ButtonMenu: ButtonMenu\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {/**\n\t    This is the main class of the form plugin. It is referenced as 'app' in lower level modules.\n\t*/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(9), __webpack_require__(5), __webpack_require__(31), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Portlet, Ui, FormSection, FormData) {\n\t    return Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.model = new Backbone.Model({\n\t                initial_errors: false,\n\t                cls: 'ui-portlet-limited',\n\t                icon: null,\n\t                always_refresh: true,\n\t                status: 'warning'\n\t            }).set(options);\n\t            this.setElement('<div/>');\n\t            this.render();\n\t        },\n\t\n\t        /** Update available options */\n\t        update: function (new_model) {\n\t            var self = this;\n\t            this.data.matchModel(new_model, function (node, input_id) {\n\t                var input = self.input_list[input_id];\n\t                if (input && input.options) {\n\t                    if (!_.isEqual(input.options, node.options)) {\n\t                        input.options = node.options;\n\t                        var field = self.field_list[input_id];\n\t                        if (field.update) {\n\t                            var new_options = [];\n\t                            if (['data', 'data_collection', 'drill_down'].indexOf(input.type) != -1) {\n\t                                new_options = input.options;\n\t                            } else {\n\t                                for (var i in node.options) {\n\t                                    var opt = node.options[i];\n\t                                    if (opt.length > 2) {\n\t                                        new_options.push({ label: opt[0], value: opt[1] });\n\t                                    }\n\t                                }\n\t                            }\n\t                            field.update(new_options);\n\t                            field.trigger('change');\n\t                            Galaxy.emit.debug('form-view::update()', 'Updating options for ' + input_id);\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Set form into wait mode */\n\t        wait: function (active) {\n\t            for (var i in this.input_list) {\n\t                var field = this.field_list[i];\n\t                var input = this.input_list[i];\n\t                if (input.is_dynamic && field.wait && field.unwait) {\n\t                    field[active ? 'wait' : 'unwait']();\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Highlight and scroll to input element (currently only used for error notifications) */\n\t        highlight: function (input_id, message, silent) {\n\t            var input_element = this.element_list[input_id];\n\t            if (input_element) {\n\t                input_element.error(message || 'Please verify this parameter.');\n\t                this.portlet.expand();\n\t                this.trigger('expand', input_id);\n\t                if (!silent) {\n\t                    var $panel = this.$el.parents().filter(function () {\n\t                        return ['auto', 'scroll'].indexOf($(this).css('overflow')) != -1;\n\t                    }).first();\n\t                    $panel.animate({ scrollTop: $panel.scrollTop() + input_element.$el.offset().top - 120 }, 500);\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Highlights errors */\n\t        errors: function (options) {\n\t            this.trigger('reset');\n\t            if (options && options.errors) {\n\t                var error_messages = this.data.matchResponse(options.errors);\n\t                for (var input_id in this.element_list) {\n\t                    var input = this.element_list[input_id];\n\t                    if (error_messages[input_id]) {\n\t                        this.highlight(input_id, error_messages[input_id], true);\n\t                    }\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Render tool form */\n\t        render: function () {\n\t            var self = this;\n\t            this.off('change');\n\t            this.off('reset');\n\t            // contains the dom field elements as created by the parameter factory i.e. form-parameters\n\t            this.field_list = {};\n\t            // contains input definitions/dictionaries as provided by the parameters to_dict() function through the api\n\t            this.input_list = {};\n\t            // contains the dom elements of each input element i.e. form-input which wraps the actual input field\n\t            this.element_list = {};\n\t            // converts the form into a json data structure\n\t            this.data = new FormData.Manager(this);\n\t            this._renderForm();\n\t            this.data.create();\n\t            this.model.get('initial_errors') && this.errors(this.model.attributes);\n\t            // add listener which triggers on checksum change, and reset the form input wrappers\n\t            var current_check = this.data.checksum();\n\t            this.on('change', function (input_id) {\n\t                var input = self.input_list[input_id];\n\t                if (!input || input.refresh_on_change || self.model.get('always_refresh')) {\n\t                    var new_check = self.data.checksum();\n\t                    if (new_check != current_check) {\n\t                        current_check = new_check;\n\t                        self.model.get('onchange') && self.model.get('onchange')();\n\t                    }\n\t                }\n\t            });\n\t            this.on('reset', function () {\n\t                _.each(self.element_list, function (input_element) {\n\t                    input_element.reset();\n\t                });\n\t            });\n\t            return this;\n\t        },\n\t\n\t        /** Renders/appends dom elements of the form */\n\t        _renderForm: function () {\n\t            $('.tooltip').remove();\n\t            var options = this.model.attributes;\n\t            this.message = new Ui.UnescapedMessage();\n\t            this.section = new FormSection.View(this, { inputs: options.inputs });\n\t            this.portlet = new Portlet.View({\n\t                icon: options.icon,\n\t                title: options.title,\n\t                cls: options.cls,\n\t                operations: options.operations,\n\t                buttons: options.buttons,\n\t                collapsible: options.collapsible,\n\t                collapsed: options.collapsed,\n\t                onchange_title: options.onchange_title\n\t            });\n\t            this.portlet.append(this.message.$el);\n\t            this.portlet.append(this.section.$el);\n\t            this.$el.empty();\n\t            options.inputs && this.$el.append(this.portlet.$el);\n\t            options.message && this.message.update({ persistent: true, status: options.status, message: options.message });\n\t            Galaxy.emit.debug('form-view::initialize()', 'Completed');\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(jQuery, Backbone, $, _) {// This is necessary so that, when nested arrays are used in ajax/post/get methods, square brackets ('[]') are\n\t// not appended to the identifier of a nested array.\n\tjQuery.ajaxSettings.traditional = true;\n\t\n\t// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(32), __webpack_require__(33), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, GridModel, Templates, PopupMenu) {\n\t\n\t    // grid view\n\t    return Backbone.View.extend({\n\t\n\t        // model\n\t        grid: null,\n\t\n\t        // Initialize\n\t        initialize: function (grid_config) {\n\t            this.dict_format = grid_config.dict_format;\n\t            var self = this;\n\t            window.add_tag_to_grid_filter = function (tag_name, tag_value) {\n\t                // Put tag name and value together.\n\t                var tag = tag_name + (tag_value !== undefined && tag_value !== \"\" ? \":\" + tag_value : \"\");\n\t                var advanced_search = $('#advanced-search').is(\":visible\");\n\t                if (!advanced_search) {\n\t                    $('#standard-search').slideToggle('fast');\n\t                    $('#advanced-search').slideToggle('fast');\n\t                }\n\t                self.add_filter_condition(\"tags\", tag);\n\t            };\n\t\n\t            // set element\n\t            if (this.dict_format) {\n\t                this.setElement('<div/>');\n\t                if (grid_config.url_base && !grid_config.items) {\n\t                    var url_data = grid_config.url_data || {};\n\t                    _.each(grid_config.filters, function (v, k) {\n\t                        url_data['f-' + k] = v;\n\t                    });\n\t                    $.ajax({\n\t                        url: grid_config.url_base + '?' + $.param(url_data),\n\t                        success: function (response) {\n\t                            response.embedded = grid_config.embedded;\n\t                            response.filters = grid_config.filters;\n\t                            self.init_grid(response);\n\t                        }\n\t                    });\n\t                } else {\n\t                    this.init_grid(grid_config);\n\t                }\n\t            } else {\n\t                this.setElement('#grid-container');\n\t                this.init_grid(grid_config);\n\t            }\n\t\n\t            // fix padding\n\t            if (grid_config.use_panels) {\n\t                $('#center').css({\n\t                    padding: '10px',\n\t                    overflow: 'auto'\n\t                });\n\t            }\n\t        },\n\t\n\t        // refresh frames\n\t        handle_refresh: function (refresh_frames) {\n\t            if (refresh_frames) {\n\t                if ($.inArray('history', refresh_frames) > -1) {\n\t                    if (top.Galaxy && top.Galaxy.currHistoryPanel) {\n\t                        top.Galaxy.currHistoryPanel.loadCurrentHistory();\n\t                    }\n\t                }\n\t            }\n\t        },\n\t\n\t        // Initialize\n\t        init_grid: function (grid_config) {\n\t            // link grid model\n\t            this.grid = new GridModel(grid_config);\n\t\n\t            // get options\n\t            var options = this.grid.attributes;\n\t\n\t            // handle refresh requests\n\t            this.handle_refresh(options.refresh_frames);\n\t\n\t            // strip protocol and domain\n\t            var url = this.grid.get('url_base');\n\t            url = url.replace(/^.*\\/\\/[^\\/]+/, '');\n\t            this.grid.set('url_base', url);\n\t\n\t            // append main template\n\t            this.$el.html(Templates.grid(options));\n\t\n\t            // update div contents\n\t            this.$el.find('#grid-table-header').html(Templates.header(options));\n\t            this.$el.find('#grid-table-body').html(Templates.body(options));\n\t            this.$el.find('#grid-table-footer').html(Templates.footer(options));\n\t\n\t            // update message\n\t            if (options.message) {\n\t                this.$el.find('#grid-message').html(Templates.message(options));\n\t                var self = this;\n\t                if (options.use_hide_message) {\n\t                    setTimeout(function () {\n\t                        self.$el.find('#grid-message').html('');\n\t                    }, 5000);\n\t                }\n\t            }\n\t\n\t            // configure elements\n\t            this.init_grid_elements();\n\t            this.init_grid_controls();\n\t\n\t            // attach global event handler\n\t            // TODO: redundant (the onload/standard page handlers do this) - but needed because these are constructed after page ready\n\t            init_refresh_on_change();\n\t        },\n\t\n\t        // Initialize grid controls\n\t        init_grid_controls: function () {\n\t\n\t            // link\n\t            var self = this;\n\t\n\t            // Initialize grid operation button.\n\t            this.$el.find('.operation-button').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    self.submit_operation(this);\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Initialize text filters to select text on click and use normal font when user is typing.\n\t            this.$el.find('input[type=text]').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    $(this).select();\n\t                }).keyup(function () {\n\t                    $(this).css('font-style', 'normal');\n\t                });\n\t            });\n\t\n\t            // Initialize sort links.\n\t            this.$el.find('.sort-link').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    self.set_sort_condition($(this).attr('sort_key'));\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Initialize text filters.\n\t            this.$el.find('.text-filter-form').each(function () {\n\t                $(this).off();\n\t                $(this).submit(function () {\n\t                    var column_key = $(this).attr('column_key');\n\t                    var text_input_obj = $('#input-' + column_key + '-filter');\n\t                    var text_input = text_input_obj.val();\n\t                    text_input_obj.val('');\n\t                    self.add_filter_condition(column_key, text_input);\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Initialize categorical filters.\n\t            this.$el.find('.text-filter-val > a').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    // Remove visible element.\n\t                    $(this).parent().remove();\n\t\n\t                    // Remove filter condition.\n\t                    self.remove_filter_condition($(this).attr('filter_key'), $(this).attr('filter_val'));\n\t\n\t                    // Return\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Initialize categorical filters.\n\t            this.$el.find('.categorical-filter > a').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    self.set_categorical_filter($(this).attr('filter_key'), $(this).attr('filter_val'));\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Initialize standard, advanced search toggles.\n\t            this.$el.find('.advanced-search-toggle').each(function () {\n\t                $(this).off();\n\t                $(this).click(function () {\n\t                    self.$el.find('#standard-search').slideToggle('fast');\n\t                    self.$el.find('#advanced-search').slideToggle('fast');\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // Add event to check all box\n\t            this.$el.find('#check_all').off();\n\t            this.$el.find('#check_all').on('click', function () {\n\t                self.check_all_items();\n\t            });\n\t        },\n\t\n\t        // Initialize grid elements.\n\t        init_grid_elements: function () {\n\t            // Initialize grid selection checkboxes.\n\t            this.$el.find('.grid').each(function () {\n\t                var checkboxes = $(this).find(\"input.grid-row-select-checkbox\");\n\t                var check_count = $(this).find(\"span.grid-selected-count\");\n\t                var update_checked = function () {\n\t                    check_count.text($(checkboxes).filter(\":checked\").length);\n\t                };\n\t\n\t                $(checkboxes).each(function () {\n\t                    $(this).change(update_checked);\n\t                });\n\t                update_checked();\n\t            });\n\t\n\t            // Initialize ratings.\n\t            if (this.$el.find('.community_rating_star').length !== 0) this.$el.find('.community_rating_star').rating({});\n\t\n\t            // get options\n\t            var options = this.grid.attributes;\n\t            var self = this;\n\t\n\t            //\n\t            // add page click events\n\t            //\n\t            this.$el.find('.page-link > a').each(function () {\n\t                $(this).click(function () {\n\t                    self.set_page($(this).attr('page_num'));\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            //\n\t            // add inbound/outbound events\n\t            //\n\t            this.$el.find('.use-target').each(function () {\n\t                $(this).click(function (e) {\n\t                    self.execute({\n\t                        href: $(this).attr('href'),\n\t                        target: $(this).attr('target')\n\t                    });\n\t                    return false;\n\t                });\n\t            });\n\t\n\t            // empty grid?\n\t            var items_length = options.items.length;\n\t            if (items_length == 0) {\n\t                return;\n\t            }\n\t\n\t            // add operation popup menus\n\t            _.each(options.items, function (item, index) {\n\t                var button = self.$('#grid-' + index + '-popup').off();\n\t                var popup = new PopupMenu(button);\n\t                _.each(options['operations'], function (operation) {\n\t                    self._add_operation(popup, operation, item);\n\t                });\n\t            });\n\t        },\n\t\n\t        /** Add an operation to the items menu */\n\t        _add_operation: function (popup, operation, item) {\n\t            var self = this;\n\t            var settings = item.operation_config[operation.label];\n\t            if (settings.allowed && operation.allow_popup) {\n\t                popup.addItem({\n\t                    html: operation.label,\n\t                    href: settings.url_args,\n\t                    target: settings.target,\n\t                    confirmation_text: operation.confirm,\n\t                    func: function (e) {\n\t                        e.preventDefault();\n\t                        var label = $(e.target).html();\n\t                        if (operation.onclick) {\n\t                            operation.onclick(item.encode_id);\n\t                        } else {\n\t                            self.execute(this.findItemByHtml(label));\n\t                        }\n\t                    }\n\t                });\n\t            }\n\t        },\n\t\n\t        // Add a condition to the grid filter; this adds the condition and refreshes the grid.\n\t        add_filter_condition: function (name, value) {\n\t            // Do nothing is value is empty.\n\t            if (value === \"\") {\n\t                return false;\n\t            }\n\t\n\t            // Add condition to grid.\n\t            this.grid.add_filter(name, value, true);\n\t\n\t            // Add button that displays filter and provides a button to delete it.\n\t            var t = $(Templates.filter_element(name, value));\n\t            var self = this;\n\t            t.click(function () {\n\t                // Remove visible element.\n\t                $(this).remove();\n\t\n\t                // Remove filter condition.\n\t                self.remove_filter_condition(name, value);\n\t            });\n\t\n\t            // append to container\n\t            var container = this.$el.find('#' + name + '-filtering-criteria');\n\t            container.append(t);\n\t\n\t            // execute\n\t            this.go_page_one();\n\t            this.execute();\n\t        },\n\t\n\t        // Remove a condition to the grid filter; this adds the condition and refreshes the grid.\n\t        remove_filter_condition: function (name, value) {\n\t            // Remove filter condition.\n\t            this.grid.remove_filter(name, value);\n\t\n\t            // Execute\n\t            this.go_page_one();\n\t            this.execute();\n\t        },\n\t\n\t        // Set sort condition for grid.\n\t        set_sort_condition: function (col_key) {\n\t            // Set new sort condition. New sort is col_key if sorting new column; if reversing sort on\n\t            // currently sorted column, sort is reversed.\n\t            var cur_sort = this.grid.get('sort_key');\n\t            var new_sort = col_key;\n\t            if (cur_sort.indexOf(col_key) !== -1) {\n\t                // Reverse sort.\n\t                if (cur_sort.substring(0, 1) !== '-') {\n\t                    new_sort = '-' + col_key;\n\t                }\n\t            }\n\t\n\t            // Remove sort arrows elements.\n\t            this.$el.find('.sort-arrow').remove();\n\t\n\t            // Add sort arrow element to new sort column.\n\t            var sort_arrow = new_sort.substring(0, 1) == '-' ? '&uarr;' : '&darr;';\n\t            var t = $('<span>' + sort_arrow + '</span>').addClass('sort-arrow');\n\t\n\t            // Add to header\n\t            this.$el.find('#' + col_key + '-header').append(t);\n\t\n\t            // Update grid.\n\t            this.grid.set('sort_key', new_sort);\n\t            this.go_page_one();\n\t            this.execute();\n\t        },\n\t\n\t        // Set new value for categorical filter.\n\t        set_categorical_filter: function (name, new_value) {\n\t            // Update filter hyperlinks to reflect new filter value.\n\t            var category_filter = this.grid.get('categorical_filters')[name],\n\t                cur_value = this.grid.get('filters')[name];\n\t            var self = this;\n\t            this.$el.find('.' + name + '-filter').each(function () {\n\t                var text = $.trim($(this).text());\n\t                var filter = category_filter[text];\n\t                var filter_value = filter[name];\n\t                if (filter_value == new_value) {\n\t                    // Remove filter link since grid will be using this filter. It is assumed that\n\t                    // this element has a single child, a hyperlink/anchor with text.\n\t                    $(this).empty();\n\t                    $(this).addClass('current-filter');\n\t                    $(this).append(text);\n\t                } else if (filter_value == cur_value) {\n\t                    // Add hyperlink for this filter since grid will no longer be using this filter. It is assumed that\n\t                    // this element has a single child, a hyperlink/anchor.\n\t                    $(this).empty();\n\t                    var t = $('<a href=\"#\">' + text + '</a>');\n\t                    t.click(function () {\n\t                        self.set_categorical_filter(name, filter_value);\n\t                    });\n\t                    $(this).removeClass('current-filter');\n\t                    $(this).append(t);\n\t                }\n\t            });\n\t\n\t            // Update grid.\n\t            this.grid.add_filter(name, new_value);\n\t            this.go_page_one();\n\t            this.execute();\n\t        },\n\t\n\t        // Set page to view.\n\t        set_page: function (new_page) {\n\t            // Update page hyperlink to reflect new page.\n\t            var self = this;\n\t            this.$el.find('.page-link').each(function () {\n\t                var id = $(this).attr('id'),\n\t                    page_num = parseInt(id.split('-')[2], 10),\n\t                    // Id has form 'page-link-<page_num>\n\t                cur_page = self.grid.get('cur_page'),\n\t                    text;\n\t                if (page_num === new_page) {\n\t                    // Remove link to page since grid will be on this page. It is assumed that\n\t                    // this element has a single child, a hyperlink/anchor with text.\n\t                    text = $(this).children().text();\n\t                    $(this).empty();\n\t                    $(this).addClass('inactive-link');\n\t                    $(this).text(text);\n\t                } else if (page_num === cur_page) {\n\t                    // Add hyperlink to this page since grid will no longer be on this page. It is assumed that\n\t                    // this element has a single child, a hyperlink/anchor.\n\t                    text = $(this).text();\n\t                    $(this).empty();\n\t                    $(this).removeClass('inactive-link');\n\t                    var t = $('<a href=\"#\">' + text + '</a>');\n\t                    t.click(function () {\n\t                        self.set_page(page_num);\n\t                    });\n\t                    $(this).append(t);\n\t                }\n\t            });\n\t\n\t            if (new_page === 'all') {\n\t                this.grid.set('cur_page', new_page);\n\t            } else {\n\t                this.grid.set('cur_page', parseInt(new_page, 10));\n\t            }\n\t            this.execute();\n\t        },\n\t\n\t        // confirmation/submission of operation request\n\t        submit_operation: function (operation_button, confirmation_text) {\n\t            // identify operation\n\t            var operation_name = $(operation_button).val();\n\t\n\t            // verify in any item is selected\n\t            var number_of_checked_ids = this.$el.find('input[name=\"id\"]:checked').length;\n\t            if (!number_of_checked_ids > 0) {\n\t                return false;\n\t            }\n\t\n\t            // Check to see if there's grid confirmation text for this operation\n\t            var operation = _.findWhere(this.grid.attributes.operations, { label: operation_name });\n\t            if (operation && !confirmation_text) {\n\t                confirmation_text = operation.confirm || '';\n\t            }\n\t\n\t            // collect ids\n\t            var item_ids = [];\n\t            this.$el.find('input[name=id]:checked').each(function () {\n\t                item_ids.push($(this).val());\n\t            });\n\t\n\t            // execute operation\n\t            var options = {\n\t                operation: operation_name,\n\t                id: item_ids,\n\t                confirmation_text: confirmation_text\n\t            };\n\t            if (operation.target == 'top') {\n\t                options = _.extend(options, {\n\t                    href: operation.href,\n\t                    target: operation.target\n\t                });\n\t            }\n\t            this.execute(options);\n\t            return true;\n\t        },\n\t\n\t        check_all_items: function () {\n\t            var check = this.$('.grid-row-select-checkbox');\n\t            var state = this.$('#check_all').prop('checked');\n\t            _.each(check, function (c) {\n\t                $(c).prop('checked', state);\n\t            });\n\t            this.init_grid_elements();\n\t        },\n\t\n\t        // Go back to page one; this is useful when a filter is applied.\n\t        go_page_one: function () {\n\t            // Need to go back to page 1 if not showing all.\n\t            var cur_page = this.grid.get('cur_page');\n\t            if (cur_page !== null && cur_page !== undefined && cur_page !== 'all') {\n\t                this.grid.set('cur_page', 1);\n\t            }\n\t        },\n\t\n\t        //\n\t        // execute operations and hyperlink requests\n\t        //\n\t        execute: function (options) {\n\t            // get url\n\t            var id = null;\n\t            var href = null;\n\t            var operation = null;\n\t            var confirmation_text = null;\n\t            var target = null;\n\t\n\t            // check for options\n\t            if (options) {\n\t                // get options\n\t                href = options.href;\n\t                operation = options.operation;\n\t                id = options.id;\n\t                confirmation_text = options.confirmation_text;\n\t                target = options.target;\n\t\n\t                // check if input contains the operation tag\n\t                if (href !== undefined && href.indexOf('operation=') != -1) {\n\t                    // Get operation, id in hyperlink's href.\n\t                    var href_parts = href.split(\"?\");\n\t                    if (href_parts.length > 1) {\n\t                        var href_parms_str = href_parts[1];\n\t                        var href_parms = href_parms_str.split(\"&\");\n\t                        for (var index = 0; index < href_parms.length; index++) {\n\t                            if (href_parms[index].indexOf('operation') != -1) {\n\t                                // Found operation parm; get operation value.\n\t                                operation = href_parms[index].split('=')[1];\n\t                                operation = operation.replace(/\\+/g, ' ');\n\t                            } else if (href_parms[index].indexOf('id') != -1) {\n\t                                // Found id parm; get id value.\n\t                                id = href_parms[index].split('=')[1];\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t\n\t            // check for operation details\n\t            if (operation && id) {\n\t                // show confirmation box\n\t                if (confirmation_text && confirmation_text != '' && confirmation_text != 'None' && confirmation_text != 'null') if (!confirm(confirmation_text)) return false;\n\t\n\t                // use small characters for operation?!\n\t                operation = operation.toLowerCase();\n\t\n\t                // Update grid.\n\t                this.grid.set({\n\t                    operation: operation,\n\t                    item_ids: id\n\t                });\n\t\n\t                // Do operation. If operation cannot be performed asynchronously, redirect to location.\n\t                if (target == 'top') {\n\t                    window.top.location = href + '?' + $.param(this.grid.get_url_data());\n\t                } else if (this.grid.can_async_op(operation) || this.dict_format) {\n\t                    this.update_grid();\n\t                } else {\n\t                    this.go_to(target, href);\n\t                }\n\t\n\t                // done\n\t                return false;\n\t            }\n\t\n\t            // refresh grid\n\t            if (href) {\n\t                this.go_to(target, href);\n\t                return false;\n\t            }\n\t\n\t            // refresh grid\n\t            if (this.grid.get('async') || this.dict_format) {\n\t                this.update_grid();\n\t            } else {\n\t                this.go_to(target, href);\n\t            }\n\t\n\t            // done\n\t            return false;\n\t        },\n\t\n\t        // go to url\n\t        go_to: function (target, href) {\n\t            // get aysnc status\n\t            var async = this.grid.get('async');\n\t            this.grid.set('async', false);\n\t\n\t            // get slide status\n\t            advanced_search = this.$el.find('#advanced-search').is(':visible');\n\t            this.grid.set('advanced_search', advanced_search);\n\t\n\t            // get default url\n\t            if (!href) {\n\t                href = this.grid.get('url_base') + '?' + $.param(this.grid.get_url_data());\n\t            }\n\t\n\t            // clear grid of transient request attributes.\n\t            this.grid.set({\n\t                operation: undefined,\n\t                item_ids: undefined,\n\t                async: async\n\t            });\n\t            switch (target) {\n\t                case 'inbound':\n\t                    // this currently assumes that there is only a single grid shown at a time\n\t                    var $div = $('.grid-header').closest('.inbound');\n\t                    if ($div.length !== 0) {\n\t                        $div.load(href);\n\t                        return;\n\t                    }\n\t                    break;\n\t                case 'top':\n\t                    window.top.location = href;\n\t                    break;\n\t                default:\n\t                    window.location = href;\n\t            }\n\t        },\n\t\n\t        // Update grid.\n\t        update_grid: function () {\n\t            // If there's an operation, do POST; otherwise, do GET.\n\t            var method = this.grid.get('operation') ? 'POST' : 'GET';\n\t\n\t            // Show overlay to indicate loading and prevent user actions.\n\t            this.$el.find('.loading-elt-overlay').show();\n\t            var self = this;\n\t            $.ajax({\n\t                type: method,\n\t                url: self.grid.get('url_base'),\n\t                data: self.grid.get_url_data(),\n\t                error: function (response) {\n\t                    alert('Grid refresh failed');\n\t                },\n\t                success: function (response_text) {\n\t\n\t                    // backup\n\t                    var embedded = self.grid.get('embedded');\n\t                    var insert = self.grid.get('insert');\n\t\n\t                    // request new configuration\n\t                    var json = self.dict_format ? response_text : $.parseJSON(response_text);\n\t\n\t                    // update\n\t                    json.embedded = embedded;\n\t                    json.insert = insert;\n\t\n\t                    // Initialize new grid config\n\t                    self.init_grid(json);\n\t\n\t                    // Hide loading overlay.\n\t                    self.$el.find('.loading-elt-overlay').hide();\n\t                },\n\t                complete: function () {\n\t                    // Clear grid of transient request attributes.\n\t                    self.grid.set({\n\t                        operation: undefined,\n\t                        item_ids: undefined\n\t                    });\n\t                }\n\t            });\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(9), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Portlet, Ui) {\n\t\n\t    // ui list element\n\t    var View = Backbone.View.extend({\n\t        // create portlet to keep track of selected list elements\n\t        initialize: function (options) {\n\t            // link this\n\t            var self = this;\n\t\n\t            // initialize options\n\t            this.options = options;\n\t            this.name = options.name || 'element';\n\t            this.multiple = options.multiple || false;\n\t\n\t            // create message handler\n\t            this.message = new Ui.Message();\n\t\n\t            // create portlet\n\t            this.portlet = new Portlet.View({ cls: 'ui-portlet-section' });\n\t\n\t            // create select field containing the options which can be inserted into the list\n\t            this.select = new Ui.Select.View({ optional: options.optional });\n\t\n\t            // create insert new list element button\n\t            this.button = new Ui.ButtonIcon({\n\t                icon: 'fa fa-sign-in',\n\t                floating: 'left',\n\t                tooltip: 'Insert new ' + this.name,\n\t                onclick: function () {\n\t                    self.add({\n\t                        id: self.select.value(),\n\t                        name: self.select.text()\n\t                    });\n\t                }\n\t            });\n\t\n\t            // build main element\n\t            this.setElement(this._template(options));\n\t            this.$('.ui-list-message').append(this.message.$el);\n\t            this.$('.ui-list-portlet').append(this.portlet.$el);\n\t            this.$('.ui-list-button').append(this.button.$el);\n\t            this.$('.ui-list-select').append(this.select.$el);\n\t        },\n\t\n\t        /** Return/Set currently selected list elements */\n\t        value: function (val) {\n\t            // set new value\n\t            if (val !== undefined) {\n\t                this.portlet.empty();\n\t                if ($.isArray(val)) {\n\t                    for (var i in val) {\n\t                        var v = val[i];\n\t                        var v_id = null;\n\t                        var v_name = null;\n\t                        if ($.type(v) != 'string') {\n\t                            v_id = v.id;\n\t                            v_name = v.name;\n\t                        } else {\n\t                            v_id = v_name = v;\n\t                        }\n\t                        if (v_id != null) {\n\t                            this.add({\n\t                                id: v_id,\n\t                                name: v_name\n\t                            });\n\t                        }\n\t                    }\n\t                }\n\t                this._refresh();\n\t            }\n\t            // get current value\n\t            var lst = [];\n\t            this.$('.ui-list-id').each(function () {\n\t                lst.push({\n\t                    id: $(this).prop('id'),\n\t                    name: $(this).find('.ui-list-name').html()\n\t                });\n\t            });\n\t            if (lst.length == 0) {\n\t                return null;\n\t            }\n\t            return lst;\n\t        },\n\t\n\t        /** Add row */\n\t        add: function (options) {\n\t            var self = this;\n\t            if (this.$('[id=\"' + options.id + '\"]').length === 0) {\n\t                if (!Utils.isEmpty(options.id)) {\n\t                    var $el = $(this._templateRow({\n\t                        id: options.id,\n\t                        name: options.name\n\t                    }));\n\t                    $el.on('click', function () {\n\t                        $el.remove();\n\t                        self._refresh();\n\t                    });\n\t                    $el.on('mouseover', function () {\n\t                        $el.addClass('portlet-highlight');\n\t                    });\n\t                    $el.on('mouseout', function () {\n\t                        $el.removeClass('portlet-highlight');\n\t                    });\n\t                    this.portlet.append($el);\n\t                    this._refresh();\n\t                } else {\n\t                    this.message.update({ message: 'Please select a valid ' + this.name + '.', status: 'danger' });\n\t                }\n\t            } else {\n\t                this.message.update({ message: 'This ' + this.name + ' is already in the list.' });\n\t            }\n\t        },\n\t\n\t        /** Update available options */\n\t        update: function (options) {\n\t            this.select.update(options);\n\t        },\n\t\n\t        /** Refresh view */\n\t        _refresh: function () {\n\t            if (this.$('.ui-list-id').length > 0) {\n\t                !this.multiple && this.button.disable();\n\t                this.$('.ui-list-portlet').show();\n\t            } else {\n\t                this.button.enable();\n\t                this.$('.ui-list-portlet').hide();\n\t            }\n\t            this.options.onchange && this.options.onchange();\n\t        },\n\t\n\t        /** Main Template */\n\t        _template: function (options) {\n\t            return '<div class=\"ui-list\">' + '<div class=\"ui-margin-top\">' + '<span class=\"ui-list-button\"/>' + '<span class=\"ui-list-select\"/>' + '</div>' + '<div class=\"ui-list-message\"/>' + '<div class=\"ui-list-portlet\"/>' + '</div>';\n\t        },\n\t\n\t        /** Row Template */\n\t        _templateRow: function (options) {\n\t            return '<div id=\"' + options.id + '\" class=\"ui-list-id\">' + '<span class=\"ui-list-delete fa fa-trash\"/>' + '<span class=\"ui-list-name\">' + options.name + '</span>' + '</div>';\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/** Base class for options based ui elements **/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Buttons) {\n\t    var Base = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.model = options && options.model || new Backbone.Model({\n\t                visible: true,\n\t                data: [],\n\t                id: Utils.uid(),\n\t                error_text: 'No options available.',\n\t                wait_text: 'Please wait...',\n\t                multiple: false,\n\t                optional: false,\n\t                onchange: function () {}\n\t            }).set(options);\n\t            this.listenTo(this.model, 'change:value', this._changeValue, this);\n\t            this.listenTo(this.model, 'change:wait', this._changeWait, this);\n\t            this.listenTo(this.model, 'change:data', this._changeData, this);\n\t            this.listenTo(this.model, 'change:visible', this._changeVisible, this);\n\t            this.on('change', function () {\n\t                self.model.get('onchange')(self.value());\n\t            });\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            this.$el.empty().removeClass().addClass('ui-options').append(this.$message = $('<div/>')).append(this.$menu = $('<div/>').addClass('ui-options-menu')).append(this.$options = $(this._template()));\n\t\n\t            // add select/unselect all button\n\t            this.all_button = null;\n\t            if (this.model.get('multiple')) {\n\t                this.all_button = new Buttons.ButtonCheck({\n\t                    onclick: function () {\n\t                        self.$('input').prop('checked', self.all_button.value() !== 0);\n\t                        self.value(self._getValue());\n\t                        self.trigger('change');\n\t                    }\n\t                });\n\t                this.$menu.append(this.all_button.$el);\n\t            }\n\t\n\t            // finalize dom\n\t            this._changeData();\n\t            this._changeWait();\n\t            this._changeVisible();\n\t        },\n\t\n\t        /** Update available options */\n\t        update: function (options) {\n\t            this.model.set('data', options);\n\t        },\n\t\n\t        _changeData: function () {\n\t            var self = this;\n\t            this.$options.empty();\n\t            if (this._templateOptions) {\n\t                this.$options.append(this._templateOptions(this.model.get('data')));\n\t            } else {\n\t                _.each(this.model.get('data'), function (option) {\n\t                    self.$options.append($(self._templateOption(option)).addClass('ui-option').tooltip({ title: option.tooltip, placement: 'bottom' }));\n\t                });\n\t            }\n\t            var self = this;\n\t            this.$('input').on('change', function () {\n\t                self.value(self._getValue());\n\t                self.trigger('change');\n\t            });\n\t            this._changeValue();\n\t            this._changeWait();\n\t        },\n\t\n\t        _changeVisible: function () {\n\t            this.$el[this.model.get('visible') ? 'show' : 'hide']();\n\t        },\n\t\n\t        _changeWait: function () {\n\t            if (this.model.get('wait')) {\n\t                if (this.length() === 0) {\n\t                    this._messageShow(this.model.get('wait_text'), 'info');\n\t                    this.$options.hide();\n\t                    this.$menu.hide();\n\t                }\n\t            } else {\n\t                if (this.length() === 0) {\n\t                    this._messageShow(this.model.get('error_text'), 'danger');\n\t                    this.$options.hide();\n\t                    this.$menu.hide();\n\t                } else {\n\t                    this.$message.hide();\n\t                    this.$options.css('display', 'inline-block');\n\t                    this.$menu.show();\n\t                }\n\t            }\n\t        },\n\t\n\t        _changeValue: function () {\n\t            this._setValue(this.model.get('value'));\n\t            if (this._getValue() === null && !this.model.get('multiple') && !this.model.get('optional')) {\n\t                this._setValue(this.first());\n\t            }\n\t            this.all_button && this.all_button.value($.isArray(this._getValue()) ? this._getValue().length : 0, this.length());\n\t        },\n\t\n\t        /** Return/Set current selection */\n\t        value: function (new_value) {\n\t            new_value !== undefined && this.model.set('value', new_value);\n\t            return this._getValue();\n\t        },\n\t\n\t        /** Return first available option */\n\t        first: function () {\n\t            var options = this.$('input').first();\n\t            return options.length > 0 ? options.val() : null;\n\t        },\n\t\n\t        /** Show a spinner indicating that the select options are currently loaded */\n\t        wait: function () {\n\t            this.model.set('wait', true);\n\t        },\n\t\n\t        /** Hide spinner indicating that the request has been completed */\n\t        unwait: function () {\n\t            this.model.set('wait', false);\n\t        },\n\t\n\t        /** Returns the number of options */\n\t        length: function () {\n\t            return this.$('.ui-option').length;\n\t        },\n\t\n\t        /** Set value to dom */\n\t        _setValue: function (new_value) {\n\t            var self = this;\n\t            if (new_value !== undefined) {\n\t                this.$('input').prop('checked', false);\n\t                if (new_value !== null) {\n\t                    var values = $.isArray(new_value) ? new_value : [new_value];\n\t                    _.each(values, function (v) {\n\t                        self.$('input[value=\"' + v + '\"]').first().prop('checked', true);\n\t                    });\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Return current selection */\n\t        _getValue: function () {\n\t            var selected = [];\n\t            this.$(':checked').each(function () {\n\t                selected.push($(this).val());\n\t            });\n\t            if (Utils.isEmpty(selected)) {\n\t                return null;\n\t            }\n\t            return this.model.get('multiple') ? selected : selected[0];\n\t        },\n\t\n\t        /** Show message instead if options */\n\t        _messageShow: function (text, status) {\n\t            this.$message.show().removeClass().addClass('ui-message alert alert-' + status).html(text);\n\t        },\n\t\n\t        /** Main template function */\n\t        _template: function () {\n\t            return $('<div/>').addClass('ui-options-list');\n\t        }\n\t    });\n\t\n\t    /** Iconized **/\n\t    var BaseIcons = Base.extend({\n\t        _templateOption: function (pair) {\n\t            var id = Utils.uid();\n\t            return $('<div/>').addClass('ui-option').append($('<input/>').attr({\n\t                id: id,\n\t                type: this.model.get('type'),\n\t                name: this.model.id,\n\t                value: pair.value })).append($('<label/>').addClass('ui-options-label').attr('for', id).html(pair.label));\n\t        }\n\t    });\n\t\n\t    /** Radio button field **/\n\t    var Radio = {};\n\t    Radio.View = BaseIcons.extend({\n\t        initialize: function (options) {\n\t            options.type = 'radio';\n\t            BaseIcons.prototype.initialize.call(this, options);\n\t        }\n\t    });\n\t\n\t    /** Checkbox options field **/\n\t    var Checkbox = {};\n\t    Checkbox.View = BaseIcons.extend({\n\t        initialize: function (options) {\n\t            options.type = 'checkbox';\n\t            options.multiple = true;\n\t            BaseIcons.prototype.initialize.call(this, options);\n\t        }\n\t    });\n\t\n\t    /** Radio button options field styled as classic buttons **/\n\t    var RadioButton = {};\n\t    RadioButton.View = Base.extend({\n\t        initialize: function (options) {\n\t            Base.prototype.initialize.call(this, options);\n\t        },\n\t\n\t        /** Set current value */\n\t        _setValue: function (new_value) {\n\t            if (new_value !== undefined) {\n\t                this.$('input').prop('checked', false);\n\t                this.$('label').removeClass('active');\n\t                this.$('[value=\"' + new_value + '\"]').prop('checked', true).closest('label').addClass('active');\n\t            }\n\t        },\n\t\n\t        /** Template for a single option */\n\t        _templateOption: function (pair) {\n\t            var $el = $('<label/>').addClass('btn btn-default');\n\t            pair.icon && $el.append($('<i/>').addClass('fa').addClass(pair.icon).addClass(!pair.label && 'no-padding'));\n\t            $el.append($('<input/>').attr({ type: 'radio', name: this.model.id, value: pair.value }));\n\t            pair.label && $el.append(pair.label);\n\t            return $el;\n\t        },\n\t\n\t        /** Main template function */\n\t        _template: function () {\n\t            return $('<div/>').addClass('btn-group ui-radiobutton').attr('data-toggle', 'buttons');\n\t        }\n\t    });\n\t\n\t    return {\n\t        Base: Base,\n\t        BaseIcons: BaseIcons,\n\t        Radio: Radio,\n\t        RadioButton: RadioButton,\n\t        Checkbox: Checkbox\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/**\n\t *  This class creates/wraps a default html select field as backbone class.\n\t */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Buttons) {\n\t    var View = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.data = [];\n\t            this.data2 = [];\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                cls: 'ui-select',\n\t                error_text: 'No options available',\n\t                empty_text: 'Nothing selected',\n\t                visible: true,\n\t                wait: false,\n\t                multiple: false,\n\t                searchable: true,\n\t                optional: false,\n\t                disabled: false,\n\t                onchange: function () {},\n\t                value: null,\n\t                selectall: true,\n\t                pagesize: 20\n\t            }).set(options);\n\t            this.on('change', function () {\n\t                self.model.get('onchange') && self.model.get('onchange')(self.value());\n\t            });\n\t            this.listenTo(this.model, 'change:data', this._changeData, this);\n\t            this.listenTo(this.model, 'change:disabled', this._changeDisabled, this);\n\t            this.listenTo(this.model, 'change:wait', this._changeWait, this);\n\t            this.listenTo(this.model, 'change:visible', this._changeVisible, this);\n\t            this.listenTo(this.model, 'change:value', this._changeValue, this);\n\t            this.listenTo(this.model, 'change:multiple change:searchable change:cls change:id', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            this.model.get('searchable') ? this._renderSearchable() : this._renderClassic();\n\t            this.$el.addClass(this.model.get('cls')).attr('id', this.model.get('id'));\n\t            this.$select.empty().addClass('select').attr('id', this.model.get('id') + '_select').prop('multiple', this.model.get('multiple')).on('change', function () {\n\t                self.value(self._getValue());\n\t                self.trigger('change');\n\t            });\n\t            this._changeData();\n\t            this._changeWait();\n\t            this._changeVisible();\n\t            this._changeDisabled();\n\t        },\n\t\n\t        /** Renders the classic selection field */\n\t        _renderClassic: function () {\n\t            var self = this;\n\t            this.$el.addClass(this.model.get('multiple') ? 'ui-select-multiple' : 'ui-select').append(this.$select = $('<select/>')).append(this.$dropdown = $('<div/>')).append(this.$resize = $('<div/>').append(this.$resize_icon = $('<i/>')));\n\t            if (this.model.get('multiple')) {\n\t                this.$dropdown.hide();\n\t                this.$resize_icon.addClass('fa fa-angle-double-right fa-rotate-45').show();\n\t                this.$resize.removeClass().addClass('icon-resize').show().off('mousedown').on('mousedown', function (event) {\n\t                    var currentY = event.pageY;\n\t                    var currentHeight = self.$select.height();\n\t                    self.minHeight = self.minHeight || currentHeight;\n\t                    $('#dd-helper').show().on('mousemove', function (event) {\n\t                        self.$select.height(Math.max(currentHeight + (event.pageY - currentY), self.minHeight));\n\t                    }).on('mouseup mouseleave', function () {\n\t                        $('#dd-helper').hide().off();\n\t                    });\n\t                });\n\t            } else {\n\t                this.$dropdown.show();\n\t                this.$resize.hide();\n\t                this.$resize_icon.hide();\n\t            }\n\t        },\n\t\n\t        /** Renders the default select2 field */\n\t        _renderSearchable: function () {\n\t            var self = this;\n\t            this.$el.append(this.$select = $('<div/>')).append(this.$dropdown = $('<div/>'));\n\t            this.$dropdown.hide();\n\t            if (!this.model.get('multiple')) {\n\t                this.$dropdown.show().on('click', function () {\n\t                    self.$select.select2 && self.$select.select2('open');\n\t                });\n\t            }\n\t            this.all_button = null;\n\t            if (this.model.get('multiple') && this.model.get('selectall')) {\n\t                this.all_button = new Buttons.ButtonCheck({\n\t                    onclick: function () {\n\t                        var new_value = [];\n\t                        self.all_button.value() !== 0 && _.each(self.model.get('data'), function (option) {\n\t                            new_value.push(option.value);\n\t                        });\n\t                        self.value(new_value);\n\t                        self.trigger('change');\n\t                    }\n\t                });\n\t                this.$el.prepend(this.all_button.$el);\n\t            }\n\t        },\n\t\n\t        /** Matches a search term with a given text */\n\t        _match: function (term, text) {\n\t            return !term || term == '' || String(text).toUpperCase().indexOf(term.toUpperCase()) >= 0;\n\t        },\n\t\n\t        /** Updates the selection options */\n\t        _changeData: function () {\n\t            var self = this;\n\t            this.data = [];\n\t            if (!this.model.get('multiple') && this.model.get('optional')) {\n\t                this.data.push({ value: '__null__', label: self.model.get('empty_text') });\n\t            }\n\t            _.each(this.model.get('data'), function (option) {\n\t                self.data.push(option);\n\t            });\n\t            if (this.length() == 0) {\n\t                this.data.push({ value: '__null__', label: this.model.get('error_text') });\n\t            }\n\t            if (this.model.get('searchable')) {\n\t                this.data2 = [];\n\t                _.each(this.data, function (option, index) {\n\t                    self.data2.push({ order: index, id: option.value, text: option.label, tags: option.tags });\n\t                });\n\t                this.$select.data('select2') && this.$select.select2('destroy');\n\t                this.matched_tags = {};\n\t                this.$select.select2({\n\t                    data: self.data2,\n\t                    closeOnSelect: !this.model.get('multiple'),\n\t                    multiple: this.model.get('multiple'),\n\t                    query: function (q) {\n\t                        self.matched_tags = {};\n\t                        var pagesize = self.model.get('pagesize');\n\t                        var results = _.filter(self.data2, function (e) {\n\t                            var found = false;\n\t                            _.each(e.tags, function (tag) {\n\t                                if (self._match(q.term, tag)) {\n\t                                    found = self.matched_tags[tag] = true;\n\t                                }\n\t                            });\n\t                            return found || self._match(q.term, e.text);\n\t                        });\n\t                        q.callback({\n\t                            results: results.slice((q.page - 1) * pagesize, q.page * pagesize),\n\t                            more: results.length >= q.page * pagesize\n\t                        });\n\t                    },\n\t                    formatResult: function (result) {\n\t                        return _.escape(result.text) + '<div class=\"ui-tags\">' + _.reduce(result.tags, function (memo, tag) {\n\t                            if (self.matched_tags[tag]) {\n\t                                return memo + '&nbsp;' + '<div class=\"label label-info\">' + _.escape(tag) + '</div>';\n\t                            }\n\t                            return memo;\n\t                        }, '') + '</div>';\n\t                    }\n\t                });\n\t                this.$('.select2-container .select2-search input').off('blur');\n\t            } else {\n\t                this.$select.find('option').remove();\n\t                _.each(this.data, function (option) {\n\t                    self.$select.append($('<option/>').attr('value', option.value).html(_.escape(option.label)));\n\t                });\n\t            }\n\t            this.model.set('disabled', this.length() == 0);\n\t            this._changeValue();\n\t        },\n\t\n\t        /** Handles field enabling/disabling, usually used when no options are available */\n\t        _changeDisabled: function () {\n\t            if (this.model.get('searchable')) {\n\t                this.$select.select2(this.model.get('disabled') ? 'disable' : 'enable');\n\t            } else {\n\t                this.$select.prop('disabled', this.model.get('disabled'));\n\t            }\n\t        },\n\t\n\t        /** Searchable fields may display a spinner e.g. while waiting for a server response */\n\t        _changeWait: function () {\n\t            this.$dropdown.removeClass().addClass('icon-dropdown fa').addClass(this.model.get('wait') ? 'fa-spinner fa-spin' : 'fa-caret-down');\n\t        },\n\t\n\t        /** Handles field visibility */\n\t        _changeVisible: function () {\n\t            this.$el[this.model.get('visible') ? 'show' : 'hide']();\n\t            this.$select[this.model.get('visible') ? 'show' : 'hide']();\n\t        },\n\t\n\t        /** Synchronizes the model value with the actually selected field value */\n\t        _changeValue: function () {\n\t            this._setValue(this.model.get('value'));\n\t            if (this.model.get('multiple')) {\n\t                if (this.all_button) {\n\t                    var value = this._getValue();\n\t                    this.all_button.value($.isArray(value) ? value.length : 0, this.length());\n\t                }\n\t            } else if (this._getValue() === null && !this.model.get('optional')) {\n\t                this._setValue(this.first());\n\t            }\n\t        },\n\t\n\t        /** Return/Set current selection */\n\t        value: function (new_value) {\n\t            new_value !== undefined && this.model.set('value', new_value);\n\t            return this._getValue();\n\t        },\n\t\n\t        /** Return the first select option */\n\t        first: function () {\n\t            return this.data.length > 0 ? this.data[0].value : null;\n\t        },\n\t\n\t        /** Check if a value is an existing option */\n\t        exists: function (value) {\n\t            return _.findWhere(this.data, { value: value });\n\t        },\n\t\n\t        /** Return the label/text of the current selection */\n\t        text: function () {\n\t            var v = this._getValue();\n\t            var d = this.exists($.isArray(v) ? v[0] : v);\n\t            return d ? d.label : '';\n\t        },\n\t\n\t        /** Show the select field */\n\t        show: function () {\n\t            this.model.set('visible', true);\n\t        },\n\t\n\t        /** Hide the select field */\n\t        hide: function () {\n\t            this.model.set('visible', false);\n\t        },\n\t\n\t        /** Show a spinner indicating that the select options are currently loaded */\n\t        wait: function () {\n\t            this.model.set('wait', true);\n\t        },\n\t\n\t        /** Hide spinner indicating that the request has been completed */\n\t        unwait: function () {\n\t            this.model.set('wait', false);\n\t        },\n\t\n\t        /** Returns true if the field is disabled */\n\t        disabled: function () {\n\t            return this.model.get('disabled');\n\t        },\n\t\n\t        /** Enable the select field */\n\t        enable: function () {\n\t            this.model.set('disabled', false);\n\t        },\n\t\n\t        /** Disable the select field */\n\t        disable: function () {\n\t            this.model.set('disabled', true);\n\t        },\n\t\n\t        /** Update all available options at once */\n\t        add: function (options, sorter) {\n\t            _.each(this.model.get('data'), function (v) {\n\t                v.keep && !_.findWhere(options, { value: v.value }) && options.push(v);\n\t            });\n\t            sorter && options && options.sort(sorter);\n\t            this.model.set('data', options);\n\t        },\n\t\n\t        /** Update available options */\n\t        update: function (options) {\n\t            this.model.set('data', options);\n\t        },\n\t\n\t        /** Set the custom onchange callback function */\n\t        setOnChange: function (callback) {\n\t            this.model.set('onchange', callback);\n\t        },\n\t\n\t        /** Number of available options */\n\t        length: function () {\n\t            return $.isArray(this.model.get('data')) ? this.model.get('data').length : 0;\n\t        },\n\t\n\t        /** Set value to dom */\n\t        _setValue: function (new_value) {\n\t            var self = this;\n\t            if (new_value === null || new_value === undefined) {\n\t                new_value = '__null__';\n\t            }\n\t            if (this.model.get('multiple')) {\n\t                new_value = $.isArray(new_value) ? new_value : [new_value];\n\t            } else if ($.isArray(new_value)) {\n\t                if (new_value.length > 0) {\n\t                    new_value = new_value[0];\n\t                } else {\n\t                    new_value = '__null__';\n\t                }\n\t            }\n\t            if (this.model.get('searchable')) {\n\t                if ($.isArray(new_value)) {\n\t                    val = [];\n\t                    _.each(new_value, function (v) {\n\t                        var d = _.findWhere(self.data2, { id: v });\n\t                        d && val.push(d);\n\t                    });\n\t                    new_value = val;\n\t                } else {\n\t                    var d = _.findWhere(this.data2, { id: new_value });\n\t                    new_value = d;\n\t                }\n\t                this.$select.select2('data', new_value);\n\t            } else {\n\t                this.$select.val(new_value);\n\t            }\n\t        },\n\t\n\t        /** Get value from dom */\n\t        _getValue: function () {\n\t            var val = null;\n\t            if (this.model.get('searchable')) {\n\t                var selected = this.$select.select2('data');\n\t                if (selected) {\n\t                    if ($.isArray(selected)) {\n\t                        val = [];\n\t                        selected.sort(function (a, b) {\n\t                            return a.order - b.order;\n\t                        });\n\t                        _.each(selected, function (v) {\n\t                            val.push(v.id);\n\t                        });\n\t                    } else {\n\t                        val = selected.id;\n\t                    }\n\t                }\n\t            } else {\n\t                val = this.$select.val();\n\t            }\n\t            return Utils.isEmpty(val) ? null : val;\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 16 */,\n/* 17 */,\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _, jQuery) {!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t    //jquery\n\t    //backbone\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t    // =============================================================================\n\t    /**\n\t     * view for a popup menu\n\t     */\n\t    var PopupMenu = Backbone.View.extend({\n\t        //TODO: maybe better as singleton off the Galaxy obj\n\t        /** Cache the desired button element and options, set up the button click handler\n\t         *  NOTE: attaches this view as HTML/jQ data on the button for later use.\n\t         */\n\t        initialize: function ($button, options) {\n\t            // default settings\n\t            this.$button = $button;\n\t            if (!this.$button.length) {\n\t                this.$button = $('<div/>');\n\t            }\n\t            this.options = options || [];\n\t            this.$button.data('popupmenu', this);\n\t\n\t            // set up button click -> open menu behavior\n\t            var menu = this;\n\t            this.$button.click(function (event) {\n\t                // if there's already a menu open, remove it\n\t                $('.popmenu-wrapper').remove();\n\t                menu._renderAndShow(event);\n\t                return false;\n\t            });\n\t        },\n\t\n\t        // render the menu, append to the page body at the click position, and set up the 'click-away' handlers, show\n\t        _renderAndShow: function (clickEvent) {\n\t            this.render();\n\t            this.$el.appendTo('body').css(this._getShownPosition(clickEvent)).show();\n\t            this._setUpCloseBehavior();\n\t        },\n\t\n\t        // render the menu\n\t        // this menu doesn't attach itself to the DOM ( see _renderAndShow )\n\t        render: function () {\n\t            // render the menu body absolute and hidden, fill with template\n\t            this.$el.addClass('popmenu-wrapper').hide().css({ position: 'absolute' }).html(this.template(this.$button.attr('id'), this.options));\n\t\n\t            // set up behavior on each link/anchor elem\n\t            if (this.options.length) {\n\t                var menu = this;\n\t                //precondition: there should be one option per li\n\t                this.$el.find('li').each(function (i, li) {\n\t                    var option = menu.options[i];\n\t\n\t                    // if the option has 'func', call that function when the anchor is clicked\n\t                    if (option.func) {\n\t                        $(this).children('a.popupmenu-option').click(function (event) {\n\t                            option.func.call(menu, event, option);\n\t                            // We must preventDefault otherwise clicking \"cancel\"\n\t                            // on a purge or something still navigates and causes\n\t                            // the action.\n\t                            event.preventDefault();\n\t                            // bubble up so that an option click will call the close behavior\n\t                        });\n\t                    }\n\t                });\n\t            }\n\t            return this;\n\t        },\n\t\n\t        template: function (id, options) {\n\t            return ['<ul id=\"', id, '-menu\" class=\"dropdown-menu\">', this._templateOptions(options), '</ul>'].join('');\n\t        },\n\t\n\t        _templateOptions: function (options) {\n\t            if (!options.length) {\n\t                return '<li>(no options)</li>';\n\t            }\n\t            return _.map(options, function (option) {\n\t                if (option.divider) {\n\t                    return '<li class=\"divider\"></li>';\n\t                } else if (option.header) {\n\t                    return ['<li class=\"head\"><a href=\"javascript:void(0);\">', option.html, '</a></li>'].join('');\n\t                }\n\t                var href = option.href || 'javascript:void(0);',\n\t                    target = option.target ? ' target=\"' + option.target + '\"' : '',\n\t                    check = option.checked ? '<span class=\"fa fa-check\"></span>' : '';\n\t                return ['<li><a class=\"popupmenu-option\" href=\"', href, '\"', target, '>', check, option.html, '</a></li>'].join('');\n\t            }).join('');\n\t        },\n\t\n\t        // get the absolute position/offset for the menu\n\t        _getShownPosition: function (clickEvent) {\n\t\n\t            // display menu horiz. centered on click...\n\t            var menuWidth = this.$el.width();\n\t            var x = clickEvent.pageX - menuWidth / 2;\n\t\n\t            // adjust to handle horiz. scroll and window dimensions ( draw entirely on visible screen area )\n\t            x = Math.min(x, $(document).scrollLeft() + $(window).width() - menuWidth - 5);\n\t            x = Math.max(x, $(document).scrollLeft() + 5);\n\t            return {\n\t                top: clickEvent.pageY,\n\t                left: x\n\t            };\n\t        },\n\t\n\t        // bind an event handler to all available frames so that when anything is clicked\n\t        // the menu is removed from the DOM and the event handler unbinds itself\n\t        _setUpCloseBehavior: function () {\n\t            var menu = this;\n\t            //TODO: alternately: focus hack, blocking overlay, jquery.blockui\n\t\n\t            // function to close popup and unbind itself\n\t            function closePopup(event) {\n\t                $(document).off('click.close_popup');\n\t                if (window && window.parent !== window) {\n\t                    try {\n\t                        $(window.parent.document).off(\"click.close_popup\");\n\t                    } catch (err) {}\n\t                } else {\n\t                    try {\n\t                        $('iframe#galaxy_main').contents().off(\"click.close_popup\");\n\t                    } catch (err) {}\n\t                }\n\t                menu.remove();\n\t            }\n\t\n\t            $('html').one(\"click.close_popup\", closePopup);\n\t            if (window && window.parent !== window) {\n\t                try {\n\t                    $(window.parent.document).find('html').one(\"click.close_popup\", closePopup);\n\t                } catch (err) {}\n\t            } else {\n\t                try {\n\t                    $('iframe#galaxy_main').contents().one(\"click.close_popup\", closePopup);\n\t                } catch (err) {}\n\t            }\n\t        },\n\t\n\t        // add a menu option/item at the given index\n\t        addItem: function (item, index) {\n\t            // append to end if no index\n\t            index = index >= 0 ? index : this.options.length;\n\t            this.options.splice(index, 0, item);\n\t            return this;\n\t        },\n\t\n\t        // remove a menu option/item at the given index\n\t        removeItem: function (index) {\n\t            if (index >= 0) {\n\t                this.options.splice(index, 1);\n\t            }\n\t            return this;\n\t        },\n\t\n\t        // search for a menu option by its html\n\t        findIndexByHtml: function (html) {\n\t            for (var i = 0; i < this.options.length; i++) {\n\t                if (_.has(this.options[i], 'html') && this.options[i].html === html) {\n\t                    return i;\n\t                }\n\t            }\n\t            return null;\n\t        },\n\t\n\t        // search for a menu option by its html\n\t        findItemByHtml: function (html) {\n\t            return this.options[this.findIndexByHtml(html)];\n\t        },\n\t\n\t        // string representation\n\t        toString: function () {\n\t            return 'PopupMenu';\n\t        }\n\t    });\n\t    /** shortcut to new for when you don't need to preserve the ref */\n\t    PopupMenu.create = function _create($button, options) {\n\t        return new PopupMenu($button, options);\n\t    };\n\t\n\t    // -----------------------------------------------------------------------------\n\t    // the following class functions are bridges from the original make_popupmenu and make_popup_menus\n\t    // to the newer backbone.js PopupMenu\n\t\n\t    /** Create a PopupMenu from simple map initial_options activated by clicking button_element.\n\t     *      Converts initial_options to object array used by PopupMenu.\n\t     *  @param {jQuery|DOMElement} button_element element which, when clicked, activates menu\n\t     *  @param {Object} initial_options map of key -> values, where\n\t     *      key is option text, value is fn to call when option is clicked\n\t     *  @returns {PopupMenu} the PopupMenu created\n\t     */\n\t    PopupMenu.make_popupmenu = function (button_element, initial_options) {\n\t        var convertedOptions = [];\n\t        _.each(initial_options, function (optionVal, optionKey) {\n\t            var newOption = { html: optionKey };\n\t\n\t            // keys with null values indicate: header\n\t            if (optionVal === null) {\n\t                // !optionVal? (null only?)\n\t                newOption.header = true;\n\t\n\t                // keys with function values indicate: a menu option\n\t            } else if (jQuery.type(optionVal) === 'function') {\n\t                newOption.func = optionVal;\n\t            }\n\t            //TODO:?? any other special optionVals?\n\t            // there was no divider option originally\n\t            convertedOptions.push(newOption);\n\t        });\n\t        return new PopupMenu($(button_element), convertedOptions);\n\t    };\n\t\n\t    /** Find all anchors in $parent (using selector) and covert anchors into a PopupMenu options map.\n\t     *  @param {jQuery} $parent the element that contains the links to convert to options\n\t     *  @param {String} selector jq selector string to find links\n\t     *  @returns {Object[]} the options array to initialize a PopupMenu\n\t     */\n\t    //TODO: lose parent and selector, pass in array of links, use map to return options\n\t    PopupMenu.convertLinksToOptions = function ($parent, selector) {\n\t        $parent = $($parent);\n\t        selector = selector || 'a';\n\t        var options = [];\n\t        $parent.find(selector).each(function (elem, i) {\n\t            var option = {},\n\t                $link = $(elem);\n\t\n\t            // convert link text to the option text (html) and the href into the option func\n\t            option.html = $link.text();\n\t            if ($link.attr('href')) {\n\t                var linkHref = $link.attr('href'),\n\t                    linkTarget = $link.attr('target'),\n\t                    confirmText = $link.attr('confirm');\n\t\n\t                option.func = function () {\n\t                    // if there's a \"confirm\" attribute, throw up a confirmation dialog, and\n\t                    //  if the user cancels - do nothing\n\t                    if (confirmText && !confirm(confirmText)) {\n\t                        return;\n\t                    }\n\t\n\t                    // if there's no confirm attribute, or the user accepted the confirm dialog:\n\t                    switch (linkTarget) {\n\t                        // relocate the center panel\n\t                        case '_parent':\n\t                            window.parent.location = linkHref;\n\t                            break;\n\t\n\t                        // relocate the entire window\n\t                        case '_top':\n\t                            window.top.location = linkHref;\n\t                            break;\n\t\n\t                        // relocate this panel\n\t                        default:\n\t                            window.location = linkHref;\n\t                    }\n\t                };\n\t            }\n\t            options.push(option);\n\t        });\n\t        return options;\n\t    };\n\t\n\t    /** Create a single popupmenu from existing DOM button and anchor elements\n\t     *  @param {jQuery} $buttonElement the element that when clicked will open the menu\n\t     *  @param {jQuery} $menuElement the element that contains the anchors to convert into a menu\n\t     *  @param {String} menuElementLinkSelector jq selector string used to find anchors to be made into menu options\n\t     *  @returns {PopupMenu} the PopupMenu (Backbone View) that can render, control the menu\n\t     */\n\t    PopupMenu.fromExistingDom = function ($buttonElement, $menuElement, menuElementLinkSelector) {\n\t        $buttonElement = $($buttonElement);\n\t        $menuElement = $($menuElement);\n\t        var options = PopupMenu.convertLinksToOptions($menuElement, menuElementLinkSelector);\n\t        // we're done with the menu (having converted it to an options map)\n\t        $menuElement.remove();\n\t        return new PopupMenu($buttonElement, options);\n\t    };\n\t\n\t    /** Create all popupmenus within a document or a more specific element\n\t     *  @param {DOMElement} parent the DOM element in which to search for popupmenus to build (defaults to document)\n\t     *  @param {String} menuSelector jq selector string to find popupmenu menu elements (defaults to \"div[popupmenu]\")\n\t     *  @param {Function} buttonSelectorBuildFn the function to build the jq button selector.\n\t     *      Will be passed $menuElement, parent.\n\t     *      (Defaults to return '#' + $menuElement.attr( 'popupmenu' ); )\n\t     *  @returns {PopupMenu[]} array of popupmenus created\n\t     */\n\t    PopupMenu.make_popup_menus = function (parent, menuSelector, buttonSelectorBuildFn) {\n\t        parent = parent || document;\n\t        // orig. Glx popupmenu menus have a (non-std) attribute 'popupmenu'\n\t        //  which contains the id of the button that activates the menu\n\t        menuSelector = menuSelector || 'div[popupmenu]';\n\t        // default to (orig. Glx) matching button to menu by using the popupmenu attr of the menu as the id of the button\n\t        buttonSelectorBuildFn = buttonSelectorBuildFn || function ($menuElement, parent) {\n\t            return '#' + $menuElement.attr('popupmenu');\n\t        };\n\t\n\t        // aggregate and return all PopupMenus\n\t        var popupMenusCreated = [];\n\t        $(parent).find(menuSelector).each(function () {\n\t            var $menuElement = $(this),\n\t                $buttonElement = $(parent).find(buttonSelectorBuildFn($menuElement, parent));\n\t            popupMenusCreated.push(PopupMenu.fromDom($buttonElement, $menuElement));\n\t            $buttonElement.addClass('popup');\n\t        });\n\t        return popupMenusCreated;\n\t    };\n\t\n\t    // =============================================================================\n\t    return PopupMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/* This class maps the form dom to an api compatible javascript dictionary. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t    var Manager = Backbone.Model.extend({\n\t        initialize: function (app) {\n\t            this.app = app;\n\t        },\n\t\n\t        /** Creates a checksum. */\n\t        checksum: function () {\n\t            var sum = '';\n\t            var self = this;\n\t            this.app.section.$el.find('.section-row').each(function () {\n\t                var id = $(this).attr('id');\n\t                var field = self.app.field_list[id];\n\t                if (field) {\n\t                    sum += id + ':' + JSON.stringify(field.value && field.value()) + ':' + field.collapsed + ';';\n\t                }\n\t            });\n\t            return sum;\n\t        },\n\t\n\t        /** Convert dom into a dictionary of flat id/value pairs used e.g. on job submission. */\n\t        create: function () {\n\t            var self = this;\n\t\n\t            // get raw dictionary from dom\n\t            var dict = {};\n\t            this._iterate(this.app.section.$el, dict);\n\t\n\t            // add to result dictionary, label elements\n\t            var result_dict = {};\n\t            this.flat_dict = {};\n\t            function add(flat_id, input_id, input_value) {\n\t                self.flat_dict[flat_id] = input_id;\n\t                result_dict[flat_id] = input_value;\n\t                self.app.element_list[input_id] && self.app.element_list[input_id].$el.attr('tour_id', flat_id);\n\t            }\n\t            // converter between raw dictionary and job dictionary\n\t            function convert(identifier, head) {\n\t                for (var index in head) {\n\t                    var node = head[index];\n\t                    if (node.input) {\n\t                        var input = node.input;\n\t                        var flat_id = identifier;\n\t                        if (identifier != '') {\n\t                            flat_id += '|';\n\t                        }\n\t                        flat_id += input.name;\n\t                        switch (input.type) {\n\t                            case 'repeat':\n\t                                var section_label = 'section-';\n\t                                var block_indices = [];\n\t                                var block_prefix = null;\n\t                                for (var block_label in node) {\n\t                                    var pos = block_label.indexOf(section_label);\n\t                                    if (pos != -1) {\n\t                                        pos += section_label.length;\n\t                                        block_indices.push(parseInt(block_label.substr(pos)));\n\t                                        if (!block_prefix) {\n\t                                            block_prefix = block_label.substr(0, pos);\n\t                                        }\n\t                                    }\n\t                                }\n\t                                block_indices.sort(function (a, b) {\n\t                                    return a - b;\n\t                                });\n\t                                var index = 0;\n\t                                for (var i in block_indices) {\n\t                                    convert(flat_id + '_' + index++, node[block_prefix + block_indices[i]]);\n\t                                }\n\t                                break;\n\t                            case 'conditional':\n\t                                var value = self.app.field_list[input.id].value();\n\t                                add(flat_id + '|' + input.test_param.name, input.id, value);\n\t                                var selectedCase = matchCase(input, value);\n\t                                if (selectedCase != -1) {\n\t                                    convert(flat_id, head[input.id + '-section-' + selectedCase]);\n\t                                }\n\t                                break;\n\t                            case 'section':\n\t                                convert(!input.flat && flat_id || '', node);\n\t                                break;\n\t                            default:\n\t                                var field = self.app.field_list[input.id];\n\t                                if (field && field.value) {\n\t                                    var value = field.value();\n\t                                    if (input.ignore === undefined || input.ignore != value) {\n\t                                        if (field.collapsed && input.collapsible_value) {\n\t                                            value = input.collapsible_value;\n\t                                        }\n\t                                        add(flat_id, input.id, value);\n\t                                        if (input.payload) {\n\t                                            for (var p_id in input.payload) {\n\t                                                add(p_id, input.id, input.payload[p_id]);\n\t                                            }\n\t                                        }\n\t                                    }\n\t                                }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            convert('', dict);\n\t            return result_dict;\n\t        },\n\t\n\t        /** Matches flat ids to corresponding input element\n\t         * @param{string} flat_id - Flat input id to be looked up.\n\t         */\n\t        match: function (flat_id) {\n\t            return this.flat_dict && this.flat_dict[flat_id];\n\t        },\n\t\n\t        /** Match conditional values to selected cases\n\t        */\n\t        matchCase: function (input, value) {\n\t            return matchCase(input, value);\n\t        },\n\t\n\t        /** Matches a new tool model to the current input elements e.g. used to update dynamic options\n\t        */\n\t        matchModel: function (model, callback) {\n\t            var self = this;\n\t            visitInputs(model.inputs, function (input, name) {\n\t                self.flat_dict[name] && callback(input, self.flat_dict[name]);\n\t            });\n\t        },\n\t\n\t        /** Matches identifier from api response to input elements e.g. used to display validation errors\n\t        */\n\t        matchResponse: function (response) {\n\t            var result = {};\n\t            var self = this;\n\t            function search(id, head) {\n\t                if (typeof head === 'string') {\n\t                    var input_id = self.flat_dict[id];\n\t                    input_id && (result[input_id] = head);\n\t                } else {\n\t                    for (var i in head) {\n\t                        var new_id = i;\n\t                        if (id !== '') {\n\t                            var separator = '|';\n\t                            if (head instanceof Array) {\n\t                                separator = '_';\n\t                            }\n\t                            new_id = id + separator + new_id;\n\t                        }\n\t                        search(new_id, head[i]);\n\t                    }\n\t                }\n\t            }\n\t            search('', response);\n\t            return result;\n\t        },\n\t\n\t        /** Map dom tree to dictionary tree with input elements.\n\t        */\n\t        _iterate: function (parent, dict) {\n\t            var self = this;\n\t            var children = $(parent).children();\n\t            children.each(function () {\n\t                var child = this;\n\t                var id = $(child).attr('id');\n\t                if ($(child).hasClass('section-row')) {\n\t                    var input = self.app.input_list[id];\n\t                    dict[id] = input && { input: input } || {};\n\t                    self._iterate(child, dict[id]);\n\t                } else {\n\t                    self._iterate(child, dict);\n\t                }\n\t            });\n\t        }\n\t    });\n\t\n\t    /** Match conditional values to selected cases\n\t     * @param{dict}   input     - Definition of conditional input parameter\n\t     * @param{dict}   value     - Current value\n\t     */\n\t    var matchCase = function (input, value) {\n\t        if (input.test_param.type == 'boolean') {\n\t            if (value == 'true') {\n\t                value = input.test_param.truevalue || 'true';\n\t            } else {\n\t                value = input.test_param.falsevalue || 'false';\n\t            }\n\t        }\n\t        for (var i in input.cases) {\n\t            if (input.cases[i].value == value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    };\n\t\n\t    /** Visits tool inputs\n\t     * @param{dict}   inputs    - Nested dictionary of input elements\n\t     * @param{dict}   callback  - Called with the mapped dictionary object and corresponding model node\n\t     */\n\t    var visitInputs = function (inputs, callback, prefix, context) {\n\t        context = $.extend(true, {}, context);\n\t        _.each(inputs, function (input) {\n\t            if (input && input.type && input.name) {\n\t                context[input.name] = input;\n\t            }\n\t        });\n\t        for (var key in inputs) {\n\t            var node = inputs[key];\n\t            node.name = node.name || key;\n\t            var name = prefix ? prefix + '|' + node.name : node.name;\n\t            switch (node.type) {\n\t                case 'repeat':\n\t                    _.each(node.cache, function (cache, j) {\n\t                        visitInputs(cache, callback, name + '_' + j, context);\n\t                    });\n\t                    break;\n\t                case 'conditional':\n\t                    if (node.test_param) {\n\t                        callback(node.test_param, name + '|' + node.test_param.name, context);\n\t                        var selectedCase = matchCase(node, node.test_param.value);\n\t                        if (selectedCase != -1) {\n\t                            visitInputs(node.cases[selectedCase].inputs, callback, name, context);\n\t                        } else {\n\t                            Galaxy.emit.debug('form-data::visitInputs() - Invalid case for ' + name + '.');\n\t                        }\n\t                    } else {\n\t                        Galaxy.emit.debug('form-data::visitInputs() - Conditional test parameter missing for ' + name + '.');\n\t                    }\n\t                    break;\n\t                case 'section':\n\t                    visitInputs(node.inputs, callback, name, context);\n\t                    break;\n\t                default:\n\t                    callback(node, name, context);\n\t            }\n\t        }\n\t    };\n\t\n\t    return {\n\t        Manager: Manager,\n\t        visitInputs: visitInputs\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {/** This class creates a ui table element. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t    var View = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.options = Utils.merge(options, {\n\t                content: 'No content available.',\n\t                onchange: null,\n\t                ondblclick: null,\n\t                onconfirm: null,\n\t                cls: 'ui-table',\n\t                selectable: true,\n\t                cls_tr: ''\n\t            });\n\t            this.setElement(this._template());\n\t            this.$thead = this.$('thead');\n\t            this.$tbody = this.$('tbody');\n\t            this.$tmessage = this.$('tmessage');\n\t            this.row = this._row();\n\t            this.row_count = 0;\n\t        },\n\t\n\t        events: {\n\t            'click': '_onclick',\n\t            'dblclick': '_ondblclick'\n\t        },\n\t\n\t        /** Add cell to header row */\n\t        addHeader: function ($el) {\n\t            this.row.append($('<th/>').append($el));\n\t        },\n\t\n\t        /** Append header row to table */\n\t        appendHeader: function () {\n\t            this.$thead.append(this.row);\n\t            this.row = $('<tr/>');\n\t        },\n\t\n\t        /** Add cell to row */\n\t        add: function ($el, width, align) {\n\t            var wrapper = $('<td/>');\n\t            if (width) {\n\t                wrapper.css('width', width);\n\t            }\n\t            if (align) {\n\t                wrapper.css('text-align', align);\n\t            }\n\t            this.row.append(wrapper.append($el));\n\t        },\n\t\n\t        /** Append row to table */\n\t        append: function (id, fade) {\n\t            this._commit(id, fade, false);\n\t        },\n\t\n\t        /** Prepend row to table */\n\t        prepend: function (id, fade) {\n\t            this._commit(id, fade, true);\n\t        },\n\t\n\t        /** Helper to get row element */\n\t        get: function (id) {\n\t            return this.$('#' + id);\n\t        },\n\t\n\t        /** Delete row by id */\n\t        del: function (id) {\n\t            var item = this.$tbody.find('#' + id);\n\t            if (item.length > 0) {\n\t                item.remove();\n\t                this.row_count--;\n\t                this._refresh();\n\t            }\n\t        },\n\t\n\t        /** Delete all rows */\n\t        delAll: function () {\n\t            this.$tbody.empty();\n\t            this.row_count = 0;\n\t            this._refresh();\n\t        },\n\t\n\t        /** Set a value i.e. selects/highlights a particular row by id */\n\t        value: function (new_value) {\n\t            if (this.options.selectable) {\n\t                this.before = this.$tbody.find('.current').attr('id');\n\t                if (new_value !== undefined) {\n\t                    this.$tbody.find('tr').removeClass('current');\n\t                    if (new_value) {\n\t                        this.$tbody.find('#' + new_value).addClass('current');\n\t                    }\n\t                }\n\t                var after = this.$tbody.find('.current').attr('id');\n\t                if (after === undefined) {\n\t                    return null;\n\t                } else {\n\t                    if (after != this.before && this.options.onchange) {\n\t                        this.options.onchange(new_value);\n\t                    }\n\t                    return after;\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Return the number of rows */\n\t        size: function () {\n\t            return this.$tbody.find('tr').length;\n\t        },\n\t\n\t        /** Helper to append rows */\n\t        _commit: function (id, fade, prepend) {\n\t            this.del(id);\n\t            this.row.attr('id', id);\n\t            if (prepend) {\n\t                this.$tbody.prepend(this.row);\n\t            } else {\n\t                this.$tbody.append(this.row);\n\t            }\n\t            if (fade) {\n\t                this.row.hide();\n\t                this.row.fadeIn();\n\t            }\n\t            this.row = this._row();\n\t            this.row_count++;\n\t            this._refresh();\n\t        },\n\t\n\t        /** Helper to create new row */\n\t        _row: function () {\n\t            return $('<tr class=\"' + this.options.cls_tr + '\"></tr>');\n\t        },\n\t\n\t        /** Handles onclick events */\n\t        _onclick: function (e) {\n\t            var old_value = this.value();\n\t            var new_value = $(e.target).closest('tr').attr('id');\n\t            if (new_value != '') {\n\t                if (new_value && old_value != new_value) {\n\t                    if (this.options.onconfirm) {\n\t                        this.options.onconfirm(new_value);\n\t                    } else {\n\t                        this.value(new_value);\n\t                    }\n\t                }\n\t            }\n\t        },\n\t\n\t        /** Handles ondblclick events */\n\t        _ondblclick: function (e) {\n\t            var value = this.value();\n\t            if (value && this.options.ondblclick) {\n\t                this.options.ondblclick(value);\n\t            }\n\t        },\n\t\n\t        /** Refresh helper */\n\t        _refresh: function () {\n\t            if (this.row_count == 0) {\n\t                this.$tmessage.show();\n\t            } else {\n\t                this.$tmessage.hide();\n\t            }\n\t        },\n\t\n\t        /** Template */\n\t        _template: function () {\n\t            return '<div>' + '<table class=\"' + this.options.cls + '\">' + '<thead/>' + '<tbody/>' + '</table>' + '<tmessage>' + this.options.content + '</tmessage>' + '<div>';\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/**\n\t    This class creates a form input element wrapper\n\t*/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t    return Backbone.View.extend({\n\t        initialize: function (app, options) {\n\t            this.app = app;\n\t            this.app_options = app.model ? app.model.attributes : {};\n\t            this.field = options && options.field || new Backbone.View();\n\t            this.model = options && options.model || new Backbone.Model({\n\t                text_enable: this.app_options.text_enable || 'Enable',\n\t                text_disable: this.app_options.text_disable || 'Disable',\n\t                cls_enable: this.app_options.cls_enable || 'fa fa-caret-square-o-down',\n\t                cls_disable: this.app_options.cls_disable || 'fa fa-caret-square-o-up',\n\t                always_refresh: this.app_options.always_refresh\n\t            }).set(options);\n\t\n\t            // set element and link components\n\t            this.setElement(this._template());\n\t            this.$field = this.$('.ui-form-field');\n\t            this.$info = this.$('.ui-form-info');\n\t            this.$preview = this.$('.ui-form-preview');\n\t            this.$collapsible = this.$('.ui-form-collapsible');\n\t            this.$collapsible_text = this.$('.ui-form-collapsible-text');\n\t            this.$collapsible_icon = this.$('.ui-form-collapsible-icon');\n\t            this.$title = this.$('.ui-form-title');\n\t            this.$title_text = this.$('.ui-form-title-text');\n\t            this.$error_text = this.$('.ui-form-error-text');\n\t            this.$error = this.$('.ui-form-error');\n\t            this.$backdrop = this.$('.ui-form-backdrop');\n\t\n\t            // add field element\n\t            this.$field.prepend(this.field.$el);\n\t\n\t            // decide wether to expand or collapse fields\n\t            var collapsible_value = this.model.get('collapsible_value');\n\t            this.field.collapsed = collapsible_value !== undefined && JSON.stringify(this.model.get('value')) == JSON.stringify(collapsible_value);\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t\n\t            // add click handler\n\t            var self = this;\n\t            this.$collapsible.on('click', function () {\n\t                self.field.collapsed = !self.field.collapsed;\n\t                app.trigger && app.trigger('change');\n\t                self.render();\n\t            });\n\t\n\t            // hide error on value change\n\t            if (this.field.model && !this.model.get('always_refresh')) {\n\t                this.listenTo(this.field.model, 'change:value', function () {\n\t                    self.reset();\n\t                });\n\t            }\n\t        },\n\t\n\t        /** Set backdrop for input element */\n\t        backdrop: function () {\n\t            this.model.set('backdrop', true);\n\t        },\n\t\n\t        /** Set error text */\n\t        error: function (text) {\n\t            this.model.set('error_text', text);\n\t        },\n\t\n\t        /** Reset this view */\n\t        reset: function () {\n\t            !this.model.get('fixed') && this.model.set('error_text', null);\n\t        },\n\t\n\t        render: function () {\n\t            // render help\n\t            $('.tooltip').hide();\n\t            var help_text = this.model.get('help', '');\n\t            var help_argument = this.model.get('argument');\n\t            if (help_argument && help_text.indexOf('(' + help_argument + ')') == -1) {\n\t                help_text += ' (' + help_argument + ')';\n\t            }\n\t            this.$info.html(help_text);\n\t            // render visibility\n\t            this.$el[this.model.get('hidden') ? 'hide' : 'show']();\n\t            // render preview view for collapsed fields\n\t            this.$preview[this.field.collapsed && this.model.get('collapsible_preview') || this.model.get('disabled') ? 'show' : 'hide']().html(_.escape(this.model.get('text_value')));\n\t            // render error messages\n\t            var error_text = this.model.get('error_text');\n\t            this.$error[error_text ? 'show' : 'hide']();\n\t            this.$el[error_text ? 'addClass' : 'removeClass']('ui-error');\n\t            this.$error_text.html(error_text);\n\t            // render backdrop\n\t            this.$backdrop[this.model.get('backdrop') ? 'show' : 'hide']();\n\t            // render input field\n\t            this.field.collapsed || this.model.get('disabled') ? this.$field.hide() : this.$field.show();\n\t            // render input field color and style\n\t            this.field.model && this.field.model.set({ 'color': this.model.get('color'), 'style': this.model.get('style') });\n\t            // render collapsible options\n\t            if (!this.model.get('disabled') && this.model.get('collapsible_value') !== undefined) {\n\t                var collapsible_state = this.field.collapsed ? 'enable' : 'disable';\n\t                this.$title_text.hide();\n\t                this.$collapsible.show();\n\t                this.$collapsible_text.text(this.model.get('label'));\n\t                this.$collapsible_icon.removeClass().addClass('icon').addClass(this.model.get('cls_' + collapsible_state)).attr('data-original-title', this.model.get('text_' + collapsible_state)).tooltip({ placement: 'bottom' });\n\t            } else {\n\t                this.$title_text.show().text(this.model.get('label'));\n\t                this.$collapsible.hide();\n\t            }\n\t        },\n\t\n\t        _template: function () {\n\t            return $('<div/>').addClass('ui-form-element').append($('<div/>').addClass('ui-form-error ui-error').append($('<span/>').addClass('fa fa-arrow-down')).append($('<span/>').addClass('ui-form-error-text'))).append($('<div/>').addClass('ui-form-title').append($('<div/>').addClass('ui-form-collapsible').append($('<i/>').addClass('ui-form-collapsible-icon')).append($('<span/>').addClass('ui-form-collapsible-text'))).append($('<span/>').addClass('ui-form-title-text'))).append($('<div/>').addClass('ui-form-field').append($('<span/>').addClass('ui-form-info')).append($('<div/>').addClass('ui-form-backdrop'))).append($('<div/>').addClass('ui-form-preview'));\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {/**\n\t    This class creates input elements. New input parameter types should be added to the types dictionary.\n\t*/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(5), __webpack_require__(36), __webpack_require__(38), __webpack_require__(37), __webpack_require__(34)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Ui, SelectContent, SelectLibrary, SelectFtp, ColorPicker) {\n\t\n\t    // create form view\n\t    return Backbone.Model.extend({\n\t        /** Available parameter types */\n\t        types: {\n\t            'text': '_fieldText',\n\t            'password': '_fieldText',\n\t            'select': '_fieldSelect',\n\t            'data_column': '_fieldSelect',\n\t            'genomebuild': '_fieldSelect',\n\t            'data': '_fieldData',\n\t            'data_collection': '_fieldData',\n\t            'integer': '_fieldSlider',\n\t            'float': '_fieldSlider',\n\t            'boolean': '_fieldBoolean',\n\t            'drill_down': '_fieldDrilldown',\n\t            'color': '_fieldColor',\n\t            'hidden': '_fieldHidden',\n\t            'hidden_data': '_fieldHidden',\n\t            'baseurl': '_fieldHidden',\n\t            'library_data': '_fieldLibrary',\n\t            'ftpfile': '_fieldFtp',\n\t            'upload': '_fieldUpload'\n\t        },\n\t\n\t        /** Returns an input field for a given field type */\n\t        create: function (input_def) {\n\t            var fieldClass = this.types[input_def.type];\n\t            var field = typeof this[fieldClass] === 'function' ? this[fieldClass].call(this, input_def) : null;\n\t            if (!field) {\n\t                field = input_def.options ? this._fieldSelect(input_def) : this._fieldText(input_def);\n\t                Galaxy.emit.debug('form-parameters::_addRow()', 'Auto matched field type (' + input_def.type + ').');\n\t            }\n\t            input_def.value === undefined && (input_def.value = null);\n\t            field.value(input_def.value);\n\t            return field;\n\t        },\n\t\n\t        /** Data input field */\n\t        _fieldData: function (input_def) {\n\t            return new SelectContent.View({\n\t                id: 'field-' + input_def.id,\n\t                extensions: input_def.extensions,\n\t                optional: input_def.optional,\n\t                multiple: input_def.multiple,\n\t                type: input_def.type,\n\t                flavor: input_def.flavor,\n\t                data: input_def.options,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Select/Checkbox/Radio options field */\n\t        _fieldSelect: function (input_def) {\n\t            // show text field e.g. in workflow editor\n\t            if (input_def.is_workflow) {\n\t                return this._fieldText(input_def);\n\t            }\n\t\n\t            // customize properties\n\t            if (input_def.type == 'data_column') {\n\t                input_def.error_text = 'Missing columns in referenced dataset.';\n\t            }\n\t\n\t            // identify available options\n\t            var data = input_def.data;\n\t            if (!data) {\n\t                data = [];\n\t                _.each(input_def.options, function (option) {\n\t                    data.push({ label: option[0], value: option[1] });\n\t                });\n\t            }\n\t\n\t            // identify display type\n\t            var SelectClass = Ui.Select;\n\t            switch (input_def.display) {\n\t                case 'checkboxes':\n\t                    SelectClass = Ui.Checkbox;\n\t                    break;\n\t                case 'radio':\n\t                    SelectClass = Ui.Radio;\n\t                    break;\n\t                case 'radiobutton':\n\t                    SelectClass = Ui.RadioButton;\n\t                    break;\n\t            }\n\t\n\t            // create select field\n\t            return new SelectClass.View({\n\t                id: 'field-' + input_def.id,\n\t                data: data,\n\t                error_text: input_def.error_text || 'No options available',\n\t                multiple: input_def.multiple,\n\t                optional: input_def.optional,\n\t                onchange: input_def.onchange,\n\t                searchable: input_def.flavor !== 'workflow'\n\t            });\n\t        },\n\t\n\t        /** Drill down options field */\n\t        _fieldDrilldown: function (input_def) {\n\t            // show text field e.g. in workflow editor\n\t            if (input_def.is_workflow) {\n\t                return this._fieldText(input_def);\n\t            }\n\t\n\t            // create drill down field\n\t            return new Ui.Drilldown.View({\n\t                id: 'field-' + input_def.id,\n\t                data: input_def.options,\n\t                display: input_def.display,\n\t                optional: input_def.optional,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Text input field */\n\t        _fieldText: function (input_def) {\n\t            // field replaces e.g. a select field\n\t            if (input_def.options && input_def.data) {\n\t                input_def.area = input_def.multiple;\n\t                if (Utils.isEmpty(input_def.value)) {\n\t                    input_def.value = null;\n\t                } else {\n\t                    if ($.isArray(input_def.value)) {\n\t                        var str_value = '';\n\t                        for (var i in input_def.value) {\n\t                            str_value += String(input_def.value[i]);\n\t                            if (!input_def.multiple) {\n\t                                break;\n\t                            }\n\t                            str_value += '\\n';\n\t                        }\n\t                        input_def.value = str_value;\n\t                    }\n\t                }\n\t            }\n\t            // create input element\n\t            return new Ui.Input({\n\t                id: 'field-' + input_def.id,\n\t                type: input_def.type,\n\t                area: input_def.area,\n\t                readonly: input_def.readonly,\n\t                placeholder: input_def.placeholder,\n\t                datalist: input_def.datalist,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Slider field */\n\t        _fieldSlider: function (input_def) {\n\t            return new Ui.Slider.View({\n\t                id: 'field-' + input_def.id,\n\t                precise: input_def.type == 'float',\n\t                is_workflow: input_def.is_workflow,\n\t                min: input_def.min,\n\t                max: input_def.max,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Hidden field */\n\t        _fieldHidden: function (input_def) {\n\t            return new Ui.Hidden({\n\t                id: 'field-' + input_def.id,\n\t                info: input_def.info\n\t            });\n\t        },\n\t\n\t        /** Boolean field */\n\t        _fieldBoolean: function (input_def) {\n\t            return new Ui.RadioButton.View({\n\t                id: 'field-' + input_def.id,\n\t                data: [{ label: 'Yes', value: 'true' }, { label: 'No', value: 'false' }],\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Color picker field */\n\t        _fieldColor: function (input_def) {\n\t            return new ColorPicker({\n\t                id: 'field-' + input_def.id,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Library dataset field */\n\t        _fieldLibrary: function (input_def) {\n\t            return new SelectLibrary.View({\n\t                id: 'field-' + input_def.id,\n\t                optional: input_def.optional,\n\t                multiple: input_def.multiple,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** FTP file field */\n\t        _fieldFtp: function (input_def) {\n\t            return new SelectFtp.View({\n\t                id: 'field-' + input_def.id,\n\t                optional: input_def.optional,\n\t                multiple: input_def.multiple,\n\t                onchange: input_def.onchange\n\t            });\n\t        },\n\t\n\t        /** Upload file field */\n\t        _fieldUpload: function (input_def) {\n\t            return new Ui.Upload({\n\t                id: 'field-' + input_def.id,\n\t                onchange: input_def.onchange\n\t            });\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {/** This class creates a ui component which enables the dynamic creation of portlets */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(9), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Portlet, Ui) {\n\t    var View = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            this.list = {};\n\t            this.options = Utils.merge(options, {\n\t                title: 'Repeat',\n\t                empty_text: 'Not available.',\n\t                max: null,\n\t                min: null\n\t            });\n\t            this.button_new = new Ui.ButtonIcon({\n\t                icon: 'fa-plus',\n\t                title: 'Insert ' + this.options.title,\n\t                tooltip: 'Add new ' + this.options.title + ' block',\n\t                floating: 'clear',\n\t                cls: 'ui-button-icon form-repeat-add',\n\t                onclick: function () {\n\t                    options.onnew && options.onnew();\n\t                }\n\t            });\n\t            this.setElement($('<div/>').append(this.$list = $('<div/>')).append($('<div/>').append(this.button_new.$el)));\n\t        },\n\t\n\t        /** Number of repeat blocks */\n\t        size: function () {\n\t            return _.size(this.list);\n\t        },\n\t\n\t        /** Add new repeat block */\n\t        add: function (options) {\n\t            if (!options.id || this.list[options.id]) {\n\t                Galaxy.emit.debug('form-repeat::add()', 'Duplicate or invalid repeat block id.');\n\t                return;\n\t            }\n\t            var button_delete = new Ui.ButtonIcon({\n\t                icon: 'fa-trash-o',\n\t                tooltip: 'Delete this repeat block',\n\t                cls: 'ui-button-icon-plain form-repeat-delete',\n\t                onclick: function () {\n\t                    options.ondel && options.ondel();\n\t                }\n\t            });\n\t            var portlet = new Portlet.View({\n\t                id: options.id,\n\t                title: 'placeholder',\n\t                cls: options.cls || 'ui-portlet-repeat',\n\t                operations: { button_delete: button_delete }\n\t            });\n\t            portlet.append(options.$el);\n\t            portlet.$el.addClass('section-row').hide();\n\t            this.list[options.id] = portlet;\n\t            this.$list.append(portlet.$el.fadeIn('fast'));\n\t            this.options.max > 0 && this.size() >= this.options.max && this.button_new.disable();\n\t            this._refresh();\n\t        },\n\t\n\t        /** Delete repeat block */\n\t        del: function (id) {\n\t            if (!this.list[id]) {\n\t                Galaxy.emit.debug('form-repeat::del()', 'Invalid repeat block id.');\n\t                return;\n\t            }\n\t            this.$list.find('#' + id).remove();\n\t            delete this.list[id];\n\t            this.button_new.enable();\n\t            this._refresh();\n\t        },\n\t\n\t        /** Remove all */\n\t        delAll: function () {\n\t            for (var id in this.list) {\n\t                this.del(id);\n\t            }\n\t        },\n\t\n\t        /** Hides add/del options */\n\t        hideOptions: function () {\n\t            this.button_new.$el.hide();\n\t            _.each(this.list, function (portlet) {\n\t                portlet.hideOperation('button_delete');\n\t            });\n\t            _.isEmpty(this.list) && this.$el.append($('<div/>').addClass('ui-form-info').html(this.options.empty_text));\n\t        },\n\t\n\t        /** Refresh view */\n\t        _refresh: function () {\n\t            var index = 0;\n\t            for (var id in this.list) {\n\t                var portlet = this.list[id];\n\t                portlet.title(++index + ': ' + this.options.title);\n\t                portlet[this.size() > this.options.min ? 'showOperation' : 'hideOperation']('button_delete');\n\t            }\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _, jQuery) {/**\n\t    This class creates a form section and populates it with input elements. It also handles repeat blocks and conditionals by recursively creating new sub sections.\n\t*/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(5), __webpack_require__(9), __webpack_require__(30), __webpack_require__(28), __webpack_require__(29)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Ui, Portlet, Repeat, InputElement, Parameters) {\n\t    var View = Backbone.View.extend({\n\t        initialize: function (app, options) {\n\t            this.app = app;\n\t            this.inputs = options.inputs;\n\t            this.parameters = new Parameters();\n\t            this.setElement($('<div/>'));\n\t            this.render();\n\t        },\n\t\n\t        /** Render section view */\n\t        render: function () {\n\t            var self = this;\n\t            this.$el.empty();\n\t            _.each(this.inputs, function (input) {\n\t                self.add(input);\n\t            });\n\t        },\n\t\n\t        /** Add a new input element */\n\t        add: function (input) {\n\t            var input_def = jQuery.extend(true, {}, input);\n\t            input_def.id = input.id = Utils.uid();\n\t            this.app.input_list[input_def.id] = input_def;\n\t            switch (input_def.type) {\n\t                case 'conditional':\n\t                    this._addConditional(input_def);\n\t                    break;\n\t                case 'repeat':\n\t                    this._addRepeat(input_def);\n\t                    break;\n\t                case 'section':\n\t                    this._addSection(input_def);\n\t                    break;\n\t                default:\n\t                    this._addRow(input_def);\n\t            }\n\t        },\n\t\n\t        /** Add a conditional block */\n\t        _addConditional: function (input_def) {\n\t            var self = this;\n\t            input_def.test_param.id = input_def.id;\n\t            this.app.model.get('sustain_conditionals') && (input_def.test_param.disabled = true);\n\t            var field = this._addRow(input_def.test_param);\n\t\n\t            // set onchange event for test parameter\n\t            field.model && field.model.set('onchange', function (value) {\n\t                var selectedCase = self.app.data.matchCase(input_def, value);\n\t                for (var i in input_def.cases) {\n\t                    var case_def = input_def.cases[i];\n\t                    var section_row = self.$('#' + input_def.id + '-section-' + i);\n\t                    var nonhidden = false;\n\t                    for (var j in case_def.inputs) {\n\t                        if (!case_def.inputs[j].hidden) {\n\t                            nonhidden = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (i == selectedCase && nonhidden) {\n\t                        section_row.fadeIn('fast');\n\t                    } else {\n\t                        section_row.hide();\n\t                    }\n\t                }\n\t                self.app.trigger('change');\n\t            });\n\t\n\t            // add conditional sub sections\n\t            for (var i in input_def.cases) {\n\t                var sub_section = new View(this.app, { inputs: input_def.cases[i].inputs });\n\t                this._append(sub_section.$el.addClass('ui-form-section'), input_def.id + '-section-' + i);\n\t            }\n\t\n\t            // trigger refresh on conditional input field after all input elements have been created\n\t            field.trigger('change');\n\t        },\n\t\n\t        /** Add a repeat block */\n\t        _addRepeat: function (input_def) {\n\t            var self = this;\n\t            var block_index = 0;\n\t\n\t            // create repeat block element\n\t            var repeat = new Repeat.View({\n\t                title: input_def.title || 'Repeat',\n\t                min: input_def.min,\n\t                max: input_def.max,\n\t                onnew: function () {\n\t                    create(input_def.inputs);self.app.trigger('change');\n\t                }\n\t            });\n\t\n\t            // helper function to create new repeat blocks\n\t            function create(inputs) {\n\t                var sub_section_id = input_def.id + '-section-' + block_index++;\n\t                var sub_section = new View(self.app, { inputs: inputs });\n\t                repeat.add({ id: sub_section_id,\n\t                    $el: sub_section.$el,\n\t                    ondel: function () {\n\t                        repeat.del(sub_section_id);self.app.trigger('change');\n\t                    } });\n\t            }\n\t\n\t            //\n\t            // add parsed/minimum number of repeat blocks\n\t            //\n\t            var n_cache = _.size(input_def.cache);\n\t            for (var i = 0; i < Math.max(Math.max(n_cache, input_def.min || 0), input_def.default || 0); i++) {\n\t                create(i < n_cache ? input_def.cache[i] : input_def.inputs);\n\t            }\n\t\n\t            // hide options\n\t            this.app.model.get('sustain_repeats') && repeat.hideOptions();\n\t\n\t            // create input field wrapper\n\t            var input_element = new InputElement(this.app, {\n\t                label: input_def.title || input_def.name,\n\t                help: input_def.help,\n\t                field: repeat\n\t            });\n\t            this._append(input_element.$el, input_def.id);\n\t        },\n\t\n\t        /** Add a customized section */\n\t        _addSection: function (input_def) {\n\t            var portlet = new Portlet.View({\n\t                title: input_def.title || input_def.name,\n\t                cls: 'ui-portlet-section',\n\t                collapsible: true,\n\t                collapsible_button: true,\n\t                collapsed: !input_def.expanded\n\t            });\n\t            portlet.append(new View(this.app, { inputs: input_def.inputs }).$el);\n\t            portlet.append($('<div/>').addClass('ui-form-info').html(input_def.help));\n\t            this.app.on('expand', function (input_id) {\n\t                portlet.$('#' + input_id).length > 0 && portlet.expand();\n\t            });\n\t            this._append(portlet.$el, input_def.id);\n\t        },\n\t\n\t        /** Add a single input field element */\n\t        _addRow: function (input_def) {\n\t            var self = this;\n\t            var id = input_def.id;\n\t            input_def.onchange = input_def.onchange || function () {\n\t                self.app.trigger('change', id);\n\t            };\n\t            var field = this.parameters.create(input_def);\n\t            this.app.field_list[id] = field;\n\t            var input_element = new InputElement(this.app, {\n\t                name: input_def.name,\n\t                label: input_def.hide_label ? '' : input_def.label || input_def.name,\n\t                value: input_def.value,\n\t                text_value: input_def.text_value,\n\t                collapsible_value: input_def.collapsible_value,\n\t                collapsible_preview: input_def.collapsible_preview,\n\t                help: input_def.help,\n\t                argument: input_def.argument,\n\t                disabled: input_def.disabled,\n\t                color: input_def.color,\n\t                style: input_def.style,\n\t                backdrop: input_def.backdrop,\n\t                hidden: input_def.hidden,\n\t                fixed: input_def.fixed,\n\t                field: field\n\t            });\n\t            this.app.element_list[id] = input_element;\n\t            this._append(input_element.$el, input_def.id);\n\t            return field;\n\t        },\n\t\n\t        /** Append a new element to the form i.e. input element, repeat block, conditionals etc. */\n\t        _append: function ($el, id) {\n\t            this.$el.append($el.addClass('section-row').attr('id', id));\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t\n\t    // grid model\n\t    return Backbone.Model.extend({\n\t        defaults: {\n\t            url_base: '',\n\t            async: false,\n\t            async_ops: [],\n\t            categorical_filters: [],\n\t            filters: {},\n\t            sort_key: null,\n\t            show_item_checkboxes: false,\n\t            advanced_search: false,\n\t            cur_page: 1,\n\t            num_pages: 1,\n\t            operation: undefined,\n\t            item_ids: undefined\n\t        },\n\t\n\t        /**\n\t         * Return true if operation can be done asynchronously.\n\t         */\n\t        can_async_op: function (op) {\n\t            return _.indexOf(this.attributes.async_ops, op) !== -1;\n\t        },\n\t\n\t        /**\n\t         * Add filtering criterion.\n\t         */\n\t        add_filter: function (key, value, append) {\n\t            // Update URL arg with new condition.            \n\t            if (append) {\n\t                // Update or append value.\n\t                var cur_val = this.attributes.filters[key],\n\t                    new_val;\n\t                if (cur_val === null || cur_val === undefined) {\n\t                    new_val = value;\n\t                } else if (typeof cur_val == 'string') {\n\t                    if (cur_val == 'All') {\n\t                        new_val = value;\n\t                    } else {\n\t                        // Replace string with array.\n\t                        var values = [];\n\t                        values[0] = cur_val;\n\t                        values[1] = value;\n\t                        new_val = values;\n\t                    }\n\t                } else {\n\t                    // Current value is an array.\n\t                    new_val = cur_val;\n\t                    new_val.push(value);\n\t                }\n\t                this.attributes.filters[key] = new_val;\n\t            } else {\n\t                // Replace value.\n\t                this.attributes.filters[key] = value;\n\t            }\n\t        },\n\t\n\t        /**\n\t         * Remove filtering criterion.\n\t         */\n\t        remove_filter: function (key, condition) {\n\t            var cur_val = this.attributes.filters[key];\n\t            if (cur_val === null || cur_val === undefined) {\n\t                return false;\n\t            }\n\t\n\t            if (typeof cur_val === 'string') {\n\t                // overwrite/remove condition.\n\t                this.attributes.filters[key] = '';\n\t            } else {\n\t                // filter contains an array of conditions.\n\t                var condition_index = _.indexOf(cur_val, condition);\n\t                if (condition_index !== -1) {\n\t                    cur_val[condition_index] = '';\n\t                }\n\t            }\n\t        },\n\t\n\t        /**\n\t         * Returns URL data for obtaining a new grid.\n\t         */\n\t        get_url_data: function () {\n\t            var url_data = {\n\t                async: this.attributes.async,\n\t                sort: this.attributes.sort_key,\n\t                page: this.attributes.cur_page,\n\t                show_item_checkboxes: this.attributes.show_item_checkboxes,\n\t                advanced_search: this.attributes.advanced_search\n\t            };\n\t\n\t            // Add operation, item_ids only if they have values.\n\t            if (this.attributes.operation) {\n\t                url_data.operation = this.attributes.operation;\n\t            }\n\t            if (this.attributes.item_ids) {\n\t                url_data.id = this.attributes.item_ids;\n\t            }\n\t\n\t            // Add filter arguments to data, placing \"f-\" in front of all arguments.\n\t            var self = this;\n\t            _.each(_.pairs(self.attributes.filters), function (k) {\n\t                url_data['f-' + k[0]] = k[1];\n\t            });\n\t            return url_data;\n\t        },\n\t\n\t        // Return URL for obtaining a new grid\n\t        get_url: function (args) {\n\t            return this.get('url_base') + '?' + $.param(this.get_url_data()) + '&' + $.param(args);\n\t        }\n\t\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(jQuery, _) {// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t\n\t    // grid view templates\n\t    return {\n\t        // template\n\t        grid: function (options) {\n\t            var tmpl = '';\n\t            if (options.embedded) {\n\t                tmpl = this.grid_header(options) + this.grid_table(options);\n\t            } else {\n\t                tmpl = '<div class=\"loading-elt-overlay\"></div>' + '<table>' + '<tr>' + '<td width=\"75%\">' + this.grid_header(options) + '</td>' + '<td></td>' + '<td></td>' + '</tr>' + '<tr>' + '<td width=\"100%\" id=\"grid-message\" valign=\"top\"></td>' + '<td></td>' + '<td></td>' + '</tr>' + '</table>' + this.grid_table(options);\n\t            }\n\t\n\t            // add info text\n\t            if (options.info_text) {\n\t                tmpl += '<br><div class=\"toolParamHelp\" style=\"clear: both;\">' + options.info_text + '</div>';\n\t            }\n\t\n\t            // return\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        grid_table: function (options) {\n\t            return '<form method=\"post\" onsubmit=\"return false;\">' + '<table id=\"grid-table\" class=\"grid\">' + '<thead id=\"grid-table-header\"></thead>' + '<tbody id=\"grid-table-body\"></tbody>' + '<tfoot id=\"grid-table-footer\"></tfoot>' + '</table>' + '</form>';\n\t        },\n\t\n\t        // template\n\t        grid_header: function (options) {\n\t            var tmpl = '<div class=\"grid-header\">';\n\t            if (!options.embedded) {\n\t                tmpl += '<h2>' + options.title + '</h2>';\n\t            }\n\t            if (options.global_actions) {\n\t                tmpl += '<ul class=\"manage-table-actions\">';\n\t                var show_popup = options.global_actions.length >= 3;\n\t                if (show_popup) {\n\t                    tmpl += '<li><a class=\"action-button\" id=\"popup-global-actions\" class=\"menubutton\">Actions</a></li>' + '<div popupmenu=\"popup-global-actions\">';\n\t                }\n\t                for (i in options.global_actions) {\n\t                    var action = options.global_actions[i];\n\t                    tmpl += '<li>' + '<a class=\"action-button use-target\" target=\"' + action.target + '\" href=\"' + action.url_args + '\" onclick=\"return false;\" >' + action.label + '</a>' + '</li>';\n\t                }\n\t                if (show_popup) {\n\t                    tmpl += '</div>';\n\t                }\n\t                tmpl += '</ul>';\n\t            }\n\t            if (options.insert) {\n\t                tmpl += options.insert;\n\t            }\n\t\n\t            // add grid filters\n\t            tmpl += this.grid_filters(options);\n\t            tmpl += '</div>';\n\t\n\t            // return template\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        header: function (options) {\n\t\n\t            // start\n\t            var tmpl = '<tr>';\n\t\n\t            // add checkbox\n\t            if (options.show_item_checkboxes) {\n\t                tmpl += '<th>';\n\t                if (options.items.length > 0) {\n\t                    tmpl += '<input type=\"checkbox\" id=\"check_all\" name=select_all_checkbox value=\"true\">' + '<input type=\"hidden\" name=select_all_checkbox value=\"true\">';\n\t                }\n\t                tmpl += '</th>';\n\t            }\n\t\n\t            // create header elements\n\t            for (var i in options.columns) {\n\t                var column = options.columns[i];\n\t                if (column.visible) {\n\t                    tmpl += '<th id=\"' + column.key + '-header\">';\n\t                    if (column.href) {\n\t                        tmpl += '<a href=\"' + column.href + '\" class=\"sort-link\" sort_key=\"' + column.key + '\">' + column.label + '</a>';\n\t                    } else {\n\t                        tmpl += column.label;\n\t                    }\n\t                    tmpl += '<span class=\"sort-arrow\">' + column.extra + '</span>' + '</th>';\n\t                }\n\t            }\n\t\n\t            // finalize\n\t            tmpl += '</tr>';\n\t\n\t            // return template\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        body: function (options) {\n\t            // initialize\n\t            var tmpl = '';\n\t            var num_rows_rendered = 0;\n\t            var items_length = options.items.length;\n\t\n\t            // empty grid?\n\t            if (items_length == 0) {\n\t                // No results.\n\t                tmpl += '<tr><td colspan=\"100\"><em>No Items</em></td></tr>';\n\t                num_rows_rendered = 1;\n\t            }\n\t\n\t            // create rows\n\t            for (var i in options.items) {\n\t\n\t                // encode ids\n\t                var item = options.items[i];\n\t                var encoded_id = item.encode_id;\n\t                var popupmenu_id = 'grid-' + i + '-popup';\n\t\n\t                // Tag current\n\t                tmpl += '<tr ';\n\t                if (options.current_item_id == item.id) {\n\t                    tmpl += 'class=\"current\"';\n\t                }\n\t                tmpl += '>';\n\t\n\t                // Item selection column\n\t                if (options.show_item_checkboxes) {\n\t                    tmpl += '<td style=\"width: 1.5em;\">' + '<input type=\"checkbox\" name=\"id\" value=\"' + encoded_id + '\" id=\"' + encoded_id + '\" class=\"grid-row-select-checkbox\" />' + '</td>';\n\t                }\n\t\n\t                // Data columns\n\t                for (j in options.columns) {\n\t                    var column = options.columns[j];\n\t                    if (column.visible) {\n\t                        // Nowrap\n\t                        var nowrap = '';\n\t                        if (column.nowrap) {\n\t                            nowrap = 'style=\"white-space:nowrap;\"';\n\t                        }\n\t\n\t                        // get column settings\n\t                        var column_settings = item.column_config[column.label];\n\t\n\t                        // load attributes\n\t                        var link = column_settings.link;\n\t                        var value = column_settings.value;\n\t                        var target = column_settings.target;\n\t\n\t                        // unescape value\n\t                        if (jQuery.type(value) === 'string') {\n\t                            value = value.replace(/\\/\\//g, '/');\n\t                        }\n\t\n\t                        // Attach popup menu?\n\t                        var id = '';\n\t                        var cls = '';\n\t                        if (column.attach_popup) {\n\t                            id = 'grid-' + i + '-popup';\n\t                            cls = 'menubutton';\n\t                            if (link != '') {\n\t                                cls += ' split';\n\t                            }\n\t                            cls += ' popup';\n\t                        }\n\t\n\t                        // Check for row wrapping\n\t                        tmpl += '<td ' + nowrap + '>';\n\t\n\t                        // Link\n\t                        if (link) {\n\t                            if (options.operations.length != 0) {\n\t                                tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\" style=\"float: left;\">';\n\t                            }\n\t                            tmpl += '<a class=\"menubutton-label use-target\" target=\"' + target + '\" href=\"' + link + '\" onclick=\"return false;\">' + value + '</a>';\n\t                            if (options.operations.length != 0) {\n\t                                tmpl += '</div>';\n\t                            }\n\t                        } else {\n\t                            tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\"><label id=\"' + column.label_id_prefix + encoded_id + '\" for=\"' + encoded_id + '\">' + (value || '') + '</label></div>';\n\t                        }\n\t                        tmpl += '</td>';\n\t                    }\n\t                }\n\t                tmpl += '</tr>';\n\t                num_rows_rendered++;\n\t            }\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        footer: function (options) {\n\t\n\t            // create template string\n\t            var tmpl = '';\n\t\n\t            // paging\n\t            if (options.use_paging && options.num_pages > 1) {\n\t                // get configuration\n\t                var num_page_links = options.num_page_links;\n\t                var cur_page_num = options.cur_page_num;\n\t                var num_pages = options.num_pages;\n\t\n\t                // First pass on min page.\n\t                var page_link_range = num_page_links / 2;\n\t                var min_page = cur_page_num - page_link_range;\n\t                var min_offset = 0;\n\t                if (min_page <= 0) {\n\t                    // Min page is too low.\n\t                    min_page = 1;\n\t                    min_offset = page_link_range - (cur_page_num - min_page);\n\t                }\n\t\n\t                // Set max page.\n\t                var max_range = page_link_range + min_offset;\n\t                var max_page = cur_page_num + max_range;\n\t                if (max_page <= num_pages) {\n\t                    // Max page is fine.\n\t                    max_offset = 0;\n\t                } else {\n\t                    // Max page is too high.\n\t                    max_page = num_pages;\n\t                    // +1 to account for the +1 in the loop below.\n\t                    max_offset = max_range - (max_page + 1 - cur_page_num);\n\t                }\n\t\n\t                // Second and final pass on min page to add any unused\n\t                // offset from max to min.\n\t                if (max_offset != 0) {\n\t                    min_page -= max_offset;\n\t                    if (min_page < 1) {\n\t                        min_page = 1;\n\t                    }\n\t                }\n\t\n\t                // template header\n\t                tmpl += '<tr id=\"page-links-row\">';\n\t                if (options.show_item_checkboxes) {\n\t                    tmpl += '<td></td>';\n\t                }\n\t                tmpl += '<td colspan=\"100\">' + '<span id=\"page-link-container\">' + 'Page:';\n\t\n\t                if (min_page > 1) {\n\t                    tmpl += '<span class=\"page-link\" id=\"page-link-1\"><a href=\"javascript:void(0);\" page_num=\"1\" onclick=\"return false;\">1</a></span> ...';\n\t                }\n\t\n\t                // create page urls\n\t                for (var page_index = min_page; page_index < max_page + 1; page_index++) {\n\t\n\t                    if (page_index == options.cur_page_num) {\n\t                        tmpl += '<span class=\"page-link inactive-link\" id=\"page-link-' + page_index + '\">' + page_index + '</span>';\n\t                    } else {\n\t                        tmpl += '<span class=\"page-link\" id=\"page-link-' + page_index + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + page_index + '\">' + page_index + '</a></span>';\n\t                    }\n\t                }\n\t\n\t                // show last page\n\t                if (max_page < num_pages) {\n\t                    tmpl += '...' + '<span class=\"page-link\" id=\"page-link-' + num_pages + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + num_pages + '\">' + num_pages + '</a></span>';\n\t                }\n\t                tmpl += '</span>';\n\t\n\t                // Show all link\n\t                tmpl += '<span class=\"page-link\" id=\"show-all-link-span\"> | <a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"all\">Show All</a></span>' + '</td>' + '</tr>';\n\t            }\n\t\n\t            // Grid operations for multiple items.\n\t            if (options.show_item_checkboxes) {\n\t                // start template\n\t                tmpl += '<tr>' + '<input type=\"hidden\" id=\"operation\" name=\"operation\" value=\"\">' + '<td></td>' + '<td colspan=\"100\">' + 'For <span class=\"grid-selected-count\"></span> selected items: ';\n\t\n\t                // configure buttons for operations\n\t                for (i in options.operations) {\n\t                    var operation = options.operations[i];\n\t                    if (operation.allow_multiple) {\n\t                        tmpl += '<input type=\"button\" value=\"' + operation.label + '\" class=\"operation-button action-button\">&nbsp;';\n\t                    }\n\t                }\n\t\n\t                // finalize template\n\t                tmpl += '</td>' + '</tr>';\n\t            }\n\t\n\t            // count global operations\n\t            var found_global = false;\n\t            for (i in options.operations) {\n\t                if (options.operations[i].global_operation) {\n\t                    found_global = true;\n\t                    break;\n\t                }\n\t            }\n\t\n\t            // add global operations\n\t            if (found_global) {\n\t                tmpl += '<tr>' + '<td colspan=\"100\">';\n\t                for (i in options.operations) {\n\t                    var operation = options.operations[i];\n\t                    if (operation.global_operation) {\n\t                        tmpl += '<a class=\"action-button\" href=\"' + operation.global_operation + '\">' + operation.label + '</a>';\n\t                    }\n\t                }\n\t                tmpl += '</td>' + '</tr>';\n\t            }\n\t\n\t            // add legend\n\t            if (options.legend) {\n\t                tmpl += '<tr>' + '<td colspan=\"100\">' + options.legend + '</td>' + '</tr>';\n\t            }\n\t\n\t            // return\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        message: function (options) {\n\t            var status = options.status == 'success' ? 'done' : options.status;\n\t            return '<p>' + '<div class=\"' + status + 'message transient-message\">' + _.escape(options.message) + '</div>' + '<div style=\"clear: both\"></div>' + '</p>';\n\t        },\n\t\n\t        // template\n\t        grid_filters: function (options) {\n\t\n\t            // get filters\n\t            var default_filter_dict = options.default_filter_dict;\n\t            var filters = options.filters;\n\t\n\t            // show advanced search if flag set or if there are filters for advanced search fields\n\t            var advanced_search_display = 'none';\n\t            if (options.advanced_search) {\n\t                advanced_search_display = 'block';\n\t            }\n\t\n\t            // identify columns with advanced filtering\n\t            var show_advanced_search_link = false;\n\t            for (var i in options.columns) {\n\t                var column = options.columns[i];\n\t                if (column.filterable == 'advanced') {\n\t                    var column_key = column.key;\n\t                    var f_key = filters[column_key];\n\t                    var d_key = default_filter_dict[column_key];\n\t                    if (f_key && d_key && f_key != d_key) {\n\t                        advanced_search_display = 'block';\n\t                    }\n\t                    show_advanced_search_link = true;\n\t                }\n\t            }\n\t\n\t            // hide standard search if advanced is shown\n\t            var standard_search_display = 'block';\n\t            if (advanced_search_display == 'block') {\n\t                standard_search_display = 'none';\n\t            }\n\t\n\t            //\n\t            // standard search\n\t            //\n\t            var tmpl = '<div id=\"standard-search\" style=\"display: ' + standard_search_display + ';\">' + '<table>' + '<tr>' + '<td style=\"padding: 0;\">' + '<table>';\n\t\n\t            // add standard filters\n\t            for (var i in options.columns) {\n\t                var column = options.columns[i];\n\t                if (column.filterable == 'standard') {\n\t                    tmpl += this.grid_column_filter(options, column);\n\t                }\n\t            }\n\t\n\t            // finalize standard search\n\t            tmpl += '</table>' + '</td>' + '</tr>' + '<tr>' + '<td>';\n\t\n\t            // show advanced search link in standard display\n\t            if (show_advanced_search_link) {\n\t                tmpl += '<a href=\"\" class=\"advanced-search-toggle\">Advanced Search</a>';\n\t            }\n\t\n\t            // finalize standard search display\n\t            tmpl += '</td>' + '</tr>' + '</table>' + '</div>';\n\t\n\t            //\n\t            // advanced search\n\t            //\n\t            tmpl += '<div id=\"advanced-search\" style=\"display: ' + advanced_search_display + '; margin-top: 5px; border: 1px solid #ccc;\">' + '<table>' + '<tr>' + '<td style=\"text-align: left\" colspan=\"100\">' + '<a href=\"\" class=\"advanced-search-toggle\">Close Advanced Search</a>' + '</td>' + '</tr>';\n\t\n\t            // add advanced filters\n\t            for (var i in options.columns) {\n\t                var column = options.columns[i];\n\t                if (column.filterable == 'advanced') {\n\t                    tmpl += this.grid_column_filter(options, column);\n\t                }\n\t            }\n\t\n\t            // finalize advanced search template\n\t            tmpl += '</table>' + '</div>';\n\t\n\t            // return template\n\t            return tmpl;\n\t        },\n\t\n\t        // template\n\t        grid_column_filter: function (options, column) {\n\t\n\t            // collect parameters\n\t            var default_filter_dict = options.default_filter_dict;\n\t            var filters = options.filters;\n\t            var column_label = column.label;\n\t            var column_key = column.key;\n\t            if (column.filterable == 'advanced') {\n\t                column_label = column_label.toLowerCase();\n\t            }\n\t\n\t            // start\n\t            var tmpl = '<tr>';\n\t\n\t            if (column.filterable == 'advanced') {\n\t                tmpl += '<td align=\"left\" style=\"padding-left: 10px\">' + column_label + ':</td>';\n\t            }\n\t            tmpl += '<td style=\"padding-bottom: 1px;\">';\n\t            if (column.is_text) {\n\t                tmpl += '<form class=\"text-filter-form\" column_key=\"' + column_key + '\" action=\"' + options.url + '\" method=\"get\" >';\n\t                // Carry forward filtering criteria with hidden inputs.\n\t                for (i in options.columns) {\n\t                    var temp_column = options.columns[i];\n\t                    var filter_value = filters[temp_column.key];\n\t                    if (filter_value) {\n\t                        if (filter_value != 'All') {\n\t                            if (temp_column.is_text) {\n\t                                filter_value = JSON.stringify(filter_value);\n\t                            }\n\t                            tmpl += '<input type=\"hidden\" id=\"' + temp_column.key + '\" name=\"f-' + temp_column.key + '\" value=\"' + filter_value + '\"/>';\n\t                        }\n\t                    }\n\t                }\n\t                // Print current filtering criteria and links to delete.\n\t                tmpl += '<span id=\"' + column_key + '-filtering-criteria\">';\n\t\n\t                // add filters\n\t                var column_filter = filters[column_key];\n\t                if (column_filter) {\n\t                    // identify type\n\t                    var type = jQuery.type(column_filter);\n\t\n\t                    // single filter value\n\t                    if (type == 'string') {\n\t                        if (column_filter != 'All') {\n\t                            // append template\n\t                            tmpl += this.filter_element(column_key, column_filter);\n\t                        }\n\t                    }\n\t\n\t                    // multiple filter values\n\t                    if (type == 'array') {\n\t                        for (var i in column_filter) {\n\t                            // get filter\n\t                            var filter = column_filter[i];\n\t\n\t                            // copy filters and remove entry\n\t                            var params = column_filter;\n\t                            params = params.slice(i);\n\t\n\t                            // append template\n\t                            tmpl += this.filter_element(column_key, filter);\n\t                        }\n\t                    }\n\t                }\n\t\n\t                // close span\n\t                tmpl += '</span>';\n\t\n\t                // Set value, size of search input field. Minimum size is 20 characters.\n\t                var value = '';\n\t                if (column.filterable == 'standard') {\n\t                    value = column.label.toLowerCase();\n\t                    var size = value.length;\n\t                    if (size < 20) {\n\t                        size = 20;\n\t                    }\n\t                    // +4 to account for space after placeholder\n\t                    size = size + 4;\n\t                }\n\t\n\t                // print input field for column\n\t                tmpl += '<span class=\"search-box\">' + '<input class=\"search-box-input\" id=\"input-' + column_key + '-filter\" name=\"f-' + column_key + '\" type=\"text\" placeholder=\"' + value + '\" size=\"' + size + '\"/>' + '<button type=\"submit\" style=\"background: transparent; border: none; padding: 4px; margin: 0px;\">' + '<i class=\"fa fa-search\"></i>' + '</button>' + '</span>' + '</form>';\n\t            } else {\n\t                // filter criteria\n\t                tmpl += '<span id=\"' + column_key + '-filtering-criteria\">';\n\t\n\t                // add category filters\n\t                var seperator = false;\n\t                for (cf_label in options.categorical_filters[column_key]) {\n\t                    // get category filter\n\t                    var cf = options.categorical_filters[column_key][cf_label];\n\t\n\t                    // each filter will have only a single argument, so get that single argument\n\t                    var cf_key = '';\n\t                    var cf_arg = '';\n\t                    for (key in cf) {\n\t                        cf_key = key;\n\t                        cf_arg = cf[key];\n\t                    }\n\t\n\t                    // add seperator\n\t                    if (seperator) {\n\t                        tmpl += ' | ';\n\t                    }\n\t                    seperator = true;\n\t\n\t                    // add category\n\t                    var filter = filters[column_key];\n\t                    if (filter && cf[column_key] && filter == cf_arg) {\n\t                        tmpl += '<span class=\"categorical-filter ' + column_key + '-filter current-filter\">' + cf_label + '</span>';\n\t                    } else {\n\t                        tmpl += '<span class=\"categorical-filter ' + column_key + '-filter\">' + '<a href=\"javascript:void(0);\" filter_key=\"' + cf_key + '\" filter_val=\"' + cf_arg + '\">' + cf_label + '</a>' + '</span>';\n\t                    }\n\t                }\n\t                tmpl += '</span>';\n\t            }\n\t            tmpl += '</td>' + '</tr>';\n\t\n\t            // return template\n\t            return tmpl;\n\t        },\n\t\n\t        // template for filter items\n\t        filter_element: function (filter_key, filter_value) {\n\t            filter_value = Utils.sanitize(filter_value);\n\t            return '<span class=\"text-filter-val\">' + filter_value + '<a href=\"javascript:void(0);\" filter_key=\"' + filter_key + '\" filter_val=\"' + filter_value + '\">' + '<i class=\"fa fa-times\" style=\"padding-left: 5px; padding-bottom: 6px;\"/>' + '</a>' + '</span>';\n\t        }\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {/** Renders the color picker used e.g. in the tool form **/\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t    return Backbone.View.extend({\n\t        colors: {\n\t            standard: ['c00000', 'ff0000', 'ffc000', 'ffff00', '92d050', '00b050', '00b0f0', '0070c0', '002060', '7030a0'],\n\t            base: ['ffffff', '000000', 'eeece1', '1f497d', '4f81bd', 'c0504d', '9bbb59', '8064a2', '4bacc6', 'f79646'],\n\t            theme: [['f2f2f2', '7f7f7f', 'ddd9c3', 'c6d9f0', 'dbe5f1', 'f2dcdb', 'ebf1dd', 'e5e0ec', 'dbeef3', 'fdeada'], ['d8d8d8', '595959', 'c4bd97', '8db3e2', 'b8cce4', 'e5b9b7', 'd7e3bc', 'ccc1d9', 'b7dde8', 'fbd5b5'], ['bfbfbf', '3f3f3f', '938953', '548dd4', '95b3d7', 'd99694', 'c3d69b', 'b2a2c7', '92cddc', 'fac08f'], ['a5a5a5', '262626', '494429', '17365d', '366092', '953734', '76923c', '5f497a', '31859b', 'e36c09'], ['7f7f7e', '0c0c0c', '1d1b10', '0f243e', '244061', '632423', '4f6128', '3f3151', '205867', '974806']]\n\t        },\n\t\n\t        initialize: function (options) {\n\t            this.options = Utils.merge(options, {});\n\t            this.setElement(this._template());\n\t            this.$panel = this.$('.ui-color-picker-panel');\n\t            this.$view = this.$('.ui-color-picker-view');\n\t            this.$value = this.$('.ui-color-picker-value');\n\t            this.$header = this.$('.ui-color-picker-header');\n\t            this._build();\n\t            this.visible = false;\n\t            this.value(this.options.value);\n\t            this.$boxes = this.$('.ui-color-picker-box');\n\t            var self = this;\n\t            this.$boxes.on('click', function () {\n\t                self.value($(this).css('background-color'));\n\t                self.$header.trigger('click');\n\t            });\n\t            this.$header.on('click', function () {\n\t                self.visible = !self.visible;\n\t                if (self.visible) {\n\t                    self.$view.fadeIn('fast');\n\t                } else {\n\t                    self.$view.fadeOut('fast');\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Get/set value */\n\t        value: function (new_val) {\n\t            if (new_val !== undefined && new_val !== null) {\n\t                this.$value.css('background-color', new_val);\n\t                this.$('.ui-color-picker-box').empty();\n\t                this.$(this._getValue()).html(this._templateCheck());\n\t                this.options.onchange && this.options.onchange(new_val);\n\t            }\n\t            return this._getValue();\n\t        },\n\t\n\t        /** Get value from dom */\n\t        _getValue: function () {\n\t            var rgb = this.$value.css('background-color');\n\t            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n\t            if (rgb) {\n\t                function hex(x) {\n\t                    return ('0' + parseInt(x).toString(16)).slice(-2);\n\t                }\n\t                return '#' + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n\t            } else {\n\t                return null;\n\t            }\n\t        },\n\t\n\t        /** Build color panel */\n\t        _build: function () {\n\t            this._content({ colors: this.colors.base });\n\t            for (var i in this.colors.theme) {\n\t                var line_def = {};\n\t                if (i == 0) {\n\t                    line_def['bottom'] = true;\n\t                } else if (i != this.colors.theme.length - 1) {\n\t                    line_def['top'] = true;\n\t                    line_def['bottom'] = true;\n\t                } else {\n\t                    line_def['top'] = true;\n\t                }\n\t                line_def['colors'] = this.colors.theme[i];\n\t                this._content(line_def);\n\t            }\n\t            this._content({ colors: this.colors.standard });\n\t        },\n\t\n\t        /** Create content */\n\t        _content: function (options) {\n\t            var colors = options.colors;\n\t            var $content = $(this._templateContent());\n\t            var $line = $content.find('.line');\n\t            this.$panel.append($content);\n\t            for (var i in colors) {\n\t                var $box = $(this._templateBox(colors[i]));\n\t                if (options.top) {\n\t                    $box.css('border-top', 'none');\n\t                    $box.css('border-top-left-radius', '0px');\n\t                    $box.css('border-top-right-radius', '0px');\n\t                }\n\t                if (options.bottom) {\n\t                    $box.css('border-bottom', 'none');\n\t                    $box.css('border-bottom-left-radius', '0px');\n\t                    $box.css('border-bottom-right-radius', '0px');\n\t                }\n\t                $line.append($box);\n\t            }\n\t            return $content;\n\t        },\n\t\n\t        /** Check icon */\n\t        _templateCheck: function () {\n\t            return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n\t        },\n\t\n\t        /** Content template */\n\t        _templateContent: function () {\n\t            return '<div class=\"ui-color-picker-content\">' + '<div class=\"line\"/>' + '</div>';\n\t        },\n\t\n\t        /** Box template */\n\t        _templateBox: function (color) {\n\t            return '<div id=\"' + color + '\" class=\"ui-color-picker-box\" style=\"background-color: #' + color + ';\"/>';\n\t        },\n\t\n\t        /** Main template */\n\t        _template: function () {\n\t            return '<div class=\"ui-color-picker\">' + '<div class=\"ui-color-picker-header\">' + '<div class=\"ui-color-picker-value\"/>' + '<div class=\"ui-color-picker-label\">Select a color</div>' + '</div>' + '<div class=\"ui-color-picker-view ui-input\">' + '<div class=\"ui-color-picker-panel\"/>' + '</div>';\n\t            '</div>';\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function($, _) {/** This class creates/wraps a drill down element. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Options) {\n\t\n\t    var View = Options.BaseIcons.extend({\n\t        initialize: function (options) {\n\t            options.type = options.display || 'checkbox';\n\t            options.multiple = options.type == 'checkbox';\n\t            Options.BaseIcons.prototype.initialize.call(this, options);\n\t        },\n\t\n\t        /** Set states for selected values */\n\t        _setValue: function (new_value) {\n\t            Options.BaseIcons.prototype._setValue.call(this, new_value);\n\t            if (new_value !== undefined && new_value !== null && this.header_index) {\n\t                var self = this;\n\t                var values = $.isArray(new_value) ? new_value : [new_value];\n\t                _.each(values, function (v) {\n\t                    var list = self.header_index[v];\n\t                    _.each(list, function (element) {\n\t                        self._setState(element, true);\n\t                    });\n\t                });\n\t            }\n\t        },\n\t\n\t        /** Expand/collapse a sub group */\n\t        _setState: function (header_id, is_expanded) {\n\t            var $button = this.$('.button-' + header_id);\n\t            var $subgroup = this.$('.subgroup-' + header_id);\n\t            $button.data('is_expanded', is_expanded);\n\t            if (is_expanded) {\n\t                $subgroup.show();\n\t                $button.removeClass('fa-plus-square').addClass('fa-minus-square');\n\t            } else {\n\t                $subgroup.hide();\n\t                $button.removeClass('fa-minus-square').addClass('fa-plus-square');\n\t            }\n\t        },\n\t\n\t        /** Template to create options tree */\n\t        _templateOptions: function () {\n\t            var self = this;\n\t            this.header_index = {};\n\t\n\t            // attach event handler\n\t            function attach($el, header_id) {\n\t                var $button = $el.find('.button-' + header_id);\n\t                $button.on('click', function () {\n\t                    self._setState(header_id, !$button.data('is_expanded'));\n\t                });\n\t            }\n\t\n\t            // recursive function which iterates through options\n\t            function iterate($tmpl, options, header) {\n\t                header = header || [];\n\t                for (i in options) {\n\t                    var level = options[i];\n\t                    var has_options = level.options && level.options.length > 0;\n\t                    var new_header = header.slice(0);\n\t                    self.header_index[level.value] = new_header.slice(0);\n\t                    var $group = $('<div/>');\n\t                    if (has_options) {\n\t                        var header_id = Utils.uid();\n\t                        var $button = $('<span/>').addClass('button-' + header_id).addClass('ui-drilldown-button fa fa-plus-square');\n\t                        var $subgroup = $('<div/>').addClass('subgroup-' + header_id).addClass('ui-drilldown-subgroup');\n\t                        $group.append($('<div/>').append($button).append(self._templateOption({ label: level.name, value: level.value })));\n\t                        new_header.push(header_id);\n\t                        iterate($subgroup, level.options, new_header);\n\t                        $group.append($subgroup);\n\t                        attach($group, header_id);\n\t                    } else {\n\t                        $group.append(self._templateOption({ label: level.name, value: level.value }));\n\t                    }\n\t                    $tmpl.append($group);\n\t                }\n\t            }\n\t\n\t            // iterate through options and create dom\n\t            var $tmpl = $('<div/>');\n\t            iterate($tmpl, this.model.get('data'));\n\t            return $tmpl;\n\t        },\n\t\n\t        /** Template for drill down view */\n\t        _template: function () {\n\t            return $('<div/>').addClass('ui-options-list drilldown-container').attr('id', this.model.id);\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(5), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Ui, Select) {\n\t\n\t    /** Batch mode variations */\n\t    var Batch = { DISABLED: 'disabled', ENABLED: 'enabled', LINKED: 'linked' };\n\t\n\t    /** List of available content selectors options */\n\t    var Configurations = {\n\t        data: [{ src: 'hda', icon: 'fa-file-o', tooltip: 'Single dataset', multiple: false, batch: Batch.DISABLED }, { src: 'hda', icon: 'fa-files-o', tooltip: 'Multiple datasets', multiple: true, batch: Batch.LINKED }, { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection', multiple: false, batch: Batch.LINKED }],\n\t        data_multiple: [{ src: 'hda', icon: 'fa-files-o', tooltip: 'Multiple datasets', multiple: true, batch: Batch.DISABLED }, { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collections', multiple: true, batch: Batch.DISABLED }],\n\t        data_collection: [{ src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection', multiple: false, batch: Batch.DISABLED }],\n\t        workflow_data: [{ src: 'hda', icon: 'fa-file-o', tooltip: 'Single dataset', multiple: false, batch: Batch.DISABLED }],\n\t        workflow_data_multiple: [{ src: 'hda', icon: 'fa-files-o', tooltip: 'Multiple datasets', multiple: true, batch: Batch.DISABLED }],\n\t        workflow_data_collection: [{ src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection', multiple: false, batch: Batch.DISABLED }],\n\t        module_data: [{ src: 'hda', icon: 'fa-file-o', tooltip: 'Single dataset', multiple: false, batch: Batch.DISABLED }, { src: 'hda', icon: 'fa-files-o', tooltip: 'Multiple datasets', multiple: true, batch: Batch.ENABLED }],\n\t        module_data_collection: [{ src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection', multiple: false, batch: Batch.DISABLED }, { src: 'hdca', icon: 'fa-folder', tooltip: 'Multiple collections', multiple: true, batch: Batch.ENABLED }]\n\t    };\n\t\n\t    /** View for hda and hdca content selector ui elements */\n\t    var View = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.model = options && options.model || new Backbone.Model({\n\t                src_labels: { 'hda': 'dataset', 'hdca': 'dataset collection' },\n\t                pagelimit: 100,\n\t                statustimer: 1000\n\t            }).set(options);\n\t            this.setElement($('<div/>').addClass('ui-select-content'));\n\t            this.button_product = new Ui.RadioButton.View({\n\t                value: 'false',\n\t                data: [{ icon: 'fa fa-chain', value: 'false',\n\t                    tooltip: 'Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads.' }, { icon: 'fa fa-chain-broken', value: 'true',\n\t                    tooltip: 'Unlinked dataset inputs will be run against *all* other inputs.' }] });\n\t            var $batch_div = $('<div/>').addClass('ui-form-info').append($('<i/>').addClass('fa fa-sitemap')).append($('<span/>').html('This is a batch mode input field. Separate jobs will be triggered for each dataset selection.'));\n\t            this.$batch = {\n\t                linked: $batch_div.clone(),\n\t                enabled: $batch_div.clone().append($('<div/>').append($('<div/>').addClass('ui-form-title').html('Batch options:')).append(this.button_product.$el)).append($('<div/>').css('clear', 'both'))\n\t            };\n\t\n\t            // add drag-drop event handlers\n\t            this.$el.on('dragenter', function (e) {\n\t                this.lastenter = e.target;self.$el.addClass('ui-dragover');\n\t            }).on('dragover', function (e) {\n\t                e.preventDefault();\n\t            }).on('dragleave', function (e) {\n\t                this.lastenter === e.target && self.$el.removeClass('ui-dragover');\n\t            }).on('drop', function (e) {\n\t                self._handleDrop(e);\n\t            });\n\t\n\t            // track current history elements\n\t            this.history = {};\n\t\n\t            // add listeners\n\t            this.listenTo(this.model, 'change:data', this._changeData, this);\n\t            this.listenTo(this.model, 'change:wait', this._changeWait, this);\n\t            this.listenTo(this.model, 'change:current', this._changeCurrent, this);\n\t            this.listenTo(this.model, 'change:value', this._changeValue, this);\n\t            this.listenTo(this.model, 'change:type change:optional change:multiple change:extensions', this._changeType, this);\n\t            this.render();\n\t\n\t            // add change event\n\t            this.on('change', function () {\n\t                options.onchange && options.onchange(self.value());\n\t            });\n\t        },\n\t\n\t        render: function () {\n\t            this._changeType();\n\t            this._changeValue();\n\t            this._changeWait();\n\t        },\n\t\n\t        /** Indicate that select fields are being updated */\n\t        wait: function () {\n\t            this.model.set('wait', true);\n\t        },\n\t\n\t        /** Indicate that the options update has been completed */\n\t        unwait: function () {\n\t            this.model.set('wait', false);\n\t        },\n\t\n\t        /** Update data representing selectable options */\n\t        update: function (options) {\n\t            this.model.set('data', options);\n\t        },\n\t\n\t        /** Return the currently selected dataset values */\n\t        value: function (new_value) {\n\t            new_value !== undefined && this.model.set('value', new_value);\n\t            var current = this.model.get('current');\n\t            if (this.config[current]) {\n\t                var id_list = this.fields[current].value();\n\t                if (id_list !== null) {\n\t                    id_list = $.isArray(id_list) ? id_list : [id_list];\n\t                    if (id_list.length > 0) {\n\t                        var result = this._batch({ values: [] });\n\t                        for (var i in id_list) {\n\t                            var details = this.history[id_list[i] + '_' + this.config[current].src];\n\t                            if (details) {\n\t                                result.values.push(details);\n\t                            } else {\n\t                                Galaxy.emit.debug('ui-select-content::value()', 'Requested details not found for \\'' + id_list[i] + '\\'.');\n\t                                return null;\n\t                            }\n\t                        }\n\t                        result.values.sort(function (a, b) {\n\t                            return a.hid - b.hid;\n\t                        });\n\t                        return result;\n\t                    }\n\t                }\n\t            } else {\n\t                Galaxy.emit.debug('ui-select-content::value()', 'Invalid value/source \\'' + new_value + '\\'.');\n\t            }\n\t            return null;\n\t        },\n\t\n\t        /** Change of current select field */\n\t        _changeCurrent: function () {\n\t            var self = this;\n\t            _.each(this.fields, function (field, i) {\n\t                if (self.model.get('current') == i) {\n\t                    field.$el.show();\n\t                    _.each(self.$batch, function ($batchfield, batchmode) {\n\t                        $batchfield[self.config[i].batch == batchmode ? 'show' : 'hide']();\n\t                    });\n\t                    self.button_type.value(i);\n\t                } else {\n\t                    field.$el.hide();\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Change of type */\n\t        _changeType: function () {\n\t            var self = this;\n\t\n\t            // identify selector type identifier i.e. [ flavor ]_[ type ]_[ multiple ]\n\t            var config_id = (this.model.get('flavor') ? this.model.get('flavor') + '_' : '') + String(this.model.get('type')) + (this.model.get('multiple') ? '_multiple' : '');\n\t            if (Configurations[config_id]) {\n\t                this.config = Configurations[config_id];\n\t            } else {\n\t                this.config = Configurations['data'];\n\t                Galaxy.emit.debug('ui-select-content::_changeType()', 'Invalid configuration/type id \\'' + config_id + '\\'.');\n\t            }\n\t\n\t            // prepare extension component of error message\n\t            var data = self.model.get('data');\n\t            var extensions = Utils.textify(this.model.get('extensions'));\n\t            var src_labels = this.model.get('src_labels');\n\t\n\t            // build views\n\t            this.fields = [];\n\t            this.button_data = [];\n\t            _.each(this.config, function (c, i) {\n\t                self.button_data.push({\n\t                    value: i,\n\t                    icon: c.icon,\n\t                    tooltip: c.tooltip\n\t                });\n\t                self.fields.push(new Select.View({\n\t                    optional: self.model.get('optional'),\n\t                    multiple: c.multiple,\n\t                    searchable: !c.multiple || data && data[c.src] && data[c.src].length > self.model.get('pagelimit'),\n\t                    selectall: false,\n\t                    error_text: 'No ' + (extensions ? extensions + ' ' : '') + (src_labels[c.src] || 'content') + ' available.',\n\t                    onchange: function () {\n\t                        self.trigger('change');\n\t                    }\n\t                }));\n\t            });\n\t            this.button_type = new Ui.RadioButton.View({\n\t                value: this.model.get('current'),\n\t                data: this.button_data,\n\t                onchange: function (value) {\n\t                    self.model.set('current', value);\n\t                    self.trigger('change');\n\t                }\n\t            });\n\t\n\t            // append views\n\t            this.$el.empty();\n\t            var button_width = 0;\n\t            if (this.fields.length > 1) {\n\t                this.$el.append(this.button_type.$el);\n\t                button_width = Math.max(0, this.fields.length * 36) + 'px';\n\t            }\n\t            _.each(this.fields, function (field) {\n\t                self.$el.append(field.$el.css({ 'margin-left': button_width }));\n\t            });\n\t            _.each(this.$batch, function ($batchfield, batchmode) {\n\t                self.$el.append($batchfield.css({ 'margin-left': button_width }));\n\t            });\n\t            this.model.set('current', 0);\n\t            this._changeCurrent();\n\t            this._changeData();\n\t        },\n\t\n\t        /** Change of wait flag */\n\t        _changeWait: function () {\n\t            var self = this;\n\t            _.each(this.fields, function (field) {\n\t                field[self.model.get('wait') ? 'wait' : 'unwait']();\n\t            });\n\t        },\n\t\n\t        /** Change of available options */\n\t        _changeData: function () {\n\t            var options = this.model.get('data');\n\t            var self = this;\n\t            var select_options = {};\n\t            _.each(options, function (items, src) {\n\t                select_options[src] = [];\n\t                _.each(items, function (item) {\n\t                    select_options[src].push({\n\t                        hid: item.hid,\n\t                        keep: item.keep,\n\t                        label: item.hid + ': ' + item.name,\n\t                        value: item.id,\n\t                        tags: item.tags\n\t                    });\n\t                    self.history[item.id + '_' + src] = item;\n\t                });\n\t            });\n\t            _.each(this.config, function (c, i) {\n\t                select_options[c.src] && self.fields[i].add(select_options[c.src], function (a, b) {\n\t                    return b.hid - a.hid;\n\t                });\n\t            });\n\t        },\n\t\n\t        /** Change of incoming value */\n\t        _changeValue: function () {\n\t            var new_value = this.model.get('value');\n\t            if (new_value && new_value.values && new_value.values.length > 0) {\n\t                // create list with content ids\n\t                var list = [];\n\t                _.each(new_value.values, function (value) {\n\t                    list.push(value.id);\n\t                });\n\t                // sniff first suitable field type from config list\n\t                var src = new_value.values[0].src;\n\t                var multiple = new_value.values.length > 1;\n\t                for (var i = 0; i < this.config.length; i++) {\n\t                    var field = this.fields[i];\n\t                    var c = this.config[i];\n\t                    if (c.src == src && [multiple, true].indexOf(c.multiple) !== -1) {\n\t                        this.model.set('current', i);\n\t                        field.value(list);\n\t                        break;\n\t                    }\n\t                }\n\t            } else {\n\t                _.each(this.fields, function (field) {\n\t                    field.value(null);\n\t                });\n\t            }\n\t        },\n\t\n\t        /** Handles drop events e.g. from history panel */\n\t        _handleDrop: function (ev) {\n\t            try {\n\t                var data = this.model.get('data');\n\t                var current = this.model.get('current');\n\t                var config = this.config[current];\n\t                var field = this.fields[current];\n\t                var drop_data = JSON.parse(ev.originalEvent.dataTransfer.getData('text'))[0];\n\t                var new_id = drop_data.id;\n\t                var new_src = drop_data.history_content_type == 'dataset' ? 'hda' : 'hdca';\n\t                var new_value = { id: new_id, src: new_src };\n\t                if (data && _.findWhere(data[new_src], new_value)) {\n\t                    if (config.src == new_src) {\n\t                        var current_value = field.value();\n\t                        if (current_value && config.multiple) {\n\t                            if (current_value.indexOf(new_id) == -1) {\n\t                                current_value.push(new_id);\n\t                            }\n\t                        } else {\n\t                            current_value = new_id;\n\t                        }\n\t                        field.value(current_value);\n\t                    } else {\n\t                        this.model.set('value', { values: [new_value] });\n\t                        this.model.trigger('change:value');\n\t                    }\n\t                    this.trigger('change');\n\t                    this._handleDropStatus('success');\n\t                } else {\n\t                    this._handleDropStatus('danger');\n\t                }\n\t            } catch (e) {\n\t                this._handleDropStatus('danger');\n\t            }\n\t        },\n\t\n\t        /** Highlight drag result */\n\t        _handleDropStatus: function (status) {\n\t            var self = this;\n\t            this.$el.removeClass('ui-dragover').addClass('ui-dragover-' + status);\n\t            setTimeout(function () {\n\t                self.$el.removeClass('ui-dragover-' + status);\n\t            }, this.model.get('statustimer'));\n\t        },\n\t\n\t        /** Assists in identifying the batch mode */\n\t        _batch: function (result) {\n\t            result['batch'] = false;\n\t            var current = this.model.get('current');\n\t            var config = this.config[current];\n\t            if (config.src == 'hdca' && !config.multiple) {\n\t                var hdca = this.history[this.fields[current].value() + '_hdca'];\n\t                if (hdca && hdca.map_over_type) {\n\t                    result['batch'] = true;\n\t                }\n\t            }\n\t            if (config.batch == Batch.LINKED || config.batch == Batch.ENABLED) {\n\t                result['batch'] = true;\n\t                if (config.batch == Batch.ENABLED && this.button_product.value() === 'true') {\n\t                    result['product'] = true;\n\t                }\n\t            }\n\t            return result;\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone) {// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, List) {\n\t\n\t    /**\n\t     * FTP file selector\n\t     */\n\t    var View = Backbone.View.extend({\n\t        // initialize\n\t        initialize: function (options) {\n\t            // link this\n\t            var self = this;\n\t\n\t            // create ui-list view to keep track of selected ftp files\n\t            this.ftpfile_list = new List.View({\n\t                name: 'file',\n\t                optional: options.optional,\n\t                multiple: options.multiple,\n\t                onchange: function () {\n\t                    options.onchange && options.onchange(self.value());\n\t                }\n\t            });\n\t\n\t            // create elements\n\t            this.setElement(this.ftpfile_list.$el);\n\t\n\t            // initial fetch of ftps\n\t            Utils.get({\n\t                url: Galaxy.root + 'api/remote_files',\n\t                success: function (response) {\n\t                    var data = [];\n\t                    for (var i in response) {\n\t                        data.push({\n\t                            value: response[i]['path'],\n\t                            label: response[i]['path']\n\t                        });\n\t                    }\n\t                    self.ftpfile_list.update(data);\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Return/Set currently selected ftp datasets */\n\t        value: function (val) {\n\t            return this.ftpfile_list.value(val);\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone) {// dependencies\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4), __webpack_require__(5), __webpack_require__(23), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils, Ui, Table, List) {\n\t\n\t    // collection of libraries\n\t    var Libraries = Backbone.Collection.extend({\n\t        url: Galaxy.root + 'api/libraries?deleted=false'\n\t    });\n\t\n\t    // collection of dataset\n\t    var LibraryDatasets = Backbone.Collection.extend({\n\t        initialize: function () {\n\t            var self = this;\n\t            this.config = new Backbone.Model({ library_id: null });\n\t            this.config.on('change', function () {\n\t                self.fetch({ reset: true });\n\t            });\n\t        },\n\t        url: function () {\n\t            return Galaxy.root + 'api/libraries/' + this.config.get('library_id') + '/contents';\n\t        }\n\t    });\n\t\n\t    // hda/hdca content selector ui element\n\t    var View = Backbone.View.extend({\n\t        // initialize\n\t        initialize: function (options) {\n\t            // link this\n\t            var self = this;\n\t\n\t            // collections\n\t            this.libraries = new Libraries();\n\t            this.datasets = new LibraryDatasets();\n\t\n\t            // link app and options\n\t            this.options = options;\n\t\n\t            // select field for the library\n\t            // TODO: Remove this once the library API supports searching for library datasets\n\t            this.library_select = new Ui.Select.View({\n\t                onchange: function (value) {\n\t                    self.datasets.config.set('library_id', value);\n\t                }\n\t            });\n\t\n\t            // create ui-list view to keep track of selected data libraries\n\t            this.dataset_list = new List.View({\n\t                name: 'dataset',\n\t                optional: options.optional,\n\t                multiple: options.multiple,\n\t                onchange: function () {\n\t                    self.trigger('change');\n\t                }\n\t            });\n\t\n\t            // add reset handler for fetched libraries\n\t            this.libraries.on('reset', function () {\n\t                var data = [];\n\t                self.libraries.each(function (model) {\n\t                    data.push({\n\t                        value: model.id,\n\t                        label: model.get('name')\n\t                    });\n\t                });\n\t                self.library_select.update(data);\n\t            });\n\t\n\t            // add reset handler for fetched library datasets\n\t            this.datasets.on('reset', function () {\n\t                var data = [];\n\t                var library_current = self.library_select.text();\n\t                if (library_current !== null) {\n\t                    self.datasets.each(function (model) {\n\t                        if (model.get('type') === 'file') {\n\t                            data.push({\n\t                                value: model.id,\n\t                                label: model.get('name')\n\t                            });\n\t                        }\n\t                    });\n\t                }\n\t                self.dataset_list.update(data);\n\t            });\n\t\n\t            // add change event. fires on trigger\n\t            this.on('change', function () {\n\t                options.onchange && options.onchange(self.value());\n\t            });\n\t\n\t            // create elements\n\t            this.setElement(this._template());\n\t            this.$('.library-select').append(this.library_select.$el);\n\t            this.$el.append(this.dataset_list.$el);\n\t\n\t            // initial fetch of libraries\n\t            this.libraries.fetch({\n\t                reset: true,\n\t                success: function () {\n\t                    self.library_select.trigger('change');\n\t                    if (self.options.value !== undefined) {\n\t                        self.value(self.options.value);\n\t                    }\n\t                }\n\t            });\n\t        },\n\t\n\t        /** Return/Set currently selected library datasets */\n\t        value: function (val) {\n\t            return this.dataset_list.value(val);\n\t        },\n\t\n\t        /** Template */\n\t        _template: function () {\n\t            return '<div class=\"ui-select-library\">' + '<div class=\"library ui-margin-bottom\">' + '<span class=\"library-title\">Select Library</span>' + '<span class=\"library-select\"/>' + '</div>' + '</div>';\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Utils) {\n\t    var View = Backbone.View.extend({\n\t        initialize: function (options) {\n\t            var self = this;\n\t            this.model = options && options.model || new Backbone.Model({\n\t                id: Utils.uid(),\n\t                min: null,\n\t                max: null,\n\t                step: null,\n\t                precise: false,\n\t                split: 10000,\n\t                value: null,\n\t                onchange: function () {}\n\t            }).set(options);\n\t\n\t            // create new element\n\t            this.setElement(this._template());\n\t            this.$el.attr('id', this.model.id);\n\t            this.$text = this.$('.ui-form-slider-text');\n\t            this.$slider = this.$('.ui-form-slider-element');\n\t\n\t            // add text field event\n\t            var pressed = [];\n\t            this.$text.on('change', function () {\n\t                self.value($(this).val());\n\t            }).on('keyup', function (e) {\n\t                pressed[e.which] = false;\n\t            }).on('keydown', function (e) {\n\t                var v = e.which;\n\t                pressed[v] = true;\n\t                if (self.model.get('is_workflow') && pressed[16] && v == 52) {\n\t                    self.value('$');\n\t                    event.preventDefault();\n\t                } else if (!(v == 8 || v == 9 || v == 13 || v == 37 || v == 39 || v >= 48 && v <= 57 && !pressed[16] || v >= 96 && v <= 105 || (v == 190 || v == 110) && $(this).val().indexOf('.') == -1 && self.model.get('precise') || (v == 189 || v == 109) && $(this).val().indexOf('-') == -1 || self._isParameter($(this).val()) || pressed[91] || pressed[17])) {\n\t                    event.preventDefault();\n\t                }\n\t            });\n\t\n\t            // build slider, cannot be rebuild in render\n\t            var opts = this.model.attributes;\n\t            this.has_slider = opts.max !== null && opts.min !== null && opts.max > opts.min;\n\t            var step = opts.step;\n\t            if (!step) {\n\t                if (opts.precise && this.has_slider) {\n\t                    step = (opts.max - opts.min) / opts.split;\n\t                } else {\n\t                    step = 1.0;\n\t                }\n\t            }\n\t            if (this.has_slider) {\n\t                this.$text.addClass('ui-form-slider-left');\n\t                this.$slider.slider({ min: opts.min, max: opts.max, step: step }).on('slide', function (event, ui) {\n\t                    self.value(ui.value);\n\t                });\n\t            } else {\n\t                this.$slider.hide();\n\t            }\n\t\n\t            // add listeners\n\t            this.listenTo(this.model, 'change', this.render, this);\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var value = this.model.get('value');\n\t            this.has_slider && this.$slider.slider('value', value);\n\t            value !== this.$text.val() && this.$text.val(value);\n\t        },\n\t\n\t        /** Set and return the current value */\n\t        value: function (new_val) {\n\t            var options = this.model.attributes;\n\t            if (new_val !== undefined) {\n\t                if (new_val !== null && new_val !== '' && !this._isParameter(new_val)) {\n\t                    isNaN(new_val) && (new_val = 0);\n\t                    !options.precise && (new_val = Math.round(new_val));\n\t                    options.max !== null && (new_val = Math.min(new_val, options.max));\n\t                    options.min !== null && (new_val = Math.max(new_val, options.min));\n\t                }\n\t                this.model.set('value', new_val);\n\t                this.model.trigger('change');\n\t                options.onchange(new_val);\n\t            }\n\t            return this.model.get('value');\n\t        },\n\t\n\t        /** Return true if the field contains a workflow parameter i.e. $('name') */\n\t        _isParameter: function (value) {\n\t            return this.model.get('is_workflow') && String(value).substring(0, 1) === '$';\n\t        },\n\t\n\t        /** Slider template */\n\t        _template: function () {\n\t            return '<div class=\"ui-form-slider\">' + '<input class=\"ui-form-slider-text\" type=\"text\"/>' + '<div class=\"ui-form-slider-element\"/>' + '</div>';\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Backbone) {var jQuery = __webpack_require__(1),\n\t    $ = jQuery,\n\t    QUERY_STRING = __webpack_require__(42),\n\t    Ui = __webpack_require__(5);\n\t\n\tvar Router = Backbone.Router.extend({\n\t    // TODO: not many client routes at this point - fill and remove from server.\n\t    // since we're at root here, this may be the last to be routed entirely on the client.\n\t    initialize: function (page, options) {\n\t        this.page = page;\n\t        this.options = options;\n\t    },\n\t\n\t    /** helper to push a new navigation state */\n\t    push: function (url, data) {\n\t        data = data || {};\n\t        data.__identifer = Math.random().toString(36).substr(2);\n\t        if (!$.isEmptyObject(data)) {\n\t            url += url.indexOf('?') == -1 ? '?' : '&';\n\t            url += $.param(data, true);\n\t        }\n\t        Galaxy.params = {};\n\t        this.navigate(url, { 'trigger': true });\n\t    },\n\t\n\t    /** override to parse query string into obj and send to each route */\n\t    execute: function (callback, args, name) {\n\t        Galaxy.debug('router execute:', callback, args, name);\n\t        var queryObj = QUERY_STRING.parse(args.pop());\n\t        args.push(queryObj);\n\t        if (callback) {\n\t            if (this.authenticate(args, name)) {\n\t                callback.apply(this, args);\n\t            } else {\n\t                this.access_denied();\n\t            }\n\t        }\n\t    },\n\t\n\t    authenticate: function (args, name) {\n\t        return true;\n\t    },\n\t\n\t    access_denied: function () {\n\t        this.page.display(new Ui.Message({ status: 'danger', message: 'You must be logged in with proper credentials to make this request.', persistent: true }));\n\t    }\n\t});\n\t\n\tmodule.exports = Router;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ },\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, $) {/** Generic form view */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(11), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (Form, Ui) {\n\t\n\t    var View = Backbone.View.extend({\n\t\n\t        initialize: function (options) {\n\t            this.model = new Backbone.Model(options);\n\t            this.url = this.model.get('url');\n\t            this.redirect = this.model.get('redirect');\n\t            this.setElement('<div/>');\n\t            this.render();\n\t        },\n\t\n\t        render: function () {\n\t            var self = this;\n\t            $.ajax({\n\t                url: Galaxy.root + this.url,\n\t                type: 'GET'\n\t            }).done(function (response) {\n\t                var options = $.extend({}, self.model.attributes, response);\n\t                var form = new Form({\n\t                    title: options.title,\n\t                    message: options.message,\n\t                    status: options.status,\n\t                    icon: options.icon,\n\t                    inputs: options.inputs,\n\t                    operations: {\n\t                        'submit': new Ui.ButtonIcon({\n\t                            tooltip: options.submit_tooltip,\n\t                            title: options.submit_title || 'Save settings',\n\t                            icon: options.submit_icon || 'fa-save',\n\t                            onclick: function () {\n\t                                self._submit(form);\n\t                            }\n\t                        })\n\t                    }\n\t                });\n\t                self.$el.empty().append(form.$el);\n\t            }).fail(function (response) {\n\t                self.$el.empty().append(new Ui.Message({\n\t                    message: 'Failed to load resource ' + self.url + '.',\n\t                    status: 'danger',\n\t                    persistent: true\n\t                }).$el);\n\t            });\n\t        },\n\t\n\t        _submit: function (form) {\n\t            var self = this;\n\t            $.ajax({\n\t                url: Galaxy.root + self.url,\n\t                data: JSON.stringify(form.data.create()),\n\t                type: 'PUT',\n\t                contentType: 'application/json'\n\t            }).done(function (response) {\n\t                var success_message = { message: response.message, status: 'success', persistent: false };\n\t                if (self.redirect) {\n\t                    window.location = self.redirect + '?' + $.param(success_message);\n\t                } else {\n\t                    form.data.matchModel(response, function (input, input_id) {\n\t                        form.field_list[input_id].value(input.value);\n\t                    });\n\t                    form.message.update(success_message);\n\t                }\n\t            }).fail(function (response) {\n\t                form.message.update({ message: response.responseJSON.err_msg, status: 'danger', persistent: false });\n\t            });\n\t        }\n\t    });\n\t\n\t    return {\n\t        View: View\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1)))\n\n/***/ },\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Backbone, $, _) {var _l = __webpack_require__(6);\n\t\n\tvar AdminPanel = Backbone.View.extend({\n\t    initialize: function (page, options) {\n\t        var self = this;\n\t        this.page = page;\n\t        this.root = options.root;\n\t        this.config = options.config;\n\t        this.settings = options.settings;\n\t        this.message = options.message;\n\t        this.status = options.status;\n\t        this.model = new Backbone.Model({\n\t            title: _l('Administration')\n\t        });\n\t        this.categories = new Backbone.Collection([{\n\t            title: 'Server',\n\t            items: [{\n\t                title: 'Data types registry',\n\t                url: 'admin/view_datatypes_registry'\n\t            }, {\n\t                title: 'Data tables registry',\n\t                url: 'admin/view_tool_data_tables'\n\t            }, {\n\t                title: 'Display applications',\n\t                url: 'admin/display_applications'\n\t            }, {\n\t                title: 'Manage jobs',\n\t                url: 'admin/jobs'\n\t            }]\n\t        }, {\n\t            title: 'Tools and Tool Shed',\n\t            items: [{\n\t                title: 'Search Tool Shed',\n\t                url: 'admin_toolshed/browse_tool_sheds',\n\t                enabled: self.settings.is_tool_shed_installed\n\t            }, {\n\t                title: 'Search Tool Shed (Beta)',\n\t                url: 'admin_toolshed/browse_toolsheds',\n\t                enabled: self.settings.is_tool_shed_installed && self.config.enable_beta_ts_api_install\n\t            }, {\n\t                title: 'Monitor installing repositories',\n\t                url: 'admin_toolshed/monitor_repository_installation?installing_repository_ids=' + self.settings.installing_repository_ids,\n\t                enabled: self.settings.installing_repository_ids\n\t            }, {\n\t                title: 'Manage installed tools',\n\t                url: 'admin_toolshed/browse_repositories',\n\t                enabled: self.settings.is_repo_installed\n\t            }, {\n\t                title: 'Reset metadata',\n\t                url: 'admin_toolshed/reset_metadata_on_selected_installed_repositories',\n\t                enabled: self.settings.is_repo_installed\n\t            }, {\n\t                title: 'Download local tool',\n\t                url: 'admin/package_tool'\n\t            }, {\n\t                title: 'Tool lineage',\n\t                url: 'admin/tool_versions'\n\t            }, {\n\t                title: 'Reload a tool\\'s configuration',\n\t                url: 'admin/reload_tool'\n\t            }, {\n\t                title: 'Review tool migration stages',\n\t                url: 'admin/review_tool_migration_stages'\n\t            }, {\n\t                title: 'View Tool Error Logs',\n\t                url: 'admin/tool_errors'\n\t            }, {\n\t                title: 'Manage Display Whitelist',\n\t                url: 'admin/sanitize_whitelist'\n\t            }, {\n\t                title: 'Manage Tool Dependencies',\n\t                url: 'admin/manage_tool_dependencies'\n\t            }]\n\t        }, {\n\t            title: 'User Management',\n\t            items: [{\n\t                title: 'Users',\n\t                url: 'admin/users',\n\t                target: '__use_router__'\n\t            }, {\n\t                title: 'Groups',\n\t                url: 'admin/groups'\n\t            }, {\n\t                title: 'Roles',\n\t                url: 'admin/roles',\n\t                target: '__use_router__'\n\t            }, {\n\t                title: 'API keys',\n\t                url: 'userskeys/all_users'\n\t            }, {\n\t                title: 'Impersonate a user',\n\t                url: 'admin/impersonate',\n\t                enabled: self.config.allow_user_impersonation\n\t            }]\n\t        }, {\n\t            title: 'Data',\n\t            items: [{\n\t                title: 'Quotas',\n\t                url: 'admin/quotas',\n\t                enabled: self.config.enable_quotas\n\t            }, {\n\t                title: 'Data libraries',\n\t                url: 'library_admin/browse_libraries'\n\t            }, {\n\t                title: 'Roles',\n\t                url: 'admin/roles'\n\t            }, {\n\t                title: 'Local data',\n\t                url: 'data_manager'\n\t            }]\n\t        }, {\n\t            title: 'Form Definitions',\n\t            items: [{\n\t                title: 'Form definitions',\n\t                url: 'forms/browse_form_definitions'\n\t            }]\n\t        }, {\n\t            title: 'Sample Tracking',\n\t            items: [{\n\t                title: 'Sequencers and external services',\n\t                url: 'external_service/browse_external_services'\n\t            }, {\n\t                title: 'Request types',\n\t                url: 'request_type/browse_request_types'\n\t            }, {\n\t                title: 'Sequencing requests',\n\t                url: 'requests_admin/browse_requests'\n\t            }, {\n\t                title: 'Find samples',\n\t                url: 'requests_common/find_samples?cntrller=requests_admin'\n\t            }]\n\t        }]);\n\t        this.setElement(this._template());\n\t    },\n\t\n\t    render: function () {\n\t        var self = this;\n\t        this.$el.empty();\n\t        this.categories.each(function (category) {\n\t            var $section = $(self._templateSection(category.attributes));\n\t            var $entries = $section.find('.ui-side-section-body');\n\t            _.each(category.get('items'), function (item) {\n\t                if (item.enabled === undefined || item.enabled) {\n\t                    var $link = $('<a/>').attr({ href: self.root + item.url }).text(_l(item.title));\n\t                    if (item.target == '__use_router__') {\n\t                        $link.on('click', function (e) {\n\t                            e.preventDefault();self.page.router.push(item.url);\n\t                        });\n\t                    } else {\n\t                        $link.attr('target', 'galaxy_main');\n\t                    }\n\t                    $entries.append($('<div/>').addClass('ui-side-section-body-title').append($link));\n\t                }\n\t            });\n\t            self.$el.append($section);\n\t        });\n\t        this.page.$('#galaxy_main').prop('src', this.root + 'admin/center?message=' + this.message + '&status=' + this.status);\n\t    },\n\t\n\t    _templateSection: function (options) {\n\t        return ['<div>', '<div class=\"ui-side-section-title\">' + _l(options.title) + '</div>', '<div class=\"ui-side-section-body\"/>', '</div>'].join('');\n\t    },\n\t\n\t    _template: function () {\n\t        return '<div class=\"ui-side-panel\"/>';\n\t    },\n\t\n\t    toString: function () {\n\t        return 'adminPanel';\n\t    }\n\t});\n\t\n\tmodule.exports = AdminPanel;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(1), __webpack_require__(3)))\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// admin.bundled.js","var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    GalaxyApp = require( 'galaxy' ).GalaxyApp,\n    AdminPanel = require( './panels/admin-panel' ),\n    FormWrapper = require( 'mvc/form/form-wrapper' ),\n    GridView = require( 'mvc/grid/grid-view' ),\n    Ui = require( 'mvc/ui/ui-misc' ),\n    QueryStringParsing = require( 'utils/query-string-parsing' ),\n    Router = require( 'layout/router' ),\n    Page = require( 'layout/page' );\n\nwindow.app = function app( options, bootstrapped ){\n    window.Galaxy = new GalaxyApp( options, bootstrapped );\n    Galaxy.debug( 'admin app' );\n\n    /** Routes */\n    var AdminRouter = Router.extend({\n        routes: {\n            '(/)admin(/)users' : 'show_users',\n            '(/)admin(/)roles' : 'show_roles',\n            '(/)admin(/)forms(/)(:form_id)' : 'show_forms'\n        },\n\n        authenticate: function( args, name ) {\n            return Galaxy.user && Galaxy.user.id && Galaxy.user.get( 'is_admin' );\n        },\n\n        show_users: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/users_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_roles: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/roles_list', url_data: Galaxy.params, dict_format: true } ) );\n        },\n\n        show_forms : function( form_id ) {\n            var form_defs = {\n                reset_user_password: {\n                    title           : 'Reset passwords',\n                    url             : 'admin/reset_user_password?id=' + QueryStringParsing.get( 'id' ),\n                    icon            : 'fa-user',\n                    submit_title    : 'Save new password',\n                    redirect        : Galaxy.root + 'admin/users'\n                },\n                manage_roles_and_groups_for_user: {\n                    url             : 'admin/manage_roles_and_groups_for_user?id=' + QueryStringParsing.get( 'id' ),\n                    icon            : 'fa-users',\n                    redirect        : Galaxy.root + 'admin/users'\n                },\n                rename_role: {\n                    url             : 'admin/rename_role?id=' + QueryStringParsing.get( 'id' ),\n                    icon            : 'fa-users',\n                    redirect        : Galaxy.root + 'admin/users'\n                }\n            };\n            this.page.display( new FormWrapper.View ( form_defs[ form_id ] ) );\n        }\n    });\n\n    $(function() {\n        _.extend( options.config, { active_view : 'admin' } );\n        Galaxy.page = new Page.View( _.extend( options, {\n            Left    : AdminPanel,\n            Router  : AdminRouter\n        } ) );\n    });\n};\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/admin.js","/**\n *  This class contains backbone wrappers for basic ui elements such as Images, Labels, Buttons, Input fields etc.\n */\ndefine(['utils/utils',\n    'mvc/ui/ui-select-default',\n    'mvc/ui/ui-slider',\n    'mvc/ui/ui-options',\n    'mvc/ui/ui-drilldown',\n    'mvc/ui/ui-buttons',\n    'mvc/ui/ui-modal'],\n    function( Utils, Select, Slider, Options, Drilldown, Buttons, Modal ) {\n\n    /** Label wrapper */\n    var Label = Backbone.View.extend({\n        tagName: 'label',\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.tagName = options.tagName || this.tagName;\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        title: function( new_title ) {\n            this.model.set( 'title', new_title );\n        },\n        value: function() {\n            return this.model.get( 'title' );\n        },\n        render: function() {\n            this.$el.removeClass()\n                    .addClass( 'ui-label' )\n                    .addClass( this.model.get( 'cls' ) )\n                    .html( this.model.get( 'title' ) );\n            return this;\n        }\n    });\n\n    /** Displays messages used e.g. in the tool form */\n    var Message = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                message     : null,\n                status      : 'info',\n                cls         : '',\n                persistent  : false,\n                fade        : true\n            }).set( options );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        update: function( options ) {\n            this.model.set( options );\n        },\n        render: function() {\n            this.$el.removeClass().addClass( 'ui-message' ).addClass( this.model.get( 'cls' ) );\n            var status = this.model.get( 'status' );\n            if ( this.model.get( 'large' ) ) {\n                this.$el.addClass((( status == 'success' && 'done' ) ||\n                                   ( status == 'danger' && 'error' ) ||\n                                     status ) + 'messagelarge' );\n            } else {\n                this.$el.addClass( 'alert' ).addClass( 'alert-' + status );\n            }\n            if ( this.model.get( 'message' ) ) {\n                this.$el.html( this.messageForDisplay() );\n                this.$el[ this.model.get( 'fade' ) ? 'fadeIn' : 'show' ]();\n                this.timeout && window.clearTimeout( this.timeout );\n                if ( !this.model.get( 'persistent' ) ) {\n                    var self = this;\n                    this.timeout = window.setTimeout( function() {\n                        self.model.set( 'message', '' );\n                    }, 3000 );\n                }\n            } else {\n                this.$el.fadeOut();\n            }\n            return this;\n        },\n        messageForDisplay: function() {\n            return _.escape( this.model.get( 'message' ) );\n        }\n    });\n\n    var UnescapedMessage = Message.extend({\n        messageForDisplay: function() {\n            return this.model.get( 'message' );\n        }\n    });\n\n    /** Renders an input element used e.g. in the tool form */\n    var Input = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                type            : 'text',\n                placeholder     : '',\n                disabled        : false,\n                readonly        : false,\n                visible         : true,\n                cls             : '',\n                area            : false,\n                color           : null,\n                style           : null\n            }).set( options );\n            this.tagName = this.model.get( 'area' ) ? 'textarea' : 'input';\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        events: {\n            'input': '_onchange'\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', typeof new_val === 'string' ? new_val : '' );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            var self = this;\n            this.$el.removeClass()\n                    .addClass( 'ui-' + this.tagName )\n                    .addClass( this.model.get( 'cls' ) )\n                    .addClass( this.model.get( 'style' ) )\n                    .attr( 'id', this.model.id )\n                    .attr( 'type', this.model.get( 'type' ) )\n                    .attr( 'placeholder', this.model.get( 'placeholder' ) )\n                    .css( 'color', this.model.get( 'color' ) || '' )\n                    .css( 'border-color', this.model.get( 'color' ) || '' );\n            var datalist = this.model.get( 'datalist' );\n            if ( $.isArray( datalist ) && datalist.length > 0 ) {\n                this.$el.autocomplete( { source : function( request, response ) { response( self.model.get( 'datalist' ) ) },\n                                         change : function() { self._onchange() } } );\n            }\n            if ( this.model.get( 'value' ) !== this.$el.val() ) {\n                this.$el.val( this.model.get( 'value' ) );\n            }\n            _.each( [ 'readonly', 'disabled' ], function( attr_name ) {\n                self.model.get( attr_name ) ? self.$el.attr( attr_name, true ) : self.$el.removeAttr( attr_name );\n            });\n            this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n            return this;\n        },\n        _onchange: function() {\n            this.value( this.$el.val() );\n            this.model.get( 'onchange' ) && this.model.get( 'onchange' )( this.model.get( 'value' ) );\n        }\n    });\n\n    /** Creates a hidden element input field used e.g. in the tool form */\n    var Hidden = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$hidden = $( '<div/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.$hidden.val( this.model.get( 'value' ) );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            return this;\n        }\n    });\n\n    /** Creates a upload element input field */\n    var Upload = Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$file = $( '<input/>' ).attr( 'type', 'file' ).addClass( 'ui-margin-bottom' ) )\n                                           .append( this.$text = $( '<textarea/>' ).addClass( 'ui-textarea' ).attr( 'disabled', true ) )\n                                           .append( this.$wait = $( '<i/>' ).addClass( 'fa fa-spinner fa-spin' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.$file.on( 'change', function( e ) { self._readFile( e ) } );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            this.model.get( 'value' ) ? this.$text.text( this.model.get( 'value' ) ).show() : this.$text.hide();\n            this.model.get( 'wait' ) ? this.$wait.show() : this.$wait.hide();\n            return this;\n        },\n        _readFile: function( e ) {\n            var self = this;\n            var file = e.target.files && e.target.files[ 0 ];\n            if ( file ) {\n                var reader = new FileReader();\n                reader.onload = function() {\n                    self.model.set( { wait: false, value: this.result } );\n                }\n                this.model.set( { wait: true, value: null } );\n                reader.readAsText( file );\n            }\n        }\n    });\n\n    return {\n        Button           : Buttons.ButtonDefault,\n        ButtonIcon       : Buttons.ButtonIcon,\n        ButtonCheck      : Buttons.ButtonCheck,\n        ButtonMenu       : Buttons.ButtonMenu,\n        ButtonLink       : Buttons.ButtonLink,\n        Input            : Input,\n        Label            : Label,\n        Message          : Message,\n        UnescapedMessage : UnescapedMessage,\n        Upload           : Upload,\n        Modal            : Modal,\n        RadioButton      : Options.RadioButton,\n        Checkbox         : Options.Checkbox,\n        Radio            : Options.Radio,\n        Select           : Select,\n        Hidden           : Hidden,\n        Slider           : Slider,\n        Drilldown        : Drilldown\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-misc.js","define([ 'utils/utils', 'mvc/ui/ui-misc' ], function( Utils, Ui ) {\nvar View = Backbone.View.extend({\n    visible     : false,\n    initialize  : function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model( {\n            id                  : Utils.uid(),\n            cls                 : 'ui-portlet',\n            title               : '',\n            icon                : '',\n            buttons             : null,\n            body                : null,\n            scrollable          : true,\n            nopadding           : false,\n            operations          : null,\n            collapsible         : false,\n            collapsible_button  : false,\n            collapsed           : false,\n            onchange_title      : null\n        } ).set( options );\n        this.setElement( this._template() );\n\n        // link all dom elements\n        this.$body          = this.$( '.portlet-body' );\n        this.$title_text    = this.$( '.portlet-title-text' );\n        this.$title_icon    = this.$( '.portlet-title-icon' );\n        this.$header        = this.$( '.portlet-header' );\n        this.$content       = this.$( '.portlet-content' );\n        this.$backdrop      = this.$( '.portlet-backdrop' );\n        this.$buttons       = this.$( '.portlet-buttons' );\n        this.$operations    = this.$( '.portlet-operations' );\n\n        // add body to component list\n        this.model.get( 'body' ) && this.append( this.model.get( 'body' ) );\n\n        // add icon for collapsible option\n        this.collapsible_button = new Ui.ButtonIcon({\n            icon    : 'fa-eye',\n            tooltip : 'Collapse/Expand',\n            cls     : 'ui-button-icon-plain',\n            onclick : function() { self[ self.collapsed ? 'expand' : 'collapse' ]() }\n        });\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.$el.removeClass().addClass( options.cls ).attr( 'id', options.id );\n        this.$header[ options.title ? 'show' : 'hide' ]();\n        this.$title_text.html( options.title );\n        _.each( [ this.$content, this.$body ], function( $el ) {\n            $el[ options.nopadding ? 'addClass' : 'removeClass' ]( 'no-padding' );\n        });\n\n        // render title icon\n        if ( options.icon ) {\n            this.$title_icon.removeClass().addClass( 'portlet-title-icon fa' ).addClass( options.icon ).show();\n        } else {\n            this.$title_icon.hide();\n        }\n\n        // make portlet collapsible\n        this.$title_text[ options.collapsible ? 'addClass' : 'removeClass' ]( 'no-highlight collapsible' ).off();\n        if ( options.collapsible ) {\n            this.$title_text.on( 'click', function() { self[ self.collapsed ? 'expand' : 'collapse' ]() } );\n            options.collapsed ? this.collapse() : this.expand();\n        }\n\n        // allow title editing\n        this.$title_text.prop( 'disabled', !options.onchange_title );\n        options.onchange_title && this.$title_text.make_text_editable({\n            on_finish: function( new_title ) {\n                options.onchange_title( new_title );\n            }\n        });\n\n        // render buttons\n        if ( options.buttons ) {\n            this.$buttons.empty().show();\n            $.each( this.model.get( 'buttons' ), function( name, item ) {\n                item.$el.prop( 'id', name );\n                self.$buttons.append( item.$el );\n            });\n        } else {\n            this.$buttons.hide();\n        }\n\n        // render operations\n        this.$operations.empty;\n        if ( options.collapsible_button ) {\n            this.$operations.append( this.collapsible_button.$el );\n        }\n        if ( options.operations ) {\n            $.each( options.operations, function( name, item ) {\n                item.$el.prop( 'id', name );\n                self.$operations.append( item.$el );\n            });\n        }\n        return this;\n    },\n\n    /** Append new doms to body */\n    append: function( $el ) {\n        this.$body.append( $el );\n    },\n\n    /** Remove all content */\n    empty: function() {\n        this.$body.empty();\n    },\n\n    /** Return header element */\n    header: function() {\n        return this.$header;\n    },\n\n    /** Return body element */\n    body: function() {\n        return this.$body;\n    },\n\n    /** Show portlet */\n    show: function(){\n        this.visible = true;\n        this.$el.fadeIn( 'fast' );\n    },\n\n    /** Hide portlet */\n    hide: function(){\n        this.visible = false;\n        this.$el.hide();\n    },\n\n    /** Enable a particular button */\n    enableButton: function( id ) {\n        this.$buttons.find( '#' + id ).prop( 'disabled', false );\n    },\n\n    /** Disable a particular button */\n    disableButton: function( id ) {\n        this.$buttons.find( '#' + id ).prop( 'disabled', true );\n    },\n\n    /** Hide a particular operation */\n    hideOperation: function( id ) {\n        this.$operations.find( '#' + id ).hide();\n    },\n\n    /** Show a particular operation */\n    showOperation: function( id ) {\n        this.$operations.find( '#' + id ).show();\n    },\n\n    /** Replaces the event callback of an existing operation */\n    setOperation: function( id, callback ) {\n        this.$operations.find( '#' + id ).off( 'click' ).on( 'click', callback );\n    },\n\n    /** Change title */\n    title: function( new_title ) {\n        new_title && this.$title_text.html( new_title );\n        return this.$title_text.html();\n    },\n\n    /** Collapse portlet */\n    collapse: function() {\n        this.collapsed = true;\n        this.$content.height( '0%' );\n        this.$body.hide();\n        this.collapsible_button.setIcon( 'fa-eye-slash' );\n    },\n\n    /** Expand portlet */\n    expand: function() {\n        this.collapsed = false;\n        this.$content.height( '100%' );\n        this.$body.fadeIn( 'fast' );\n        this.collapsible_button.setIcon( 'fa-eye' );\n    },\n\n    /** Disable content access */\n    disable: function() {\n        this.$backdrop.show();\n    },\n\n    /** Enable content access */\n    enable: function() {\n        this.$backdrop.hide();\n    },\n\n    _template: function() {\n        return $( '<div/>' ).append( $( '<div/>' ).addClass( 'portlet-header' )\n                                .append( $( '<div/>' ).addClass( 'portlet-operations' ) )\n                                .append( $( '<div/>' ).addClass( 'portlet-title' )\n                                    .append( $( '<i/>' ).addClass( 'portlet-title-icon' ) )\n                                    .append( $( '<span/>' ).addClass( 'portlet-title-text' ) ) ) )\n                            .append( $( '<div/>' ).addClass( 'portlet-content' )\n                                .append( $( '<div/>' ).addClass( 'portlet-body' ) )\n                                .append( $( '<div/>' ).addClass( 'portlet-buttons' ) ) )\n                            .append( $( '<div/>' ).addClass( 'portlet-backdrop' ) );\n    }\n});\nreturn {\n    View : View\n}\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-portlet.js","/** This module contains all button views. */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    /** This renders the default button which is used e.g. at the bottom of the upload modal. */\n    var ButtonDefault = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                floating    : 'right',\n                icon        : '',\n                cls         : 'btn btn-default',\n                wait        : false,\n                wait_text   : 'Sending...',\n                wait_cls    : 'btn btn-info',\n                disabled    : false,\n                percentage  : -1\n            }).set( options );\n            this.setElement( $( '<button/>' ).attr( 'type', 'button' )\n                                             .append( this.$icon        = $( '<i/>' ) )\n                                             .append( this.$title       = $( '<span/>' ) )\n                                             .append( this.$progress    = $( '<div/>' ).append( this.$progress_bar = $( '<div/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'ui-button-default' )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'id', options.id )\n                    .attr( 'disabled', options.disabled )\n                    .css( 'float', options.floating )\n                    .off( 'click' ).on( 'click' , function() {\n                        $( '.tooltip' ).hide();\n                        options.onclick && !self.disabled && options.onclick();\n                    })\n                    .tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$progress.addClass( 'progress' ).css( 'display', options.percentage !== -1 ? 'block' : 'none' );\n            this.$progress_bar.addClass( 'progress-bar' ).css( { width : options.percentage + '%' } );\n            this.$icon.removeClass().addClass( 'icon fa' );\n            this.$title.removeClass().addClass( 'title' );\n            if ( options.wait ) {\n                this.$el.addClass( options.wait_cls ).prop( 'disabled', true );\n                this.$icon.addClass( 'fa-spinner fa-spin ui-margin-right' );\n                this.$title.html( options.wait_text );\n            } else {\n                this.$el.addClass( options.cls );\n                this.$icon.addClass( options.icon );\n                this.$title.html( options.title );\n                options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            }\n        },\n\n        /** Show button */\n        show: function() {\n            this.$el.show();\n        },\n\n        /** Hide button */\n        hide: function() {\n            this.$el.hide();\n        },\n\n        /** Disable button */\n        disable: function() {\n            this.model.set( 'disabled', true );\n        },\n\n        /** Enable button */\n        enable: function() {\n            this.model.set( 'disabled', false );\n        },\n\n        /** Show spinner to indicate that the button is not ready to be clicked */\n        wait: function() {\n            this.model.set( 'wait', true );\n        },\n\n        /** Hide spinner to indicate that the button is ready to be clicked */\n        unwait: function() {\n            this.model.set( 'wait', false );\n        },\n\n        /** Change icon */\n        setIcon: function( icon ) {\n            this.model.set( 'icon', icon );\n        }\n    });\n\n    /** This button allows the right-click/open-in-new-tab feature, its used e.g. for panel buttons. */\n    var ButtonLink = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                icon        : '',\n                cls         : ''\n            }).set( options );\n            this.setElement( $( '<a/>' ).append( this.$icon  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .attr( { id         : options.id,\n                             href       : options.href || 'javascript:void(0)',\n                             title      : options.title,\n                             target     : options.target || '_top',\n                             disabled   : options.disabled } )\n                    .tooltip( { placement: 'bottom' } )\n                    .off( 'click' ).on( 'click' , function() {\n                        options.onclick && !options.disabled && options.onclick();\n                    });\n            this.$icon.removeClass().addClass( options.icon );\n        }\n    });\n\n    /** The check button is used in the tool form and allows to distinguish between multiple states e.g. all, partially and nothing selected. */\n    var ButtonCheck = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : 'Select/Unselect all',\n                icons       : [ 'fa-square-o', 'fa-minus-square-o', 'fa-check-square-o' ],\n                value       : 0,\n                onchange    : function(){}\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$icon   = $( '<span/>' ) )\n                                          .append( this.$title  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.addClass( 'ui-button-check' )\n                    .off( 'click' ).on('click', function() {\n                        self.model.set( 'value', ( self.model.get( 'value' ) === 0 && 2 ) || 0 );\n                        options.onclick && options.onclick();\n                    });\n            this.$title.html( options.title );\n            this.$icon.removeClass()\n                      .addClass( 'icon fa ui-margin-right' )\n                      .addClass( options.icons[ options.value ] );\n        },\n\n        /* Sets a new value and/or returns the value.\n        * @param{Integer}   new_val - Set a new value 0=unchecked, 1=partial and 2=checked.\n        * OR:\n        * @param{Integer}   new_val - Number of selected options.\n        * @param{Integer}   total   - Total number of available options.\n        */\n        value: function ( new_val, total ) {\n            if ( new_val !== undefined ) {\n                if ( total && new_val !== 0 ) {\n                    new_val = ( new_val !== total ) && 1 || 2;\n                }\n                this.model.set( 'value', new_val );\n                this.model.get( 'onchange' )( this.model.get( 'value' ) );\n            }\n            return this.model.get( 'value' );\n        }\n    });\n\n    /** This renders a differently styled, more compact button version. */\n    var ButtonIcon = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                floating    : 'right',\n                icon        : '',\n                cls         : 'ui-button-icon',\n                disabled    : false\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$button = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                               .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render : function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'disabled', options.disabled )\n                    .attr( 'id', options.id )\n                    .css( 'float', options.floating )\n                    .off( 'click' ).on( 'click', function() {\n                        $( '.tooltip' ).hide();\n                        !options.disabled && options.onclick && options.onclick();\n                    });\n            this.$button.addClass( 'button' ).tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n        }\n    });\n\n    /** This class creates a button with dropdown menu. */\n    var ButtonMenu = ButtonDefault.extend({\n        $menu: null,\n        initialize: function ( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id              : '',\n                title           : '',\n                floating        : 'right',\n                pull            : 'right',\n                icon            : null,\n                onclick         : null,\n                cls             : 'ui-button-icon ui-button-menu',\n                tooltip         : '',\n                target          : '',\n                href            : '',\n                onunload        : null,\n                visible         : true,\n                tag             : ''\n            }).set( options );\n            this.collection = new Backbone.Collection();\n            this.setElement( $( '<div/>' ).append( this.$root = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                             .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.listenTo( this.collection, 'change add remove reset', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'dropdown' )\n                    .addClass( options.cls )\n                    .attr( 'id', options.id )\n                    .css( { float   : options.floating,\n                            display : options.visible && this.collection.where( { visible: true } ).length > 0 ? 'block' : 'none' } );\n            this.$root.addClass( 'root button dropdown-toggle' )\n                      .attr( 'data-toggle', 'dropdown' )\n                      .tooltip( { title: options.tooltip, placement: 'bottom' } )\n                      .off( 'click' ).on( 'click', function( e ) {\n                            $( '.tooltip' ).hide();\n                            e.preventDefault();\n                            options.onclick && options.onclick();\n                      } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.removeClass().addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            this.$menu && this.$menu.remove();\n            if ( this.collection.length > 0 ) {\n                this.$menu = $( '<ul/>' ).addClass( 'menu dropdown-menu' )\n                                         .addClass( 'pull-' + self.model.get( 'pull' ) )\n                                         .attr( 'role', 'menu' );\n                this.$el.append( this.$menu );\n            }\n            this.collection.each( function( submodel ) {\n                var suboptions = submodel.attributes;\n                if ( suboptions.visible ) {\n                    var $link = $( '<a/>' ).addClass( 'dropdown-item' )\n                                           .attr( { href : suboptions.href, target : suboptions.target } )\n                                           .append( $( '<i/>' ).addClass( 'fa' )\n                                                               .addClass( suboptions.icon )\n                                                               .css( 'display', suboptions.icon ? 'inline-block' : 'none' ) )\n                                           .append( suboptions.title )\n                                           .on( 'click', function( e ) {\n                                                if ( suboptions.onclick ) {\n                                                    e.preventDefault();\n                                                    suboptions.onclick();\n                                                }\n                                           } );\n                    self.$menu.append( $( '<li/>' ).append( $link ) );\n                    suboptions.divider && self.$menu.append( $( '<li/>' ).addClass( 'divider' ) );\n                }\n            });\n        },\n\n        /** Add a new menu item */\n        addMenu: function ( options ) {\n            this.collection.add( Utils.merge( options, {\n                title       : '',\n                target      : '',\n                href        : '',\n                onclick     : null,\n                divider     : false,\n                visible     : true,\n                icon        : null,\n                cls         : 'button-menu btn-group'\n            }));\n        }\n    });\n\n    return {\n        ButtonDefault   : ButtonDefault,\n        ButtonLink      : ButtonLink,\n        ButtonIcon      : ButtonIcon,\n        ButtonCheck     : ButtonCheck,\n        ButtonMenu      : ButtonMenu\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-buttons.js","/**\n    This is the main class of the form plugin. It is referenced as 'app' in lower level modules.\n*/\ndefine( [ 'utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc', 'mvc/form/form-section', 'mvc/form/form-data' ],\nfunction( Utils, Portlet, Ui, FormSection, FormData ) {\n    return Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = new Backbone.Model({\n                initial_errors  : false,\n                cls             : 'ui-portlet-limited',\n                icon            : null,\n                always_refresh  : true,\n                status          : 'warning'\n            }).set( options );\n            this.setElement( '<div/>' );\n            this.render();\n        },\n\n        /** Update available options */\n        update: function( new_model ){\n            var self = this;\n            this.data.matchModel( new_model, function( node, input_id ) {\n                var input = self.input_list[ input_id ];\n                if ( input && input.options ) {\n                    if ( !_.isEqual( input.options, node.options ) ) {\n                        input.options = node.options;\n                        var field = self.field_list[ input_id ];\n                        if ( field.update ) {\n                            var new_options = [];\n                            if ( ( [ 'data', 'data_collection', 'drill_down' ] ).indexOf( input.type ) != -1 ) {\n                                new_options = input.options;\n                            } else {\n                                for ( var i in node.options ) {\n                                    var opt = node.options[ i ];\n                                    if ( opt.length > 2 ) {\n                                        new_options.push( { label: opt[ 0 ], value: opt[ 1 ] } );\n                                    }\n                                }\n                            }\n                            field.update( new_options );\n                            field.trigger( 'change' );\n                            Galaxy.emit.debug( 'form-view::update()', 'Updating options for ' + input_id );\n                        }\n                    }\n                }\n            });\n        },\n\n        /** Set form into wait mode */\n        wait: function( active ) {\n            for ( var i in this.input_list ) {\n                var field = this.field_list[ i ];\n                var input = this.input_list[ i ];\n                if ( input.is_dynamic && field.wait && field.unwait ) {\n                    field[ active ? 'wait' : 'unwait' ]();\n                }\n            }\n        },\n\n        /** Highlight and scroll to input element (currently only used for error notifications) */\n        highlight: function ( input_id, message, silent ) {\n            var input_element = this.element_list[ input_id ];\n            if ( input_element ) {\n                input_element.error( message || 'Please verify this parameter.' );\n                this.portlet.expand();\n                this.trigger( 'expand', input_id );\n                if ( !silent ) {\n                    var $panel = this.$el.parents().filter(function() {\n                        return [ 'auto', 'scroll' ].indexOf( $( this ).css( 'overflow' ) ) != -1;\n                    }).first();\n                    $panel.animate( { scrollTop : $panel.scrollTop() + input_element.$el.offset().top - 120 }, 500 );\n                }\n            }\n        },\n\n        /** Highlights errors */\n        errors: function( options ) {\n            this.trigger( 'reset' );\n            if ( options && options.errors ) {\n                var error_messages = this.data.matchResponse( options.errors );\n                for ( var input_id in this.element_list ) {\n                    var input = this.element_list[ input_id ];\n                    if ( error_messages[ input_id ] ) {\n                        this.highlight( input_id, error_messages[ input_id ], true );\n                    }\n                }\n            }\n        },\n\n        /** Render tool form */\n        render: function() {\n            var self = this;\n            this.off('change');\n            this.off('reset');\n            // contains the dom field elements as created by the parameter factory i.e. form-parameters\n            this.field_list = {};\n            // contains input definitions/dictionaries as provided by the parameters to_dict() function through the api\n            this.input_list = {};\n            // contains the dom elements of each input element i.e. form-input which wraps the actual input field\n            this.element_list = {};\n            // converts the form into a json data structure\n            this.data = new FormData.Manager( this );\n            this._renderForm();\n            this.data.create();\n            this.model.get( 'initial_errors' ) && this.errors( this.model.attributes );\n            // add listener which triggers on checksum change, and reset the form input wrappers\n            var current_check = this.data.checksum();\n            this.on( 'change', function( input_id ) {\n                var input = self.input_list[ input_id ];\n                if ( !input || input.refresh_on_change || self.model.get( 'always_refresh' ) ) {\n                    var new_check = self.data.checksum();\n                    if ( new_check != current_check ) {\n                        current_check = new_check;\n                        self.model.get( 'onchange' ) && self.model.get( 'onchange' )();\n                    }\n                }\n            });\n            this.on('reset', function() {\n                _.each( self.element_list, function( input_element ) { input_element.reset() } );\n            });\n            return this;\n        },\n\n        /** Renders/appends dom elements of the form */\n        _renderForm: function() {\n            $( '.tooltip' ).remove();\n            var options = this.model.attributes;\n            this.message = new Ui.UnescapedMessage();\n            this.section = new FormSection.View( this, { inputs: options.inputs } );\n            this.portlet = new Portlet.View({\n                icon            : options.icon,\n                title           : options.title,\n                cls             : options.cls,\n                operations      : options.operations,\n                buttons         : options.buttons,\n                collapsible     : options.collapsible,\n                collapsed       : options.collapsed,\n                onchange_title  : options.onchange_title\n            });\n            this.portlet.append( this.message.$el );\n            this.portlet.append( this.section.$el );\n            this.$el.empty();\n            options.inputs && this.$el.append( this.portlet.$el );\n            options.message && this.message.update( { persistent: true, status: options.status, message: options.message } );\n            Galaxy.emit.debug( 'form-view::initialize()', 'Completed' );\n        }\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-view.js","// This is necessary so that, when nested arrays are used in ajax/post/get methods, square brackets ('[]') are\n// not appended to the identifier of a nested array.\njQuery.ajaxSettings.traditional = true;\n\n// dependencies\ndefine([\n    'utils/utils',\n    'mvc/grid/grid-model',\n    'mvc/grid/grid-template',\n    'mvc/ui/popup-menu'\n], function(Utils, GridModel, Templates, PopupMenu) {\n\n// grid view\nreturn Backbone.View.extend({\n\n    // model\n    grid: null,\n\n    // Initialize\n    initialize: function(grid_config) {\n        this.dict_format = grid_config.dict_format;\n        var self = this;\n        window.add_tag_to_grid_filter = function( tag_name, tag_value ){\n            // Put tag name and value together.\n            var tag = tag_name + ( tag_value !== undefined && tag_value !== \"\" ? \":\" + tag_value : \"\" );\n            var advanced_search = $( '#advanced-search').is(\":visible\" );\n            if( !advanced_search ){\n                $('#standard-search').slideToggle('fast');\n                $('#advanced-search').slideToggle('fast');\n            }\n            self.add_filter_condition( \"tags\", tag );\n        };\n\n        // set element\n        if ( this.dict_format ) {\n            this.setElement('<div/>');\n            if ( grid_config.url_base && !grid_config.items ) {\n                var url_data = grid_config.url_data || {};\n                _.each(grid_config.filters, function(v, k) {\n                    url_data['f-' + k] = v;\n                });\n                $.ajax({\n                    url     : grid_config.url_base + '?' + $.param( url_data ),\n                    success : function( response ) {\n                        response.embedded = grid_config.embedded;\n                        response.filters  = grid_config.filters;\n                        self.init_grid( response );\n                    }\n                });\n            } else {\n                this.init_grid(grid_config);\n            }\n        } else {\n            this.setElement('#grid-container');\n            this.init_grid(grid_config);\n        }\n\n        // fix padding\n        if (grid_config.use_panels) {\n            $('#center').css ({\n                padding     : '10px',\n                overflow    : 'auto'\n            });\n        }\n    },\n\n    // refresh frames\n    handle_refresh: function (refresh_frames) {\n        if (refresh_frames) {\n            if ($.inArray('history', refresh_frames) > -1) {\n                if( top.Galaxy && top.Galaxy.currHistoryPanel ){\n                    top.Galaxy.currHistoryPanel.loadCurrentHistory();\n                }\n            }\n        }\n    },\n\n    // Initialize\n    init_grid: function(grid_config) {\n        // link grid model\n        this.grid = new GridModel(grid_config);\n\n        // get options\n        var options = this.grid.attributes;\n\n        // handle refresh requests\n        this.handle_refresh(options.refresh_frames);\n\n        // strip protocol and domain\n        var url = this.grid.get('url_base');\n        url = url.replace(/^.*\\/\\/[^\\/]+/, '');\n        this.grid.set('url_base', url);\n\n        // append main template\n        this.$el.html(Templates.grid(options));\n\n        // update div contents\n        this.$el.find('#grid-table-header').html(Templates.header(options));\n        this.$el.find('#grid-table-body').html(Templates.body(options));\n        this.$el.find('#grid-table-footer').html(Templates.footer(options));\n\n        // update message\n        if (options.message) {\n            this.$el.find('#grid-message').html(Templates.message(options));\n            var self = this;\n            if (options.use_hide_message) {\n                setTimeout( function() { self.$el.find('#grid-message').html(''); }, 5000);\n            }\n        }\n\n        // configure elements\n        this.init_grid_elements();\n        this.init_grid_controls();\n\n        // attach global event handler\n        // TODO: redundant (the onload/standard page handlers do this) - but needed because these are constructed after page ready\n        init_refresh_on_change();\n    },\n\n    // Initialize grid controls\n    init_grid_controls: function() {\n\n        // link\n        var self = this;\n\n        // Initialize grid operation button.\n        this.$el.find('.operation-button').each(function() {\n            $(this).off();\n            $(this).click(function() {\n                self.submit_operation(this);\n                return false;\n            });\n        });\n\n        // Initialize text filters to select text on click and use normal font when user is typing.\n        this.$el.find('input[type=text]').each(function() {\n            $(this).off();\n            $(this).click(function() { $(this).select(); } )\n                   .keyup(function () { $(this).css('font-style', 'normal'); });\n        });\n\n        // Initialize sort links.\n        this.$el.find('.sort-link').each( function() {\n            $(this).off();\n            $(this).click( function() {\n               self.set_sort_condition( $(this).attr('sort_key') );\n               return false;\n            });\n        });\n\n        // Initialize text filters.\n        this.$el.find('.text-filter-form').each( function() {\n            $(this).off();\n            $(this).submit( function() {\n                var column_key = $(this).attr('column_key');\n                var text_input_obj = $('#input-' + column_key + '-filter');\n                var text_input = text_input_obj.val();\n                text_input_obj.val('');\n                self.add_filter_condition(column_key, text_input);\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.text-filter-val > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                // Remove visible element.\n                $(this).parent().remove();\n\n                // Remove filter condition.\n                self.remove_filter_condition ($(this).attr('filter_key'), $(this).attr('filter_val'));\n\n                // Return\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.categorical-filter > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.set_categorical_filter( $(this).attr('filter_key'), $(this).attr('filter_val') );\n                return false;\n            });\n        });\n\n        // Initialize standard, advanced search toggles.\n        this.$el.find('.advanced-search-toggle').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.$el.find('#standard-search').slideToggle('fast');\n                self.$el.find('#advanced-search').slideToggle('fast');\n                return false;\n            });\n        });\n\n        // Add event to check all box\n        this.$el.find('#check_all').off();\n        this.$el.find('#check_all').on('click', function() {\n            self.check_all_items();\n        });\n    },\n\n    // Initialize grid elements.\n    init_grid_elements : function() {\n        // Initialize grid selection checkboxes.\n        this.$el.find('.grid').each( function() {\n            var checkboxes = $(this).find(\"input.grid-row-select-checkbox\");\n            var check_count = $(this).find(\"span.grid-selected-count\");\n            var update_checked = function() {\n                check_count.text( $(checkboxes).filter(\":checked\").length );\n            };\n\n            $(checkboxes).each( function() {\n                $(this).change(update_checked);\n            });\n            update_checked();\n        });\n\n        // Initialize ratings.\n        if (this.$el.find('.community_rating_star').length !== 0)\n            this.$el.find('.community_rating_star').rating({});\n\n        // get options\n        var options = this.grid.attributes;\n        var self = this;\n\n        //\n        // add page click events\n        //\n        this.$el.find('.page-link > a').each( function() {\n            $(this).click( function() {\n               self.set_page( $(this).attr('page_num') );\n               return false;\n            });\n        });\n\n        //\n        // add inbound/outbound events\n        //\n        this.$el.find('.use-target').each( function() {\n            $(this).click( function(e) {\n                self.execute({\n                    href : $(this).attr('href'),\n                    target : $(this).attr('target')\n                });\n                return false;\n\n            });\n        });\n\n        // empty grid?\n        var items_length = options.items.length;\n        if (items_length == 0) {\n            return;\n        }\n\n        // add operation popup menus\n        _.each( options.items, function( item, index ) {\n            var button = self.$( '#grid-' + index + '-popup' ).off();\n            var popup = new PopupMenu( button );\n            _.each( options[ 'operations' ], function( operation ) {\n                self._add_operation( popup, operation, item );\n            });\n        });\n    },\n\n    /** Add an operation to the items menu */\n    _add_operation: function( popup, operation, item ) {\n        var self = this;\n        var settings = item.operation_config[ operation.label ];\n        if ( settings.allowed && operation.allow_popup ) {\n            popup.addItem({\n                html                : operation.label,\n                href                : settings.url_args,\n                target              : settings.target,\n                confirmation_text   : operation.confirm,\n                func                : function( e ) {\n                    e.preventDefault();\n                    var label = $( e.target ).html();\n                    if ( operation.onclick ) {\n                        operation.onclick( item.encode_id );\n                    } else {\n                        self.execute( this.findItemByHtml( label ) );\n                    }\n                }\n            });\n        }\n    },\n\n    // Add a condition to the grid filter; this adds the condition and refreshes the grid.\n    add_filter_condition: function (name, value) {\n        // Do nothing is value is empty.\n        if (value === \"\") {\n            return false;\n        }\n\n        // Add condition to grid.\n        this.grid.add_filter(name, value, true);\n\n        // Add button that displays filter and provides a button to delete it.\n        var t = $(Templates.filter_element(name, value));\n        var self = this;\n        t.click(function() {\n            // Remove visible element.\n            $(this).remove();\n\n            // Remove filter condition.\n            self.remove_filter_condition(name, value);\n        });\n\n        // append to container\n        var container = this.$el.find('#' + name + '-filtering-criteria');\n        container.append(t);\n\n        // execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Remove a condition to the grid filter; this adds the condition and refreshes the grid.\n    remove_filter_condition: function (name, value) {\n        // Remove filter condition.\n        this.grid.remove_filter(name, value);\n\n        // Execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set sort condition for grid.\n    set_sort_condition: function (col_key) {\n        // Set new sort condition. New sort is col_key if sorting new column; if reversing sort on\n        // currently sorted column, sort is reversed.\n        var cur_sort = this.grid.get('sort_key');\n        var new_sort = col_key;\n        if (cur_sort.indexOf(col_key) !== -1) {\n            // Reverse sort.\n            if (cur_sort.substring(0, 1) !== '-') {\n                new_sort = '-' + col_key;\n            }\n        }\n\n        // Remove sort arrows elements.\n        this.$el.find('.sort-arrow').remove();\n\n        // Add sort arrow element to new sort column.\n        var sort_arrow = (new_sort.substring(0,1) == '-') ? '&uarr;' : '&darr;';\n        var t = $('<span>' + sort_arrow + '</span>').addClass('sort-arrow');\n\n        // Add to header\n        this.$el.find('#' + col_key + '-header').append(t);\n\n        // Update grid.\n        this.grid.set('sort_key', new_sort);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set new value for categorical filter.\n    set_categorical_filter: function (name, new_value) {\n        // Update filter hyperlinks to reflect new filter value.\n        var category_filter = this.grid.get('categorical_filters')[name],\n            cur_value = this.grid.get('filters')[name];\n        var self = this;\n        this.$el.find('.' + name + '-filter').each( function() {\n            var text = $.trim( $(this).text() );\n            var filter = category_filter[text];\n            var filter_value = filter[name];\n            if (filter_value == new_value) {\n                // Remove filter link since grid will be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                $(this).empty();\n                $(this).addClass('current-filter');\n                $(this).append(text);\n            } else if (filter_value == cur_value) {\n                // Add hyperlink for this filter since grid will no longer be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                $(this).empty();\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_categorical_filter( name, filter_value );\n                });\n                $(this).removeClass('current-filter');\n                $(this).append(t);\n            }\n        });\n\n        // Update grid.\n        this.grid.add_filter(name, new_value);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set page to view.\n    set_page: function (new_page) {\n        // Update page hyperlink to reflect new page.\n        var self = this;\n        this.$el.find('.page-link').each( function() {\n            var id = $(this).attr('id'),\n                page_num = parseInt( id.split('-')[2], 10 ), // Id has form 'page-link-<page_num>\n                cur_page = self.grid.get('cur_page'),\n                text;\n            if (page_num === new_page) {\n                // Remove link to page since grid will be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                text = $(this).children().text();\n                $(this).empty();\n                $(this).addClass('inactive-link');\n                $(this).text(text);\n            }\n            else if (page_num === cur_page) {\n                // Add hyperlink to this page since grid will no longer be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                text = $(this).text();\n                $(this).empty();\n                $(this).removeClass('inactive-link');\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_page(page_num);\n                });\n                $(this).append(t);\n            }\n        });\n\n        if (new_page === 'all') {\n            this.grid.set('cur_page', new_page);\n        } else {\n            this.grid.set('cur_page', parseInt(new_page, 10));\n        }\n        this.execute();\n    },\n\n    // confirmation/submission of operation request\n    submit_operation: function (operation_button, confirmation_text) {\n        // identify operation\n        var operation_name = $(operation_button).val();\n\n        // verify in any item is selected\n        var number_of_checked_ids = this.$el.find('input[name=\"id\"]:checked').length;\n        if (!number_of_checked_ids > 0) {\n            return false;\n        }\n\n        // Check to see if there's grid confirmation text for this operation\n        var operation = _.findWhere(this.grid.attributes.operations, {label: operation_name});\n        if (operation && !confirmation_text){\n            confirmation_text = operation.confirm || '';\n        }\n\n        // collect ids\n        var item_ids = [];\n        this.$el.find('input[name=id]:checked').each(function() {\n            item_ids.push( $(this).val() );\n        });\n\n        // execute operation\n        var options = {\n            operation           : operation_name,\n            id                  : item_ids,\n            confirmation_text   : confirmation_text\n        };\n        if ( operation.target == 'top' ) {\n            options = _.extend( options, {\n                href   : operation.href,\n                target : operation.target\n            });\n        }\n        this.execute( options );\n        return true;\n    },\n\n    check_all_items: function () {\n        var check = this.$('.grid-row-select-checkbox');\n        var state = this.$( '#check_all' ).prop( 'checked' );\n        _.each( check, function( c ) {\n            $( c ).prop( 'checked', state );\n        });\n        this.init_grid_elements();\n    },\n\n    // Go back to page one; this is useful when a filter is applied.\n    go_page_one: function () {\n        // Need to go back to page 1 if not showing all.\n        var cur_page = this.grid.get('cur_page');\n        if (cur_page !== null && cur_page !== undefined && cur_page !== 'all') {\n            this.grid.set('cur_page', 1);\n        }\n    },\n\n    //\n    // execute operations and hyperlink requests\n    //\n    execute: function (options) {\n        // get url\n        var id = null;\n        var href = null;\n        var operation = null;\n        var confirmation_text = null;\n        var target = null;\n\n        // check for options\n        if (options) {\n            // get options\n            href = options.href;\n            operation = options.operation;\n            id = options.id;\n            confirmation_text = options.confirmation_text;\n            target = options.target;\n\n            // check if input contains the operation tag\n            if (href !== undefined && href.indexOf('operation=') != -1) {\n                // Get operation, id in hyperlink's href.\n                var href_parts = href.split(\"?\");\n                if (href_parts.length > 1) {\n                    var href_parms_str = href_parts[1];\n                    var href_parms = href_parms_str.split(\"&\");\n                    for (var index = 0; index < href_parms.length; index++) {\n                        if (href_parms[index].indexOf('operation') != -1) {\n                            // Found operation parm; get operation value.\n                            operation = href_parms[index].split('=')[1];\n                            operation = operation.replace (/\\+/g, ' ');\n                        } else if (href_parms[index].indexOf('id') != -1) {\n                            // Found id parm; get id value.\n                            id = href_parms[index].split('=')[1];\n                        }\n                    }\n                }\n            }\n        }\n\n        // check for operation details\n        if (operation && id) {\n            // show confirmation box\n            if (confirmation_text && confirmation_text != '' && confirmation_text != 'None' && confirmation_text != 'null')\n                if(!confirm(confirmation_text))\n                    return false;\n\n            // use small characters for operation?!\n            operation = operation.toLowerCase();\n\n            // Update grid.\n            this.grid.set({\n                operation: operation,\n                item_ids: id\n            });\n\n            // Do operation. If operation cannot be performed asynchronously, redirect to location.\n            if ( target == 'top' ) {\n                window.top.location = href + '?' + $.param( this.grid.get_url_data() );\n            } else if ( this.grid.can_async_op(operation) || this.dict_format ) {\n                this.update_grid();\n            } else {\n                this.go_to(target, href);\n            }\n\n            // done\n            return false;\n        }\n\n        // refresh grid\n        if (href) {\n            this.go_to(target, href);\n            return false;\n        }\n\n        // refresh grid\n        if (this.grid.get('async') || this.dict_format) {\n            this.update_grid();\n        } else {\n            this.go_to(target, href);\n        }\n\n        // done\n        return false;\n    },\n\n    // go to url\n    go_to: function (target, href) {\n        // get aysnc status\n        var async = this.grid.get('async');\n        this.grid.set('async', false);\n\n        // get slide status\n        advanced_search = this.$el.find('#advanced-search').is(':visible');\n        this.grid.set('advanced_search', advanced_search);\n\n        // get default url\n        if(!href) {\n            href = this.grid.get('url_base') + '?' + $.param(this.grid.get_url_data());\n        }\n\n        // clear grid of transient request attributes.\n        this.grid.set({\n            operation: undefined,\n            item_ids: undefined,\n            async: async\n        });\n        switch (target) {\n            case 'inbound':\n                // this currently assumes that there is only a single grid shown at a time\n                var $div = $('.grid-header').closest('.inbound');\n                if ($div.length !== 0) {\n                    $div.load(href);\n                    return;\n                }\n                break;\n            case 'top':\n                window.top.location = href;\n                break;\n            default:\n                window.location = href;\n        }\n    },\n\n    // Update grid.\n    update_grid: function () {\n        // If there's an operation, do POST; otherwise, do GET.\n        var method = (this.grid.get('operation') ? 'POST' : 'GET' );\n\n        // Show overlay to indicate loading and prevent user actions.\n        this.$el.find('.loading-elt-overlay').show();\n        var self = this;\n        $.ajax({\n            type: method,\n            url: self.grid.get('url_base'),\n            data: self.grid.get_url_data(),\n            error: function(response) { alert( 'Grid refresh failed' );},\n            success: function(response_text) {\n\n                // backup\n                var embedded = self.grid.get('embedded');\n                var insert = self.grid.get('insert');\n\n                // request new configuration\n                var json = self.dict_format ? response_text : $.parseJSON(response_text);\n\n                // update\n                json.embedded = embedded;\n                json.insert = insert;\n\n                // Initialize new grid config\n                self.init_grid(json);\n\n                // Hide loading overlay.\n                self.$el.find('.loading-elt-overlay').hide();\n            },\n            complete: function() {\n                // Clear grid of transient request attributes.\n                self.grid.set({\n                    operation: undefined,\n                    item_ids: undefined\n                });\n            }\n        });\n    }\n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-view.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc'], function(Utils, Portlet, Ui) {\n\n// ui list element\nvar View = Backbone.View.extend({\n    // create portlet to keep track of selected list elements\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // initialize options\n        this.options = options;\n        this.name = options.name || 'element';\n        this.multiple = options.multiple || false;\n\n        // create message handler\n        this.message = new Ui.Message();\n\n        // create portlet\n        this.portlet = new Portlet.View({ cls: 'ui-portlet-section' });\n\n        // create select field containing the options which can be inserted into the list\n        this.select = new Ui.Select.View({ optional : options.optional });\n\n        // create insert new list element button\n        this.button = new Ui.ButtonIcon({\n            icon        : 'fa fa-sign-in',\n            floating    : 'left',\n            tooltip     : 'Insert new ' + this.name,\n            onclick     : function() {\n                self.add({\n                    id      : self.select.value(),\n                    name    : self.select.text()\n                });\n            }\n        });\n\n        // build main element\n        this.setElement(this._template(options));\n        this.$('.ui-list-message').append(this.message.$el);\n        this.$('.ui-list-portlet').append(this.portlet.$el);\n        this.$('.ui-list-button').append(this.button.$el);\n        this.$('.ui-list-select').append(this.select.$el);\n    },\n\n    /** Return/Set currently selected list elements */\n    value: function(val) {\n        // set new value\n        if (val !== undefined) {\n            this.portlet.empty();\n            if ($.isArray(val)) {\n                for (var i in val) {\n                    var v = val[i];\n                    var v_id = null;\n                    var v_name = null;\n                    if ($.type(v) != 'string') {\n                        v_id = v.id;\n                        v_name = v.name;\n                    } else {\n                        v_id = v_name = v;\n                    }\n                    if (v_id != null) {\n                        this.add({\n                            id      : v_id,\n                            name    : v_name\n                        });\n                    }\n                }\n            }\n            this._refresh();\n        }\n        // get current value\n        var lst = [];\n        this.$('.ui-list-id').each(function() {\n            lst.push({\n                id      : $(this).prop('id'),\n                name    : $(this).find('.ui-list-name').html()\n            });\n        });\n        if (lst.length == 0) {\n            return null;\n        }\n        return lst;\n    },\n\n    /** Add row */\n    add: function(options) {\n        var self = this;\n        if (this.$('[id=\"' + options.id + '\"]').length === 0) {\n            if (!Utils.isEmpty(options.id)) {\n                var $el = $(this._templateRow({\n                    id      : options.id,\n                    name    : options.name\n                }));\n                $el.on('click', function() {\n                    $el.remove();\n                    self._refresh();\n                });\n                $el.on('mouseover', function() {\n                    $el.addClass('portlet-highlight');\n                });\n                $el.on('mouseout', function() {\n                    $el.removeClass('portlet-highlight');\n                });\n                this.portlet.append($el);\n                this._refresh();\n            } else {\n                this.message.update({ message: 'Please select a valid ' + this.name + '.', status: 'danger' });\n            }\n        } else {\n            this.message.update({ message: 'This ' + this.name + ' is already in the list.' });\n        }\n    },\n\n    /** Update available options */\n    update: function(options) {\n        this.select.update(options);\n    },\n\n    /** Refresh view */\n    _refresh: function() {\n        if (this.$('.ui-list-id').length > 0) {\n            !this.multiple && this.button.disable();\n            this.$('.ui-list-portlet').show();\n        } else {\n            this.button.enable();\n            this.$('.ui-list-portlet').hide();\n        }\n        this.options.onchange && this.options.onchange();\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return  '<div class=\"ui-list\">' +\n                    '<div class=\"ui-margin-top\">' +\n                        '<span class=\"ui-list-button\"/>' +\n                        '<span class=\"ui-list-select\"/>' +\n                    '</div>' +\n                    '<div class=\"ui-list-message\"/>' +\n                    '<div class=\"ui-list-portlet\"/>' +\n                '</div>';\n    },\n\n    /** Row Template */\n    _templateRow: function(options) {\n        return  '<div id=\"' + options.id + '\" class=\"ui-list-id\">' +\n                    '<span class=\"ui-list-delete fa fa-trash\"/>' +\n                    '<span class=\"ui-list-name\">' + options.name + '</span>' +\n                '</div>';\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-list.js","/** Base class for options based ui elements **/\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar Base = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model({\n            visible     : true,\n            data        : [],\n            id          : Utils.uid(),\n            error_text  : 'No options available.',\n            wait_text   : 'Please wait...',\n            multiple    : false,\n            optional    : false,\n            onchange    : function(){}\n        }).set( options );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.on( 'change', function() { self.model.get( 'onchange' )( self.value() ) } );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.$el.empty()\n                .removeClass()\n                .addClass( 'ui-options' )\n                .append( this.$message   = $( '<div/>' ) )\n                .append( this.$menu      = $( '<div/>' ).addClass( 'ui-options-menu' ) )\n                .append( this.$options   = $( this._template() ) );\n\n        // add select/unselect all button\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    self.$( 'input' ).prop( 'checked', self.all_button.value() !== 0 );\n                    self.value( self._getValue() );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$menu.append( this.all_button.$el );\n        }\n\n        // finalize dom\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    _changeData: function() {\n        var self = this;\n        this.$options.empty();\n        if ( this._templateOptions ) {\n            this.$options.append( this._templateOptions( this.model.get( 'data' ) ) );\n        } else {\n            _.each( this.model.get( 'data' ), function( option ) {\n                self.$options.append( $( self._templateOption( option ) )\n                                        .addClass( 'ui-option' )\n                                        .tooltip( { title: option.tooltip, placement: 'bottom' } ) );\n            });\n        }\n        var self = this;\n        this.$( 'input' ).on( 'change', function() {\n            self.value( self._getValue() );\n            self.trigger( 'change' );\n        });\n        this._changeValue();\n        this._changeWait();\n    },\n\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    _changeWait: function() {\n        if ( this.model.get( 'wait' ) ) {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'wait_text' ), 'info' );\n                this.$options.hide();\n                this.$menu.hide();\n            }\n        } else {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'error_text' ), 'danger' );\n                this.$options.hide();\n                this.$menu.hide();\n            } else {\n                this.$message.hide();\n                this.$options.css( 'display', 'inline-block' );\n                this.$menu.show();\n            }\n        }\n    },\n\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this._getValue() === null && !this.model.get( 'multiple' ) && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n        this.all_button && this.all_button.value( $.isArray( this._getValue() ) ? this._getValue().length : 0, this.length() );\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return first available option */\n    first: function() {\n        var options = this.$( 'input' ).first();\n        return options.length > 0 ? options.val() : null;\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns the number of options */\n    length: function() {\n        return this.$( '.ui-option' ).length;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            if ( new_value !== null ) {\n                var values = $.isArray( new_value ) ? new_value : [ new_value ];\n                _.each( values, function( v ) {\n                    self.$( 'input[value=\"' + v + '\"]' ).first().prop( 'checked', true );\n                });\n            }\n        }\n    },\n\n    /** Return current selection */\n    _getValue: function() {\n        var selected = [];\n        this.$( ':checked' ).each( function() {\n            selected.push( $( this ).val() );\n        });\n        if ( Utils.isEmpty( selected ) ) {\n            return null;\n        }\n        return this.model.get( 'multiple' ) ? selected : selected[ 0 ];\n    },\n\n    /** Show message instead if options */\n    _messageShow: function( text, status ) {\n        this.$message.show()\n                     .removeClass()\n                     .addClass( 'ui-message alert alert-' + status )\n                     .html( text );\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list' );\n    }\n});\n\n/** Iconized **/\nvar BaseIcons = Base.extend({\n    _templateOption: function( pair ) {\n        var id = Utils.uid();\n        return  $( '<div/>' ).addClass( 'ui-option' )\n                    .append( $( '<input/>' ).attr( {\n                        id      : id,\n                        type    : this.model.get( 'type' ),\n                        name    : this.model.id,\n                        value   : pair.value } ) )\n                    .append( $( '<label/>' ).addClass( 'ui-options-label' )\n                                            .attr( 'for', id )\n                                            .html( pair.label ) );\n    }\n});\n\n/** Radio button field **/\nvar Radio = {};\nRadio.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'radio';\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Checkbox options field **/\nvar Checkbox = {};\nCheckbox.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'checkbox';\n        options.multiple = true;\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Radio button options field styled as classic buttons **/\nvar RadioButton = {};\nRadioButton.View = Base.extend({\n    initialize: function( options ) {\n        Base.prototype.initialize.call( this, options );\n    },\n\n    /** Set current value */\n    _setValue: function ( new_value ) {\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            this.$( 'label' ).removeClass( 'active' );\n            this.$( '[value=\"' + new_value + '\"]' ).prop( 'checked', true ).closest( 'label' ).addClass( 'active' );\n        }\n    },\n\n    /** Template for a single option */\n    _templateOption: function( pair ) {\n        var $el =  $( '<label/>' ).addClass( 'btn btn-default' );\n        pair.icon && $el.append( $( '<i/>' ).addClass( 'fa' ).addClass( pair.icon ).addClass( !pair.label && 'no-padding' ) );\n        $el.append( $( '<input/>' ).attr( { type: 'radio', name: this.model.id, value: pair.value } ) );\n        pair.label && $el.append( pair.label );\n        return $el;\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'btn-group ui-radiobutton' ).attr( 'data-toggle', 'buttons' );\n    }\n});\n\nreturn {\n    Base        : Base,\n    BaseIcons   : BaseIcons,\n    Radio       : Radio,\n    RadioButton : RadioButton,\n    Checkbox    : Checkbox\n};\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-options.js","/**\n *  This class creates/wraps a default html select field as backbone class.\n */\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar View = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.data  = [];\n        this.data2 = [];\n        this.model = options && options.model || new Backbone.Model({\n            id          : Utils.uid(),\n            cls         : 'ui-select',\n            error_text  : 'No options available',\n            empty_text  : 'Nothing selected',\n            visible     : true,\n            wait        : false,\n            multiple    : false,\n            searchable  : true,\n            optional    : false,\n            disabled    : false,\n            onchange    : function(){},\n            value       : null,\n            selectall   : true,\n            pagesize    : 20\n        }).set( options );\n        this.on( 'change', function() { self.model.get( 'onchange' ) && self.model.get( 'onchange' )( self.value() ) } );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:disabled', this._changeDisabled, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:multiple change:searchable change:cls change:id', this.render, this );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.model.get( 'searchable' ) ? this._renderSearchable() : this._renderClassic();\n        this.$el.addClass( this.model.get( 'cls' ) )\n                .attr( 'id', this.model.get( 'id' ) );\n        this.$select.empty().addClass( 'select' )\n                    .attr( 'id', this.model.get( 'id' ) + '_select' )\n                    .prop( 'multiple', this.model.get( 'multiple' ) )\n                    .on( 'change', function() {\n                        self.value( self._getValue() );\n                        self.trigger( 'change' );\n                    });\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n        this._changeDisabled();\n    },\n\n    /** Renders the classic selection field */\n    _renderClassic: function() {\n        var self = this;\n        this.$el.addClass( this.model.get( 'multiple' ) ? 'ui-select-multiple' : 'ui-select' )\n                .append( this.$select      = $( '<select/>' ) )\n                .append( this.$dropdown    = $( '<div/>' ) )\n                .append( this.$resize      = $( '<div/>' )\n                .append( this.$resize_icon = $( '<i/>' ) ) );\n        if ( this.model.get( 'multiple' ) ) {\n            this.$dropdown.hide();\n            this.$resize_icon.addClass( 'fa fa-angle-double-right fa-rotate-45' ).show();\n            this.$resize.removeClass()\n                        .addClass( 'icon-resize' )\n                        .show()\n                        .off( 'mousedown' ).on( 'mousedown', function( event ) {\n                            var currentY = event.pageY;\n                            var currentHeight = self.$select.height();\n                            self.minHeight = self.minHeight || currentHeight;\n                            $( '#dd-helper' ).show().on( 'mousemove', function( event ) {\n                                self.$select.height( Math.max( currentHeight + ( event.pageY - currentY ), self.minHeight ) );\n                            }).on( 'mouseup mouseleave', function() {\n                                $( '#dd-helper' ).hide().off();\n                            });\n                        });\n        } else {\n            this.$dropdown.show();\n            this.$resize.hide();\n            this.$resize_icon.hide();\n        }\n    },\n\n    /** Renders the default select2 field */\n    _renderSearchable: function() {\n        var self = this;\n        this.$el.append( this.$select   = $( '<div/>' ) )\n                .append( this.$dropdown = $( '<div/>' ) );\n        this.$dropdown.hide();\n        if ( !this.model.get( 'multiple' ) ) {\n            this.$dropdown.show().on( 'click', function() {\n                self.$select.select2 && self.$select.select2( 'open' );\n            });\n        }\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) && this.model.get( 'selectall' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    var new_value = [];\n                    self.all_button.value() !== 0 && _.each( self.model.get( 'data' ), function( option ) {\n                        new_value.push( option.value );\n                    });\n                    self.value( new_value );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$el.prepend( this.all_button.$el );\n        }\n    },\n\n    /** Matches a search term with a given text */\n    _match: function( term, text ) {\n        return !term || term == '' || String( text ).toUpperCase().indexOf( term.toUpperCase() ) >= 0\n    },\n\n    /** Updates the selection options */\n    _changeData: function() {\n        var self = this;\n        this.data = [];\n        if ( !this.model.get( 'multiple' ) && this.model.get( 'optional' ) ) {\n            this.data.push( { value: '__null__', label: self.model.get( 'empty_text' ) } );\n        }\n        _.each( this.model.get( 'data' ), function( option ) {\n            self.data.push( option );\n        });\n        if ( this.length() == 0 ) {\n            this.data.push( { value: '__null__', label: this.model.get( 'error_text' ) } );\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            this.data2 = [];\n            _.each( this.data, function( option, index ) {\n                self.data2.push( { order: index, id: option.value, text: option.label, tags: option.tags } );\n            });\n            this.$select.data( 'select2' ) && this.$select.select2( 'destroy' );\n            this.matched_tags = {};\n            this.$select.select2({\n                data            : self.data2,\n                closeOnSelect   : !this.model.get( 'multiple' ),\n                multiple        : this.model.get( 'multiple' ),\n                query           : function( q ) {\n                    self.matched_tags = {};\n                    var pagesize = self.model.get( 'pagesize' );\n                    var results = _.filter( self.data2, function ( e ) {\n                        var found = false;\n                        _.each( e.tags, function( tag ) {\n                            if ( self._match( q.term, tag ) ) {\n                                found = self.matched_tags[ tag ] = true;\n                            }\n                        });\n                        return found || self._match( q.term, e.text );\n                    });\n                    q.callback({\n                        results: results.slice( ( q.page - 1 ) * pagesize, q.page * pagesize ),\n                        more   : results.length >= q.page * pagesize\n                    });\n                },\n                formatResult    : function( result ) {\n                    return _.escape( result.text ) +\n                        '<div class=\"ui-tags\">' +\n                            _.reduce( result.tags, function( memo, tag ) {\n                                if ( self.matched_tags[ tag ] ) {\n                                    return memo + '&nbsp;' +\n                                        '<div class=\"label label-info\">' +\n                                            _.escape( tag ) +\n                                        '</div>'\n                                }\n                                return memo;\n                            }, '' ) +\n                        '</div>';\n                }\n            });\n            this.$( '.select2-container .select2-search input' ).off( 'blur' );\n        } else {\n            this.$select.find( 'option' ).remove();\n            _.each( this.data, function( option ) {\n                self.$select.append( $( '<option/>' ).attr( 'value', option.value ).html( _.escape( option.label ) ) );\n            });\n        }\n        this.model.set( 'disabled', this.length() == 0 );\n        this._changeValue();\n    },\n\n    /** Handles field enabling/disabling, usually used when no options are available */\n    _changeDisabled: function() {\n        if ( this.model.get( 'searchable' ) ) {\n            this.$select.select2( this.model.get( 'disabled' ) ? 'disable' : 'enable' );\n        } else {\n            this.$select.prop( 'disabled', this.model.get( 'disabled' ) );\n        }\n    },\n\n    /** Searchable fields may display a spinner e.g. while waiting for a server response */\n    _changeWait: function() {\n        this.$dropdown.removeClass()\n                      .addClass( 'icon-dropdown fa' )\n                      .addClass( this.model.get( 'wait' ) ? 'fa-spinner fa-spin' : 'fa-caret-down' );\n    },\n\n    /** Handles field visibility */\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n        this.$select[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    /** Synchronizes the model value with the actually selected field value */\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this.model.get( 'multiple' ) ) {\n            if ( this.all_button ) {\n                var value = this._getValue();\n                this.all_button.value( $.isArray( value ) ? value.length : 0, this.length() );\n            }\n        } else if ( this._getValue() === null && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return the first select option */\n    first: function() {\n        return this.data.length > 0 ? this.data[ 0 ].value : null;\n    },\n\n    /** Check if a value is an existing option */\n    exists: function( value ) {\n        return _.findWhere( this.data, { value: value } );\n    },\n\n    /** Return the label/text of the current selection */\n    text: function () {\n        var v = this._getValue();\n        var d = this.exists( $.isArray( v ) ? v[ 0 ] : v );\n        return d ? d.label : '';\n    },\n\n    /** Show the select field */\n    show: function() {\n        this.model.set( 'visible', true );\n    },\n\n    /** Hide the select field */\n    hide: function() {\n        this.model.set( 'visible', false );\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns true if the field is disabled */\n    disabled: function() {\n        return this.model.get( 'disabled' );\n    },\n\n    /** Enable the select field */\n    enable: function() {\n        this.model.set( 'disabled', false );\n    },\n\n    /** Disable the select field */\n    disable: function() {\n        this.model.set( 'disabled', true );\n    },\n\n    /** Update all available options at once */\n    add: function( options, sorter ) {\n        _.each( this.model.get( 'data' ), function( v ) {\n            v.keep && !_.findWhere( options, { value: v.value } ) && options.push( v );\n        });\n        sorter && options && options.sort( sorter );\n        this.model.set( 'data', options );\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    /** Set the custom onchange callback function */\n    setOnChange: function( callback ) {\n        this.model.set( 'onchange', callback );\n    },\n\n    /** Number of available options */\n    length: function() {\n        return $.isArray( this.model.get( 'data' ) ) ? this.model.get( 'data' ).length : 0;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if( new_value === null || new_value === undefined ) {\n            new_value = '__null__';\n        }\n        if ( this.model.get( 'multiple' ) ) {\n            new_value = $.isArray( new_value ) ? new_value : [ new_value ];\n        } else if ( $.isArray( new_value ) ) {\n            if ( new_value.length > 0 ) {\n                new_value = new_value[ 0 ];\n            } else {\n                new_value = '__null__';\n            }\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            if ( $.isArray( new_value ) ) {\n                val = [];\n                _.each( new_value, function( v ) {\n                    var d = _.findWhere( self.data2, { id: v } );\n                    d && val.push( d );\n                });\n                new_value = val;\n            } else {\n                var d = _.findWhere( this.data2, { id: new_value } );\n                new_value = d;\n            }\n            this.$select.select2( 'data', new_value );\n        } else {\n            this.$select.val( new_value );\n        }\n    },\n\n    /** Get value from dom */\n    _getValue: function() {\n        var val = null;\n        if ( this.model.get( 'searchable' ) ) {\n            var selected = this.$select.select2( 'data' );\n            if ( selected ) {\n                if ( $.isArray( selected ) ) {\n                    val = [];\n                    selected.sort( function( a, b ) { return a.order - b.order } );\n                    _.each( selected, function( v ) { val.push( v.id ) } );\n                } else {\n                    val = selected.id;\n                }\n            }\n        } else {\n            val = this.$select.val();\n        }\n        return Utils.isEmpty( val ) ? null : val;\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-default.js","define([\n    //jquery\n    //backbone\n], function(){\n// =============================================================================\n/**\n * view for a popup menu\n */\nvar PopupMenu = Backbone.View.extend({\n//TODO: maybe better as singleton off the Galaxy obj\n    /** Cache the desired button element and options, set up the button click handler\n     *  NOTE: attaches this view as HTML/jQ data on the button for later use.\n     */\n    initialize: function( $button, options ){\n        // default settings\n        this.$button = $button;\n        if( !this.$button.length ){\n            this.$button = $( '<div/>' );\n        }\n        this.options = options || [];\n        this.$button.data( 'popupmenu', this );\n\n        // set up button click -> open menu behavior\n        var menu = this;\n        this.$button.click( function( event ){\n            // if there's already a menu open, remove it\n            $( '.popmenu-wrapper' ).remove();\n            menu._renderAndShow( event );\n            return false;\n        });\n    },\n\n    // render the menu, append to the page body at the click position, and set up the 'click-away' handlers, show\n    _renderAndShow: function( clickEvent ){\n        this.render();\n        this.$el.appendTo( 'body' ).css( this._getShownPosition( clickEvent )).show();\n        this._setUpCloseBehavior();\n    },\n\n    // render the menu\n    // this menu doesn't attach itself to the DOM ( see _renderAndShow )\n    render: function(){\n        // render the menu body absolute and hidden, fill with template\n        this.$el.addClass( 'popmenu-wrapper' ).hide()\n            .css({ position : 'absolute' })\n            .html( this.template( this.$button.attr( 'id' ), this.options ));\n\n        // set up behavior on each link/anchor elem\n        if( this.options.length ){\n            var menu = this;\n            //precondition: there should be one option per li\n            this.$el.find( 'li' ).each( function( i, li ){\n                var option = menu.options[i];\n\n                // if the option has 'func', call that function when the anchor is clicked\n                if( option.func ){\n                    $( this ).children( 'a.popupmenu-option' ).click( function( event ){\n                        option.func.call( menu, event, option );\n                        // We must preventDefault otherwise clicking \"cancel\"\n                        // on a purge or something still navigates and causes\n                        // the action.\n                        event.preventDefault();\n                        // bubble up so that an option click will call the close behavior\n                    });\n                }\n            });\n        }\n        return this;\n    },\n\n    template : function( id, options ){\n        return [\n            '<ul id=\"', id, '-menu\" class=\"dropdown-menu\">', this._templateOptions( options ), '</ul>'\n        ].join( '' );\n    },\n\n    _templateOptions : function( options ){\n        if( !options.length ){\n            return '<li>(no options)</li>';\n        }\n        return _.map( options, function( option ){\n            if( option.divider ){\n                return '<li class=\"divider\"></li>';\n            } else if( option.header ){\n                return [ '<li class=\"head\"><a href=\"javascript:void(0);\">', option.html, '</a></li>' ].join( '' );\n            }\n            var href   = option.href || 'javascript:void(0);',\n                target = ( option.target  )?( ' target=\"' + option.target + '\"' ):( '' ),\n                check  = ( option.checked )?( '<span class=\"fa fa-check\"></span>' ):( '' );\n            return [\n                '<li><a class=\"popupmenu-option\" href=\"', href, '\"', target, '>',\n                    check, option.html,\n                '</a></li>'\n            ].join( '' );\n        }).join( '' );\n    },\n\n    // get the absolute position/offset for the menu\n    _getShownPosition : function( clickEvent ){\n\n        // display menu horiz. centered on click...\n        var menuWidth = this.$el.width();\n        var x = clickEvent.pageX - menuWidth / 2 ;\n\n        // adjust to handle horiz. scroll and window dimensions ( draw entirely on visible screen area )\n        x = Math.min( x, $( document ).scrollLeft() + $( window ).width() - menuWidth - 5 );\n        x = Math.max( x, $( document ).scrollLeft() + 5 );\n        return {\n            top: clickEvent.pageY,\n            left: x\n        };\n    },\n\n    // bind an event handler to all available frames so that when anything is clicked\n    // the menu is removed from the DOM and the event handler unbinds itself\n    _setUpCloseBehavior: function(){\n        var menu = this;\n//TODO: alternately: focus hack, blocking overlay, jquery.blockui\n\n        // function to close popup and unbind itself\n        function closePopup( event ){\n            $( document ).off( 'click.close_popup' );\n            if( window && window.parent !== window ){\n                try {\n                    $( window.parent.document ).off( \"click.close_popup\" );\n                } catch( err ){}\n            } else {\n                try {\n                    $( 'iframe#galaxy_main' ).contents().off( \"click.close_popup\" );\n                } catch( err ){}\n            }\n            menu.remove();\n        }\n\n        $( 'html' ).one( \"click.close_popup\", closePopup );\n        if( window && window.parent !== window ){\n            try {\n                $( window.parent.document ).find( 'html' ).one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        } else {\n            try {\n                $( 'iframe#galaxy_main' ).contents().one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        }\n    },\n\n    // add a menu option/item at the given index\n    addItem: function( item, index ){\n        // append to end if no index\n        index = ( index >= 0 ) ? index : this.options.length;\n        this.options.splice( index, 0, item );\n        return this;\n    },\n\n    // remove a menu option/item at the given index\n    removeItem: function( index ){\n        if( index >=0 ){\n            this.options.splice( index, 1 );\n        }\n        return this;\n    },\n\n    // search for a menu option by its html\n    findIndexByHtml: function( html ){\n        for( var i = 0; i < this.options.length; i++ ){\n            if( _.has( this.options[i], 'html' ) && ( this.options[i].html === html )){\n                return i;\n            }\n        }\n        return null;\n    },\n\n    // search for a menu option by its html\n    findItemByHtml: function( html ){\n        return this.options[( this.findIndexByHtml( html ))];\n    },\n\n    // string representation\n    toString: function(){\n        return 'PopupMenu';\n    }\n});\n/** shortcut to new for when you don't need to preserve the ref */\nPopupMenu.create = function _create( $button, options ){\n    return new PopupMenu( $button, options );\n};\n\n// -----------------------------------------------------------------------------\n// the following class functions are bridges from the original make_popupmenu and make_popup_menus\n// to the newer backbone.js PopupMenu\n\n/** Create a PopupMenu from simple map initial_options activated by clicking button_element.\n *      Converts initial_options to object array used by PopupMenu.\n *  @param {jQuery|DOMElement} button_element element which, when clicked, activates menu\n *  @param {Object} initial_options map of key -> values, where\n *      key is option text, value is fn to call when option is clicked\n *  @returns {PopupMenu} the PopupMenu created\n */\nPopupMenu.make_popupmenu = function( button_element, initial_options ){\n    var convertedOptions = [];\n    _.each( initial_options, function( optionVal, optionKey ){\n        var newOption = { html: optionKey };\n\n        // keys with null values indicate: header\n        if( optionVal === null ){ // !optionVal? (null only?)\n            newOption.header = true;\n\n        // keys with function values indicate: a menu option\n        } else if( jQuery.type( optionVal ) === 'function' ){\n            newOption.func = optionVal;\n        }\n        //TODO:?? any other special optionVals?\n        // there was no divider option originally\n        convertedOptions.push( newOption );\n    });\n    return new PopupMenu( $( button_element ), convertedOptions );\n};\n\n/** Find all anchors in $parent (using selector) and covert anchors into a PopupMenu options map.\n *  @param {jQuery} $parent the element that contains the links to convert to options\n *  @param {String} selector jq selector string to find links\n *  @returns {Object[]} the options array to initialize a PopupMenu\n */\n//TODO: lose parent and selector, pass in array of links, use map to return options\nPopupMenu.convertLinksToOptions = function( $parent, selector ){\n    $parent = $( $parent );\n    selector = selector || 'a';\n    var options = [];\n    $parent.find( selector ).each( function( elem, i ){\n        var option = {}, $link = $( elem );\n\n        // convert link text to the option text (html) and the href into the option func\n        option.html = $link.text();\n        if( $link.attr( 'href' ) ){\n            var linkHref    = $link.attr( 'href' ),\n                linkTarget  = $link.attr( 'target' ),\n                confirmText = $link.attr( 'confirm' );\n\n            option.func = function(){\n                // if there's a \"confirm\" attribute, throw up a confirmation dialog, and\n                //  if the user cancels - do nothing\n                if( ( confirmText ) && ( !confirm( confirmText ) ) ){ return; }\n\n                // if there's no confirm attribute, or the user accepted the confirm dialog:\n                switch( linkTarget ){\n                    // relocate the center panel\n                    case '_parent':\n                        window.parent.location = linkHref;\n                        break;\n\n                    // relocate the entire window\n                    case '_top':\n                        window.top.location = linkHref;\n                        break;\n\n                    // relocate this panel\n                    default:\n                        window.location = linkHref;\n                }\n            };\n        }\n        options.push( option );\n    });\n    return options;\n};\n\n/** Create a single popupmenu from existing DOM button and anchor elements\n *  @param {jQuery} $buttonElement the element that when clicked will open the menu\n *  @param {jQuery} $menuElement the element that contains the anchors to convert into a menu\n *  @param {String} menuElementLinkSelector jq selector string used to find anchors to be made into menu options\n *  @returns {PopupMenu} the PopupMenu (Backbone View) that can render, control the menu\n */\nPopupMenu.fromExistingDom = function( $buttonElement, $menuElement, menuElementLinkSelector ){\n    $buttonElement = $( $buttonElement );\n    $menuElement = $( $menuElement );\n    var options = PopupMenu.convertLinksToOptions( $menuElement, menuElementLinkSelector );\n    // we're done with the menu (having converted it to an options map)\n    $menuElement.remove();\n    return new PopupMenu( $buttonElement, options );\n};\n\n/** Create all popupmenus within a document or a more specific element\n *  @param {DOMElement} parent the DOM element in which to search for popupmenus to build (defaults to document)\n *  @param {String} menuSelector jq selector string to find popupmenu menu elements (defaults to \"div[popupmenu]\")\n *  @param {Function} buttonSelectorBuildFn the function to build the jq button selector.\n *      Will be passed $menuElement, parent.\n *      (Defaults to return '#' + $menuElement.attr( 'popupmenu' ); )\n *  @returns {PopupMenu[]} array of popupmenus created\n */\nPopupMenu.make_popup_menus = function( parent, menuSelector, buttonSelectorBuildFn ){\n    parent = parent || document;\n    // orig. Glx popupmenu menus have a (non-std) attribute 'popupmenu'\n    //  which contains the id of the button that activates the menu\n    menuSelector = menuSelector || 'div[popupmenu]';\n    // default to (orig. Glx) matching button to menu by using the popupmenu attr of the menu as the id of the button\n    buttonSelectorBuildFn = buttonSelectorBuildFn || function( $menuElement, parent ){\n        return '#' + $menuElement.attr( 'popupmenu' );\n    };\n\n    // aggregate and return all PopupMenus\n    var popupMenusCreated = [];\n    $( parent ).find( menuSelector ).each( function(){\n        var $menuElement    = $( this ),\n            $buttonElement  = $( parent ).find( buttonSelectorBuildFn( $menuElement, parent ) );\n        popupMenusCreated.push( PopupMenu.fromDom( $buttonElement, $menuElement ) );\n        $buttonElement.addClass( 'popup' );\n    });\n    return popupMenusCreated;\n};\n\n\n// =============================================================================\n    return PopupMenu;\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/popup-menu.js","/* This class maps the form dom to an api compatible javascript dictionary. */\ndefine([ 'utils/utils' ], function( Utils ) {\n    var Manager = Backbone.Model.extend({\n        initialize: function( app ) {\n            this.app = app;\n        },\n\n        /** Creates a checksum. */\n        checksum: function() {\n            var sum = '';\n            var self = this;\n            this.app.section.$el.find( '.section-row' ).each( function() {\n                var id = $(this).attr( 'id' );\n                var field = self.app.field_list[ id ];\n                if ( field ) {\n                    sum += id + ':' + JSON.stringify( field.value && field.value() ) + ':' + field.collapsed + ';';\n                }\n            });\n            return sum;\n        },\n\n        /** Convert dom into a dictionary of flat id/value pairs used e.g. on job submission. */\n        create: function() {\n            var self = this;\n\n            // get raw dictionary from dom\n            var dict = {};\n            this._iterate( this.app.section.$el, dict );\n\n            // add to result dictionary, label elements\n            var result_dict = {};\n            this.flat_dict = {};\n            function add( flat_id, input_id, input_value ) {\n                self.flat_dict[ flat_id ] = input_id;\n                result_dict[ flat_id ] = input_value;\n                self.app.element_list[ input_id ] && self.app.element_list[ input_id ].$el.attr( 'tour_id', flat_id );\n            }\n            // converter between raw dictionary and job dictionary\n            function convert( identifier, head ) {\n                for ( var index in head ) {\n                    var node = head[ index ];\n                    if ( node.input ) {\n                        var input = node.input;\n                        var flat_id = identifier;\n                        if ( identifier != '' ) {\n                            flat_id += '|';\n                        }\n                        flat_id += input.name;\n                        switch ( input.type ) {\n                            case 'repeat':\n                                var section_label = 'section-';\n                                var block_indices = [];\n                                var block_prefix = null;\n                                for ( var block_label in node ) {\n                                    var pos = block_label.indexOf( section_label );\n                                    if ( pos != -1 ) {\n                                        pos += section_label.length;\n                                        block_indices.push( parseInt( block_label.substr( pos ) ));\n                                        if ( !block_prefix ) {\n                                            block_prefix = block_label.substr( 0, pos );\n                                        }\n                                    }\n                                }\n                                block_indices.sort( function( a, b ) { return a - b; });\n                                var index = 0;\n                                for ( var i in block_indices ) {\n                                    convert( flat_id + '_' + index++, node[ block_prefix + block_indices[ i ] ]);\n                                }\n                                break;\n                            case 'conditional':\n                                var value = self.app.field_list[ input.id ].value();\n                                add( flat_id + '|' + input.test_param.name, input.id, value );\n                                var selectedCase = matchCase( input, value );\n                                if ( selectedCase != -1 ) {\n                                    convert( flat_id, head[ input.id + '-section-' + selectedCase ] );\n                                }\n                                break;\n                            case 'section':\n                                convert( !input.flat && flat_id || '', node );\n                                break;\n                            default:\n                                var field = self.app.field_list[ input.id ];\n                                if ( field && field.value ) {\n                                    var value = field.value();\n                                    if ( input.ignore === undefined || input.ignore != value ) {\n                                        if ( field.collapsed && input.collapsible_value ) {\n                                            value = input.collapsible_value;\n                                        }\n                                        add( flat_id, input.id, value );\n                                        if ( input.payload ) {\n                                            for ( var p_id in input.payload ) {\n                                                add( p_id, input.id, input.payload[ p_id ] );\n                                            }\n                                        }\n                                    }\n                                }\n                        }\n                    }\n                }\n            }\n            convert( '', dict );\n            return result_dict;\n        },\n\n        /** Matches flat ids to corresponding input element\n         * @param{string} flat_id - Flat input id to be looked up.\n         */\n        match: function ( flat_id ) {\n            return this.flat_dict && this.flat_dict[ flat_id ];\n        },\n\n        /** Match conditional values to selected cases\n        */\n        matchCase: function( input, value ) {\n            return matchCase( input, value );\n        },\n\n        /** Matches a new tool model to the current input elements e.g. used to update dynamic options\n        */\n        matchModel: function( model, callback ) {\n            var self = this;\n            visitInputs( model.inputs, function( input, name ) {\n                self.flat_dict[ name ] && callback ( input, self.flat_dict[ name ] );\n            });\n        },\n\n        /** Matches identifier from api response to input elements e.g. used to display validation errors\n        */\n        matchResponse: function( response ) {\n            var result = {};\n            var self = this;\n            function search ( id, head ) {\n                if ( typeof head === 'string' ) {\n                    var input_id = self.flat_dict[ id ];\n                    input_id && ( result[ input_id ] = head );\n                } else {\n                    for ( var i in head ) {\n                        var new_id = i;\n                        if ( id !== '' ) {\n                            var separator = '|';\n                            if ( head instanceof Array ) {\n                                separator = '_';\n                            }\n                            new_id = id + separator + new_id;\n                        }\n                        search ( new_id, head[ i ] );\n                    }\n                }\n            }\n            search( '', response );\n            return result;\n        },\n\n        /** Map dom tree to dictionary tree with input elements.\n        */\n        _iterate: function( parent, dict ) {\n            var self = this;\n            var children = $( parent ).children();\n            children.each( function() {\n                var child = this;\n                var id = $( child ).attr( 'id' );\n                if ( $( child ).hasClass( 'section-row' ) ) {\n                    var input = self.app.input_list[ id ];\n                    dict[ id ] = ( input && { input : input } ) || {};\n                    self._iterate( child, dict[ id ] );\n                } else {\n                    self._iterate( child, dict );\n                }\n            });\n        }\n    });\n\n    /** Match conditional values to selected cases\n     * @param{dict}   input     - Definition of conditional input parameter\n     * @param{dict}   value     - Current value\n     */\n    var matchCase = function( input, value ) {\n        if ( input.test_param.type == 'boolean' ) {\n            if ( value == 'true' ) {\n                value = input.test_param.truevalue || 'true';\n            } else {\n                value = input.test_param.falsevalue || 'false';\n            }\n        }\n        for ( var i in input.cases ) {\n            if ( input.cases[ i ].value == value ) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    /** Visits tool inputs\n     * @param{dict}   inputs    - Nested dictionary of input elements\n     * @param{dict}   callback  - Called with the mapped dictionary object and corresponding model node\n     */\n    var visitInputs = function( inputs, callback, prefix, context ) {\n        context = $.extend( true, {}, context );\n        _.each( inputs, function ( input ) {\n            if ( input && input.type && input.name ) {\n                context[ input.name ] = input;\n            }\n        });\n        for ( var key in inputs ) {\n            var node = inputs[ key ];\n            node.name = node.name || key;\n            var name = prefix ? prefix + '|' + node.name : node.name;\n            switch ( node.type ) {\n                case 'repeat':\n                    _.each( node.cache, function( cache, j ) {\n                        visitInputs( cache, callback, name + '_' + j, context );\n                    });\n                    break;\n                case 'conditional':\n                    if ( node.test_param ) {\n                        callback( node.test_param, name + '|' + node.test_param.name, context );\n                        var selectedCase = matchCase( node, node.test_param.value );\n                        if ( selectedCase != -1 ) {\n                            visitInputs( node.cases[ selectedCase ].inputs, callback, name, context );\n                        } else {\n                            Galaxy.emit.debug( 'form-data::visitInputs() - Invalid case for ' + name + '.' );\n                        }\n                    } else {\n                        Galaxy.emit.debug( 'form-data::visitInputs() - Conditional test parameter missing for ' + name  + '.' );\n                    }\n                    break;\n                case 'section':\n                    visitInputs( node.inputs, callback, name, context )\n                    break;\n                default:\n                    callback( node, name, context );\n            }\n        }\n    };\n\n    return {\n        Manager         : Manager,\n        visitInputs     : visitInputs\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-data.js","/** This class creates a ui table element. */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function(options) {\n            this.options = Utils.merge(options, {\n                content     : 'No content available.',\n                onchange    : null,\n                ondblclick  : null,\n                onconfirm   : null,\n                cls         : 'ui-table',\n                selectable  : true,\n                cls_tr      : ''\n            });\n            this.setElement( this._template() );\n            this.$thead     = this.$('thead');\n            this.$tbody     = this.$('tbody');\n            this.$tmessage  = this.$('tmessage');\n            this.row = this._row();\n            this.row_count = 0;\n        },\n\n        events : {\n            'click'     : '_onclick',\n            'dblclick'  : '_ondblclick'\n        },\n\n        /** Add cell to header row */\n        addHeader: function( $el ) {\n            this.row.append( $( '<th/>' ).append( $el ) );\n        },\n\n        /** Append header row to table */\n        appendHeader: function() {\n            this.$thead.append( this.row );\n            this.row = $( '<tr/>' );\n        },\n\n        /** Add cell to row */\n        add: function($el, width, align) {\n            var wrapper = $( '<td/>' );\n            if ( width ) {\n                wrapper.css( 'width', width );\n            }\n            if ( align ) {\n                wrapper.css( 'text-align', align );\n            }\n            this.row.append( wrapper.append( $el ) );\n        },\n        \n        /** Append row to table */\n        append: function( id, fade ) {\n            this._commit( id, fade, false );\n        },\n        \n        /** Prepend row to table */\n        prepend: function( id, fade ) {\n            this._commit( id, fade, true );\n        },\n        \n        /** Helper to get row element */\n        get: function( id ) {\n            return this.$( '#' + id );\n        },\n\n        /** Delete row by id */\n        del: function( id ) {\n            var item = this.$tbody.find( '#' + id );\n            if ( item.length > 0 ) {\n                item.remove();\n                this.row_count--;\n                this._refresh();\n            }\n        },\n\n        /** Delete all rows */\n        delAll: function() {\n            this.$tbody.empty();\n            this.row_count = 0;\n            this._refresh();\n        },\n\n        /** Set a value i.e. selects/highlights a particular row by id */\n        value: function( new_value ) {\n            if ( this.options.selectable ) {\n                this.before = this.$tbody.find( '.current' ).attr( 'id' );\n                if ( new_value !== undefined ) {\n                    this.$tbody.find( 'tr' ).removeClass( 'current' );\n                    if ( new_value ) {\n                        this.$tbody.find( '#' + new_value ).addClass( 'current' );\n                    }\n                }\n                var after = this.$tbody.find( '.current' ).attr( 'id' );\n                if ( after === undefined ) {\n                    return null;\n                } else {\n                    if ( after != this.before && this.options.onchange ) {\n                        this.options.onchange( new_value );\n                    }\n                    return after;\n                }\n            }\n        },\n\n        /** Return the number of rows */\n        size: function() {\n            return this.$tbody.find( 'tr' ).length;\n        },\n\n        /** Helper to append rows */\n        _commit: function( id, fade, prepend ) {\n            this.del( id );\n            this.row.attr( 'id', id );\n            if ( prepend ) {\n                this.$tbody.prepend( this.row );\n            } else {\n                this.$tbody.append( this.row );\n            }\n            if ( fade ) {\n                this.row.hide();\n                this.row.fadeIn();\n            }\n            this.row = this._row();\n            this.row_count++;\n            this._refresh();\n        },\n\n        /** Helper to create new row */\n        _row: function() {\n            return $( '<tr class=\"' + this.options.cls_tr + '\"></tr>' );\n        },\n\n        /** Handles onclick events */\n        _onclick: function(e) {\n            var old_value = this.value();\n            var new_value = $( e.target ).closest( 'tr' ).attr( 'id' );\n            if ( new_value != '' ){\n                if ( new_value && old_value != new_value ) {\n                    if ( this.options.onconfirm ) {\n                        this.options.onconfirm( new_value );\n                    } else {\n                        this.value( new_value );\n                    }\n                }\n            }\n        },\n\n        /** Handles ondblclick events */\n        _ondblclick: function( e ) {\n            var value = this.value();\n            if ( value && this.options.ondblclick ) {\n                this.options.ondblclick( value );\n            }\n        },\n\n        /** Refresh helper */\n        _refresh: function() {\n            if ( this.row_count == 0 ) {\n                this.$tmessage.show();\n            } else {\n                this.$tmessage.hide();\n            }\n        },\n\n        /** Template */\n        _template: function() {\n            return  '<div>' +\n                        '<table class=\"' + this.options.cls + '\">' +\n                            '<thead/>' +\n                            '<tbody/>' +\n                        '</table>' +\n                        '<tmessage>' + this.options.content + '</tmessage>' +\n                    '<div>';\n        }\n    });\n\n    return {\n        View: View\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-table.js","/**\n    This class creates a form input element wrapper\n*/\ndefine([], function() {\n    return Backbone.View.extend({\n        initialize: function( app, options ) {\n            this.app = app;\n            this.app_options = app.model ? app.model.attributes : {};\n            this.field = options && options.field || new Backbone.View();\n            this.model = options && options.model || new Backbone.Model({\n                text_enable     : this.app_options.text_enable   || 'Enable',\n                text_disable    : this.app_options.text_disable  || 'Disable',\n                cls_enable      : this.app_options.cls_enable    || 'fa fa-caret-square-o-down',\n                cls_disable     : this.app_options.cls_disable   || 'fa fa-caret-square-o-up',\n                always_refresh  : this.app_options.always_refresh\n            }).set( options );\n\n            // set element and link components\n            this.setElement( this._template() );\n            this.$field             = this.$( '.ui-form-field' );\n            this.$info              = this.$( '.ui-form-info' );\n            this.$preview           = this.$( '.ui-form-preview' );\n            this.$collapsible       = this.$( '.ui-form-collapsible' );\n            this.$collapsible_text  = this.$( '.ui-form-collapsible-text' );\n            this.$collapsible_icon  = this.$( '.ui-form-collapsible-icon' );\n            this.$title             = this.$( '.ui-form-title' );\n            this.$title_text        = this.$( '.ui-form-title-text' );\n            this.$error_text        = this.$( '.ui-form-error-text' );\n            this.$error             = this.$( '.ui-form-error' );\n            this.$backdrop          = this.$( '.ui-form-backdrop' );\n\n            // add field element\n            this.$field.prepend( this.field.$el );\n\n            // decide wether to expand or collapse fields\n            var collapsible_value = this.model.get( 'collapsible_value' );\n            this.field.collapsed = collapsible_value !== undefined && JSON.stringify( this.model.get( 'value' ) ) == JSON.stringify( collapsible_value );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n\n            // add click handler\n            var self = this;\n            this.$collapsible.on( 'click', function() {\n                self.field.collapsed = !self.field.collapsed;\n                app.trigger && app.trigger( 'change' );\n                self.render();\n            });\n\n            // hide error on value change\n            if ( this.field.model && !this.model.get( 'always_refresh' ) ) {\n                this.listenTo( this.field.model, 'change:value', function() { self.reset() } );\n            }\n        },\n\n        /** Set backdrop for input element */\n        backdrop: function() {\n            this.model.set( 'backdrop', true );\n        },\n\n        /** Set error text */\n        error: function( text ) {\n            this.model.set( 'error_text', text );\n        },\n\n        /** Reset this view */\n        reset: function() {\n            !this.model.get( 'fixed' ) && this.model.set( 'error_text', null );\n        },\n\n        render: function() {\n            // render help\n            $( '.tooltip' ).hide();\n            var help_text = this.model.get( 'help', '' );\n            var help_argument = this.model.get( 'argument' );\n            if ( help_argument && help_text.indexOf( '(' + help_argument + ')' ) == -1 ) {\n                help_text += ' (' + help_argument + ')';\n            }\n            this.$info.html( help_text );\n            // render visibility\n            this.$el[ this.model.get( 'hidden' ) ? 'hide' : 'show' ]();\n            // render preview view for collapsed fields\n            this.$preview[ ( this.field.collapsed && this.model.get( 'collapsible_preview' ) || this.model.get( 'disabled' ) ) ? 'show' : 'hide' ]()\n                         .html( _.escape( this.model.get( 'text_value' ) ) );\n            // render error messages\n            var error_text = this.model.get( 'error_text' );\n            this.$error[ error_text ? 'show' : 'hide' ]();\n            this.$el[ error_text ? 'addClass' : 'removeClass' ]( 'ui-error' );\n            this.$error_text.html( error_text );\n            // render backdrop\n            this.$backdrop[ this.model.get( 'backdrop' ) ? 'show' : 'hide' ]();\n            // render input field\n            this.field.collapsed || this.model.get( 'disabled' ) ? this.$field.hide() : this.$field.show();\n            // render input field color and style\n            this.field.model && this.field.model.set( { 'color': this.model.get( 'color' ), 'style': this.model.get( 'style' ) } );\n            // render collapsible options\n            if ( !this.model.get( 'disabled' ) && this.model.get( 'collapsible_value' ) !== undefined ) {\n                var collapsible_state = this.field.collapsed ? 'enable' : 'disable';\n                this.$title_text.hide();\n                this.$collapsible.show();\n                this.$collapsible_text.text( this.model.get( 'label' ) );\n                this.$collapsible_icon.removeClass().addClass( 'icon' )\n                                      .addClass( this.model.get( 'cls_' +  collapsible_state ) )\n                                      .attr( 'data-original-title', this.model.get( 'text_' + collapsible_state ) )\n                                      .tooltip( { placement: 'bottom' } );\n            } else {\n                this.$title_text.show().text( this.model.get( 'label' ) );\n                this.$collapsible.hide();\n            }\n        },\n\n        _template: function() {\n            return  $( '<div/>' ).addClass( 'ui-form-element' )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-error ui-error' )\n                                    .append( $( '<span/>' ).addClass( 'fa fa-arrow-down' ) )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-error-text' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-title' )\n                                    .append( $( '<div/>' ).addClass( 'ui-form-collapsible' )\n                                        .append( $( '<i/>' ).addClass( 'ui-form-collapsible-icon' ) )\n                                        .append( $( '<span/>' ).addClass( 'ui-form-collapsible-text' ) )\n                                    )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-title-text' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-field' )\n                                    .append( $( '<span/>' ).addClass( 'ui-form-info' ) )\n                                    .append( $( '<div/>' ).addClass( 'ui-form-backdrop' ) )\n                                 )\n                                 .append( $( '<div/>' ).addClass( 'ui-form-preview' ) );\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-input.js","/**\n    This class creates input elements. New input parameter types should be added to the types dictionary.\n*/\ndefine(['utils/utils',\n        'mvc/ui/ui-misc',\n        'mvc/ui/ui-select-content',\n        'mvc/ui/ui-select-library',\n        'mvc/ui/ui-select-ftp',\n        'mvc/ui/ui-color-picker'],\n    function( Utils, Ui, SelectContent, SelectLibrary, SelectFtp, ColorPicker ) {\n\n    // create form view\n    return Backbone.Model.extend({\n        /** Available parameter types */\n        types: {\n            'text'              : '_fieldText',\n            'password'          : '_fieldText',\n            'select'            : '_fieldSelect',\n            'data_column'       : '_fieldSelect',\n            'genomebuild'       : '_fieldSelect',\n            'data'              : '_fieldData',\n            'data_collection'   : '_fieldData',\n            'integer'           : '_fieldSlider',\n            'float'             : '_fieldSlider',\n            'boolean'           : '_fieldBoolean',\n            'drill_down'        : '_fieldDrilldown',\n            'color'             : '_fieldColor',\n            'hidden'            : '_fieldHidden',\n            'hidden_data'       : '_fieldHidden',\n            'baseurl'           : '_fieldHidden',\n            'library_data'      : '_fieldLibrary',\n            'ftpfile'           : '_fieldFtp',\n            'upload'            : '_fieldUpload'\n        },\n\n        /** Returns an input field for a given field type */\n        create: function( input_def ) {\n            var fieldClass = this.types[ input_def.type ];\n            var field = typeof( this[ fieldClass ] ) === 'function' ? this[ fieldClass ].call( this, input_def ) : null;\n            if ( !field ) {\n                field = input_def.options ? this._fieldSelect( input_def ) : this._fieldText( input_def );\n                Galaxy.emit.debug('form-parameters::_addRow()', 'Auto matched field type (' + input_def.type + ').');\n            }\n            input_def.value === undefined && ( input_def.value = null );\n            field.value( input_def.value );\n            return field;\n        },\n\n        /** Data input field */\n        _fieldData: function( input_def ) {\n            return new SelectContent.View({\n                id          : 'field-' + input_def.id,\n                extensions  : input_def.extensions,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                type        : input_def.type,\n                flavor      : input_def.flavor,\n                data        : input_def.options,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Select/Checkbox/Radio options field */\n        _fieldSelect: function ( input_def ) {\n            // show text field e.g. in workflow editor\n            if( input_def.is_workflow ) {\n                return this._fieldText( input_def );\n            }\n\n            // customize properties\n            if ( input_def.type == 'data_column' ) {\n                input_def.error_text = 'Missing columns in referenced dataset.'\n            }\n\n            // identify available options\n            var data = input_def.data;\n            if( !data ) {\n                data = [];\n                _.each( input_def.options, function( option ) {\n                    data.push( { label: option[ 0 ], value: option[ 1 ] } );\n                });\n            }\n\n            // identify display type\n            var SelectClass = Ui.Select;\n            switch ( input_def.display ) {\n                case 'checkboxes':\n                    SelectClass = Ui.Checkbox;\n                    break;\n                case 'radio':\n                    SelectClass = Ui.Radio;\n                    break;\n                case 'radiobutton':\n                    SelectClass = Ui.RadioButton;\n                    break;\n            }\n\n            // create select field\n            return new SelectClass.View({\n                id          : 'field-' + input_def.id,\n                data        : data,\n                error_text  : input_def.error_text || 'No options available',\n                multiple    : input_def.multiple,\n                optional    : input_def.optional,\n                onchange    : input_def.onchange,\n                searchable  : input_def.flavor !== 'workflow'\n            });\n        },\n\n        /** Drill down options field */\n        _fieldDrilldown: function ( input_def ) {\n            // show text field e.g. in workflow editor\n            if( input_def.is_workflow ) {\n                return this._fieldText( input_def );\n            }\n\n            // create drill down field\n            return new Ui.Drilldown.View({\n                id          : 'field-' + input_def.id,\n                data        : input_def.options,\n                display     : input_def.display,\n                optional    : input_def.optional,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Text input field */\n        _fieldText: function( input_def ) {\n            // field replaces e.g. a select field\n            if ( input_def.options && input_def.data ) {\n                input_def.area = input_def.multiple;\n                if ( Utils.isEmpty( input_def.value ) ) {\n                    input_def.value = null;\n                } else {\n                    if ( $.isArray( input_def.value ) ) {\n                        var str_value = '';\n                        for ( var i in input_def.value ) {\n                            str_value += String( input_def.value[ i ] );\n                            if ( !input_def.multiple ) {\n                                break;\n                            }\n                            str_value += '\\n';\n                        }\n                        input_def.value = str_value;\n                    }\n                }\n            }\n            // create input element\n            return new Ui.Input({\n                id          : 'field-' + input_def.id,\n                type        : input_def.type,\n                area        : input_def.area,\n                readonly    : input_def.readonly,\n                placeholder : input_def.placeholder,\n                datalist    : input_def.datalist,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Slider field */\n        _fieldSlider: function( input_def ) {\n            return new Ui.Slider.View({\n                id          : 'field-' + input_def.id,\n                precise     : input_def.type == 'float',\n                is_workflow : input_def.is_workflow,\n                min         : input_def.min,\n                max         : input_def.max,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Hidden field */\n        _fieldHidden: function( input_def ) {\n            return new Ui.Hidden({\n                id          : 'field-' + input_def.id,\n                info        : input_def.info\n            });\n        },\n\n        /** Boolean field */\n        _fieldBoolean: function( input_def ) {\n            return new Ui.RadioButton.View({\n                id          : 'field-' + input_def.id,\n                data        : [ { label : 'Yes', value : 'true'  },\n                                { label : 'No',  value : 'false' }],\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Color picker field */\n        _fieldColor: function( input_def ) {\n            return new ColorPicker({\n                id          : 'field-' + input_def.id,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Library dataset field */\n        _fieldLibrary: function( input_def ) {\n            return new SelectLibrary.View({\n                id          : 'field-' + input_def.id,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** FTP file field */\n        _fieldFtp: function( input_def ) {\n            return new SelectFtp.View({\n                id          : 'field-' + input_def.id,\n                optional    : input_def.optional,\n                multiple    : input_def.multiple,\n                onchange    : input_def.onchange\n            });\n        },\n\n        /** Upload file field */\n        _fieldUpload: function( input_def ) {\n            return new Ui.Upload({\n                id          : 'field-' + input_def.id,\n                onchange    : input_def.onchange\n            });\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-parameters.js","/** This class creates a ui component which enables the dynamic creation of portlets */\ndefine( [ 'utils/utils', 'mvc/ui/ui-portlet', 'mvc/ui/ui-misc' ],\nfunction( Utils, Portlet, Ui ) {\n    var View = Backbone.View.extend({\n        initialize: function( options ) {\n            this.list = {};\n            this.options = Utils.merge( options, {\n                title       : 'Repeat',\n                empty_text  : 'Not available.',\n                max         : null,\n                min         : null\n            });\n            this.button_new = new Ui.ButtonIcon({\n                icon    : 'fa-plus',\n                title   : 'Insert ' + this.options.title,\n                tooltip : 'Add new ' + this.options.title + ' block',\n                floating: 'clear',\n                cls     : 'ui-button-icon form-repeat-add',\n                onclick : function() { options.onnew && options.onnew() }\n            });\n            this.setElement( $( '<div/>' ).append( this.$list = $( '<div/>' ) )\n                                          .append( $( '<div/>' ).append( this.button_new.$el ) ) );\n        },\n\n        /** Number of repeat blocks */\n        size: function() {\n            return _.size( this.list );\n        },\n\n        /** Add new repeat block */\n        add: function( options ) {\n            if ( !options.id || this.list[ options.id ] ) {\n                Galaxy.emit.debug( 'form-repeat::add()', 'Duplicate or invalid repeat block id.' );\n                return;\n            }\n            var button_delete = new Ui.ButtonIcon({\n                icon    : 'fa-trash-o',\n                tooltip : 'Delete this repeat block',\n                cls     : 'ui-button-icon-plain form-repeat-delete',\n                onclick : function() { options.ondel && options.ondel() }\n            });\n            var portlet = new Portlet.View({\n                id              : options.id,\n                title           : 'placeholder',\n                cls             : options.cls || 'ui-portlet-repeat',\n                operations      : { button_delete: button_delete }\n            });\n            portlet.append( options.$el );\n            portlet.$el.addClass( 'section-row' ).hide();\n            this.list[ options.id ] = portlet;\n            this.$list.append( portlet.$el.fadeIn( 'fast' ) );\n            this.options.max > 0 && this.size() >= this.options.max && this.button_new.disable();\n            this._refresh();\n        },\n\n        /** Delete repeat block */\n        del: function( id ) {\n            if ( !this.list[ id ] ) {\n                Galaxy.emit.debug( 'form-repeat::del()', 'Invalid repeat block id.' );\n                return;\n            }\n            this.$list.find( '#' + id ).remove();\n            delete this.list[ id ];\n            this.button_new.enable();\n            this._refresh();\n        },\n\n        /** Remove all */\n        delAll: function() {\n            for( var id in this.list ) {\n                this.del( id );\n            }\n        },\n\n        /** Hides add/del options */\n        hideOptions: function() {\n            this.button_new.$el.hide();\n            _.each( this.list, function( portlet ) { portlet.hideOperation( 'button_delete' ) } );\n            _.isEmpty( this.list ) && this.$el.append( $( '<div/>' ).addClass( 'ui-form-info' ).html( this.options.empty_text ) );\n        },\n\n        /** Refresh view */\n        _refresh: function() {\n            var index = 0;\n            for ( var id in this.list ) {\n                var portlet = this.list[ id ];\n                portlet.title( ++index + ': ' + this.options.title );\n                portlet[ this.size() > this.options.min ? 'showOperation' : 'hideOperation' ]( 'button_delete' );\n            }\n        }\n    });\n\n    return {\n        View : View\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-repeat.js","/**\n    This class creates a form section and populates it with input elements. It also handles repeat blocks and conditionals by recursively creating new sub sections.\n*/\ndefine([ 'utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-portlet', 'mvc/form/form-repeat', 'mvc/form/form-input', 'mvc/form/form-parameters' ],\nfunction( Utils, Ui, Portlet, Repeat, InputElement, Parameters ) {\n    var View = Backbone.View.extend({\n        initialize: function( app, options ) {\n            this.app = app;\n            this.inputs = options.inputs;\n            this.parameters = new Parameters();\n            this.setElement( $( '<div/>' ) );\n            this.render();\n        },\n\n        /** Render section view */\n        render: function() {\n            var self = this;\n            this.$el.empty();\n            _.each( this.inputs, function( input ) { self.add( input ) } );\n        },\n\n        /** Add a new input element */\n        add: function( input ) {\n            var input_def = jQuery.extend( true, {}, input );\n            input_def.id = input.id = Utils.uid();\n            this.app.input_list[ input_def.id ] = input_def;\n            switch( input_def.type ) {\n                case 'conditional':\n                    this._addConditional( input_def );\n                    break;\n                case 'repeat':\n                    this._addRepeat( input_def );\n                    break;\n                case 'section':\n                    this._addSection( input_def );\n                    break;\n                default:\n                    this._addRow( input_def );\n            }\n        },\n\n        /** Add a conditional block */\n        _addConditional: function( input_def ) {\n            var self = this;\n            input_def.test_param.id = input_def.id;\n            this.app.model.get( 'sustain_conditionals' ) && ( input_def.test_param.disabled = true );\n            var field = this._addRow( input_def.test_param );\n\n            // set onchange event for test parameter\n            field.model && field.model.set( 'onchange', function( value ) {\n                var selectedCase = self.app.data.matchCase( input_def, value );\n                for ( var i in input_def.cases ) {\n                    var case_def = input_def.cases[ i ];\n                    var section_row = self.$( '#' + input_def.id + '-section-' + i );\n                    var nonhidden = false;\n                    for ( var j in case_def.inputs ) {\n                        if ( !case_def.inputs[ j ].hidden ) {\n                            nonhidden = true;\n                            break;\n                        }\n                    }\n                    if ( i == selectedCase && nonhidden ) {\n                        section_row.fadeIn( 'fast' );\n                    } else {\n                        section_row.hide();\n                    }\n                }\n                self.app.trigger( 'change' );\n            });\n\n            // add conditional sub sections\n            for ( var i in input_def.cases ) {\n                var sub_section = new View( this.app, { inputs: input_def.cases[ i ].inputs } );\n                this._append( sub_section.$el.addClass( 'ui-form-section' ), input_def.id + '-section-' + i );\n            }\n\n            // trigger refresh on conditional input field after all input elements have been created\n            field.trigger( 'change' );\n        },\n\n        /** Add a repeat block */\n        _addRepeat: function( input_def ) {\n            var self = this;\n            var block_index = 0;\n\n            // create repeat block element\n            var repeat = new Repeat.View({\n                title           : input_def.title || 'Repeat',\n                min             : input_def.min,\n                max             : input_def.max,\n                onnew           : function() { create( input_def.inputs ); self.app.trigger( 'change' ); }\n            });\n\n            // helper function to create new repeat blocks\n            function create ( inputs ) {\n                var sub_section_id = input_def.id + '-section-' + ( block_index++ );\n                var sub_section = new View( self.app, { inputs: inputs } );\n                repeat.add( { id      : sub_section_id,\n                              $el     : sub_section.$el,\n                              ondel   : function() { repeat.del( sub_section_id ); self.app.trigger( 'change' ); } } );\n            }\n\n            //\n            // add parsed/minimum number of repeat blocks\n            //\n            var n_cache = _.size( input_def.cache );\n            for ( var i = 0; i < Math.max( Math.max( n_cache, input_def.min || 0 ), input_def.default || 0 ); i++ ) {\n                create( i < n_cache ? input_def.cache[ i ] : input_def.inputs );\n            }\n\n            // hide options\n            this.app.model.get( 'sustain_repeats' ) && repeat.hideOptions();\n\n            // create input field wrapper\n            var input_element = new InputElement( this.app, {\n                label   : input_def.title || input_def.name,\n                help    : input_def.help,\n                field   : repeat\n            });\n            this._append( input_element.$el, input_def.id );\n        },\n\n        /** Add a customized section */\n        _addSection: function( input_def ) {\n            var portlet = new Portlet.View({\n                title               : input_def.title || input_def.name,\n                cls                 : 'ui-portlet-section',\n                collapsible         : true,\n                collapsible_button  : true,\n                collapsed           : !input_def.expanded\n            });\n            portlet.append( new View( this.app, { inputs: input_def.inputs } ).$el );\n            portlet.append( $( '<div/>' ).addClass( 'ui-form-info' ).html( input_def.help ) );\n            this.app.on( 'expand', function( input_id ) { ( portlet.$( '#' + input_id ).length > 0 ) && portlet.expand(); } );\n            this._append( portlet.$el, input_def.id );\n        },\n\n        /** Add a single input field element */\n        _addRow: function( input_def ) {\n            var self = this;\n            var id = input_def.id;\n            input_def.onchange = input_def.onchange || function() { self.app.trigger( 'change', id ) };\n            var field = this.parameters.create( input_def );\n            this.app.field_list[ id ] = field;\n            var input_element = new InputElement( this.app, {\n                name                : input_def.name,\n                label               : input_def.hide_label ? '' : input_def.label || input_def.name,\n                value               : input_def.value,\n                text_value          : input_def.text_value,\n                collapsible_value   : input_def.collapsible_value,\n                collapsible_preview : input_def.collapsible_preview,\n                help                : input_def.help,\n                argument            : input_def.argument,\n                disabled            : input_def.disabled,\n                color               : input_def.color,\n                style               : input_def.style,\n                backdrop            : input_def.backdrop,\n                hidden              : input_def.hidden,\n                fixed               : input_def.fixed,\n                field               : field\n            });\n            this.app.element_list[ id ] = input_element;\n            this._append( input_element.$el, input_def.id );\n            return field;\n        },\n\n        /** Append a new element to the form i.e. input element, repeat block, conditionals etc. */\n        _append: function( $el, id ) {\n            this.$el.append( $el.addClass( 'section-row' ).attr( 'id', id ) );\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-section.js","// dependencies\ndefine([], function() {\n\n// grid model\nreturn Backbone.Model.extend({\n    defaults: {\n        url_base: '',\n        async: false,\n        async_ops: [],\n        categorical_filters: [],\n        filters: {},\n        sort_key: null,\n        show_item_checkboxes: false,\n        advanced_search: false,\n        cur_page: 1,\n        num_pages: 1,\n        operation: undefined,\n        item_ids: undefined\n    },\n\n    /**\n     * Return true if operation can be done asynchronously.\n     */\n    can_async_op: function(op) {\n        return _.indexOf(this.attributes.async_ops, op) !== -1;\n    },\n\n    /**\n     * Add filtering criterion.\n     */\n    add_filter: function(key, value, append) {\n        // Update URL arg with new condition.            \n        if (append) {\n            // Update or append value.\n            var cur_val = this.attributes.filters[key],\n                new_val;\n            if (cur_val === null || cur_val === undefined) {\n                new_val = value;\n            } \n            else if (typeof(cur_val) == 'string') {\n                if (cur_val == 'All') {\n                    new_val = value;\n                } else {\n                    // Replace string with array.\n                    var values = [];\n                    values[0] = cur_val;\n                    values[1] = value;\n                    new_val = values;   \n                }\n            } \n            else {\n                // Current value is an array.\n                new_val = cur_val;\n                new_val.push(value);\n            }\n            this.attributes.filters[key] = new_val;\n        } \n        else {\n            // Replace value.\n            this.attributes.filters[key] = value;\n        }\n    },\n\n    /**\n     * Remove filtering criterion.\n     */\n    remove_filter: function(key, condition) {\n        var cur_val = this.attributes.filters[key];\n        if (cur_val === null || cur_val === undefined) {\n            return false;            \n        }\n\n        if (typeof(cur_val) === 'string') {\n            // overwrite/remove condition.\n            this.attributes.filters[key] = '';\n        } else {\n            // filter contains an array of conditions.\n            var condition_index = _.indexOf(cur_val, condition);\n            if (condition_index !== -1) {\n                cur_val[condition_index] = '';\n            }\n        }\n    },\n\n    /**\n     * Returns URL data for obtaining a new grid.\n     */\n    get_url_data: function() {\n        var url_data = {\n            async: this.attributes.async,\n            sort: this.attributes.sort_key,\n            page: this.attributes.cur_page,\n            show_item_checkboxes: this.attributes.show_item_checkboxes,\n            advanced_search: this.attributes.advanced_search\n        };\n\n        // Add operation, item_ids only if they have values.\n        if (this.attributes.operation) {\n            url_data.operation = this.attributes.operation;\n        }\n        if (this.attributes.item_ids) {\n            url_data.id = this.attributes.item_ids;\n        }\n\n        // Add filter arguments to data, placing \"f-\" in front of all arguments.\n        var self = this;\n        _.each(_.pairs(self.attributes.filters), function(k) {\n            url_data['f-' + k[0]] = k[1];\n        });\n        return url_data;\n    },\n    \n    // Return URL for obtaining a new grid\n    get_url: function (args) {\n        return this.get('url_base') + '?' + $.param(this.get_url_data()) + '&' + $.param(args);\n    }\n    \n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-model.js","// dependencies\ndefine(['utils/utils'], function(Utils) {\n\n// grid view templates\nreturn {\n    // template\n    grid: function(options) {\n        var tmpl = '';\n        if (options.embedded) {\n            tmpl = this.grid_header(options) + this.grid_table(options);\n        } else {\n            tmpl = '<div class=\"loading-elt-overlay\"></div>' +\n                    '<table>' +\n                        '<tr>' +\n                            '<td width=\"75%\">' +\n                                this.grid_header(options) +\n                            '</td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                        '<tr>' +\n                            '<td width=\"100%\" id=\"grid-message\" valign=\"top\"></td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                    '</table>' +\n                    this.grid_table(options);\n        }\n       \n        // add info text\n        if (options.info_text) {\n            tmpl += '<br><div class=\"toolParamHelp\" style=\"clear: both;\">' + options.info_text + '</div>';\n        }\n       \n        // return\n        return tmpl;\n    },\n    \n    // template\n    grid_table: function(options) {\n        return  '<form method=\"post\" onsubmit=\"return false;\">' +\n                    '<table id=\"grid-table\" class=\"grid\">' +\n                        '<thead id=\"grid-table-header\"></thead>' +\n                        '<tbody id=\"grid-table-body\"></tbody>' +\n                        '<tfoot id=\"grid-table-footer\"></tfoot>' +\n                    '</table>' +\n                '</form>';\n    },\n    \n    // template\n    grid_header: function(options) {\n        var tmpl =  '<div class=\"grid-header\">';\n        if (!options.embedded) {\n            tmpl +=     '<h2>' + options.title + '</h2>';\n        }\n        if (options.global_actions) {\n            tmpl +=     '<ul class=\"manage-table-actions\">';\n            var show_popup = (options.global_actions.length >= 3);\n            if (show_popup) {\n                tmpl +=     '<li><a class=\"action-button\" id=\"popup-global-actions\" class=\"menubutton\">Actions</a></li>' +\n                            '<div popupmenu=\"popup-global-actions\">';\n            }\n            for (i in options.global_actions) {\n                var action = options.global_actions[i];\n                tmpl +=         '<li>' +\n                                    '<a class=\"action-button use-target\" target=\"' + action.target + '\" href=\"' + action.url_args + '\" onclick=\"return false;\" >' + action.label + '</a>' +\n                                '</li>';\n            }\n            if (show_popup) {\n                tmpl +=     '</div>';\n            }\n            tmpl +=     '</ul>';\n        }\n        if (options.insert) {\n            tmpl +=     options.insert;\n        }\n       \n        // add grid filters\n        tmpl +=     this.grid_filters(options);\n        tmpl += '</div>'\n        \n        // return template\n        return tmpl;\n    },\n\n    // template\n    header: function(options) {\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        // add checkbox\n        if (options.show_item_checkboxes) {\n            tmpl +=         '<th>';\n            if (options.items.length > 0) {\n                tmpl +=         '<input type=\"checkbox\" id=\"check_all\" name=select_all_checkbox value=\"true\">' +\n                                '<input type=\"hidden\" name=select_all_checkbox value=\"true\">';\n            }\n            tmpl +=         '</th>';\n        }\n        \n        // create header elements\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.visible) {\n                tmpl +=     '<th id=\"' + column.key + '-header\">';\n                if (column.href) {\n                    tmpl +=     '<a href=\"' + column.href + '\" class=\"sort-link\" sort_key=\"' + column.key + '\">' + column.label + '</a>';\n                } else {\n                    tmpl +=     column.label;\n                }\n                tmpl +=         '<span class=\"sort-arrow\">' + column.extra + '</span>' +\n                            '</th>';\n            }\n        }\n        \n        // finalize\n        tmpl +=        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template\n    body: function(options) {\n        // initialize\n        var tmpl = '';\n        var num_rows_rendered = 0;\n        var items_length = options.items.length;\n        \n        // empty grid?\n        if (items_length == 0) {\n            // No results.\n            tmpl += '<tr><td colspan=\"100\"><em>No Items</em></td></tr>';\n            num_rows_rendered = 1;\n        }\n        \n        // create rows\n        for (var i in options.items) {\n        \n            // encode ids\n            var item = options.items[i];\n            var encoded_id = item.encode_id;\n            var popupmenu_id = 'grid-' + i + '-popup';\n            \n            // Tag current\n            tmpl += '<tr ';\n            if (options.current_item_id == item.id) {\n                tmpl += 'class=\"current\"';\n            }\n            tmpl += '>';\n            \n            // Item selection column\n            if (options.show_item_checkboxes) {\n                tmpl += '<td style=\"width: 1.5em;\">' +\n                            '<input type=\"checkbox\" name=\"id\" value=\"' + encoded_id + '\" id=\"' + encoded_id + '\" class=\"grid-row-select-checkbox\" />' +\n                        '</td>';\n            }\n            \n            // Data columns\n            for (j in options.columns) {\n                var column = options.columns[j];\n                if (column.visible) {\n                    // Nowrap\n                    var nowrap = '';\n                    if (column.nowrap) {\n                        nowrap = 'style=\"white-space:nowrap;\"';\n                    }\n                    \n                    // get column settings\n                    var column_settings = item.column_config[column.label];\n                    \n                    // load attributes\n                    var link = column_settings.link;\n                    var value = column_settings.value;\n                    var target = column_settings.target;\n                        \n                    // unescape value\n                    if (jQuery.type( value ) === 'string') {\n                        value = value.replace(/\\/\\//g, '/');\n                    }\n                    \n                    // Attach popup menu?\n                    var id = '';\n                    var cls = '';\n                    if (column.attach_popup) {\n                        id = 'grid-' + i + '-popup';\n                        cls = 'menubutton';\n                        if (link != '') {\n                            cls += ' split';\n                        }\n                        cls += ' popup';\n                    }\n                    \n                    // Check for row wrapping\n                    tmpl += '<td ' + nowrap + '>';\n                \n                    // Link\n                    if (link) {\n                        if (options.operations.length != 0) {\n                            tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\" style=\"float: left;\">';\n                        }\n                        tmpl += '<a class=\"menubutton-label use-target\" target=\"' + target + '\" href=\"' + link + '\" onclick=\"return false;\">' + value + '</a>';\n                        if (options.operations.length != 0) {\n                            tmpl += '</div>';\n                        }\n                    } else {\n                        tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\"><label id=\"' + column.label_id_prefix + encoded_id + '\" for=\"' + encoded_id + '\">' + (value || '') + '</label></div>';\n                    }\n                    tmpl += '</td>';\n                }\n            }\n            tmpl += '</tr>';\n            num_rows_rendered++;\n        }\n        return tmpl;\n    },\n\n    // template\n    footer: function(options) {\n    \n        // create template string\n        var tmpl = '';\n        \n        // paging\n        if (options.use_paging && options.num_pages > 1) {\n            // get configuration\n            var num_page_links      = options.num_page_links;\n            var cur_page_num        = options.cur_page_num;\n            var num_pages           = options.num_pages;\n            \n            // First pass on min page.\n            var page_link_range     = num_page_links / 2;\n            var min_page            = cur_page_num - page_link_range\n            var min_offset          = 0;\n            if (min_page <= 0) {\n                // Min page is too low.\n                min_page = 1;\n                min_offset = page_link_range - ( cur_page_num - min_page );\n            }\n            \n            // Set max page.\n            var max_range = page_link_range + min_offset;\n            var max_page = cur_page_num + max_range;\n            if (max_page <= num_pages) {\n                // Max page is fine.\n                max_offset = 0;\n            } else {\n                // Max page is too high.\n                max_page = num_pages;\n                // +1 to account for the +1 in the loop below.\n                max_offset = max_range - ( max_page + 1 - cur_page_num );\n            }\n            \n            // Second and final pass on min page to add any unused\n            // offset from max to min.\n            if (max_offset != 0) {\n                min_page -= max_offset\n                if (min_page < 1) {\n                    min_page = 1\n                }\n            }\n            \n            // template header\n            tmpl += '<tr id=\"page-links-row\">';\n            if (options.show_item_checkboxes) {\n                tmpl += '<td></td>';\n            }\n            tmpl +=     '<td colspan=\"100\">' +\n                            '<span id=\"page-link-container\">' +\n                                'Page:';\n            \n            if (min_page > 1) {\n                tmpl +=         '<span class=\"page-link\" id=\"page-link-1\"><a href=\"javascript:void(0);\" page_num=\"1\" onclick=\"return false;\">1</a></span> ...';\n            }\n            \n            // create page urls\n            for (var page_index = min_page; page_index < max_page + 1; page_index++) {\n                \n                if (page_index == options.cur_page_num) {\n                    tmpl +=     '<span class=\"page-link inactive-link\" id=\"page-link-' + page_index + '\">' + page_index + '</span>';\n                } else {\n                    tmpl +=     '<span class=\"page-link\" id=\"page-link-' + page_index + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + page_index + '\">' + page_index + '</a></span>';\n                }\n            }\n            \n            // show last page\n            if (max_page < num_pages) {\n                    tmpl +=     '...' +\n                                '<span class=\"page-link\" id=\"page-link-' + num_pages + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + num_pages + '\">' + num_pages + '</a></span>';\n            }\n            tmpl +=         '</span>';\n            \n            // Show all link\n            tmpl +=         '<span class=\"page-link\" id=\"show-all-link-span\"> | <a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"all\">Show All</a></span>' +\n                        '</td>' +\n                    '</tr>';\n        }\n        \n        // Grid operations for multiple items.\n        if (options.show_item_checkboxes) {\n            // start template\n            tmpl += '<tr>' +\n                        '<input type=\"hidden\" id=\"operation\" name=\"operation\" value=\"\">' +\n                        '<td></td>' +\n                        '<td colspan=\"100\">' +\n                            'For <span class=\"grid-selected-count\"></span> selected items: ';\n            \n            // configure buttons for operations\n            for (i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.allow_multiple) {\n                    tmpl += '<input type=\"button\" value=\"' + operation.label + '\" class=\"operation-button action-button\">&nbsp;';\n                }\n            }\n            \n            // finalize template\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n    \n        // count global operations\n        var found_global = false;\n        for (i in options.operations) {\n            if (options.operations[i].global_operation) {\n                found_global = true;\n                break;\n            }\n        }\n    \n        // add global operations\n        if (found_global) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">';\n            for (i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.global_operation) {\n                    tmpl += '<a class=\"action-button\" href=\"' + operation.global_operation + '\">' + operation.label + '</a>';\n                }\n            }\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n        \n        // add legend\n        if (options.legend) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">' + options.legend + '</td>' +\n                    '</tr>';\n        }\n        \n        // return\n        return tmpl;\n    },\n        \n    // template\n    message: function(options) {\n        var status = options.status == 'success' ? 'done' : options.status;\n        return  '<p>' +\n                    '<div class=\"' + status + 'message transient-message\">' + _.escape( options.message ) + '</div>' +\n                    '<div style=\"clear: both\"></div>' +\n                '</p>';\n    },\n    \n    // template\n    grid_filters: function (options) {\n    \n        // get filters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n\n        // show advanced search if flag set or if there are filters for advanced search fields\n        var advanced_search_display = 'none';\n        if (options.advanced_search) {\n            advanced_search_display = 'block';\n        }\n        \n        // identify columns with advanced filtering\n        var show_advanced_search_link = false;\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                var column_key = column.key;\n                var f_key = filters[column_key];\n                var d_key = default_filter_dict[column_key];\n                if (f_key && d_key && f_key != d_key) {\n                    advanced_search_display = 'block';\n                }\n                show_advanced_search_link = true;\n            }\n        }\n        \n        // hide standard search if advanced is shown\n        var standard_search_display = 'block';\n        if (advanced_search_display == 'block') {\n            standard_search_display = 'none';\n        }\n\n        //\n        // standard search\n        //\n        var tmpl =  '<div id=\"standard-search\" style=\"display: ' + standard_search_display + ';\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"padding: 0;\">' +\n                                    '<table>';\n        \n        // add standard filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'standard') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize standard search\n        tmpl +=                     '</table>' +\n                                '</td>' +\n                            '</tr>' +\n                            '<tr>' +\n                                '<td>';\n                \n        // show advanced search link in standard display\n        if (show_advanced_search_link) {\n            tmpl +=                 '<a href=\"\" class=\"advanced-search-toggle\">Advanced Search</a>';\n        }\n        \n        // finalize standard search display\n        tmpl +=                 '</td>' +\n                            '</tr>' +\n                        '</table>' +\n                    '</div>';\n    \n        //\n        // advanced search\n        //\n        tmpl +=     '<div id=\"advanced-search\" style=\"display: ' + advanced_search_display + '; margin-top: 5px; border: 1px solid #ccc;\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"text-align: left\" colspan=\"100\">' +\n                                    '<a href=\"\" class=\"advanced-search-toggle\">Close Advanced Search</a>' +\n                                '</td>' +\n                            '</tr>';\n        \n        // add advanced filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize advanced search template\n        tmpl +=         '</table>' +\n                    '</div>';\n\n        // return template\n        return tmpl;\n    },\n    \n    // template\n    grid_column_filter: function(options, column) {\n        \n        // collect parameters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n        var column_label = column.label;\n        var column_key = column.key;\n        if (column.filterable == 'advanced') {\n            column_label = column_label.toLowerCase();\n        }\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        if (column.filterable == 'advanced') {\n            tmpl +=         '<td align=\"left\" style=\"padding-left: 10px\">' + column_label + ':</td>';\n        }\n        tmpl +=             '<td style=\"padding-bottom: 1px;\">';\n        if (column.is_text) {\n            tmpl +=             '<form class=\"text-filter-form\" column_key=\"' + column_key + '\" action=\"' + options.url + '\" method=\"get\" >';\n            // Carry forward filtering criteria with hidden inputs.\n            for (i in options.columns) {\n                var temp_column = options.columns[i];\n                var filter_value = filters[temp_column.key];\n                if (filter_value) {\n                    if (filter_value != 'All') {\n                        if (temp_column.is_text) {\n                            filter_value = JSON.stringify( filter_value )\n                        }\n                        tmpl +=     '<input type=\"hidden\" id=\"' + temp_column.key + '\" name=\"f-' + temp_column.key + '\" value=\"' + filter_value + '\"/>';\n                    }\n                }\n            }\n            // Print current filtering criteria and links to delete.\n            tmpl +=                 '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add filters\n            var column_filter = filters[column_key];\n            if (column_filter) {\n                // identify type\n                var type = jQuery.type(column_filter);\n                \n                // single filter value\n                if (type == 'string') {\n                    if (column_filter != 'All') {\n                        // append template\n                        tmpl +=         this.filter_element(column_key, column_filter);\n                    }\n                }\n                \n                // multiple filter values\n                if (type == 'array') {\n                    for (var i in column_filter ) {\n                        // get filter\n                        var filter = column_filter[i];\n                        \n                        // copy filters and remove entry\n                        var params = column_filter;\n                        params = params.slice(i);\n\n                        // append template\n                        tmpl +=         this.filter_element(column_key, filter);\n                    }\n                }\n            }\n            \n            // close span\n            tmpl +=                 '</span>';\n            \n            // Set value, size of search input field. Minimum size is 20 characters.\n            var value = '';\n            if (column.filterable == 'standard') {\n                value = column.label.toLowerCase();\n                var size = value.length;\n                if (size < 20) {\n                    size = 20;\n                }\n                // +4 to account for space after placeholder\n                size = size + 4;\n            }\n            \n            // print input field for column\n            tmpl +=                 '<span class=\"search-box\">' +\n                                        '<input class=\"search-box-input\" id=\"input-' + column_key + '-filter\" name=\"f-' + column_key + '\" type=\"text\" placeholder=\"' + value + '\" size=\"' + size + '\"/>' +\n                                        '<button type=\"submit\" style=\"background: transparent; border: none; padding: 4px; margin: 0px;\">' +\n                                            '<i class=\"fa fa-search\"></i>' +\n                                        '</button>' +\n                                    '</span>' +\n                                '</form>';\n        } else {\n            // filter criteria\n            tmpl +=             '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add category filters\n            var seperator = false;\n            for (cf_label in options.categorical_filters[column_key]) {\n                // get category filter\n                var cf = options.categorical_filters[column_key][cf_label];\n                \n                // each filter will have only a single argument, so get that single argument\n                var cf_key = '';\n                var cf_arg = '';\n                for (key in cf) {\n                    cf_key = key;\n                    cf_arg = cf[key];\n                }\n                \n                // add seperator\n                if (seperator) {\n                    tmpl += ' | ';\n                }\n                seperator = true;\n                \n                // add category\n                var filter = filters[column_key];\n                if (filter && cf[column_key] && filter == cf_arg) {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter current-filter\">' + cf_label + '</span>';\n                } else {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter\">' +\n                                        '<a href=\"javascript:void(0);\" filter_key=\"' + cf_key + '\" filter_val=\"' + cf_arg + '\">' + cf_label + '</a>' +\n                                    '</span>';\n                }\n            }\n            tmpl +=             '</span>';\n        }\n        tmpl +=             '</td>' +\n                        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template for filter items\n    filter_element: function(filter_key, filter_value) {\n        filter_value = Utils.sanitize(filter_value);\n        return  '<span class=\"text-filter-val\">' + filter_value +\n                    '<a href=\"javascript:void(0);\" filter_key=\"' + filter_key + '\" filter_val=\"' + filter_value + '\">' +\n                        '<i class=\"fa fa-times\" style=\"padding-left: 5px; padding-bottom: 6px;\"/>' +\n                    '</a>' +\n                '</span>';\n\n    }\n};\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-template.js","/** Renders the color picker used e.g. in the tool form **/\ndefine(['utils/utils'], function( Utils ) {\n    return Backbone.View.extend({\n        colors: {\n            standard: ['c00000','ff0000','ffc000','ffff00','92d050','00b050','00b0f0','0070c0','002060','7030a0'],\n            base    : ['ffffff','000000','eeece1','1f497d','4f81bd','c0504d','9bbb59','8064a2','4bacc6','f79646'],\n            theme   :[['f2f2f2','7f7f7f','ddd9c3','c6d9f0','dbe5f1','f2dcdb','ebf1dd','e5e0ec','dbeef3','fdeada'],\n                      ['d8d8d8','595959','c4bd97','8db3e2','b8cce4','e5b9b7','d7e3bc','ccc1d9','b7dde8','fbd5b5'],\n                      ['bfbfbf','3f3f3f','938953','548dd4','95b3d7','d99694','c3d69b','b2a2c7','92cddc','fac08f'],\n                      ['a5a5a5','262626','494429','17365d','366092','953734','76923c','5f497a','31859b','e36c09'],\n                      ['7f7f7e','0c0c0c','1d1b10','0f243e','244061','632423','4f6128','3f3151','205867','974806']]\n        },\n\n        initialize : function( options ) {\n            this.options = Utils.merge( options, {} );\n            this.setElement( this._template() );\n            this.$panel = this.$( '.ui-color-picker-panel' );\n            this.$view = this.$( '.ui-color-picker-view' );\n            this.$value = this.$( '.ui-color-picker-value' );\n            this.$header = this.$( '.ui-color-picker-header' );\n            this._build();\n            this.visible = false;\n            this.value( this.options.value );\n            this.$boxes = this.$( '.ui-color-picker-box' );\n            var self = this;\n            this.$boxes.on( 'click', function() {\n                self.value( $( this ).css( 'background-color' ) );\n                self.$header.trigger( 'click' );\n            } );\n            this.$header.on( 'click', function() {\n                self.visible = !self.visible;\n                if ( self.visible ) {\n                    self.$view.fadeIn( 'fast' );\n                } else {\n                    self.$view.fadeOut( 'fast' );\n                }\n            } );\n        },\n\n        /** Get/set value */\n        value : function ( new_val ) {\n            if ( new_val !== undefined && new_val !== null ) {\n                this.$value.css( 'background-color', new_val );\n                this.$( '.ui-color-picker-box' ).empty();\n                this.$( this._getValue() ).html( this._templateCheck() );\n                this.options.onchange && this.options.onchange( new_val );\n            }\n            return this._getValue();\n        },\n\n        /** Get value from dom */\n        _getValue: function() {\n            var rgb = this.$value.css( 'background-color' );\n            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n            if ( rgb ) {\n                function hex( x ) {\n                    return ( '0' + parseInt( x ).toString( 16 ) ).slice( -2 );\n                }\n                return '#' + hex( rgb[ 1] ) + hex( rgb[ 2 ] ) + hex( rgb[ 3 ] );\n            } else {\n                return null;\n            }\n        },\n\n        /** Build color panel */\n        _build: function() {\n            this._content( { colors : this.colors.base } );\n            for ( var i in this.colors.theme ) {\n                var line_def = {};\n                if ( i == 0 ) {\n                    line_def[ 'bottom' ] = true;\n                } else if ( i != this.colors.theme.length - 1 ) {\n                    line_def[ 'top' ]     = true;\n                    line_def[ 'bottom' ]  = true;\n                } else {\n                    line_def[ 'top' ]     = true;\n                }\n                line_def[ 'colors' ] = this.colors.theme[ i ];\n                this._content( line_def );\n            }\n            this._content( { colors : this.colors.standard } );\n        },\n\n        /** Create content */\n        _content: function( options ) {\n            var colors   = options.colors;\n            var $content = $( this._templateContent() );\n            var $line = $content.find( '.line' );\n            this.$panel.append( $content );\n            for ( var i in colors ) {\n                var $box = $( this._templateBox( colors[ i ] ) );\n                if ( options.top ) {\n                    $box.css( 'border-top', 'none' );\n                    $box.css( 'border-top-left-radius', '0px' );\n                    $box.css( 'border-top-right-radius', '0px' );\n                }\n                if ( options.bottom ) {\n                    $box.css( 'border-bottom', 'none' );\n                    $box.css( 'border-bottom-left-radius', '0px' );\n                    $box.css( 'border-bottom-right-radius', '0px' );\n                }\n                $line.append( $box );\n            }\n            return $content;\n        },\n\n        /** Check icon */\n        _templateCheck: function() {\n            return  '<div class=\"ui-color-picker-check fa fa-check\"/>';\n        },\n\n        /** Content template */\n        _templateContent: function() {\n            return  '<div class=\"ui-color-picker-content\">' +\n                        '<div class=\"line\"/>' +\n                    '</div>';\n        },\n\n        /** Box template */\n        _templateBox: function( color ) {\n            return '<div id=\"' + color + '\" class=\"ui-color-picker-box\" style=\"background-color: #' + color + ';\"/>';\n        },\n\n        /** Main template */\n        _template: function() {\n            return  '<div class=\"ui-color-picker\">' +\n                        '<div class=\"ui-color-picker-header\">' +\n                            '<div class=\"ui-color-picker-value\"/>' +\n                            '<div class=\"ui-color-picker-label\">Select a color</div>' +\n                        '</div>' +\n                        '<div class=\"ui-color-picker-view ui-input\">' +\n                            '<div class=\"ui-color-picker-panel\"/>' +\n                        '</div>'\n                    '</div>';\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-color-picker.js","/** This class creates/wraps a drill down element. */\ndefine([ 'utils/utils', 'mvc/ui/ui-options' ], function( Utils, Options ) {\n\nvar View = Options.BaseIcons.extend({\n    initialize: function( options ) {\n        options.type     = options.display || 'checkbox';\n        options.multiple = ( options.type == 'checkbox' );\n        Options.BaseIcons.prototype.initialize.call( this, options );\n    },\n\n    /** Set states for selected values */\n    _setValue: function ( new_value ) {\n        Options.BaseIcons.prototype._setValue.call( this, new_value );\n        if ( new_value !== undefined && new_value !== null && this.header_index ) {\n            var self = this;\n            var values = $.isArray( new_value ) ? new_value : [ new_value ];\n            _.each( values, function( v ) {\n                var list = self.header_index[ v ];\n                _.each( list, function( element ) {\n                    self._setState( element, true );\n                });\n            });\n        }\n    },\n\n    /** Expand/collapse a sub group */\n    _setState: function ( header_id, is_expanded ) {\n        var $button = this.$( '.button-' + header_id );\n        var $subgroup = this.$( '.subgroup-' + header_id );\n        $button.data( 'is_expanded', is_expanded );\n        if ( is_expanded ) {\n            $subgroup.show();\n            $button.removeClass( 'fa-plus-square' ).addClass( 'fa-minus-square' );\n        } else {\n            $subgroup.hide();\n            $button.removeClass( 'fa-minus-square' ).addClass( 'fa-plus-square' );\n        }\n    },\n\n    /** Template to create options tree */\n    _templateOptions: function() {\n        var self = this;\n        this.header_index = {};\n\n        // attach event handler\n        function attach( $el, header_id ) {\n            var $button = $el.find( '.button-' + header_id );\n            $button.on( 'click', function() {\n                self._setState( header_id, !$button.data( 'is_expanded' ) );\n            });\n        }\n\n        // recursive function which iterates through options\n        function iterate ( $tmpl, options, header ) {\n            header = header || [];\n            for ( i in options ) {\n                var level = options[ i ];\n                var has_options = level.options && level.options.length > 0;\n                var new_header = header.slice( 0 );\n                self.header_index[ level.value ] = new_header.slice( 0 );\n                var $group = $( '<div/>' );\n                if ( has_options ) {\n                    var header_id = Utils.uid();\n                    var $button = $( '<span/>' ).addClass( 'button-' + header_id ).addClass( 'ui-drilldown-button fa fa-plus-square' );\n                    var $subgroup = $( '<div/>' ).addClass( 'subgroup-' + header_id ).addClass( 'ui-drilldown-subgroup' );\n                    $group.append( $( '<div/>' )\n                                        .append( $button )\n                                        .append( self._templateOption( { label: level.name, value: level.value } ) ) );\n                    new_header.push( header_id );\n                    iterate ( $subgroup, level.options, new_header );\n                    $group.append( $subgroup );\n                    attach( $group, header_id );\n                } else {\n                    $group.append( self._templateOption( { label: level.name, value: level.value } ) );\n                }\n                $tmpl.append( $group );\n            }\n        }\n\n        // iterate through options and create dom\n        var $tmpl = $( '<div/>' );\n        iterate( $tmpl, this.model.get( 'data' ) );\n        return $tmpl;\n    },\n\n    /** Template for drill down view */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list drilldown-container' ).attr( 'id', this.model.id );\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-drilldown.js","define([ 'utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-select-default' ], function( Utils, Ui, Select ) {\n\n/** Batch mode variations */\nvar Batch = { DISABLED: 'disabled', ENABLED: 'enabled', LINKED: 'linked' };\n\n/** List of available content selectors options */\nvar Configurations = {\n    data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.LINKED     },\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.LINKED     } ],\n    data_multiple: [\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.DISABLED   },\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collections',  multiple: true,    batch: Batch.DISABLED   } ],\n    data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   } ],\n    workflow_data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   } ],\n    workflow_data_multiple: [\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.DISABLED   } ],\n    workflow_data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   } ],\n    module_data: [\n        { src: 'hda',  icon: 'fa-file-o',   tooltip: 'Single dataset',       multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hda',  icon: 'fa-files-o',  tooltip: 'Multiple datasets',    multiple: true,    batch: Batch.ENABLED    } ],\n    module_data_collection: [\n        { src: 'hdca', icon: 'fa-folder-o', tooltip: 'Dataset collection',   multiple: false,   batch: Batch.DISABLED   },\n        { src: 'hdca', icon: 'fa-folder',   tooltip: 'Multiple collections', multiple: true,    batch: Batch.ENABLED    } ]\n};\n\n/** View for hda and hdca content selector ui elements */\nvar View = Backbone.View.extend({\n    initialize : function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model({\n            src_labels  : { 'hda' : 'dataset', 'hdca': 'dataset collection' },\n            pagelimit   : 100,\n            statustimer : 1000\n        }).set( options );\n        this.setElement( $( '<div/>' ).addClass( 'ui-select-content' ) );\n        this.button_product = new Ui.RadioButton.View( {\n            value       : 'false',\n            data        : [ { icon: 'fa fa-chain', value: 'false',\n                              tooltip: 'Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads.' },\n                            { icon: 'fa fa-chain-broken',  value: 'true',\n                              tooltip: 'Unlinked dataset inputs will be run against *all* other inputs.' } ] } );\n        var $batch_div = $( '<div/>' ).addClass( 'ui-form-info' )\n                            .append( $( '<i/>' ).addClass( 'fa fa-sitemap' ) )\n                            .append( $( '<span/>' ).html( 'This is a batch mode input field. Separate jobs will be triggered for each dataset selection.' ) );\n        this.$batch = {\n            linked  : $batch_div.clone(),\n            enabled : $batch_div.clone().append( $( '<div/>' )\n                                                    .append( $( '<div/>' ).addClass( 'ui-form-title' ).html( 'Batch options:' ) )\n                                                    .append( this.button_product.$el ) )\n                                                    .append( $( '<div/>' ).css( 'clear', 'both' ) )\n        };\n\n        // add drag-drop event handlers\n        this.$el.on( 'dragenter', function( e ) { this.lastenter = e.target; self.$el.addClass( 'ui-dragover' ); } )\n                .on( 'dragover',  function( e ) { e.preventDefault(); } )\n                .on( 'dragleave', function( e ) { this.lastenter === e.target && self.$el.removeClass( 'ui-dragover' ); } )\n                .on( 'drop',      function( e ) { self._handleDrop( e ); } );\n\n        // track current history elements\n        this.history = {};\n\n        // add listeners\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:current', this._changeCurrent, this );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:type change:optional change:multiple change:extensions', this._changeType, this );\n        this.render();\n\n        // add change event\n        this.on( 'change', function() { options.onchange && options.onchange( self.value() ) } );\n    },\n\n    render: function() {\n        this._changeType();\n        this._changeValue();\n        this._changeWait();\n    },\n\n    /** Indicate that select fields are being updated */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Indicate that the options update has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Update data representing selectable options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    /** Return the currently selected dataset values */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        var current = this.model.get( 'current' );\n        if ( this.config[ current ] ) {\n            var id_list = this.fields[ current ].value();\n            if (id_list !== null) {\n                id_list = $.isArray( id_list ) ? id_list : [ id_list ];\n                if ( id_list.length > 0 ) {\n                    var result = this._batch( { values: [] } );\n                    for ( var i in id_list ) {\n                        var details = this.history[ id_list[ i ] + '_' + this.config[ current ].src ];\n                        if ( details ) {\n                            result.values.push( details );\n                        } else {\n                            Galaxy.emit.debug( 'ui-select-content::value()', 'Requested details not found for \\'' + id_list[ i ] + '\\'.'  );\n                            return null;\n                        }\n                    }\n                    result.values.sort( function( a, b ) { return a.hid - b.hid } );\n                    return result;\n                }\n            }\n        } else {\n            Galaxy.emit.debug( 'ui-select-content::value()', 'Invalid value/source \\'' + new_value + '\\'.'  );\n        }\n        return null;\n    },\n\n    /** Change of current select field */\n    _changeCurrent: function() {\n        var self = this;\n        _.each( this.fields, function( field, i ) {\n            if ( self.model.get( 'current' ) == i ) {\n                field.$el.show();\n                _.each( self.$batch, function( $batchfield, batchmode ) {\n                    $batchfield[ self.config[ i ].batch == batchmode ? 'show' : 'hide' ]();\n                });\n                self.button_type.value( i );\n            } else {\n                field.$el.hide();\n            }\n        });\n    },\n\n    /** Change of type */\n    _changeType: function() {\n        var self = this;\n\n        // identify selector type identifier i.e. [ flavor ]_[ type ]_[ multiple ]\n        var config_id = ( this.model.get( 'flavor' ) ? this.model.get( 'flavor' ) + '_' : '' ) +\n                        String( this.model.get( 'type' ) ) + ( this.model.get( 'multiple' ) ? '_multiple' : '' );\n        if ( Configurations[ config_id ] ) {\n            this.config = Configurations[ config_id ];\n        } else {\n            this.config = Configurations[ 'data' ];\n            Galaxy.emit.debug( 'ui-select-content::_changeType()', 'Invalid configuration/type id \\'' + config_id + '\\'.'  );\n        }\n\n        // prepare extension component of error message\n        var data = self.model.get( 'data' );\n        var extensions = Utils.textify( this.model.get( 'extensions' ) );\n        var src_labels = this.model.get( 'src_labels' );\n\n        // build views\n        this.fields = [];\n        this.button_data = [];\n        _.each( this.config, function( c, i ) {\n            self.button_data.push({\n                value   : i,\n                icon    : c.icon,\n                tooltip : c.tooltip\n            });\n            self.fields.push(\n                new Select.View({\n                    optional    : self.model.get( 'optional' ),\n                    multiple    : c.multiple,\n                    searchable  : !c.multiple || ( data && data[ c.src ] && data[ c.src ].length > self.model.get( 'pagelimit' ) ),\n                    selectall   : false,\n                    error_text  : 'No ' + ( extensions ? extensions + ' ' : '' ) + ( src_labels[ c.src ] || 'content' ) + ' available.',\n                    onchange    : function() {\n                        self.trigger( 'change' );\n                    }\n                })\n            );\n        });\n        this.button_type = new Ui.RadioButton.View({\n            value   : this.model.get( 'current' ),\n            data    : this.button_data,\n            onchange: function( value ) {\n                self.model.set( 'current', value );\n                self.trigger( 'change' );\n            }\n        });\n\n        // append views\n        this.$el.empty();\n        var button_width = 0;\n        if ( this.fields.length > 1 ) {\n            this.$el.append( this.button_type.$el );\n            button_width = Math.max( 0, this.fields.length * 36 ) + 'px';\n        }\n        _.each( this.fields, function( field ) {\n            self.$el.append( field.$el.css( { 'margin-left': button_width } ) );\n        });\n        _.each( this.$batch, function( $batchfield, batchmode ) {\n            self.$el.append( $batchfield.css( { 'margin-left': button_width } ) );\n        });\n        this.model.set( 'current', 0 );\n        this._changeCurrent();\n        this._changeData();\n    },\n\n    /** Change of wait flag */\n    _changeWait: function() {\n        var self = this;\n        _.each( this.fields, function( field ) { field[ self.model.get( 'wait' ) ? 'wait' : 'unwait' ]() } );\n    },\n\n    /** Change of available options */\n    _changeData: function() {\n        var options = this.model.get( 'data' );\n        var self = this;\n        var select_options = {};\n        _.each( options, function( items, src ) {\n            select_options[ src ] = [];\n            _.each( items, function( item ) {\n                select_options[ src ].push({\n                    hid  : item.hid,\n                    keep : item.keep,\n                    label: item.hid + ': ' + item.name,\n                    value: item.id,\n                    tags : item.tags\n                });\n                self.history[ item.id + '_' + src ] = item;\n            });\n        });\n        _.each( this.config, function( c, i ) {\n            select_options[ c.src ] && self.fields[ i ].add( select_options[ c.src ], function( a, b ) { return b.hid - a.hid } );\n        });\n    },\n\n    /** Change of incoming value */\n    _changeValue: function () {\n        var new_value = this.model.get( 'value' );\n        if ( new_value && new_value.values && new_value.values.length > 0 ) {\n            // create list with content ids\n            var list = [];\n            _.each( new_value.values, function( value ) {\n                list.push( value.id );\n            });\n            // sniff first suitable field type from config list\n            var src = new_value.values[ 0 ].src;\n            var multiple = new_value.values.length > 1;\n            for( var i = 0; i < this.config.length; i++ ) {\n                var field = this.fields[ i ];\n                var c = this.config[ i ];\n                if ( c.src == src && [ multiple, true ].indexOf( c.multiple ) !== -1 ) {\n                    this.model.set( 'current', i );\n                    field.value( list );\n                    break;\n                }\n            }\n        } else {\n            _.each( this.fields, function( field ) {\n                field.value( null );\n            });\n        }\n    },\n\n    /** Handles drop events e.g. from history panel */\n    _handleDrop: function( ev ) {\n        try {\n            var data      = this.model.get( 'data' );\n            var current   = this.model.get( 'current' );\n            var config    = this.config[ current ];\n            var field     = this.fields[ current ];\n            var drop_data = JSON.parse( ev.originalEvent.dataTransfer.getData( 'text' ) )[ 0 ];\n            var new_id    = drop_data.id;\n            var new_src   = drop_data.history_content_type == 'dataset' ? 'hda' : 'hdca';\n            var new_value = { id: new_id, src: new_src };\n            if ( data && _.findWhere( data[ new_src ], new_value ) ) {\n                if ( config.src == new_src ) {\n                    var current_value = field.value();\n                    if ( current_value && config.multiple ) {\n                        if ( current_value.indexOf( new_id ) == -1 ) {\n                            current_value.push( new_id );\n                        }\n                    } else {\n                        current_value = new_id;\n                    }\n                    field.value( current_value );\n                } else {\n                    this.model.set( 'value', { values: [ new_value ] } );\n                    this.model.trigger( 'change:value' );\n                }\n                this.trigger( 'change' );\n                this._handleDropStatus( 'success' );\n            } else {\n                this._handleDropStatus( 'danger' );\n            }\n        } catch( e ) {\n            this._handleDropStatus( 'danger' );\n        }\n    },\n\n    /** Highlight drag result */\n    _handleDropStatus: function( status ) {\n        var self = this;\n        this.$el.removeClass( 'ui-dragover' ).addClass( 'ui-dragover-' + status );\n        setTimeout( function() { self.$el.removeClass( 'ui-dragover-' + status ) }, this.model.get( 'statustimer' ) );\n    },\n\n    /** Assists in identifying the batch mode */\n    _batch: function( result ) {\n        result[ 'batch' ] = false;\n        var current = this.model.get( 'current' );\n        var config = this.config[ current ];\n        if ( config.src == 'hdca' && !config.multiple ) {\n            var hdca = this.history[ this.fields[ current ].value() + '_hdca' ];\n            if ( hdca && hdca.map_over_type ) {\n                result[ 'batch' ] = true;\n            }\n        }\n        if ( config.batch == Batch.LINKED || config.batch == Batch.ENABLED ) {\n            result[ 'batch' ] = true;\n            if ( config.batch == Batch.ENABLED && this.button_product.value() === 'true' ) {\n                result[ 'product' ] = true;\n            }\n        }\n        return result;\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-content.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-list'],\n        function(Utils, List) {\n\n/**\n * FTP file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // create ui-list view to keep track of selected ftp files\n        this.ftpfile_list = new List.View({\n            name        : 'file',\n            optional    : options.optional,\n            multiple    : options.multiple,\n            onchange    : function() {\n                options.onchange && options.onchange(self.value());\n            }\n        });\n\n        // create elements\n        this.setElement(this.ftpfile_list.$el);\n\n        // initial fetch of ftps\n        Utils.get({\n            url     : Galaxy.root + 'api/remote_files',\n            success : function(response) {\n                var data = [];\n                for (var i in response) {\n                    data.push({\n                        value   : response[i]['path'],\n                        label   : response[i]['path']\n                    });\n                }\n                self.ftpfile_list.update(data);\n            }\n        });\n    },\n\n    /** Return/Set currently selected ftp datasets */\n    value: function(val) {\n        return this.ftpfile_list.value(val);\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-ftp.js","// dependencies\ndefine(['utils/utils', 'mvc/ui/ui-misc', 'mvc/ui/ui-table', 'mvc/ui/ui-list'],\n        function(Utils, Ui, Table, List) {\n\n// collection of libraries\nvar Libraries = Backbone.Collection.extend({\n    url: Galaxy.root + 'api/libraries?deleted=false'\n});\n\n// collection of dataset\nvar LibraryDatasets = Backbone.Collection.extend({\n    initialize: function() {\n        var self = this;\n        this.config = new Backbone.Model({ library_id: null });\n        this.config.on('change', function() {\n            self.fetch({ reset: true });\n        });\n    },\n    url: function() {\n        return Galaxy.root + 'api/libraries/' + this.config.get('library_id') + '/contents';\n    }\n});\n\n// hda/hdca content selector ui element\nvar View = Backbone.View.extend({\n    // initialize\n    initialize : function(options) {\n        // link this\n        var self = this;\n\n        // collections\n        this.libraries  = new Libraries();\n        this.datasets   = new LibraryDatasets();\n\n        // link app and options\n        this.options = options;\n\n        // select field for the library\n        // TODO: Remove this once the library API supports searching for library datasets\n        this.library_select = new Ui.Select.View({\n            onchange    : function(value) {\n                self.datasets.config.set('library_id', value);\n            }\n        });\n\n        // create ui-list view to keep track of selected data libraries\n        this.dataset_list = new List.View({\n            name        : 'dataset',\n            optional    : options.optional,\n            multiple    : options.multiple,\n            onchange    : function() {\n                self.trigger('change');\n            }\n        });\n\n        // add reset handler for fetched libraries\n        this.libraries.on('reset', function() {\n            var data = [];\n            self.libraries.each(function(model) {\n                data.push({\n                    value   : model.id,\n                    label   : model.get('name')\n                });\n            });\n            self.library_select.update(data);\n        });\n\n        // add reset handler for fetched library datasets\n        this.datasets.on('reset', function() {\n            var data = [];\n            var library_current = self.library_select.text();\n            if (library_current !== null) {\n                self.datasets.each(function(model) {\n                    if (model.get('type') === 'file') {\n                        data.push({\n                            value   : model.id,\n                            label   : model.get('name')\n                        });\n                    }\n                });\n            }\n            self.dataset_list.update(data);\n        });\n\n        // add change event. fires on trigger\n        this.on('change', function() {\n            options.onchange && options.onchange(self.value());\n        });\n\n        // create elements\n        this.setElement(this._template());\n        this.$('.library-select').append(this.library_select.$el);\n        this.$el.append(this.dataset_list.$el);\n\n        // initial fetch of libraries\n        this.libraries.fetch({\n            reset: true,\n            success: function() {\n                self.library_select.trigger('change');\n                if (self.options.value !== undefined) {\n                    self.value(self.options.value);\n                }\n            }\n        });\n    },\n\n    /** Return/Set currently selected library datasets */\n    value: function(val) {\n        return this.dataset_list.value(val);\n    },\n\n    /** Template */\n    _template: function() {\n        return  '<div class=\"ui-select-library\">' +\n                    '<div class=\"library ui-margin-bottom\">' +\n                        '<span class=\"library-title\">Select Library</span>' +\n                        '<span class=\"library-select\"/>' +\n                    '</div>' +\n                '</div>';\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-library.js","define([ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model({\n                id       : Utils.uid(),\n                min      : null,\n                max      : null,\n                step     : null,\n                precise  : false,\n                split    : 10000,\n                value    : null,\n                onchange : function(){}\n            }).set( options );\n\n            // create new element\n            this.setElement( this._template() );\n            this.$el.attr( 'id', this.model.id );\n            this.$text   = this.$( '.ui-form-slider-text' );\n            this.$slider = this.$( '.ui-form-slider-element' );\n\n            // add text field event\n            var pressed = [];\n            this.$text.on( 'change', function () {\n                self.value( $( this ).val() );\n            }).on( 'keyup', function( e ) {\n                pressed[e.which] = false;\n            }).on( 'keydown', function ( e ) {\n                var v = e.which;\n                pressed[ v ] = true;\n                if ( self.model.get( 'is_workflow' ) && pressed[ 16 ] && v == 52 ) {\n                    self.value( '$' );\n                    event.preventDefault();\n                } else if (!( v == 8 || v == 9 || v == 13 || v == 37 || v == 39 || ( v >= 48 && v <= 57 && !pressed[ 16 ] ) || ( v >= 96 && v <= 105 )\n                    || ( ( v == 190 || v == 110 ) && $( this ).val().indexOf( '.' ) == -1 && self.model.get( 'precise' ) )\n                    || ( ( v == 189 || v == 109 ) && $( this ).val().indexOf( '-' ) == -1 )\n                    || self._isParameter( $( this ).val() )\n                    || pressed[ 91 ] || pressed[ 17 ] ) ) {\n                    event.preventDefault();\n                }\n            });\n\n            // build slider, cannot be rebuild in render\n            var opts = this.model.attributes;\n            this.has_slider = opts.max !== null && opts.min !== null && opts.max > opts.min;\n            var step = opts.step;\n            if ( !step ) {\n                if ( opts.precise && this.has_slider ) {\n                    step = ( opts.max - opts.min ) / opts.split;\n                } else {\n                    step = 1.0;\n                }\n            }\n            if ( this.has_slider ) {\n                this.$text.addClass( 'ui-form-slider-left' );\n                this.$slider.slider( { min: opts.min, max: opts.max, step: step } )\n                            .on( 'slide', function ( event, ui ) { self.value( ui.value ) } );\n            } else {\n                this.$slider.hide();\n            }\n\n            // add listeners\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var value = this.model.get( 'value' );\n            this.has_slider && this.$slider.slider( 'value', value );\n            value !== this.$text.val() && this.$text.val( value );\n        },\n\n        /** Set and return the current value */\n        value : function ( new_val ) {\n            var options = this.model.attributes;\n            if ( new_val !== undefined ) {\n                if ( new_val !== null && new_val !== '' && !this._isParameter( new_val ) ) {\n                    isNaN( new_val ) && ( new_val = 0 );\n                    !options.precise && ( new_val = Math.round( new_val ) );\n                    options.max !== null && ( new_val = Math.min( new_val, options.max ) );\n                    options.min !== null && ( new_val = Math.max( new_val, options.min ) );\n                }\n                this.model.set( 'value', new_val );\n                this.model.trigger( 'change' );\n                options.onchange( new_val );\n            }\n            return this.model.get( 'value' );\n        },\n\n        /** Return true if the field contains a workflow parameter i.e. $('name') */\n        _isParameter: function( value ) {\n            return this.model.get( 'is_workflow' ) && String( value ).substring( 0, 1 ) === '$';\n        },\n\n        /** Slider template */\n        _template: function() {\n            return  '<div class=\"ui-form-slider\">' +\n                        '<input class=\"ui-form-slider-text\" type=\"text\"/>' +\n                        '<div class=\"ui-form-slider-element\"/>' +\n                    '</div>';\n        }\n    });\n\n    return {\n        View : View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-slider.js","var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    QUERY_STRING = require( 'utils/query-string-parsing' ),\n    Ui = require( 'mvc/ui/ui-misc' );\n\nvar Router = Backbone.Router.extend({\n    // TODO: not many client routes at this point - fill and remove from server.\n    // since we're at root here, this may be the last to be routed entirely on the client.\n    initialize : function( page, options ){\n        this.page = page;\n        this.options = options;\n    },\n\n    /** helper to push a new navigation state */\n    push: function( url, data ) {\n        data = data || {};\n        data.__identifer = Math.random().toString( 36 ).substr( 2 );\n        if ( !$.isEmptyObject( data ) ) {\n            url += url.indexOf( '?' ) == -1 ? '?' : '&';\n            url += $.param( data , true );\n        }\n        Galaxy.params = {};\n        this.navigate( url, { 'trigger': true } );\n    },\n\n    /** override to parse query string into obj and send to each route */\n    execute: function( callback, args, name ){\n        Galaxy.debug( 'router execute:', callback, args, name );\n        var queryObj = QUERY_STRING.parse( args.pop() );\n        args.push( queryObj );\n        if( callback ){\n            if ( this.authenticate( args, name ) ) {\n                callback.apply( this, args );\n            } else {\n                this.access_denied();\n            }\n        }\n    },\n\n    authenticate: function( args, name ) {\n        return true;\n    },\n\n    access_denied: function() {\n        this.page.display( new Ui.Message( { status: 'danger', message: 'You must be logged in with proper credentials to make this request.', persistent: true } ) );\n    }\n});\n\nmodule.exports = Router\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/layout/router.js","/** Generic form view */\ndefine( [ 'mvc/form/form-view', 'mvc/ui/ui-misc' ], function( Form, Ui ) {\n\n    var View = Backbone.View.extend({\n\n        initialize: function( options ) {\n            this.model = new Backbone.Model( options );\n            this.url = this.model.get( 'url' );\n            this.redirect = this.model.get( 'redirect' );\n            this.setElement( '<div/>' );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            $.ajax({\n                url     : Galaxy.root + this.url,\n                type    : 'GET'\n            }).done( function( response ) {\n                var options = $.extend( {}, self.model.attributes, response );\n                var form = new Form({\n                    title  : options.title,\n                    message: options.message,\n                    status : options.status,\n                    icon   : options.icon,\n                    inputs : options.inputs,\n                    operations: {\n                        'submit': new Ui.ButtonIcon({\n                            tooltip  : options.submit_tooltip,\n                            title    : options.submit_title || 'Save settings',\n                            icon     : options.submit_icon || 'fa-save',\n                            onclick  : function() { self._submit( form ) }\n                        })\n                    }\n                });\n                self.$el.empty().append( form.$el );\n            }).fail( function( response ) {\n                self.$el.empty().append( new Ui.Message({\n                    message     : 'Failed to load resource ' + self.url + '.',\n                    status      : 'danger',\n                    persistent  : true\n                }).$el );\n            });\n        },\n\n        _submit: function( form ) {\n            var self = this;\n            $.ajax( {\n                url         : Galaxy.root + self.url,\n                data        : JSON.stringify( form.data.create() ),\n                type        : 'PUT',\n                contentType : 'application/json'\n            }).done( function( response ) {\n                var success_message = { message: response.message, status: 'success', persistent: false };\n                if ( self.redirect ) {\n                    window.location = self.redirect + '?' + $.param( success_message );\n                } else {\n                    form.data.matchModel( response, function ( input, input_id ) {\n                        form.field_list[ input_id ].value( input.value );\n                    });\n                    form.message.update( success_message );\n                }\n            }).fail( function( response ) {\n                form.message.update( { message: response.responseJSON.err_msg, status: 'danger', persistent: false } );\n            });\n        }\n    });\n\n    return {\n        View  : View\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/form/form-wrapper.js","var _l = require( 'utils/localization' );\n\nvar AdminPanel = Backbone.View.extend({\n    initialize: function( page, options ) {\n        var self = this;\n        this.page       = page;\n        this.root       = options.root;\n        this.config     = options.config;\n        this.settings   = options.settings;\n        this.message    = options.message;\n        this.status     = options.status;\n        this.model = new Backbone.Model({\n            title   : _l( 'Administration' )\n        });\n        this.categories = new Backbone.Collection([{\n            title : 'Server',\n            items : [ {\n                title   : 'Data types registry',\n                url     : 'admin/view_datatypes_registry'\n            },{\n                title   : 'Data tables registry',\n                url     : 'admin/view_tool_data_tables'\n            },{\n                title   : 'Display applications',\n                url     : 'admin/display_applications'\n            },{\n                title   : 'Manage jobs',\n                url     : 'admin/jobs'\n            } ]\n        },{\n            title : 'Tools and Tool Shed',\n            items : [ {\n                title   : 'Search Tool Shed',\n                url     : 'admin_toolshed/browse_tool_sheds',\n                enabled : self.settings.is_tool_shed_installed\n            },{\n                title   : 'Search Tool Shed (Beta)',\n                url     : 'admin_toolshed/browse_toolsheds',\n                enabled : self.settings.is_tool_shed_installed && self.config.enable_beta_ts_api_install\n            },{\n                title   : 'Monitor installing repositories',\n                url     : 'admin_toolshed/monitor_repository_installation?installing_repository_ids=' + self.settings.installing_repository_ids,\n                enabled : self.settings.installing_repository_ids\n            },{\n                title   : 'Manage installed tools',\n                url     : 'admin_toolshed/browse_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Reset metadata',\n                url     : 'admin_toolshed/reset_metadata_on_selected_installed_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Download local tool',\n                url     : 'admin/package_tool'\n            },{\n                title   : 'Tool lineage',\n                url     : 'admin/tool_versions'\n            },{\n                title   : 'Reload a tool\\'s configuration',\n                url     : 'admin/reload_tool'\n            },{\n                title   : 'Review tool migration stages',\n                url     : 'admin/review_tool_migration_stages'\n            },{\n                title   : 'View Tool Error Logs',\n                url     : 'admin/tool_errors'\n            },{\n                title   : 'Manage Display Whitelist',\n                url     : 'admin/sanitize_whitelist'\n            },{\n                title   : 'Manage Tool Dependencies',\n                url     : 'admin/manage_tool_dependencies'\n            } ]\n        },{\n            title : 'User Management',\n            items : [ {\n                title   : 'Users',\n                url     : 'admin/users',\n                target  : '__use_router__'\n            },{\n                title   : 'Groups',\n                url     : 'admin/groups'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles',\n                target  : '__use_router__'\n            },{\n                title   : 'API keys',\n                url     : 'userskeys/all_users'\n            },{\n                title   : 'Impersonate a user',\n                url     : 'admin/impersonate',\n                enabled : self.config.allow_user_impersonation\n            } ]\n        },{\n            title : 'Data',\n            items : [ {\n                title   : 'Quotas',\n                url     : 'admin/quotas',\n                enabled : self.config.enable_quotas\n            },{\n                title   : 'Data libraries',\n                url     : 'library_admin/browse_libraries'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles'\n            },{\n                title   : 'Local data',\n                url     : 'data_manager'\n            } ]\n        },{\n            title : 'Form Definitions',\n            items : [ {\n                title   : 'Form definitions',\n                url     : 'forms/browse_form_definitions'\n            } ]\n        },{\n            title : 'Sample Tracking',\n            items : [ {\n                title   : 'Sequencers and external services',\n                url     : 'external_service/browse_external_services'\n            },{\n                title   : 'Request types',\n                url     : 'request_type/browse_request_types'\n            },{\n                title   : 'Sequencing requests',\n                url     : 'requests_admin/browse_requests'\n            },{\n                title   : 'Find samples',\n                url     : 'requests_common/find_samples?cntrller=requests_admin'\n            } ]\n        }]);\n        this.setElement( this._template() );\n    },\n\n    render : function() {\n        var self = this;\n        this.$el.empty();\n        this.categories.each( function( category ) {\n            var $section = $( self._templateSection( category.attributes ) );\n            var $entries = $section.find( '.ui-side-section-body' );\n            _.each( category.get( 'items' ), function( item ) {\n                if ( item.enabled === undefined || item.enabled ) {\n                    var $link = $( '<a/>' ).attr( { href : self.root + item.url } ).text( _l( item.title ) );\n                    if ( item.target == '__use_router__' ) {\n                        $link.on( 'click', function( e ) { e.preventDefault(); self.page.router.push( item.url ); } );\n                    } else {\n                        $link.attr( 'target', 'galaxy_main' );\n                    }\n                    $entries.append( $( '<div/>' ).addClass( 'ui-side-section-body-title' ).append( $link ) );\n                }\n            });\n            self.$el.append( $section );\n        });\n        this.page.$( '#galaxy_main' ).prop( 'src', this.root + 'admin/center?message=' + this.message + '&status=' + this.status );\n    },\n\n    _templateSection : function( options ) {\n        return [\n            '<div>',\n                '<div class=\"ui-side-section-title\">' + _l( options.title ) + '</div>',\n                '<div class=\"ui-side-section-body\"/>',\n            '</div>'\n        ].join('');\n    },\n\n    _template : function() {\n        return '<div class=\"ui-side-panel\"/>';\n    },\n\n    toString : function() { return 'adminPanel' }\n});\n\nmodule.exports = AdminPanel;\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/panels/admin-panel.js"],"sourceRoot":""}