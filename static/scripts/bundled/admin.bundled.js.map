{"version":3,"sources":["webpack:///./galaxy/scripts/apps/admin.js","webpack:///./galaxy/scripts/apps/panels/admin-panel.js","webpack:///./galaxy/scripts/mvc/grid/grid-view.js","webpack:///./galaxy/scripts/mvc/grid/grid-model.js","webpack:///./galaxy/scripts/mvc/grid/grid-template.js","webpack:///./galaxy/scripts/mvc/ui/popup-menu.js","webpack:///./galaxy/scripts/mvc/ui/ui-misc.js","webpack:///./galaxy/scripts/mvc/ui/ui-select-default.js","webpack:///./galaxy/scripts/mvc/ui/ui-buttons.js","webpack:///./galaxy/scripts/mvc/ui/ui-slider.js","webpack:///./galaxy/scripts/mvc/ui/ui-options.js","webpack:///./galaxy/scripts/mvc/ui/ui-drilldown.js","webpack:///./galaxy/scripts/layout/router.js"],"names":["jQuery","require","$","GalaxyApp","AdminPanel","GridView","Ui","Router","Page","window","app","options","bootstrapped","Galaxy","debug","params","config","AdminRouter","extend","routes","authenticate","args","name","user","id","get","show_users","page","display","url_base","root","dict_format","show_roles","_","active_view","View","Left","_l","Backbone","initialize","self","settings","message","status","model","Model","title","categories","Collection","items","url","enabled","is_tool_shed_installed","enable_beta_ts_api_install","installing_repository_ids","is_repo_installed","target","allow_user_impersonation","enable_quotas","setElement","_template","render","$el","empty","each","category","$section","_templateSection","attributes","$entries","find","item","undefined","append","addClass","attr","href","text","prop","join","toString","module","exports","ajaxSettings","traditional","Utils","GridModel","Templates","PopupMenu","grid","grid_config","add_tag_to_grid_filter","tag_name","tag_value","tag","advanced_search","is","slideToggle","add_filter_condition","url_data","filters","v","k","ajax","param","success","response","embedded","init_grid","use_panels","css","padding","overflow","handle_refresh","refresh_frames","inArray","top","currHistoryPanel","loadCurrentHistory","replace","set","html","header","body","footer","use_hide_message","setTimeout","init_grid_elements","init_grid_controls","init_refresh_on_change","off","click","submit_operation","select","keyup","set_sort_condition","submit","column_key","text_input_obj","text_input","val","parent","remove","remove_filter_condition","set_categorical_filter","on","check_all_items","checkboxes","check_count","update_checked","filter","length","change","rating","set_page","e","execute","items_length","index","button","popup","operation","_add_operation","operation_config","label","allowed","allow_popup","addItem","url_args","confirmation_text","confirm","func","preventDefault","onclick","encode_id","findItemByHtml","value","add_filter","t","filter_element","container","go_page_one","remove_filter","col_key","cur_sort","new_sort","indexOf","substring","sort_arrow","new_value","category_filter","cur_value","trim","filter_value","removeClass","new_page","page_num","parseInt","split","cur_page","children","operation_button","operation_name","number_of_checked_ids","findWhere","operations","item_ids","push","check","state","c","href_parts","href_parms_str","href_parms","toLowerCase","location","get_url_data","can_async_op","update_grid","go_to","async","$div","closest","load","method","show","type","data","error","alert","response_text","insert","json","parseJSON","hide","complete","defaults","async_ops","categorical_filters","sort_key","show_item_checkboxes","num_pages","op","key","cur_val","new_val","values","condition","condition_index","sort","pairs","get_url","tmpl","grid_header","grid_table","info_text","global_actions","show_popup","i","action","grid_filters","columns","column","visible","extra","num_rows_rendered","encoded_id","popupmenu_id","current_item_id","j","nowrap","column_settings","column_config","link","cls","attach_popup","label_id_prefix","use_paging","num_page_links","cur_page_num","page_link_range","min_page","min_offset","max_range","max_page","max_offset","page_index","allow_multiple","found_global","global_operation","legend","default_filter_dict","advanced_search_display","show_advanced_search_link","filterable","f_key","d_key","standard_search_display","grid_column_filter","column_label","is_text","temp_column","JSON","stringify","column_filter","slice","size","seperator","cf_label","cf","cf_key","cf_arg","filter_key","sanitize","$button","menu","event","_renderAndShow","clickEvent","appendTo","_getShownPosition","_setUpCloseBehavior","position","template","li","option","call","_templateOptions","map","divider","checked","menuWidth","width","x","pageX","Math","min","document","scrollLeft","max","pageY","left","closePopup","err","contents","one","splice","removeItem","findIndexByHtml","has","create","_create","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","convertLinksToOptions","$parent","selector","elem","$link","linkHref","linkTarget","confirmText","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom","Select","Slider","Options","Drilldown","Buttons","Modal","Label","tagName","listenTo","new_title","Message","persistent","fade","update","messageForDisplay","timeout","clearTimeout","fadeOut","escape","UnescapedMessage","Input","placeholder","disabled","readonly","area","color","style","events","datalist","isArray","autocomplete","source","request","_onchange","attr_name","removeAttr","Hidden","$info","$hidden","Upload","$file","$text","$wait","_readFile","file","files","reader","FileReader","onload","wait","result","readAsText","Button","ButtonDefault","ButtonIcon","ButtonCheck","ButtonMenu","ButtonLink","RadioButton","Checkbox","Radio","data2","uid","error_text","empty_text","multiple","searchable","optional","onchange","selectall","pagesize","_changeData","_changeDisabled","_changeWait","_changeVisible","_changeValue","_renderSearchable","_renderClassic","$select","_getValue","trigger","$dropdown","$resize","$resize_icon","currentY","currentHeight","height","minHeight","select2","all_button","prepend","_match","term","String","toUpperCase","order","tags","matched_tags","closeOnSelect","query","q","results","found","callback","more","formatResult","reduce","memo","_setValue","first","exists","d","unwait","enable","disable","add","sorter","keep","setOnChange","selected","a","b","isEmpty","floating","icon","wait_text","wait_cls","percentage","$icon","$title","$progress","$progress_bar","tooltip","placement","setIcon","icons","total","$menu","pull","onunload","collection","$root","float","where","submodel","suboptions","addMenu","merge","step","precise","$slider","pressed","which","_isParameter","opts","has_slider","slider","ui","isNaN","round","Base","$message","$options","_templateOption","_messageShow","BaseIcons","pair","prototype","header_index","list","element","_setState","header_id","is_expanded","$subgroup","attach","iterate","$tmpl","level","has_options","new_header","$group","QUERY_STRING","__identifer","random","substr","isEmptyObject","navigate","queryObj","parse","pop","apply","access_denied"],"mappings":"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","file":"admin.bundled.js","sourcesContent":["var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    GalaxyApp = require( 'galaxy' ).GalaxyApp,\n    AdminPanel = require( './panels/admin-panel' ),\n    GridView = require( 'mvc/grid/grid-view' ),\n    Ui = require( 'mvc/ui/ui-misc' ),\n    Router = require( 'layout/router' ),\n    Page = require( 'layout/page' );\n\nwindow.app = function app( options, bootstrapped ){\n    window.Galaxy = new GalaxyApp( options, bootstrapped );\n    Galaxy.debug( 'admin app' );\n    Galaxy.params = Galaxy.config.params;\n\n    /** Routes */\n    var AdminRouter = Router.extend({\n        routes: {\n            '(/)admin(/)users' : 'show_users',\n            '(/)admin(/)roles' : 'show_roles'\n        },\n\n        authenticate: function( args, name ) {\n            return Galaxy.user && Galaxy.user.id && Galaxy.user.get( 'is_admin' );\n        },\n\n        show_users: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/users_list', dict_format: true } ) );\n        },\n\n        show_roles: function() {\n            this.page.display( new GridView( { url_base: Galaxy.root + 'admin/roles_list', dict_format: true } ) );\n        }\n    });\n\n    $(function() {\n        _.extend( options.config, { active_view : 'admin' } );\n        Galaxy.page = new Page.View( _.extend( options, {\n            Left    : AdminPanel,\n            Router  : AdminRouter\n        } ) );\n    });\n};\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/admin.js","var _l = require( 'utils/localization' );\n\nvar AdminPanel = Backbone.View.extend({\n    initialize: function( page, options ) {\n        var self = this;\n        this.page       = page;\n        this.root       = options.root;\n        this.config     = options.config;\n        this.settings   = options.settings;\n        this.message    = options.message;\n        this.status     = options.status;\n        this.model = new Backbone.Model({\n            title   : _l( 'Administration' )\n        });\n        this.categories = new Backbone.Collection([{\n            title : 'Server',\n            items : [ {\n                title   : 'Data types registry',\n                url     : 'admin/view_datatypes_registry'\n            },{\n                title   : 'Data tables registry',\n                url     : 'admin/view_tool_data_tables'\n            },{\n                title   : 'Display applications',\n                url     : 'admin/display_applications'\n            },{\n                title   : 'Manage jobs',\n                url     : 'admin/jobs'\n            } ]\n        },{\n            title : 'Tools and Tool Shed',\n            items : [ {\n                title   : 'Search Tool Shed',\n                url     : 'admin_toolshed/browse_tool_sheds',\n                enabled : self.settings.is_tool_shed_installed\n            },{\n                title   : 'Search Tool Shed (Beta)',\n                url     : 'admin_toolshed/browse_toolsheds',\n                enabled : self.settings.is_tool_shed_installed && self.config.enable_beta_ts_api_install\n            },{\n                title   : 'Monitor installing repositories',\n                url     : 'admin_toolshed/monitor_repository_installation?installing_repository_ids=' + self.settings.installing_repository_ids,\n                enabled : self.settings.installing_repository_ids\n            },{\n                title   : 'Manage installed tools',\n                url     : 'admin_toolshed/browse_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Reset metadata',\n                url     : 'admin_toolshed/reset_metadata_on_selected_installed_repositories',\n                enabled : self.settings.is_repo_installed\n            },{\n                title   : 'Download local tool',\n                url     : 'admin/package_tool'\n            },{\n                title   : 'Tool lineage',\n                url     : 'admin/tool_versions'\n            },{\n                title   : 'Reload a tool\\'s configuration',\n                url     : 'admin/reload_tool'\n            },{\n                title   : 'Review tool migration stages',\n                url     : 'admin/review_tool_migration_stages'\n            },{\n                title   : 'View Tool Error Logs',\n                url     : 'admin/tool_errors'\n            },{\n                title   : 'Manage Display Whitelist',\n                url     : 'admin/sanitize_whitelist'\n            },{\n                title   : 'Manage Tool Dependencies',\n                url     : 'admin/manage_tool_dependencies'\n            } ]\n        },{\n            title : 'User Management',\n            items : [ {\n                title   : 'Users',\n                url     : 'admin/users',\n                target  : 'top'\n            },{\n                title   : 'Groups',\n                url     : 'admin/groups'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles'\n            },{\n                title   : 'API keys',\n                url     : 'userskeys/all_users'\n            },{\n                title   : 'Impersonate a user',\n                url     : 'admin/impersonate',\n                enabled : self.config.allow_user_impersonation\n            } ]\n        },{\n            title : 'Data',\n            items : [ {\n                title   : 'Quotas',\n                url     : 'admin/quotas',\n                enabled : self.config.enable_quotas\n            },{\n                title   : 'Data libraries',\n                url     : 'library_admin/browse_libraries'\n            },{\n                title   : 'Roles',\n                url     : 'admin/roles'\n            },{\n                title   : 'Local data',\n                url     : 'data_manager'\n            } ]\n        },{\n            title : 'Form Definitions',\n            items : [ {\n                title   : 'Form definitions',\n                url     : 'forms/browse_form_definitions'\n            } ]\n        },{\n            title : 'Sample Tracking',\n            items : [ {\n                title   : 'Sequencers and external services',\n                url     : 'external_service/browse_external_services'\n            },{\n                title   : 'Request types',\n                url     : 'request_type/browse_request_types'\n            },{\n                title   : 'Sequencing requests',\n                url     : 'requests_admin/browse_requests'\n            },{\n                title   : 'Find samples',\n                url     : 'requests_common/find_samples?cntrller=requests_admin'\n            } ]\n        }]);\n        this.setElement( this._template() );\n    },\n\n    render : function() {\n        var self = this;\n        this.$el.empty();\n        this.categories.each( function( category ) {\n            var $section = $( self._templateSection( category.attributes ) );\n            var $entries = $section.find( '.ui-side-section-body' );\n            _.each( category.get( 'items' ), function( item ) {\n                if ( item.enabled === undefined || item.enabled ) {\n                    $entries.append( $( '<div/>' ).addClass( 'ui-side-section-body-title' )\n                                                  .append( $( '<a/>' ).attr({\n                                                                href    : self.root + item.url,\n                                                                target  : item.target || 'galaxy_main' }).text( _l( item.title ) ) ) );\n                }\n            });\n            self.$el.append( $section );\n        });\n        this.page.$( '#galaxy_main' ).prop( 'src', this.root + 'admin/center?message=' + this.message + '&status=' + this.status );\n    },\n\n    _templateSection : function( options ) {\n        return [\n            '<div>',\n                '<div class=\"ui-side-section-title\">' + _l( options.title ) + '</div>',\n                '<div class=\"ui-side-section-body\"/>',\n            '</div>'\n        ].join('');\n    },\n\n    _template : function() {\n        return '<div class=\"ui-side-panel\"/>';\n    },\n\n    toString : function() { return 'adminPanel' }\n});\n\nmodule.exports = AdminPanel;\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/panels/admin-panel.js","// This is necessary so that, when nested arrays are used in ajax/post/get methods, square brackets ('[]') are\n// not appended to the identifier of a nested array.\njQuery.ajaxSettings.traditional = true;\n\n// dependencies\ndefine([\n    'utils/utils',\n    'mvc/grid/grid-model',\n    'mvc/grid/grid-template',\n    'mvc/ui/popup-menu'\n], function(Utils, GridModel, Templates, PopupMenu) {\n\n// grid view\nreturn Backbone.View.extend({\n\n    // model\n    grid: null,\n\n    // Initialize\n    initialize: function(grid_config) {\n        this.dict_format = grid_config.dict_format;\n        var self = this;\n        window.add_tag_to_grid_filter = function( tag_name, tag_value ){\n            // Put tag name and value together.\n            var tag = tag_name + ( tag_value !== undefined && tag_value !== \"\" ? \":\" + tag_value : \"\" );\n            var advanced_search = $( '#advanced-search').is(\":visible\" );\n            if( !advanced_search ){\n                $('#standard-search').slideToggle('fast');\n                $('#advanced-search').slideToggle('fast');\n            }\n            self.add_filter_condition( \"tags\", tag );\n        };\n\n        // set element\n        if ( this.dict_format ) {\n            this.setElement('<div/>');\n            if ( grid_config.url_base && !grid_config.items ) {\n                var url_data = {};\n                _.each(grid_config.filters, function(v, k) {\n                    url_data['f-' + k] = v;\n                });\n                $.ajax({\n                    url     : grid_config.url_base + '?' + $.param( url_data ),\n                    success : function( response ) {\n                        response.embedded = grid_config.embedded;\n                        response.filters  = grid_config.filters;\n                        self.init_grid( response );\n                    }\n                });\n            } else {\n                this.init_grid(grid_config);\n            }\n        } else {\n            this.setElement('#grid-container');\n            this.init_grid(grid_config);\n        }\n\n        // fix padding\n        if (grid_config.use_panels) {\n            $('#center').css ({\n                padding     : '10px',\n                overflow    : 'auto'\n            });\n        }\n    },\n\n    // refresh frames\n    handle_refresh: function (refresh_frames) {\n        if (refresh_frames) {\n            if ($.inArray('history', refresh_frames) > -1) {\n                if( top.Galaxy && top.Galaxy.currHistoryPanel ){\n                    top.Galaxy.currHistoryPanel.loadCurrentHistory();\n                }\n            }\n        }\n    },\n\n    // Initialize\n    init_grid: function(grid_config) {\n        // link grid model\n        this.grid = new GridModel(grid_config);\n\n        // get options\n        var options = this.grid.attributes;\n\n        // handle refresh requests\n        this.handle_refresh(options.refresh_frames);\n\n        // strip protocol and domain\n        var url = this.grid.get('url_base');\n        url = url.replace(/^.*\\/\\/[^\\/]+/, '');\n        this.grid.set('url_base', url);\n\n        // append main template\n        this.$el.html(Templates.grid(options));\n\n        // update div contents\n        this.$el.find('#grid-table-header').html(Templates.header(options));\n        this.$el.find('#grid-table-body').html(Templates.body(options));\n        this.$el.find('#grid-table-footer').html(Templates.footer(options));\n\n        // update message\n        if (options.message) {\n            this.$el.find('#grid-message').html(Templates.message(options));\n            var self = this;\n            if (options.use_hide_message) {\n                setTimeout( function() { self.$el.find('#grid-message').html(''); }, 5000);\n            }\n        }\n\n        // configure elements\n        this.init_grid_elements();\n        this.init_grid_controls();\n\n        // attach global event handler\n        // TODO: redundant (the onload/standard page handlers do this) - but needed because these are constructed after page ready\n        init_refresh_on_change();\n    },\n\n    // Initialize grid controls\n    init_grid_controls: function() {\n\n        // link\n        var self = this;\n\n        // Initialize grid operation button.\n        this.$el.find('.operation-button').each(function() {\n            $(this).off();\n            $(this).click(function() {\n                self.submit_operation(this);\n                return false;\n            });\n        });\n\n        // Initialize text filters to select text on click and use normal font when user is typing.\n        this.$el.find('input[type=text]').each(function() {\n            $(this).off();\n            $(this).click(function() { $(this).select(); } )\n                   .keyup(function () { $(this).css('font-style', 'normal'); });\n        });\n\n        // Initialize sort links.\n        this.$el.find('.sort-link').each( function() {\n            $(this).off();\n            $(this).click( function() {\n               self.set_sort_condition( $(this).attr('sort_key') );\n               return false;\n            });\n        });\n\n        // Initialize text filters.\n        this.$el.find('.text-filter-form').each( function() {\n            $(this).off();\n            $(this).submit( function() {\n                var column_key = $(this).attr('column_key');\n                var text_input_obj = $('#input-' + column_key + '-filter');\n                var text_input = text_input_obj.val();\n                text_input_obj.val('');\n                self.add_filter_condition(column_key, text_input);\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.text-filter-val > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                // Remove visible element.\n                $(this).parent().remove();\n\n                // Remove filter condition.\n                self.remove_filter_condition ($(this).attr('filter_key'), $(this).attr('filter_val'));\n\n                // Return\n                return false;\n            });\n        });\n\n        // Initialize categorical filters.\n        this.$el.find('.categorical-filter > a').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.set_categorical_filter( $(this).attr('filter_key'), $(this).attr('filter_val') );\n                return false;\n            });\n        });\n\n        // Initialize standard, advanced search toggles.\n        this.$el.find('.advanced-search-toggle').each( function() {\n            $(this).off();\n            $(this).click( function() {\n                self.$el.find('#standard-search').slideToggle('fast');\n                self.$el.find('#advanced-search').slideToggle('fast');\n                return false;\n            });\n        });\n\n        // Add event to check all box\n        this.$el.find('#check_all').off();\n        this.$el.find('#check_all').on('click', function() {\n            self.check_all_items();\n        });\n    },\n\n    // Initialize grid elements.\n    init_grid_elements : function() {\n        // Initialize grid selection checkboxes.\n        this.$el.find('.grid').each( function() {\n            var checkboxes = $(this).find(\"input.grid-row-select-checkbox\");\n            var check_count = $(this).find(\"span.grid-selected-count\");\n            var update_checked = function() {\n                check_count.text( $(checkboxes).filter(\":checked\").length );\n            };\n\n            $(checkboxes).each( function() {\n                $(this).change(update_checked);\n            });\n            update_checked();\n        });\n\n        // Initialize ratings.\n        if (this.$el.find('.community_rating_star').length !== 0)\n            this.$el.find('.community_rating_star').rating({});\n\n        // get options\n        var options = this.grid.attributes;\n        var self = this;\n\n        //\n        // add page click events\n        //\n        this.$el.find('.page-link > a').each( function() {\n            $(this).click( function() {\n               self.set_page( $(this).attr('page_num') );\n               return false;\n            });\n        });\n\n        //\n        // add inbound/outbound events\n        //\n        this.$el.find('.use-target').each( function() {\n            $(this).click( function(e) {\n                self.execute({\n                    href : $(this).attr('href'),\n                    target : $(this).attr('target')\n                });\n                return false;\n\n            });\n        });\n\n        // empty grid?\n        var items_length = options.items.length;\n        if (items_length == 0) {\n            return;\n        }\n\n        // add operation popup menus\n        _.each( options.items, function( item, index ) {\n            var button = self.$( '#grid-' + index + '-popup' ).off();\n            var popup = new PopupMenu( button );\n            _.each( options[ 'operations' ], function( operation ) {\n                self._add_operation( popup, operation, item );\n            });\n        });\n    },\n\n    /** Add an operation to the items menu */\n    _add_operation: function( popup, operation, item ) {\n        var self = this;\n        var settings = item.operation_config[ operation.label ];\n        if ( settings.allowed && operation.allow_popup ) {\n            popup.addItem({\n                html                : operation.label,\n                href                : settings.url_args,\n                target              : settings.target,\n                confirmation_text   : operation.confirm,\n                func                : function( e ) {\n                    e.preventDefault();\n                    var label = $( e.target ).html();\n                    if ( operation.onclick ) {\n                        operation.onclick( item.encode_id );\n                    } else {\n                        self.execute( this.findItemByHtml( label ) );\n                    }\n                }\n            });\n        }\n    },\n\n    // Add a condition to the grid filter; this adds the condition and refreshes the grid.\n    add_filter_condition: function (name, value) {\n        // Do nothing is value is empty.\n        if (value === \"\") {\n            return false;\n        }\n\n        // Add condition to grid.\n        this.grid.add_filter(name, value, true);\n\n        // Add button that displays filter and provides a button to delete it.\n        var t = $(Templates.filter_element(name, value));\n        var self = this;\n        t.click(function() {\n            // Remove visible element.\n            $(this).remove();\n\n            // Remove filter condition.\n            self.remove_filter_condition(name, value);\n        });\n\n        // append to container\n        var container = this.$el.find('#' + name + '-filtering-criteria');\n        container.append(t);\n\n        // execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Remove a condition to the grid filter; this adds the condition and refreshes the grid.\n    remove_filter_condition: function (name, value) {\n        // Remove filter condition.\n        this.grid.remove_filter(name, value);\n\n        // Execute\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set sort condition for grid.\n    set_sort_condition: function (col_key) {\n        // Set new sort condition. New sort is col_key if sorting new column; if reversing sort on\n        // currently sorted column, sort is reversed.\n        var cur_sort = this.grid.get('sort_key');\n        var new_sort = col_key;\n        if (cur_sort.indexOf(col_key) !== -1) {\n            // Reverse sort.\n            if (cur_sort.substring(0, 1) !== '-') {\n                new_sort = '-' + col_key;\n            }\n        }\n\n        // Remove sort arrows elements.\n        this.$el.find('.sort-arrow').remove();\n\n        // Add sort arrow element to new sort column.\n        var sort_arrow = (new_sort.substring(0,1) == '-') ? '&uarr;' : '&darr;';\n        var t = $('<span>' + sort_arrow + '</span>').addClass('sort-arrow');\n\n        // Add to header\n        this.$el.find('#' + col_key + '-header').append(t);\n\n        // Update grid.\n        this.grid.set('sort_key', new_sort);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set new value for categorical filter.\n    set_categorical_filter: function (name, new_value) {\n        // Update filter hyperlinks to reflect new filter value.\n        var category_filter = this.grid.get('categorical_filters')[name],\n            cur_value = this.grid.get('filters')[name];\n        var self = this;\n        this.$el.find('.' + name + '-filter').each( function() {\n            var text = $.trim( $(this).text() );\n            var filter = category_filter[text];\n            var filter_value = filter[name];\n            if (filter_value == new_value) {\n                // Remove filter link since grid will be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                $(this).empty();\n                $(this).addClass('current-filter');\n                $(this).append(text);\n            } else if (filter_value == cur_value) {\n                // Add hyperlink for this filter since grid will no longer be using this filter. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                $(this).empty();\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_categorical_filter( name, filter_value );\n                });\n                $(this).removeClass('current-filter');\n                $(this).append(t);\n            }\n        });\n\n        // Update grid.\n        this.grid.add_filter(name, new_value);\n        this.go_page_one();\n        this.execute();\n    },\n\n    // Set page to view.\n    set_page: function (new_page) {\n        // Update page hyperlink to reflect new page.\n        var self = this;\n        this.$el.find('.page-link').each( function() {\n            var id = $(this).attr('id'),\n                page_num = parseInt( id.split('-')[2], 10 ), // Id has form 'page-link-<page_num>\n                cur_page = self.grid.get('cur_page'),\n                text;\n            if (page_num === new_page) {\n                // Remove link to page since grid will be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor with text.\n                text = $(this).children().text();\n                $(this).empty();\n                $(this).addClass('inactive-link');\n                $(this).text(text);\n            }\n            else if (page_num === cur_page) {\n                // Add hyperlink to this page since grid will no longer be on this page. It is assumed that\n                // this element has a single child, a hyperlink/anchor.\n                text = $(this).text();\n                $(this).empty();\n                $(this).removeClass('inactive-link');\n                var t = $('<a href=\"#\">' + text + '</a>');\n                t.click(function() {\n                    self.set_page(page_num);\n                });\n                $(this).append(t);\n            }\n        });\n\n        if (new_page === 'all') {\n            this.grid.set('cur_page', new_page);\n        } else {\n            this.grid.set('cur_page', parseInt(new_page, 10));\n        }\n        this.execute();\n    },\n\n    // confirmation/submission of operation request\n    submit_operation: function (operation_button, confirmation_text) {\n        // identify operation\n        var operation_name = $(operation_button).val();\n\n        // verify in any item is selected\n        var number_of_checked_ids = this.$el.find('input[name=\"id\"]:checked').length;\n        if (!number_of_checked_ids > 0) {\n            return false;\n        }\n\n        // Check to see if there's grid confirmation text for this operation\n        var operation = _.findWhere(this.grid.attributes.operations, {label: operation_name});\n        if (operation && !confirmation_text){\n            confirmation_text = operation.confirm || '';\n        }\n\n        // collect ids\n        var item_ids = [];\n        this.$el.find('input[name=id]:checked').each(function() {\n            item_ids.push( $(this).val() );\n        });\n\n        // execute operation\n        var options = {\n            operation           : operation_name,\n            id                  : item_ids,\n            confirmation_text   : confirmation_text\n        };\n        if ( operation.target == 'top' ) {\n            options = _.extend( options, {\n                href   : operation.href,\n                target : operation.target\n            });\n        }\n        this.execute( options );\n        return true;\n    },\n\n    check_all_items: function () {\n        var check = this.$('.grid-row-select-checkbox');\n        var state = this.$( '#check_all' ).prop( 'checked' );\n        _.each( check, function( c ) {\n            $( c ).prop( 'checked', state );\n        });\n        this.init_grid_elements();\n    },\n\n    // Go back to page one; this is useful when a filter is applied.\n    go_page_one: function () {\n        // Need to go back to page 1 if not showing all.\n        var cur_page = this.grid.get('cur_page');\n        if (cur_page !== null && cur_page !== undefined && cur_page !== 'all') {\n            this.grid.set('cur_page', 1);\n        }\n    },\n\n    //\n    // execute operations and hyperlink requests\n    //\n    execute: function (options) {\n        // get url\n        var id = null;\n        var href = null;\n        var operation = null;\n        var confirmation_text = null;\n        var target = null;\n\n        // check for options\n        if (options) {\n            // get options\n            href = options.href;\n            operation = options.operation;\n            id = options.id;\n            confirmation_text = options.confirmation_text;\n            target = options.target;\n\n            // check if input contains the operation tag\n            if (href !== undefined && href.indexOf('operation=') != -1) {\n                // Get operation, id in hyperlink's href.\n                var href_parts = href.split(\"?\");\n                if (href_parts.length > 1) {\n                    var href_parms_str = href_parts[1];\n                    var href_parms = href_parms_str.split(\"&\");\n                    for (var index = 0; index < href_parms.length; index++) {\n                        if (href_parms[index].indexOf('operation') != -1) {\n                            // Found operation parm; get operation value.\n                            operation = href_parms[index].split('=')[1];\n                            operation = operation.replace (/\\+/g, ' ');\n                        } else if (href_parms[index].indexOf('id') != -1) {\n                            // Found id parm; get id value.\n                            id = href_parms[index].split('=')[1];\n                        }\n                    }\n                }\n            }\n        }\n\n        // check for operation details\n        if (operation && id) {\n            // show confirmation box\n            if (confirmation_text && confirmation_text != '' && confirmation_text != 'None' && confirmation_text != 'null')\n                if(!confirm(confirmation_text))\n                    return false;\n\n            // use small characters for operation?!\n            operation = operation.toLowerCase();\n\n            // Update grid.\n            this.grid.set({\n                operation: operation,\n                item_ids: id\n            });\n\n            // Do operation. If operation cannot be performed asynchronously, redirect to location.\n            if ( target == 'top' ) {\n                window.top.location = href + '?' + $.param( this.grid.get_url_data() );\n            } else if ( this.grid.can_async_op(operation) || this.dict_format ) {\n                this.update_grid();\n            } else {\n                this.go_to(target, href);\n            }\n\n            // done\n            return false;\n        }\n\n        // refresh grid\n        if (href) {\n            this.go_to(target, href);\n            return false;\n        }\n\n        // refresh grid\n        if (this.grid.get('async') || this.dict_format) {\n            this.update_grid();\n        } else {\n            this.go_to(target, href);\n        }\n\n        // done\n        return false;\n    },\n\n    // go to url\n    go_to: function (target, href) {\n        // get aysnc status\n        var async = this.grid.get('async');\n        this.grid.set('async', false);\n\n        // get slide status\n        advanced_search = this.$el.find('#advanced-search').is(':visible');\n        this.grid.set('advanced_search', advanced_search);\n\n        // get default url\n        if(!href) {\n            href = this.grid.get('url_base') + '?' + $.param(this.grid.get_url_data());\n        }\n\n        // clear grid of transient request attributes.\n        this.grid.set({\n            operation: undefined,\n            item_ids: undefined,\n            async: async\n        });\n        switch (target) {\n            case 'inbound':\n                // this currently assumes that there is only a single grid shown at a time\n                var $div = $('.grid-header').closest('.inbound');\n                if ($div.length !== 0) {\n                    $div.load(href);\n                    return;\n                }\n                break;\n            case 'top':\n                window.top.location = href;\n                break;\n            default:\n                window.location = href;\n        }\n    },\n\n    // Update grid.\n    update_grid: function () {\n        // If there's an operation, do POST; otherwise, do GET.\n        var method = (this.grid.get('operation') ? 'POST' : 'GET' );\n\n        // Show overlay to indicate loading and prevent user actions.\n        this.$el.find('.loading-elt-overlay').show();\n        var self = this;\n        $.ajax({\n            type: method,\n            url: self.grid.get('url_base'),\n            data: self.grid.get_url_data(),\n            error: function(response) { alert( 'Grid refresh failed' );},\n            success: function(response_text) {\n\n                // backup\n                var embedded = self.grid.get('embedded');\n                var insert = self.grid.get('insert');\n\n                // request new configuration\n                var json = self.dict_format ? response_text : $.parseJSON(response_text);\n\n                // update\n                json.embedded = embedded;\n                json.insert = insert;\n\n                // Initialize new grid config\n                self.init_grid(json);\n\n                // Hide loading overlay.\n                self.$el.find('.loading-elt-overlay').hide();\n            },\n            complete: function() {\n                // Clear grid of transient request attributes.\n                self.grid.set({\n                    operation: undefined,\n                    item_ids: undefined\n                });\n            }\n        });\n    }\n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-view.js","// dependencies\ndefine([], function() {\n\n// grid model\nreturn Backbone.Model.extend({\n    defaults: {\n        url_base: '',\n        async: false,\n        async_ops: [],\n        categorical_filters: [],\n        filters: {},\n        sort_key: null,\n        show_item_checkboxes: false,\n        advanced_search: false,\n        cur_page: 1,\n        num_pages: 1,\n        operation: undefined,\n        item_ids: undefined\n    },\n\n    /**\n     * Return true if operation can be done asynchronously.\n     */\n    can_async_op: function(op) {\n        return _.indexOf(this.attributes.async_ops, op) !== -1;\n    },\n\n    /**\n     * Add filtering criterion.\n     */\n    add_filter: function(key, value, append) {\n        // Update URL arg with new condition.            \n        if (append) {\n            // Update or append value.\n            var cur_val = this.attributes.filters[key],\n                new_val;\n            if (cur_val === null || cur_val === undefined) {\n                new_val = value;\n            } \n            else if (typeof(cur_val) == 'string') {\n                if (cur_val == 'All') {\n                    new_val = value;\n                } else {\n                    // Replace string with array.\n                    var values = [];\n                    values[0] = cur_val;\n                    values[1] = value;\n                    new_val = values;   \n                }\n            } \n            else {\n                // Current value is an array.\n                new_val = cur_val;\n                new_val.push(value);\n            }\n            this.attributes.filters[key] = new_val;\n        } \n        else {\n            // Replace value.\n            this.attributes.filters[key] = value;\n        }\n    },\n\n    /**\n     * Remove filtering criterion.\n     */\n    remove_filter: function(key, condition) {\n        var cur_val = this.attributes.filters[key];\n        if (cur_val === null || cur_val === undefined) {\n            return false;            \n        }\n\n        if (typeof(cur_val) === 'string') {\n            // overwrite/remove condition.\n            this.attributes.filters[key] = '';\n        } else {\n            // filter contains an array of conditions.\n            var condition_index = _.indexOf(cur_val, condition);\n            if (condition_index !== -1) {\n                cur_val[condition_index] = '';\n            }\n        }\n    },\n\n    /**\n     * Returns URL data for obtaining a new grid.\n     */\n    get_url_data: function() {\n        var url_data = {\n            async: this.attributes.async,\n            sort: this.attributes.sort_key,\n            page: this.attributes.cur_page,\n            show_item_checkboxes: this.attributes.show_item_checkboxes,\n            advanced_search: this.attributes.advanced_search\n        };\n\n        // Add operation, item_ids only if they have values.\n        if (this.attributes.operation) {\n            url_data.operation = this.attributes.operation;\n        }\n        if (this.attributes.item_ids) {\n            url_data.id = this.attributes.item_ids;\n        }\n\n        // Add filter arguments to data, placing \"f-\" in front of all arguments.\n        var self = this;\n        _.each(_.pairs(self.attributes.filters), function(k) {\n            url_data['f-' + k[0]] = k[1];\n        });\n        return url_data;\n    },\n    \n    // Return URL for obtaining a new grid\n    get_url: function (args) {\n        return this.get('url_base') + '?' + $.param(this.get_url_data()) + '&' + $.param(args);\n    }\n    \n});\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-model.js","// dependencies\ndefine(['utils/utils'], function(Utils) {\n\n// grid view templates\nreturn {\n    // template\n    grid: function(options) {\n        var tmpl = '';\n        if (options.embedded) {\n            tmpl = this.grid_header(options) + this.grid_table(options);\n        } else {\n            tmpl = '<div class=\"loading-elt-overlay\"></div>' +\n                    '<table>' +\n                        '<tr>' +\n                            '<td width=\"75%\">' +\n                                this.grid_header(options) +\n                            '</td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                        '<tr>' +\n                            '<td width=\"100%\" id=\"grid-message\" valign=\"top\"></td>' +\n                            '<td></td>' +\n                            '<td></td>' +\n                        '</tr>' +\n                    '</table>' +\n                    this.grid_table(options);\n        }\n       \n        // add info text\n        if (options.info_text) {\n            tmpl += '<br><div class=\"toolParamHelp\" style=\"clear: both;\">' + options.info_text + '</div>';\n        }\n       \n        // return\n        return tmpl;\n    },\n    \n    // template\n    grid_table: function(options) {\n        return  '<form method=\"post\" onsubmit=\"return false;\">' +\n                    '<table id=\"grid-table\" class=\"grid\">' +\n                        '<thead id=\"grid-table-header\"></thead>' +\n                        '<tbody id=\"grid-table-body\"></tbody>' +\n                        '<tfoot id=\"grid-table-footer\"></tfoot>' +\n                    '</table>' +\n                '</form>';\n    },\n    \n    // template\n    grid_header: function(options) {\n        var tmpl =  '<div class=\"grid-header\">';\n        if (!options.embedded) {\n            tmpl +=     '<h2>' + options.title + '</h2>';\n        }\n        if (options.global_actions) {\n            tmpl +=     '<ul class=\"manage-table-actions\">';\n            var show_popup = (options.global_actions.length >= 3);\n            if (show_popup) {\n                tmpl +=     '<li><a class=\"action-button\" id=\"popup-global-actions\" class=\"menubutton\">Actions</a></li>' +\n                            '<div popupmenu=\"popup-global-actions\">';\n            }\n            for (i in options.global_actions) {\n                var action = options.global_actions[i];\n                tmpl +=         '<li>' +\n                                    '<a class=\"action-button use-target\" target=\"' + action.target + '\" href=\"' + action.url_args + '\" onclick=\"return false;\" >' + action.label + '</a>' +\n                                '</li>';\n            }\n            if (show_popup) {\n                tmpl +=     '</div>';\n            }\n            tmpl +=     '</ul>';\n        }\n        if (options.insert) {\n            tmpl +=     options.insert;\n        }\n       \n        // add grid filters\n        tmpl +=     this.grid_filters(options);\n        tmpl += '</div>'\n        \n        // return template\n        return tmpl;\n    },\n\n    // template\n    header: function(options) {\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        // add checkbox\n        if (options.show_item_checkboxes) {\n            tmpl +=         '<th>';\n            if (options.items.length > 0) {\n                tmpl +=         '<input type=\"checkbox\" id=\"check_all\" name=select_all_checkbox value=\"true\">' +\n                                '<input type=\"hidden\" name=select_all_checkbox value=\"true\">';\n            }\n            tmpl +=         '</th>';\n        }\n        \n        // create header elements\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.visible) {\n                tmpl +=     '<th id=\"' + column.key + '-header\">';\n                if (column.href) {\n                    tmpl +=     '<a href=\"' + column.href + '\" class=\"sort-link\" sort_key=\"' + column.key + '\">' + column.label + '</a>';\n                } else {\n                    tmpl +=     column.label;\n                }\n                tmpl +=         '<span class=\"sort-arrow\">' + column.extra + '</span>' +\n                            '</th>';\n            }\n        }\n        \n        // finalize\n        tmpl +=        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template\n    body: function(options) {\n        // initialize\n        var tmpl = '';\n        var num_rows_rendered = 0;\n        var items_length = options.items.length;\n        \n        // empty grid?\n        if (items_length == 0) {\n            // No results.\n            tmpl += '<tr><td colspan=\"100\"><em>No Items</em></td></tr>';\n            num_rows_rendered = 1;\n        }\n        \n        // create rows\n        for (var i in options.items) {\n        \n            // encode ids\n            var item = options.items[i];\n            var encoded_id = item.encode_id;\n            var popupmenu_id = 'grid-' + i + '-popup';\n            \n            // Tag current\n            tmpl += '<tr ';\n            if (options.current_item_id == item.id) {\n                tmpl += 'class=\"current\"';\n            }\n            tmpl += '>';\n            \n            // Item selection column\n            if (options.show_item_checkboxes) {\n                tmpl += '<td style=\"width: 1.5em;\">' +\n                            '<input type=\"checkbox\" name=\"id\" value=\"' + encoded_id + '\" id=\"' + encoded_id + '\" class=\"grid-row-select-checkbox\" />' +\n                        '</td>';\n            }\n            \n            // Data columns\n            for (j in options.columns) {\n                var column = options.columns[j];\n                if (column.visible) {\n                    // Nowrap\n                    var nowrap = '';\n                    if (column.nowrap) {\n                        nowrap = 'style=\"white-space:nowrap;\"';\n                    }\n                    \n                    // get column settings\n                    var column_settings = item.column_config[column.label];\n                    \n                    // load attributes\n                    var link = column_settings.link;\n                    var value = column_settings.value;\n                    var target = column_settings.target;\n                        \n                    // unescape value\n                    if (jQuery.type( value ) === 'string') {\n                        value = value.replace(/\\/\\//g, '/');\n                    }\n                    \n                    // Attach popup menu?\n                    var id = '';\n                    var cls = '';\n                    if (column.attach_popup) {\n                        id = 'grid-' + i + '-popup';\n                        cls = 'menubutton';\n                        if (link != '') {\n                            cls += ' split';\n                        }\n                        cls += ' popup';\n                    }\n                    \n                    // Check for row wrapping\n                    tmpl += '<td ' + nowrap + '>';\n                \n                    // Link\n                    if (link) {\n                        if (options.operations.length != 0) {\n                            tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\" style=\"float: left;\">';\n                        }\n                        tmpl += '<a class=\"menubutton-label use-target\" target=\"' + target + '\" href=\"' + link + '\" onclick=\"return false;\">' + value + '</a>';\n                        if (options.operations.length != 0) {\n                            tmpl += '</div>';\n                        }\n                    } else {\n                        tmpl += '<div id=\"' + id + '\" class=\"' + cls + '\"><label id=\"' + column.label_id_prefix + encoded_id + '\" for=\"' + encoded_id + '\">' + (value || '') + '</label></div>';\n                    }\n                    tmpl += '</td>';\n                }\n            }\n            tmpl += '</tr>';\n            num_rows_rendered++;\n        }\n        return tmpl;\n    },\n\n    // template\n    footer: function(options) {\n    \n        // create template string\n        var tmpl = '';\n        \n        // paging\n        if (options.use_paging && options.num_pages > 1) {\n            // get configuration\n            var num_page_links      = options.num_page_links;\n            var cur_page_num        = options.cur_page_num;\n            var num_pages           = options.num_pages;\n            \n            // First pass on min page.\n            var page_link_range     = num_page_links / 2;\n            var min_page            = cur_page_num - page_link_range\n            var min_offset          = 0;\n            if (min_page <= 0) {\n                // Min page is too low.\n                min_page = 1;\n                min_offset = page_link_range - ( cur_page_num - min_page );\n            }\n            \n            // Set max page.\n            var max_range = page_link_range + min_offset;\n            var max_page = cur_page_num + max_range;\n            if (max_page <= num_pages) {\n                // Max page is fine.\n                max_offset = 0;\n            } else {\n                // Max page is too high.\n                max_page = num_pages;\n                // +1 to account for the +1 in the loop below.\n                max_offset = max_range - ( max_page + 1 - cur_page_num );\n            }\n            \n            // Second and final pass on min page to add any unused\n            // offset from max to min.\n            if (max_offset != 0) {\n                min_page -= max_offset\n                if (min_page < 1) {\n                    min_page = 1\n                }\n            }\n            \n            // template header\n            tmpl += '<tr id=\"page-links-row\">';\n            if (options.show_item_checkboxes) {\n                tmpl += '<td></td>';\n            }\n            tmpl +=     '<td colspan=\"100\">' +\n                            '<span id=\"page-link-container\">' +\n                                'Page:';\n            \n            if (min_page > 1) {\n                tmpl +=         '<span class=\"page-link\" id=\"page-link-1\"><a href=\"javascript:void(0);\" page_num=\"1\" onclick=\"return false;\">1</a></span> ...';\n            }\n            \n            // create page urls\n            for (var page_index = min_page; page_index < max_page + 1; page_index++) {\n                \n                if (page_index == options.cur_page_num) {\n                    tmpl +=     '<span class=\"page-link inactive-link\" id=\"page-link-' + page_index + '\">' + page_index + '</span>';\n                } else {\n                    tmpl +=     '<span class=\"page-link\" id=\"page-link-' + page_index + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + page_index + '\">' + page_index + '</a></span>';\n                }\n            }\n            \n            // show last page\n            if (max_page < num_pages) {\n                    tmpl +=     '...' +\n                                '<span class=\"page-link\" id=\"page-link-' + num_pages + '\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"' + num_pages + '\">' + num_pages + '</a></span>';\n            }\n            tmpl +=         '</span>';\n            \n            // Show all link\n            tmpl +=         '<span class=\"page-link\" id=\"show-all-link-span\"> | <a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"all\">Show All</a></span>' +\n                        '</td>' +\n                    '</tr>';\n        }\n        \n        // Grid operations for multiple items.\n        if (options.show_item_checkboxes) {\n            // start template\n            tmpl += '<tr>' +\n                        '<input type=\"hidden\" id=\"operation\" name=\"operation\" value=\"\">' +\n                        '<td></td>' +\n                        '<td colspan=\"100\">' +\n                            'For <span class=\"grid-selected-count\"></span> selected items: ';\n            \n            // configure buttons for operations\n            for (i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.allow_multiple) {\n                    tmpl += '<input type=\"button\" value=\"' + operation.label + '\" class=\"operation-button action-button\">&nbsp;';\n                }\n            }\n            \n            // finalize template\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n    \n        // count global operations\n        var found_global = false;\n        for (i in options.operations) {\n            if (options.operations[i].global_operation) {\n                found_global = true;\n                break;\n            }\n        }\n    \n        // add global operations\n        if (found_global) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">';\n            for (i in options.operations) {\n                var operation = options.operations[i];\n                if (operation.global_operation) {\n                    tmpl += '<a class=\"action-button\" href=\"' + operation.global_operation + '\">' + operation.label + '</a>';\n                }\n            }\n            tmpl +=     '</td>' +\n                    '</tr>';\n        }\n        \n        // add legend\n        if (options.legend) {\n            tmpl += '<tr>' +\n                        '<td colspan=\"100\">' + options.legend + '</td>' +\n                    '</tr>';\n        }\n        \n        // return\n        return tmpl;\n    },\n        \n    // template\n    message: function(options) {\n        return  '<p>' +\n                    '<div class=\"' + options.status + 'message transient-message\">' + options.message + '</div>' +\n                    '<div style=\"clear: both\"></div>' +\n                '</p>';\n    },\n    \n    // template\n    grid_filters: function (options) {\n    \n        // get filters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n\n        // show advanced search if flag set or if there are filters for advanced search fields\n        var advanced_search_display = 'none';\n        if (options.advanced_search) {\n            advanced_search_display = 'block';\n        }\n        \n        // identify columns with advanced filtering\n        var show_advanced_search_link = false;\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                var column_key = column.key;\n                var f_key = filters[column_key];\n                var d_key = default_filter_dict[column_key];\n                if (f_key && d_key && f_key != d_key) {\n                    advanced_search_display = 'block';\n                }\n                show_advanced_search_link = true;\n            }\n        }\n        \n        // hide standard search if advanced is shown\n        var standard_search_display = 'block';\n        if (advanced_search_display == 'block') {\n            standard_search_display = 'none';\n        }\n\n        //\n        // standard search\n        //\n        var tmpl =  '<div id=\"standard-search\" style=\"display: ' + standard_search_display + ';\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"padding: 0;\">' +\n                                    '<table>';\n        \n        // add standard filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'standard') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize standard search\n        tmpl +=                     '</table>' +\n                                '</td>' +\n                            '</tr>' +\n                            '<tr>' +\n                                '<td>';\n                \n        // show advanced search link in standard display\n        if (show_advanced_search_link) {\n            tmpl +=                 '<a href=\"\" class=\"advanced-search-toggle\">Advanced Search</a>';\n        }\n        \n        // finalize standard search display\n        tmpl +=                 '</td>' +\n                            '</tr>' +\n                        '</table>' +\n                    '</div>';\n    \n        //\n        // advanced search\n        //\n        tmpl +=     '<div id=\"advanced-search\" style=\"display: ' + advanced_search_display + '; margin-top: 5px; border: 1px solid #ccc;\">' +\n                        '<table>' +\n                            '<tr>' +\n                                '<td style=\"text-align: left\" colspan=\"100\">' +\n                                    '<a href=\"\" class=\"advanced-search-toggle\">Close Advanced Search</a>' +\n                                '</td>' +\n                            '</tr>';\n        \n        // add advanced filters\n        for (var i in options.columns) {\n            var column = options.columns[i];\n            if (column.filterable == 'advanced') {\n                tmpl +=             this.grid_column_filter(options, column);\n            }\n        }\n        \n        // finalize advanced search template\n        tmpl +=         '</table>' +\n                    '</div>';\n\n        // return template\n        return tmpl;\n    },\n    \n    // template\n    grid_column_filter: function(options, column) {\n        \n        // collect parameters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n        var column_label = column.label;\n        var column_key = column.key;\n        if (column.filterable == 'advanced') {\n            column_label = column_label.toLowerCase();\n        }\n        \n        // start\n        var tmpl =      '<tr>';\n        \n        if (column.filterable == 'advanced') {\n            tmpl +=         '<td align=\"left\" style=\"padding-left: 10px\">' + column_label + ':</td>';\n        }\n        tmpl +=             '<td style=\"padding-bottom: 1px;\">';\n        if (column.is_text) {\n            tmpl +=             '<form class=\"text-filter-form\" column_key=\"' + column_key + '\" action=\"' + options.url + '\" method=\"get\" >';\n            // Carry forward filtering criteria with hidden inputs.\n            for (i in options.columns) {\n                var temp_column = options.columns[i];\n                var filter_value = filters[temp_column.key];\n                if (filter_value) {\n                    if (filter_value != 'All') {\n                        if (temp_column.is_text) {\n                            filter_value = JSON.stringify( filter_value )\n                        }\n                        tmpl +=     '<input type=\"hidden\" id=\"' + temp_column.key + '\" name=\"f-' + temp_column.key + '\" value=\"' + filter_value + '\"/>';\n                    }\n                }\n            }\n            // Print current filtering criteria and links to delete.\n            tmpl +=                 '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add filters\n            var column_filter = filters[column_key];\n            if (column_filter) {\n                // identify type\n                var type = jQuery.type(column_filter);\n                \n                // single filter value\n                if (type == 'string') {\n                    if (column_filter != 'All') {\n                        // append template\n                        tmpl +=         this.filter_element(column_key, column_filter);\n                    }\n                }\n                \n                // multiple filter values\n                if (type == 'array') {\n                    for (var i in column_filter ) {\n                        // get filter\n                        var filter = column_filter[i];\n                        \n                        // copy filters and remove entry\n                        var params = column_filter;\n                        params = params.slice(i);\n\n                        // append template\n                        tmpl +=         this.filter_element(column_key, filter);\n                    }\n                }\n            }\n            \n            // close span\n            tmpl +=                 '</span>';\n            \n            // Set value, size of search input field. Minimum size is 20 characters.\n            var value = '';\n            if (column.filterable == 'standard') {\n                value = column.label.toLowerCase();\n                var size = value.length;\n                if (size < 20) {\n                    size = 20;\n                }\n                // +4 to account for space after placeholder\n                size = size + 4;\n            }\n            \n            // print input field for column\n            tmpl +=                 '<span class=\"search-box\">' +\n                                        '<input class=\"search-box-input\" id=\"input-' + column_key + '-filter\" name=\"f-' + column_key + '\" type=\"text\" placeholder=\"' + value + '\" size=\"' + size + '\"/>' +\n                                        '<button type=\"submit\" style=\"background: transparent; border: none; padding: 4px; margin: 0px;\">' +\n                                            '<i class=\"fa fa-search\"></i>' +\n                                        '</button>' +\n                                    '</span>' +\n                                '</form>';\n        } else {\n            // filter criteria\n            tmpl +=             '<span id=\"' + column_key + '-filtering-criteria\">';\n            \n            // add category filters\n            var seperator = false;\n            for (cf_label in options.categorical_filters[column_key]) {\n                // get category filter\n                var cf = options.categorical_filters[column_key][cf_label];\n                \n                // each filter will have only a single argument, so get that single argument\n                var cf_key = '';\n                var cf_arg = '';\n                for (key in cf) {\n                    cf_key = key;\n                    cf_arg = cf[key];\n                }\n                \n                // add seperator\n                if (seperator) {\n                    tmpl += ' | ';\n                }\n                seperator = true;\n                \n                // add category\n                var filter = filters[column_key];\n                if (filter && cf[column_key] && filter == cf_arg) {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter current-filter\">' + cf_label + '</span>';\n                } else {\n                    tmpl +=         '<span class=\"categorical-filter ' + column_key + '-filter\">' +\n                                        '<a href=\"javascript:void(0);\" filter_key=\"' + cf_key + '\" filter_val=\"' + cf_arg + '\">' + cf_label + '</a>' +\n                                    '</span>';\n                }\n            }\n            tmpl +=             '</span>';\n        }\n        tmpl +=             '</td>' +\n                        '</tr>';\n        \n        // return template\n        return tmpl;\n    },\n    \n    // template for filter items\n    filter_element: function(filter_key, filter_value) {\n        filter_value = Utils.sanitize(filter_value);\n        return  '<span class=\"text-filter-val\">' + filter_value +\n                    '<a href=\"javascript:void(0);\" filter_key=\"' + filter_key + '\" filter_val=\"' + filter_value + '\">' +\n                        '<i class=\"fa fa-times\" style=\"padding-left: 5px; padding-bottom: 6px;\"/>' +\n                    '</a>' +\n                '</span>';\n\n    }\n};\n\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/grid/grid-template.js","define([\n    //jquery\n    //backbone\n], function(){\n// =============================================================================\n/**\n * view for a popup menu\n */\nvar PopupMenu = Backbone.View.extend({\n//TODO: maybe better as singleton off the Galaxy obj\n    /** Cache the desired button element and options, set up the button click handler\n     *  NOTE: attaches this view as HTML/jQ data on the button for later use.\n     */\n    initialize: function( $button, options ){\n        // default settings\n        this.$button = $button;\n        if( !this.$button.length ){\n            this.$button = $( '<div/>' );\n        }\n        this.options = options || [];\n        this.$button.data( 'popupmenu', this );\n\n        // set up button click -> open menu behavior\n        var menu = this;\n        this.$button.click( function( event ){\n            // if there's already a menu open, remove it\n            $( '.popmenu-wrapper' ).remove();\n            menu._renderAndShow( event );\n            return false;\n        });\n    },\n\n    // render the menu, append to the page body at the click position, and set up the 'click-away' handlers, show\n    _renderAndShow: function( clickEvent ){\n        this.render();\n        this.$el.appendTo( 'body' ).css( this._getShownPosition( clickEvent )).show();\n        this._setUpCloseBehavior();\n    },\n\n    // render the menu\n    // this menu doesn't attach itself to the DOM ( see _renderAndShow )\n    render: function(){\n        // render the menu body absolute and hidden, fill with template\n        this.$el.addClass( 'popmenu-wrapper' ).hide()\n            .css({ position : 'absolute' })\n            .html( this.template( this.$button.attr( 'id' ), this.options ));\n\n        // set up behavior on each link/anchor elem\n        if( this.options.length ){\n            var menu = this;\n            //precondition: there should be one option per li\n            this.$el.find( 'li' ).each( function( i, li ){\n                var option = menu.options[i];\n\n                // if the option has 'func', call that function when the anchor is clicked\n                if( option.func ){\n                    $( this ).children( 'a.popupmenu-option' ).click( function( event ){\n                        option.func.call( menu, event, option );\n                        // We must preventDefault otherwise clicking \"cancel\"\n                        // on a purge or something still navigates and causes\n                        // the action.\n                        event.preventDefault();\n                        // bubble up so that an option click will call the close behavior\n                    });\n                }\n            });\n        }\n        return this;\n    },\n\n    template : function( id, options ){\n        return [\n            '<ul id=\"', id, '-menu\" class=\"dropdown-menu\">', this._templateOptions( options ), '</ul>'\n        ].join( '' );\n    },\n\n    _templateOptions : function( options ){\n        if( !options.length ){\n            return '<li>(no options)</li>';\n        }\n        return _.map( options, function( option ){\n            if( option.divider ){\n                return '<li class=\"divider\"></li>';\n            } else if( option.header ){\n                return [ '<li class=\"head\"><a href=\"javascript:void(0);\">', option.html, '</a></li>' ].join( '' );\n            }\n            var href   = option.href || 'javascript:void(0);',\n                target = ( option.target  )?( ' target=\"' + option.target + '\"' ):( '' ),\n                check  = ( option.checked )?( '<span class=\"fa fa-check\"></span>' ):( '' );\n            return [\n                '<li><a class=\"popupmenu-option\" href=\"', href, '\"', target, '>',\n                    check, option.html,\n                '</a></li>'\n            ].join( '' );\n        }).join( '' );\n    },\n\n    // get the absolute position/offset for the menu\n    _getShownPosition : function( clickEvent ){\n\n        // display menu horiz. centered on click...\n        var menuWidth = this.$el.width();\n        var x = clickEvent.pageX - menuWidth / 2 ;\n\n        // adjust to handle horiz. scroll and window dimensions ( draw entirely on visible screen area )\n        x = Math.min( x, $( document ).scrollLeft() + $( window ).width() - menuWidth - 5 );\n        x = Math.max( x, $( document ).scrollLeft() + 5 );\n        return {\n            top: clickEvent.pageY,\n            left: x\n        };\n    },\n\n    // bind an event handler to all available frames so that when anything is clicked\n    // the menu is removed from the DOM and the event handler unbinds itself\n    _setUpCloseBehavior: function(){\n        var menu = this;\n//TODO: alternately: focus hack, blocking overlay, jquery.blockui\n\n        // function to close popup and unbind itself\n        function closePopup( event ){\n            $( document ).off( 'click.close_popup' );\n            if( window && window.parent !== window ){\n                try {\n                    $( window.parent.document ).off( \"click.close_popup\" );\n                } catch( err ){}\n            } else {\n                try {\n                    $( 'iframe#galaxy_main' ).contents().off( \"click.close_popup\" );\n                } catch( err ){}\n            }\n            menu.remove();\n        }\n\n        $( 'html' ).one( \"click.close_popup\", closePopup );\n        if( window && window.parent !== window ){\n            try {\n                $( window.parent.document ).find( 'html' ).one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        } else {\n            try {\n                $( 'iframe#galaxy_main' ).contents().one( \"click.close_popup\", closePopup );\n            } catch( err ){}\n        }\n    },\n\n    // add a menu option/item at the given index\n    addItem: function( item, index ){\n        // append to end if no index\n        index = ( index >= 0 ) ? index : this.options.length;\n        this.options.splice( index, 0, item );\n        return this;\n    },\n\n    // remove a menu option/item at the given index\n    removeItem: function( index ){\n        if( index >=0 ){\n            this.options.splice( index, 1 );\n        }\n        return this;\n    },\n\n    // search for a menu option by its html\n    findIndexByHtml: function( html ){\n        for( var i = 0; i < this.options.length; i++ ){\n            if( _.has( this.options[i], 'html' ) && ( this.options[i].html === html )){\n                return i;\n            }\n        }\n        return null;\n    },\n\n    // search for a menu option by its html\n    findItemByHtml: function( html ){\n        return this.options[( this.findIndexByHtml( html ))];\n    },\n\n    // string representation\n    toString: function(){\n        return 'PopupMenu';\n    }\n});\n/** shortcut to new for when you don't need to preserve the ref */\nPopupMenu.create = function _create( $button, options ){\n    return new PopupMenu( $button, options );\n};\n\n// -----------------------------------------------------------------------------\n// the following class functions are bridges from the original make_popupmenu and make_popup_menus\n// to the newer backbone.js PopupMenu\n\n/** Create a PopupMenu from simple map initial_options activated by clicking button_element.\n *      Converts initial_options to object array used by PopupMenu.\n *  @param {jQuery|DOMElement} button_element element which, when clicked, activates menu\n *  @param {Object} initial_options map of key -> values, where\n *      key is option text, value is fn to call when option is clicked\n *  @returns {PopupMenu} the PopupMenu created\n */\nPopupMenu.make_popupmenu = function( button_element, initial_options ){\n    var convertedOptions = [];\n    _.each( initial_options, function( optionVal, optionKey ){\n        var newOption = { html: optionKey };\n\n        // keys with null values indicate: header\n        if( optionVal === null ){ // !optionVal? (null only?)\n            newOption.header = true;\n\n        // keys with function values indicate: a menu option\n        } else if( jQuery.type( optionVal ) === 'function' ){\n            newOption.func = optionVal;\n        }\n        //TODO:?? any other special optionVals?\n        // there was no divider option originally\n        convertedOptions.push( newOption );\n    });\n    return new PopupMenu( $( button_element ), convertedOptions );\n};\n\n/** Find all anchors in $parent (using selector) and covert anchors into a PopupMenu options map.\n *  @param {jQuery} $parent the element that contains the links to convert to options\n *  @param {String} selector jq selector string to find links\n *  @returns {Object[]} the options array to initialize a PopupMenu\n */\n//TODO: lose parent and selector, pass in array of links, use map to return options\nPopupMenu.convertLinksToOptions = function( $parent, selector ){\n    $parent = $( $parent );\n    selector = selector || 'a';\n    var options = [];\n    $parent.find( selector ).each( function( elem, i ){\n        var option = {}, $link = $( elem );\n\n        // convert link text to the option text (html) and the href into the option func\n        option.html = $link.text();\n        if( $link.attr( 'href' ) ){\n            var linkHref    = $link.attr( 'href' ),\n                linkTarget  = $link.attr( 'target' ),\n                confirmText = $link.attr( 'confirm' );\n\n            option.func = function(){\n                // if there's a \"confirm\" attribute, throw up a confirmation dialog, and\n                //  if the user cancels - do nothing\n                if( ( confirmText ) && ( !confirm( confirmText ) ) ){ return; }\n\n                // if there's no confirm attribute, or the user accepted the confirm dialog:\n                switch( linkTarget ){\n                    // relocate the center panel\n                    case '_parent':\n                        window.parent.location = linkHref;\n                        break;\n\n                    // relocate the entire window\n                    case '_top':\n                        window.top.location = linkHref;\n                        break;\n\n                    // relocate this panel\n                    default:\n                        window.location = linkHref;\n                }\n            };\n        }\n        options.push( option );\n    });\n    return options;\n};\n\n/** Create a single popupmenu from existing DOM button and anchor elements\n *  @param {jQuery} $buttonElement the element that when clicked will open the menu\n *  @param {jQuery} $menuElement the element that contains the anchors to convert into a menu\n *  @param {String} menuElementLinkSelector jq selector string used to find anchors to be made into menu options\n *  @returns {PopupMenu} the PopupMenu (Backbone View) that can render, control the menu\n */\nPopupMenu.fromExistingDom = function( $buttonElement, $menuElement, menuElementLinkSelector ){\n    $buttonElement = $( $buttonElement );\n    $menuElement = $( $menuElement );\n    var options = PopupMenu.convertLinksToOptions( $menuElement, menuElementLinkSelector );\n    // we're done with the menu (having converted it to an options map)\n    $menuElement.remove();\n    return new PopupMenu( $buttonElement, options );\n};\n\n/** Create all popupmenus within a document or a more specific element\n *  @param {DOMElement} parent the DOM element in which to search for popupmenus to build (defaults to document)\n *  @param {String} menuSelector jq selector string to find popupmenu menu elements (defaults to \"div[popupmenu]\")\n *  @param {Function} buttonSelectorBuildFn the function to build the jq button selector.\n *      Will be passed $menuElement, parent.\n *      (Defaults to return '#' + $menuElement.attr( 'popupmenu' ); )\n *  @returns {PopupMenu[]} array of popupmenus created\n */\nPopupMenu.make_popup_menus = function( parent, menuSelector, buttonSelectorBuildFn ){\n    parent = parent || document;\n    // orig. Glx popupmenu menus have a (non-std) attribute 'popupmenu'\n    //  which contains the id of the button that activates the menu\n    menuSelector = menuSelector || 'div[popupmenu]';\n    // default to (orig. Glx) matching button to menu by using the popupmenu attr of the menu as the id of the button\n    buttonSelectorBuildFn = buttonSelectorBuildFn || function( $menuElement, parent ){\n        return '#' + $menuElement.attr( 'popupmenu' );\n    };\n\n    // aggregate and return all PopupMenus\n    var popupMenusCreated = [];\n    $( parent ).find( menuSelector ).each( function(){\n        var $menuElement    = $( this ),\n            $buttonElement  = $( parent ).find( buttonSelectorBuildFn( $menuElement, parent ) );\n        popupMenusCreated.push( PopupMenu.fromDom( $buttonElement, $menuElement ) );\n        $buttonElement.addClass( 'popup' );\n    });\n    return popupMenusCreated;\n};\n\n\n// =============================================================================\n    return PopupMenu;\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/popup-menu.js","/**\n *  This class contains backbone wrappers for basic ui elements such as Images, Labels, Buttons, Input fields etc.\n */\ndefine(['utils/utils',\n    'mvc/ui/ui-select-default',\n    'mvc/ui/ui-slider',\n    'mvc/ui/ui-options',\n    'mvc/ui/ui-drilldown',\n    'mvc/ui/ui-buttons',\n    'mvc/ui/ui-modal'],\n    function( Utils, Select, Slider, Options, Drilldown, Buttons, Modal ) {\n\n    /** Label wrapper */\n    var Label = Backbone.View.extend({\n        tagName: 'label',\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.tagName = options.tagName || this.tagName;\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        title: function( new_title ) {\n            this.model.set( 'title', new_title );\n        },\n        value: function() {\n            return this.model.get( 'title' );\n        },\n        render: function() {\n            this.$el.removeClass()\n                    .addClass( 'ui-label' )\n                    .addClass( this.model.get( 'cls' ) )\n                    .html( this.model.get( 'title' ) );\n            return this;\n        }\n    });\n\n    /** Displays messages used e.g. in the tool form */\n    var Message = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                message     : null,\n                status      : 'info',\n                cls         : '',\n                persistent  : false,\n                fade        : true\n            }).set( options );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        update: function( options ) {\n            this.model.set( options );\n        },\n        render: function() {\n            this.$el.removeClass().addClass( 'ui-message' ).addClass( this.model.get( 'cls' ) );\n            var status = this.model.get( 'status' );\n            if ( this.model.get( 'large' ) ) {\n                this.$el.addClass((( status == 'success' && 'done' ) ||\n                                   ( status == 'danger' && 'error' ) ||\n                                     status ) + 'messagelarge' );\n            } else {\n                this.$el.addClass( 'alert' ).addClass( 'alert-' + status );\n            }\n            if ( this.model.get( 'message' ) ) {\n                this.$el.html( this.messageForDisplay() );\n                this.$el[ this.model.get( 'fade' ) ? 'fadeIn' : 'show' ]();\n                this.timeout && window.clearTimeout( this.timeout );\n                if ( !this.model.get( 'persistent' ) ) {\n                    var self = this;\n                    this.timeout = window.setTimeout( function() {\n                        self.model.set( 'message', '' );\n                    }, 3000 );\n                }\n            } else {\n                this.$el.fadeOut();\n            }\n            return this;\n        },\n        messageForDisplay: function() {\n            return _.escape( this.model.get( 'message' ) );\n        }\n    });\n\n    var UnescapedMessage = Message.extend({\n        messageForDisplay: function() {\n            return this.model.get( 'message' );\n        }\n    });\n\n    /** Renders an input element used e.g. in the tool form */\n    var Input = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                type            : 'text',\n                placeholder     : '',\n                disabled        : false,\n                readonly        : false,\n                visible         : true,\n                cls             : '',\n                area            : false,\n                color           : null,\n                style           : null\n            }).set( options );\n            this.tagName = this.model.get( 'area' ) ? 'textarea' : 'input';\n            this.setElement( $( '<' + this.tagName + '/>' ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        events: {\n            'input': '_onchange'\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', typeof new_val === 'string' ? new_val : '' );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            var self = this;\n            this.$el.removeClass()\n                    .addClass( 'ui-' + this.tagName )\n                    .addClass( this.model.get( 'cls' ) )\n                    .addClass( this.model.get( 'style' ) )\n                    .attr( 'id', this.model.id )\n                    .attr( 'type', this.model.get( 'type' ) )\n                    .attr( 'placeholder', this.model.get( 'placeholder' ) )\n                    .css( 'color', this.model.get( 'color' ) || '' )\n                    .css( 'border-color', this.model.get( 'color' ) || '' );\n            var datalist = this.model.get( 'datalist' );\n            if ( $.isArray( datalist ) && datalist.length > 0 ) {\n                this.$el.autocomplete( { source : function( request, response ) { response( self.model.get( 'datalist' ) ) },\n                                         change : function() { self._onchange() } } );\n            }\n            if ( this.model.get( 'value' ) !== this.$el.val() ) {\n                this.$el.val( this.model.get( 'value' ) );\n            }\n            _.each( [ 'readonly', 'disabled' ], function( attr_name ) {\n                self.model.get( attr_name ) ? self.$el.attr( attr_name, true ) : self.$el.removeAttr( attr_name );\n            });\n            this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n            return this;\n        },\n        _onchange: function() {\n            this.value( this.$el.val() );\n            this.model.get( 'onchange' ) && this.model.get( 'onchange' )( this.model.get( 'value' ) );\n        }\n    });\n\n    /** Creates a hidden element input field used e.g. in the tool form */\n    var Hidden = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$hidden = $( '<div/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.$hidden.val( this.model.get( 'value' ) );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            return this;\n        }\n    });\n\n    /** Creates a upload element input field */\n    var Upload = Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model( options );\n            this.setElement( $ ( '<div/>' ).append( this.$info = $( '<div/>' ) )\n                                           .append( this.$file = $( '<input/>' ).attr( 'type', 'file' ).addClass( 'ui-margin-bottom' ) )\n                                           .append( this.$text = $( '<textarea/>' ).addClass( 'ui-textarea' ).attr( 'disabled', true ) )\n                                           .append( this.$wait = $( '<i/>' ).addClass( 'fa fa-spinner fa-spin' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.$file.on( 'change', function( e ) { self._readFile( e ) } );\n            this.render();\n        },\n        value: function( new_val ) {\n            new_val !== undefined && this.model.set( 'value', new_val );\n            return this.model.get( 'value' );\n        },\n        render: function() {\n            this.$el.attr( 'id', this.model.id );\n            this.model.get( 'info' ) ? this.$info.show().text( this.model.get( 'info' ) ) : this.$info.hide();\n            this.model.get( 'value' ) ? this.$text.text( this.model.get( 'value' ) ).show() : this.$text.hide();\n            this.model.get( 'wait' ) ? this.$wait.show() : this.$wait.hide();\n            return this;\n        },\n        _readFile: function( e ) {\n            var self = this;\n            var file = e.target.files && e.target.files[ 0 ];\n            if ( file ) {\n                var reader = new FileReader();\n                reader.onload = function() {\n                    self.model.set( { wait: false, value: this.result } );\n                }\n                this.model.set( { wait: true, value: null } );\n                reader.readAsText( file );\n            }\n        }\n    });\n\n    return {\n        Button           : Buttons.ButtonDefault,\n        ButtonIcon       : Buttons.ButtonIcon,\n        ButtonCheck      : Buttons.ButtonCheck,\n        ButtonMenu       : Buttons.ButtonMenu,\n        ButtonLink       : Buttons.ButtonLink,\n        Input            : Input,\n        Label            : Label,\n        Message          : Message,\n        UnescapedMessage : UnescapedMessage,\n        Upload           : Upload,\n        Modal            : Modal,\n        RadioButton      : Options.RadioButton,\n        Checkbox         : Options.Checkbox,\n        Radio            : Options.Radio,\n        Select           : Select,\n        Hidden           : Hidden,\n        Slider           : Slider,\n        Drilldown        : Drilldown\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-misc.js","/**\n *  This class creates/wraps a default html select field as backbone class.\n */\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar View = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.data  = [];\n        this.data2 = [];\n        this.model = options && options.model || new Backbone.Model({\n            id          : Utils.uid(),\n            cls         : 'ui-select',\n            error_text  : 'No options available',\n            empty_text  : 'Nothing selected',\n            visible     : true,\n            wait        : false,\n            multiple    : false,\n            searchable  : true,\n            optional    : false,\n            disabled    : false,\n            onchange    : function(){},\n            value       : null,\n            selectall   : true,\n            pagesize    : 20\n        }).set( options );\n        this.on( 'change', function() { self.model.get( 'onchange' ) && self.model.get( 'onchange' )( self.value() ) } );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:disabled', this._changeDisabled, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:multiple change:searchable change:cls change:id', this.render, this );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.model.get( 'searchable' ) ? this._renderSearchable() : this._renderClassic();\n        this.$el.addClass( this.model.get( 'cls' ) )\n                .attr( 'id', this.model.get( 'id' ) );\n        this.$select.empty().addClass( 'select' )\n                    .attr( 'id', this.model.get( 'id' ) + '_select' )\n                    .prop( 'multiple', this.model.get( 'multiple' ) )\n                    .on( 'change', function() {\n                        self.value( self._getValue() );\n                        self.trigger( 'change' );\n                    });\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n        this._changeDisabled();\n    },\n\n    /** Renders the classic selection field */\n    _renderClassic: function() {\n        var self = this;\n        this.$el.addClass( this.model.get( 'multiple' ) ? 'ui-select-multiple' : 'ui-select' )\n                .append( this.$select      = $( '<select/>' ) )\n                .append( this.$dropdown    = $( '<div/>' ) )\n                .append( this.$resize      = $( '<div/>' )\n                .append( this.$resize_icon = $( '<i/>' ) ) );\n        if ( this.model.get( 'multiple' ) ) {\n            this.$dropdown.hide();\n            this.$resize_icon.addClass( 'fa fa-angle-double-right fa-rotate-45' ).show();\n            this.$resize.removeClass()\n                        .addClass( 'icon-resize' )\n                        .show()\n                        .off( 'mousedown' ).on( 'mousedown', function( event ) {\n                            var currentY = event.pageY;\n                            var currentHeight = self.$select.height();\n                            self.minHeight = self.minHeight || currentHeight;\n                            $( '#dd-helper' ).show().on( 'mousemove', function( event ) {\n                                self.$select.height( Math.max( currentHeight + ( event.pageY - currentY ), self.minHeight ) );\n                            }).on( 'mouseup mouseleave', function() {\n                                $( '#dd-helper' ).hide().off();\n                            });\n                        });\n        } else {\n            this.$dropdown.show();\n            this.$resize.hide();\n            this.$resize_icon.hide();\n        }\n    },\n\n    /** Renders the default select2 field */\n    _renderSearchable: function() {\n        var self = this;\n        this.$el.append( this.$select   = $( '<div/>' ) )\n                .append( this.$dropdown = $( '<div/>' ) );\n        this.$dropdown.hide();\n        if ( !this.model.get( 'multiple' ) ) {\n            this.$dropdown.show().on( 'click', function() {\n                self.$select.select2 && self.$select.select2( 'open' );\n            });\n        }\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) && this.model.get( 'selectall' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    var new_value = [];\n                    self.all_button.value() !== 0 && _.each( self.model.get( 'data' ), function( option ) {\n                        new_value.push( option.value );\n                    });\n                    self.value( new_value );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$el.prepend( this.all_button.$el );\n        }\n    },\n\n    /** Matches a search term with a given text */\n    _match: function( term, text ) {\n        return !term || term == '' || String( text ).toUpperCase().indexOf( term.toUpperCase() ) >= 0\n    },\n\n    /** Updates the selection options */\n    _changeData: function() {\n        var self = this;\n        this.data = [];\n        if ( !this.model.get( 'multiple' ) && this.model.get( 'optional' ) ) {\n            this.data.push( { value: '__null__', label: self.model.get( 'empty_text' ) } );\n        }\n        _.each( this.model.get( 'data' ), function( option ) {\n            self.data.push( option );\n        });\n        if ( this.length() == 0 ) {\n            this.data.push( { value: '__null__', label: this.model.get( 'error_text' ) } );\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            this.data2 = [];\n            _.each( this.data, function( option, index ) {\n                self.data2.push( { order: index, id: option.value, text: option.label, tags: option.tags } );\n            });\n            this.$select.data( 'select2' ) && this.$select.select2( 'destroy' );\n            this.matched_tags = {};\n            this.$select.select2({\n                data            : self.data2,\n                closeOnSelect   : !this.model.get( 'multiple' ),\n                multiple        : this.model.get( 'multiple' ),\n                query           : function( q ) {\n                    self.matched_tags = {};\n                    var pagesize = self.model.get( 'pagesize' );\n                    var results = _.filter( self.data2, function ( e ) {\n                        var found = false;\n                        _.each( e.tags, function( tag ) {\n                            if ( self._match( q.term, tag ) ) {\n                                found = self.matched_tags[ tag ] = true;\n                            }\n                        });\n                        return found || self._match( q.term, e.text );\n                    });\n                    q.callback({\n                        results: results.slice( ( q.page - 1 ) * pagesize, q.page * pagesize ),\n                        more   : results.length >= q.page * pagesize\n                    });\n                },\n                formatResult    : function( result ) {\n                    return _.escape( result.text ) +\n                        '<div class=\"ui-tags\">' +\n                            _.reduce( result.tags, function( memo, tag ) {\n                                if ( self.matched_tags[ tag ] ) {\n                                    return memo + '&nbsp;' +\n                                        '<div class=\"label label-info\">' +\n                                            _.escape( tag ) +\n                                        '</div>'\n                                }\n                                return memo;\n                            }, '' ) +\n                        '</div>';\n                }\n            });\n            this.$( '.select2-container .select2-search input' ).off( 'blur' );\n        } else {\n            this.$select.find( 'option' ).remove();\n            _.each( this.data, function( option ) {\n                self.$select.append( $( '<option/>' ).attr( 'value', option.value ).html( _.escape( option.label ) ) );\n            });\n        }\n        this.model.set( 'disabled', this.length() == 0 );\n        this._changeValue();\n    },\n\n    /** Handles field enabling/disabling, usually used when no options are available */\n    _changeDisabled: function() {\n        if ( this.model.get( 'searchable' ) ) {\n            this.$select.select2( this.model.get( 'disabled' ) ? 'disable' : 'enable' );\n        } else {\n            this.$select.prop( 'disabled', this.model.get( 'disabled' ) );\n        }\n    },\n\n    /** Searchable fields may display a spinner e.g. while waiting for a server response */\n    _changeWait: function() {\n        this.$dropdown.removeClass()\n                      .addClass( 'icon-dropdown fa' )\n                      .addClass( this.model.get( 'wait' ) ? 'fa-spinner fa-spin' : 'fa-caret-down' );\n    },\n\n    /** Handles field visibility */\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n        this.$select[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    /** Synchronizes the model value with the actually selected field value */\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this.model.get( 'multiple' ) ) {\n            if ( this.all_button ) {\n                var value = this._getValue();\n                this.all_button.value( $.isArray( value ) ? value.length : 0, this.length() );\n            }\n        } else if ( this._getValue() === null && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return the first select option */\n    first: function() {\n        return this.data.length > 0 ? this.data[ 0 ].value : null;\n    },\n\n    /** Check if a value is an existing option */\n    exists: function( value ) {\n        return _.findWhere( this.data, { value: value } );\n    },\n\n    /** Return the label/text of the current selection */\n    text: function () {\n        var v = this._getValue();\n        var d = this.exists( $.isArray( v ) ? v[ 0 ] : v );\n        return d ? d.label : '';\n    },\n\n    /** Show the select field */\n    show: function() {\n        this.model.set( 'visible', true );\n    },\n\n    /** Hide the select field */\n    hide: function() {\n        this.model.set( 'visible', false );\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns true if the field is disabled */\n    disabled: function() {\n        return this.model.get( 'disabled' );\n    },\n\n    /** Enable the select field */\n    enable: function() {\n        this.model.set( 'disabled', false );\n    },\n\n    /** Disable the select field */\n    disable: function() {\n        this.model.set( 'disabled', true );\n    },\n\n    /** Update all available options at once */\n    add: function( options, sorter ) {\n        _.each( this.model.get( 'data' ), function( v ) {\n            v.keep && !_.findWhere( options, { value: v.value } ) && options.push( v );\n        });\n        sorter && options && options.sort( sorter );\n        this.model.set( 'data', options );\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    /** Set the custom onchange callback function */\n    setOnChange: function( callback ) {\n        this.model.set( 'onchange', callback );\n    },\n\n    /** Number of available options */\n    length: function() {\n        return $.isArray( this.model.get( 'data' ) ) ? this.model.get( 'data' ).length : 0;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if( new_value === null || new_value === undefined ) {\n            new_value = '__null__';\n        }\n        if ( this.model.get( 'multiple' ) ) {\n            new_value = $.isArray( new_value ) ? new_value : [ new_value ];\n        } else if ( $.isArray( new_value ) ) {\n            if ( new_value.length > 0 ) {\n                new_value = new_value[ 0 ];\n            } else {\n                new_value = '__null__';\n            }\n        }\n        if ( this.model.get( 'searchable' ) ) {\n            if ( $.isArray( new_value ) ) {\n                val = [];\n                _.each( new_value, function( v ) {\n                    var d = _.findWhere( self.data2, { id: v } );\n                    d && val.push( d );\n                });\n                new_value = val;\n            } else {\n                var d = _.findWhere( this.data2, { id: new_value } );\n                new_value = d;\n            }\n            this.$select.select2( 'data', new_value );\n        } else {\n            this.$select.val( new_value );\n        }\n    },\n\n    /** Get value from dom */\n    _getValue: function() {\n        var val = null;\n        if ( this.model.get( 'searchable' ) ) {\n            var selected = this.$select.select2( 'data' );\n            if ( selected ) {\n                if ( $.isArray( selected ) ) {\n                    val = [];\n                    selected.sort( function( a, b ) { return a.order - b.order } );\n                    _.each( selected, function( v ) { val.push( v.id ) } );\n                } else {\n                    val = selected.id;\n                }\n            }\n        } else {\n            val = this.$select.val();\n        }\n        return Utils.isEmpty( val ) ? null : val;\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-select-default.js","/** This module contains all button views. */\ndefine( [ 'utils/utils' ], function( Utils ) {\n    /** This renders the default button which is used e.g. at the bottom of the upload modal. */\n    var ButtonDefault = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                floating    : 'right',\n                icon        : '',\n                cls         : 'btn btn-default',\n                wait        : false,\n                wait_text   : 'Sending...',\n                wait_cls    : 'btn btn-info',\n                disabled    : false,\n                percentage  : -1\n            }).set( options );\n            this.setElement( $( '<button/>' ).attr( 'type', 'button' )\n                                             .append( this.$icon        = $( '<i/>' ) )\n                                             .append( this.$title       = $( '<span/>' ) )\n                                             .append( this.$progress    = $( '<div/>' ).append( this.$progress_bar = $( '<div/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'ui-button-default' )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'id', options.id )\n                    .attr( 'disabled', options.disabled )\n                    .css( 'float', options.floating )\n                    .off( 'click' ).on( 'click' , function() {\n                        $( '.tooltip' ).hide();\n                        options.onclick && !self.disabled && options.onclick();\n                    })\n                    .tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$progress.addClass( 'progress' ).css( 'display', options.percentage !== -1 ? 'block' : 'none' );\n            this.$progress_bar.addClass( 'progress-bar' ).css( { width : options.percentage + '%' } );\n            this.$icon.removeClass().addClass( 'icon fa' );\n            this.$title.removeClass().addClass( 'title' );\n            if ( options.wait ) {\n                this.$el.addClass( options.wait_cls ).prop( 'disabled', true );\n                this.$icon.addClass( 'fa-spinner fa-spin ui-margin-right' );\n                this.$title.html( options.wait_text );\n            } else {\n                this.$el.addClass( options.cls );\n                this.$icon.addClass( options.icon );\n                this.$title.html( options.title );\n                options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            }\n        },\n\n        /** Show button */\n        show: function() {\n            this.$el.show();\n        },\n\n        /** Hide button */\n        hide: function() {\n            this.$el.hide();\n        },\n\n        /** Disable button */\n        disable: function() {\n            this.model.set( 'disabled', true );\n        },\n\n        /** Enable button */\n        enable: function() {\n            this.model.set( 'disabled', false );\n        },\n\n        /** Show spinner to indicate that the button is not ready to be clicked */\n        wait: function() {\n            this.model.set( 'wait', true );\n        },\n\n        /** Hide spinner to indicate that the button is ready to be clicked */\n        unwait: function() {\n            this.model.set( 'wait', false );\n        },\n\n        /** Change icon */\n        setIcon: function( icon ) {\n            this.model.set( 'icon', icon );\n        }\n    });\n\n    /** This button allows the right-click/open-in-new-tab feature, its used e.g. for panel buttons. */\n    var ButtonLink = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                icon        : '',\n                cls         : ''\n            }).set( options );\n            this.setElement( $( '<a/>' ).append( this.$icon  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .attr( { id         : options.id,\n                             href       : options.href || 'javascript:void(0)',\n                             title      : options.title,\n                             target     : options.target || '_top',\n                             disabled   : options.disabled } )\n                    .tooltip( { placement: 'bottom' } )\n                    .off( 'click' ).on( 'click' , function() {\n                        options.onclick && !options.disabled && options.onclick();\n                    });\n            this.$icon.removeClass().addClass( options.icon );\n        }\n    });\n\n    /** The check button is used in the tool form and allows to distinguish between multiple states e.g. all, partially and nothing selected. */\n    var ButtonCheck = Backbone.View.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : 'Select/Unselect all',\n                icons       : [ 'fa-square-o', 'fa-minus-square-o', 'fa-check-square-o' ],\n                value       : 0,\n                onchange    : function(){}\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$icon   = $( '<span/>' ) )\n                                          .append( this.$title  = $( '<span/>' ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.addClass( 'ui-button-check' )\n                    .off( 'click' ).on('click', function() {\n                        self.model.set( 'value', ( self.model.get( 'value' ) === 0 && 2 ) || 0 );\n                        options.onclick && options.onclick();\n                    });\n            this.$title.html( options.title );\n            this.$icon.removeClass()\n                      .addClass( 'icon fa ui-margin-right' )\n                      .addClass( options.icons[ options.value ] );\n        },\n\n        /* Sets a new value and/or returns the value.\n        * @param{Integer}   new_val - Set a new value 0=unchecked, 1=partial and 2=checked.\n        * OR:\n        * @param{Integer}   new_val - Number of selected options.\n        * @param{Integer}   total   - Total number of available options.\n        */\n        value: function ( new_val, total ) {\n            if ( new_val !== undefined ) {\n                if ( total && new_val !== 0 ) {\n                    new_val = ( new_val !== total ) && 1 || 2;\n                }\n                this.model.set( 'value', new_val );\n                this.model.get( 'onchange' )( this.model.get( 'value' ) );\n            }\n            return this.model.get( 'value' );\n        }\n    });\n\n    /** This renders a differently styled, more compact button version. */\n    var ButtonIcon = ButtonDefault.extend({\n        initialize: function( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id          : Utils.uid(),\n                title       : '',\n                floating    : 'right',\n                icon        : '',\n                cls         : 'ui-button-icon',\n                disabled    : false\n            }).set( options );\n            this.setElement( $( '<div/>' ).append( this.$button = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                               .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render : function( options ) {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( options.cls )\n                    .addClass( options.disabled && 'disabled' )\n                    .attr( 'disabled', options.disabled )\n                    .attr( 'id', options.id )\n                    .css( 'float', options.floating )\n                    .off( 'click' ).on( 'click', function() {\n                        $( '.tooltip' ).hide();\n                        !options.disabled && options.onclick && options.onclick();\n                    });\n            this.$button.addClass( 'button' ).tooltip( { title: options.tooltip, placement: 'bottom' } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n        }\n    });\n\n    /** This class creates a button with dropdown menu. */\n    var ButtonMenu = ButtonDefault.extend({\n        $menu: null,\n        initialize: function ( options ) {\n            this.model = options && options.model || new Backbone.Model({\n                id              : '',\n                title           : '',\n                floating        : 'right',\n                pull            : 'right',\n                icon            : null,\n                onclick         : null,\n                cls             : 'ui-button-icon ui-button-menu',\n                tooltip         : '',\n                target          : '',\n                href            : '',\n                onunload        : null,\n                visible         : true,\n                tag             : ''\n            }).set( options );\n            this.collection = new Backbone.Collection();\n            this.setElement( $( '<div/>' ).append( this.$root = $( '<div/>' ).append( this.$icon  = $( '<i/>' ) )\n                                                                             .append( this.$title = $( '<span/>' ) ) ) );\n            this.listenTo( this.model, 'change', this.render, this );\n            this.listenTo( this.collection, 'change add remove reset', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el.removeClass()\n                    .addClass( 'dropdown' )\n                    .addClass( options.cls )\n                    .attr( 'id', options.id )\n                    .css( { float   : options.floating,\n                            display : options.visible && this.collection.where( { visible: true } ).length > 0 ? 'block' : 'none' } );\n            this.$root.addClass( 'root button dropdown-toggle' )\n                      .attr( 'data-toggle', 'dropdown' )\n                      .tooltip( { title: options.tooltip, placement: 'bottom' } )\n                      .off( 'click' ).on( 'click', function( e ) {\n                            $( '.tooltip' ).hide();\n                            e.preventDefault();\n                            options.onclick && options.onclick();\n                      } );\n            this.$icon.removeClass().addClass( 'icon fa' ).addClass( options.icon );\n            this.$title.removeClass().addClass( 'title' ).html( options.title );\n            options.icon && options.title && this.$icon.addClass( 'ui-margin-right' );\n            this.$menu && this.$menu.remove();\n            if ( this.collection.length > 0 ) {\n                this.$menu = $( '<ul/>' ).addClass( 'menu dropdown-menu' )\n                                         .addClass( 'pull-' + self.model.get( 'pull' ) )\n                                         .attr( 'role', 'menu' );\n                this.$el.append( this.$menu );\n            }\n            this.collection.each( function( submodel ) {\n                var suboptions = submodel.attributes;\n                if ( suboptions.visible ) {\n                    var $link = $( '<a/>' ).addClass( 'dropdown-item' )\n                                           .attr( { href : suboptions.href, target : suboptions.target } )\n                                           .append( $( '<i/>' ).addClass( 'fa' )\n                                                               .addClass( suboptions.icon )\n                                                               .css( 'display', suboptions.icon ? 'inline-block' : 'none' ) )\n                                           .append( suboptions.title )\n                                           .on( 'click', function( e ) {\n                                                if ( suboptions.onclick ) {\n                                                    e.preventDefault();\n                                                    suboptions.onclick();\n                                                }\n                                           } );\n                    self.$menu.append( $( '<li/>' ).append( $link ) );\n                    suboptions.divider && self.$menu.append( $( '<li/>' ).addClass( 'divider' ) );\n                }\n            });\n        },\n\n        /** Add a new menu item */\n        addMenu: function ( options ) {\n            this.collection.add( Utils.merge( options, {\n                title       : '',\n                target      : '',\n                href        : '',\n                onclick     : null,\n                divider     : false,\n                visible     : true,\n                icon        : null,\n                cls         : 'button-menu btn-group'\n            }));\n        }\n    });\n\n    return {\n        ButtonDefault   : ButtonDefault,\n        ButtonLink      : ButtonLink,\n        ButtonIcon      : ButtonIcon,\n        ButtonCheck     : ButtonCheck,\n        ButtonMenu      : ButtonMenu\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-buttons.js","define([ 'utils/utils' ], function( Utils ) {\n    var View = Backbone.View.extend({\n        initialize : function( options ) {\n            var self = this;\n            this.model = options && options.model || new Backbone.Model({\n                id       : Utils.uid(),\n                min      : null,\n                max      : null,\n                step     : null,\n                precise  : false,\n                split    : 10000,\n                value    : null,\n                onchange : function(){}\n            }).set( options );\n\n            // create new element\n            this.setElement( this._template() );\n            this.$el.attr( 'id', this.model.id );\n            this.$text   = this.$( '.ui-form-slider-text' );\n            this.$slider = this.$( '.ui-form-slider-element' );\n\n            // add text field event\n            var pressed = [];\n            this.$text.on( 'change', function () {\n                self.value( $( this ).val() );\n            }).on( 'keyup', function( e ) {\n                pressed[e.which] = false;\n            }).on( 'keydown', function ( e ) {\n                var v = e.which;\n                pressed[ v ] = true;\n                if ( self.model.get( 'is_workflow' ) && pressed[ 16 ] && v == 52 ) {\n                    self.value( '$' );\n                    event.preventDefault();\n                } else if (!( v == 8 || v == 9 || v == 13 || v == 37 || v == 39 || ( v >= 48 && v <= 57 && !pressed[ 16 ] ) || ( v >= 96 && v <= 105 )\n                    || ( ( v == 190 || v == 110 ) && $( this ).val().indexOf( '.' ) == -1 && self.model.get( 'precise' ) )\n                    || ( ( v == 189 || v == 109 ) && $( this ).val().indexOf( '-' ) == -1 )\n                    || self._isParameter( $( this ).val() )\n                    || pressed[ 91 ] || pressed[ 17 ] ) ) {\n                    event.preventDefault();\n                }\n            });\n\n            // build slider, cannot be rebuild in render\n            var opts = this.model.attributes;\n            this.has_slider = opts.max !== null && opts.min !== null && opts.max > opts.min;\n            var step = opts.step;\n            if ( !step ) {\n                if ( opts.precise && this.has_slider ) {\n                    step = ( opts.max - opts.min ) / opts.split;\n                } else {\n                    step = 1.0;\n                }\n            }\n            if ( this.has_slider ) {\n                this.$text.addClass( 'ui-form-slider-left' );\n                this.$slider.slider( { min: opts.min, max: opts.max, step: step } )\n                            .on( 'slide', function ( event, ui ) { self.value( ui.value ) } );\n            } else {\n                this.$slider.hide();\n            }\n\n            // add listeners\n            this.listenTo( this.model, 'change', this.render, this );\n            this.render();\n        },\n\n        render: function() {\n            var value = this.model.get( 'value' );\n            this.has_slider && this.$slider.slider( 'value', value );\n            value !== this.$text.val() && this.$text.val( value );\n        },\n\n        /** Set and return the current value */\n        value : function ( new_val ) {\n            var options = this.model.attributes;\n            if ( new_val !== undefined ) {\n                if ( new_val !== null && new_val !== '' && !this._isParameter( new_val ) ) {\n                    isNaN( new_val ) && ( new_val = 0 );\n                    !options.precise && ( new_val = Math.round( new_val ) );\n                    options.max !== null && ( new_val = Math.min( new_val, options.max ) );\n                    options.min !== null && ( new_val = Math.max( new_val, options.min ) );\n                }\n                this.model.set( 'value', new_val );\n                this.model.trigger( 'change' );\n                options.onchange( new_val );\n            }\n            return this.model.get( 'value' );\n        },\n\n        /** Return true if the field contains a workflow parameter i.e. $('name') */\n        _isParameter: function( value ) {\n            return this.model.get( 'is_workflow' ) && String( value ).substring( 0, 1 ) === '$';\n        },\n\n        /** Slider template */\n        _template: function() {\n            return  '<div class=\"ui-form-slider\">' +\n                        '<input class=\"ui-form-slider-text\" type=\"text\"/>' +\n                        '<div class=\"ui-form-slider-element\"/>' +\n                    '</div>';\n        }\n    });\n\n    return {\n        View : View\n    };\n});\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-slider.js","/** Base class for options based ui elements **/\ndefine([ 'utils/utils', 'mvc/ui/ui-buttons' ], function( Utils, Buttons ) {\nvar Base = Backbone.View.extend({\n    initialize: function( options ) {\n        var self = this;\n        this.model = options && options.model || new Backbone.Model({\n            visible     : true,\n            data        : [],\n            id          : Utils.uid(),\n            error_text  : 'No options available.',\n            wait_text   : 'Please wait...',\n            multiple    : false,\n            optional    : false,\n            onchange    : function(){}\n        }).set( options );\n        this.listenTo( this.model, 'change:value', this._changeValue, this );\n        this.listenTo( this.model, 'change:wait', this._changeWait, this );\n        this.listenTo( this.model, 'change:data', this._changeData, this );\n        this.listenTo( this.model, 'change:visible', this._changeVisible, this );\n        this.on( 'change', function() { self.model.get( 'onchange' )( self.value() ) } );\n        this.render();\n    },\n\n    render: function() {\n        var self = this;\n        this.$el.empty()\n                .removeClass()\n                .addClass( 'ui-options' )\n                .append( this.$message   = $( '<div/>' ) )\n                .append( this.$menu      = $( '<div/>' ).addClass( 'ui-options-menu' ) )\n                .append( this.$options   = $( this._template() ) );\n\n        // add select/unselect all button\n        this.all_button = null;\n        if ( this.model.get( 'multiple' ) ) {\n            this.all_button = new Buttons.ButtonCheck({\n                onclick: function() {\n                    self.$( 'input' ).prop( 'checked', self.all_button.value() !== 0 );\n                    self.value( self._getValue() );\n                    self.trigger( 'change' );\n                }\n            });\n            this.$menu.append( this.all_button.$el );\n        }\n\n        // finalize dom\n        this._changeData();\n        this._changeWait();\n        this._changeVisible();\n    },\n\n    /** Update available options */\n    update: function( options ) {\n        this.model.set( 'data', options );\n    },\n\n    _changeData: function() {\n        var self = this;\n        this.$options.empty();\n        if ( this._templateOptions ) {\n            this.$options.append( this._templateOptions( this.model.get( 'data' ) ) );\n        } else {\n            _.each( this.model.get( 'data' ), function( option ) {\n                self.$options.append( $( self._templateOption( option ) )\n                                        .addClass( 'ui-option' )\n                                        .tooltip( { title: option.tooltip, placement: 'bottom' } ) );\n            });\n        }\n        var self = this;\n        this.$( 'input' ).on( 'change', function() {\n            self.value( self._getValue() );\n            self.trigger( 'change' );\n        });\n        this._changeValue();\n        this._changeWait();\n    },\n\n    _changeVisible: function() {\n        this.$el[ this.model.get( 'visible' ) ? 'show' : 'hide' ]();\n    },\n\n    _changeWait: function() {\n        if ( this.model.get( 'wait' ) ) {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'wait_text' ), 'info' );\n                this.$options.hide();\n                this.$menu.hide();\n            }\n        } else {\n            if ( this.length() === 0 ) {\n                this._messageShow( this.model.get( 'error_text' ), 'danger' );\n                this.$options.hide();\n                this.$menu.hide();\n            } else {\n                this.$message.hide();\n                this.$options.css( 'display', 'inline-block' );\n                this.$menu.show();\n            }\n        }\n    },\n\n    _changeValue: function() {\n        this._setValue( this.model.get( 'value' ) );\n        if ( this._getValue() === null && !this.model.get( 'multiple' ) && !this.model.get( 'optional' ) ) {\n            this._setValue( this.first() );\n        }\n        this.all_button && this.all_button.value( $.isArray( this._getValue() ) ? this._getValue().length : 0, this.length() );\n    },\n\n    /** Return/Set current selection */\n    value: function ( new_value ) {\n        new_value !== undefined && this.model.set( 'value', new_value );\n        return this._getValue();\n    },\n\n    /** Return first available option */\n    first: function() {\n        var options = this.$( 'input' ).first();\n        return options.length > 0 ? options.val() : null;\n    },\n\n    /** Show a spinner indicating that the select options are currently loaded */\n    wait: function() {\n        this.model.set( 'wait', true );\n    },\n\n    /** Hide spinner indicating that the request has been completed */\n    unwait: function() {\n        this.model.set( 'wait', false );\n    },\n\n    /** Returns the number of options */\n    length: function() {\n        return this.$( '.ui-option' ).length;\n    },\n\n    /** Set value to dom */\n    _setValue: function( new_value ) {\n        var self = this;\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            if ( new_value !== null ) {\n                var values = $.isArray( new_value ) ? new_value : [ new_value ];\n                _.each( values, function( v ) {\n                    self.$( 'input[value=\"' + v + '\"]' ).first().prop( 'checked', true );\n                });\n            }\n        }\n    },\n\n    /** Return current selection */\n    _getValue: function() {\n        var selected = [];\n        this.$( ':checked' ).each( function() {\n            selected.push( $( this ).val() );\n        });\n        if ( Utils.isEmpty( selected ) ) {\n            return null;\n        }\n        return this.model.get( 'multiple' ) ? selected : selected[ 0 ];\n    },\n\n    /** Show message instead if options */\n    _messageShow: function( text, status ) {\n        this.$message.show()\n                     .removeClass()\n                     .addClass( 'ui-message alert alert-' + status )\n                     .html( text );\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list' );\n    }\n});\n\n/** Iconized **/\nvar BaseIcons = Base.extend({\n    _templateOption: function( pair ) {\n        var id = Utils.uid();\n        return  $( '<div/>' ).addClass( 'ui-option' )\n                    .append( $( '<input/>' ).attr( {\n                        id      : id,\n                        type    : this.model.get( 'type' ),\n                        name    : this.model.id,\n                        value   : pair.value } ) )\n                    .append( $( '<label/>' ).addClass( 'ui-options-label' )\n                                            .attr( 'for', id )\n                                            .html( pair.label ) );\n    }\n});\n\n/** Radio button field **/\nvar Radio = {};\nRadio.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'radio';\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Checkbox options field **/\nvar Checkbox = {};\nCheckbox.View = BaseIcons.extend({\n    initialize: function( options ) {\n        options.type = 'checkbox';\n        options.multiple = true;\n        BaseIcons.prototype.initialize.call( this, options );\n    }\n});\n\n/** Radio button options field styled as classic buttons **/\nvar RadioButton = {};\nRadioButton.View = Base.extend({\n    initialize: function( options ) {\n        Base.prototype.initialize.call( this, options );\n    },\n\n    /** Set current value */\n    _setValue: function ( new_value ) {\n        if ( new_value !== undefined ) {\n            this.$( 'input' ).prop( 'checked', false );\n            this.$( 'label' ).removeClass( 'active' );\n            this.$( '[value=\"' + new_value + '\"]' ).prop( 'checked', true ).closest( 'label' ).addClass( 'active' );\n        }\n    },\n\n    /** Template for a single option */\n    _templateOption: function( pair ) {\n        var $el =  $( '<label/>' ).addClass( 'btn btn-default' );\n        pair.icon && $el.append( $( '<i/>' ).addClass( 'fa' ).addClass( pair.icon ).addClass( !pair.label && 'no-padding' ) );\n        $el.append( $( '<input/>' ).attr( { type: 'radio', name: this.model.id, value: pair.value } ) );\n        pair.label && $el.append( pair.label );\n        return $el;\n    },\n\n    /** Main template function */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'btn-group ui-radiobutton' ).attr( 'data-toggle', 'buttons' );\n    }\n});\n\nreturn {\n    Base        : Base,\n    BaseIcons   : BaseIcons,\n    Radio       : Radio,\n    RadioButton : RadioButton,\n    Checkbox    : Checkbox\n};\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-options.js","/** This class creates/wraps a drill down element. */\ndefine([ 'utils/utils', 'mvc/ui/ui-options' ], function( Utils, Options ) {\n\nvar View = Options.BaseIcons.extend({\n    initialize: function( options ) {\n        options.type     = options.display || 'checkbox';\n        options.multiple = ( options.type == 'checkbox' );\n        Options.BaseIcons.prototype.initialize.call( this, options );\n    },\n\n    /** Set states for selected values */\n    _setValue: function ( new_value ) {\n        Options.BaseIcons.prototype._setValue.call( this, new_value );\n        if ( new_value !== undefined && new_value !== null && this.header_index ) {\n            var self = this;\n            var values = $.isArray( new_value ) ? new_value : [ new_value ];\n            _.each( values, function( v ) {\n                var list = self.header_index[ v ];\n                _.each( list, function( element ) {\n                    self._setState( element, true );\n                });\n            });\n        }\n    },\n\n    /** Expand/collapse a sub group */\n    _setState: function ( header_id, is_expanded ) {\n        var $button = this.$( '.button-' + header_id );\n        var $subgroup = this.$( '.subgroup-' + header_id );\n        $button.data( 'is_expanded', is_expanded );\n        if ( is_expanded ) {\n            $subgroup.show();\n            $button.removeClass( 'fa-plus-square' ).addClass( 'fa-minus-square' );\n        } else {\n            $subgroup.hide();\n            $button.removeClass( 'fa-minus-square' ).addClass( 'fa-plus-square' );\n        }\n    },\n\n    /** Template to create options tree */\n    _templateOptions: function() {\n        var self = this;\n        this.header_index = {};\n\n        // attach event handler\n        function attach( $el, header_id ) {\n            var $button = $el.find( '.button-' + header_id );\n            $button.on( 'click', function() {\n                self._setState( header_id, !$button.data( 'is_expanded' ) );\n            });\n        }\n\n        // recursive function which iterates through options\n        function iterate ( $tmpl, options, header ) {\n            header = header || [];\n            for ( i in options ) {\n                var level = options[ i ];\n                var has_options = level.options && level.options.length > 0;\n                var new_header = header.slice( 0 );\n                self.header_index[ level.value ] = new_header.slice( 0 );\n                var $group = $( '<div/>' );\n                if ( has_options ) {\n                    var header_id = Utils.uid();\n                    var $button = $( '<span/>' ).addClass( 'button-' + header_id ).addClass( 'ui-drilldown-button fa fa-plus-square' );\n                    var $subgroup = $( '<div/>' ).addClass( 'subgroup-' + header_id ).addClass( 'ui-drilldown-subgroup' );\n                    $group.append( $( '<div/>' )\n                                        .append( $button )\n                                        .append( self._templateOption( { label: level.name, value: level.value } ) ) );\n                    new_header.push( header_id );\n                    iterate ( $subgroup, level.options, new_header );\n                    $group.append( $subgroup );\n                    attach( $group, header_id );\n                } else {\n                    $group.append( self._templateOption( { label: level.name, value: level.value } ) );\n                }\n                $tmpl.append( $group );\n            }\n        }\n\n        // iterate through options and create dom\n        var $tmpl = $( '<div/>' );\n        iterate( $tmpl, this.model.get( 'data' ) );\n        return $tmpl;\n    },\n\n    /** Template for drill down view */\n    _template: function() {\n        return $( '<div/>' ).addClass( 'ui-options-list drilldown-container' ).attr( 'id', this.model.id );\n    }\n});\n\nreturn {\n    View: View\n}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/mvc/ui/ui-drilldown.js","var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    QUERY_STRING = require( 'utils/query-string-parsing' ),\n    Ui = require( 'mvc/ui/ui-misc' );\n\nvar Router = Backbone.Router.extend({\n    // TODO: not many client routes at this point - fill and remove from server.\n    // since we're at root here, this may be the last to be routed entirely on the client.\n    initialize : function( page, options ){\n        this.page = page;\n        this.options = options;\n    },\n\n    /** helper to push a new navigation state */\n    push: function( url, data ) {\n        data = data || {};\n        data.__identifer = Math.random().toString( 36 ).substr( 2 );\n        if ( !$.isEmptyObject( data ) ) {\n            url += url.indexOf( '?' ) == -1 ? '?' : '&';\n            url += $.param( data , true );\n        }\n        this.navigate( url, { 'trigger': true } );\n    },\n\n    /** override to parse query string into obj and send to each route */\n    execute: function( callback, args, name ){\n        Galaxy.debug( 'router execute:', callback, args, name );\n        var queryObj = QUERY_STRING.parse( args.pop() );\n        args.push( queryObj );\n        if( callback ){\n            if ( this.authenticate( args, name ) ) {\n                callback.apply( this, args );\n            } else {\n                this.access_denied();\n            }\n        }\n    },\n\n    authenticate: function( args, name ) {\n        return true;\n    },\n\n    access_denied: function() {\n        this.page.display( new Ui.Message( { status: 'danger', message: 'You must be logged in with proper credentials to make this request.', persistent: true } ) );\n    }\n});\n\nmodule.exports = Router\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/layout/router.js"],"sourceRoot":""}