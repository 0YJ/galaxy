"use strict";define(["jquery"],function(t){"use_strict";function e(t,e){var n=t.data("menu_options");t.data("menu_options",e),n||t.bind("click.show_popup",function(e){return o(".popmenu-wrapper").remove(),setTimeout(function(){var n=o("<ul class='dropdown-menu' id='"+t.attr("id")+"-menu'></ul>"),i=t.data("menu_options");_.size(i)<=0&&o("<li>No Options.</li>").appendTo(n),o.each(i,function(t,e){if(e){var i=e.action||e;n.append(o("<li></li>").append(o("<a>").attr("href",e.url).html(t).click(i)))}else n.append(o("<li></li>").addClass("head").append(o("<a href='#'></a>").html(t)))});var p=o("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(n).appendTo("body"),a=e.pageX-p.width()/2;a=Math.min(a,o(document).scrollLeft()+o(window).width()-o(p).width()-5),a=Math.max(a,o(document).scrollLeft()+5),p.css({top:e.pageY,left:a})},10),setTimeout(function(){var t=function(t){o(t).bind("click.close_popup",function(){o(".popmenu-wrapper").remove(),t.unbind("click.close_popup")})};t(o(window.document)),t(o(window.top.document));for(var e=window.top.frames.length;e--;){t(o(window.top.frames[e].document))}},50),!1})}function n(t){t=t||document,o(t).find("div[popupmenu]").each(function(){var n={},i=o(this);i.find("a").each(function(){var t=o(this),e=t.get(0),i=e.getAttribute("confirm"),p=e.getAttribute("href"),a=e.getAttribute("target");n[t.text()]=p?{url:p,action:function(e){if(!i||confirm(i)){if(a)return window.open(p,a),!1;t.click()}else e.preventDefault()}}:null});var p=o(t).find("#"+i.attr("popupmenu"));p.find("a").bind("click",function(t){return t.stopPropagation(),!0}),e(p,n),p.addClass("popup"),i.remove()})}var o=t;return{make_popupmenu:e,make_popup_menus:n}});
//# sourceMappingURL=../../maps/ui/popupmenu.js.map
