define(["jquery"],function(n){"use_strict";function t(n,t){var e=n.data("menu_options");n.data("menu_options",t),e||n.bind("click.show_popup",function(t){return o(".popmenu-wrapper").remove(),setTimeout(function(){var e=o("<ul class='dropdown-menu' id='"+n.attr("id")+"-menu'></ul>"),i=n.data("menu_options");_.size(i)<=0&&o("<li>No Options.</li>").appendTo(e),o.each(i,function(n,t){if(t){var i=t.action||t;e.append(o("<li></li>").append(o("<a>").attr("href",t.url).html(n).click(i)))}else e.append(o("<li></li>").addClass("head").append(o("<a href='#'></a>").html(n)))});var p=o("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(e).appendTo("body"),a=t.pageX-p.width()/2;a=Math.min(a,o(document).scrollLeft()+o(window).width()-o(p).width()-5),a=Math.max(a,o(document).scrollLeft()+5),p.css({top:t.pageY,left:a})},10),setTimeout(function(){var n=function(n){o(n).bind("click.close_popup",function(){o(".popmenu-wrapper").remove(),n.unbind("click.close_popup")})};n(o(window.document)),n(o(window.top.document));for(var t=window.top.frames.length;t--;){n(o(window.top.frames[t].document))}},50),!1})}function e(n){n=n||document,o(n).find("div[popupmenu]").each(function(){var e={},i=o(this);i.find("a").each(function(){var n=o(this),t=n.get(0),i=t.getAttribute("confirm"),p=t.getAttribute("href"),a=t.getAttribute("target");e[n.text()]=p?{url:p,action:function(t){if(!i||confirm(i)){if(a)return window.open(p,a),!1;n.click()}else t.preventDefault()}}:null});var p=o(n).find("#"+i.attr("popupmenu"));p.find("a").bind("click",function(n){return n.stopPropagation(),!0}),t(p,e),p.addClass("popup"),i.remove()})}var o=n;return{make_popupmenu:t,make_popup_menus:e}});
//# sourceMappingURL=../../maps/ui/popupmenu.js.map
