define([],function(){"use strict";define(["jquery"],function(n){"use_strict";function t(n,t){var o=n.data("menu_options");n.data("menu_options",t),o||n.bind("click.show_popup",function(t){return e(".popmenu-wrapper").remove(),setTimeout(function(){var o=e("<ul class='dropdown-menu' id='"+n.attr("id")+"-menu'></ul>"),i=n.data("menu_options");_.size(i)<=0&&e("<li>No Options.</li>").appendTo(o),e.each(i,function(n,t){if(t){var i=t.action||t;o.append(e("<li></li>").append(e("<a>").attr("href",t.url).html(n).click(i)))}else o.append(e("<li></li>").addClass("head").append(e("<a href='#'></a>").html(n)))});var p=e("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(o).appendTo("body"),a=t.pageX-p.width()/2;a=Math.min(a,e(document).scrollLeft()+e(window).width()-e(p).width()-5),a=Math.max(a,e(document).scrollLeft()+5),p.css({top:t.pageY,left:a})},10),setTimeout(function(){var n=function(n){e(n).bind("click.close_popup",function(){e(".popmenu-wrapper").remove(),n.unbind("click.close_popup")})};n(e(window.document)),n(e(window.top.document));for(var t=window.top.frames.length;t--;)n(e(window.top.frames[t].document))},50),!1})}var e=n;return{make_popupmenu:t,make_popup_menus:function(n){n=n||document,e(n).find("div[popupmenu]").each(function(){var o={},i=e(this);i.find("a").each(function(){var n=e(this),t=n.get(0),i=t.getAttribute("confirm"),p=t.getAttribute("href"),a=t.getAttribute("target");o[n.text()]=p?{url:p,action:function(t){if(!i||confirm(i)){if(a)return window.open(p,a),!1;n.click()}else t.preventDefault()}}:null});var p=e(n).find("#"+i.attr("popupmenu"));p.find("a").bind("click",function(n){return n.stopPropagation(),!0}),t(p,o),p.addClass("popup"),i.remove()})}}})});
//# sourceMappingURL=../../maps/ui/popupmenu.js.map
