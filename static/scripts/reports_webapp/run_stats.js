define("reports_webapp/run_stats",["exports"],function(t){"use strict";function e(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()-e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function r(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()-e,t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function a(){var t=new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),0,0)}Object.defineProperty(t,"__esModule",{value:!0}),t.create_chart=function(t,o,i,s){var l,c=t,p=[],g=a();for(l=0;l<24;l++)p.push(r(g,l));var h=[];for(l=0;l<30;l++)h.push(e(g,l));var u={top:60,right:30,bottom:50,left:60},d=0;"hours"==i?d=12.5:"days"==i&&(d=10);var f=300+u.left+u.right,x=1.75;if(0!=n.max(c))v=150/n.max(c);else var v=1;var m=150+u.top+u.bottom;$(".charts").css("height",m*x);var w=n.select("#"+o).attr("width",f).attr("height",m).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 "+f+" "+m).on("click",function(){var t=n.select(this).attr("class");t=t.split(" "),n.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",m).attr("width",f),n.select(this).style("cursor","default").transition().duration(750).attr("height",m*x).attr("width",f*x)}),b=w.selectAll("g").data(c).enter().append("g").attr("transform",function(t,e){var r=+u.left;return"translate("+(r+=+e*d)+","+u.top+")"}).on("mouseenter",function(t){for(var e=1,r=t;r>=10;)r/=10,e++;var a=4*e+10;n.select(n.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(u.left-5)+", "+(150-t*v+ +u.top+10)+" )").attr("visibility","visible").text(t),n.select(n.event.path[1]).select(".tool_tip").attr("width",a+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+u.left-a)+", "+(150-t*v+ +u.top)+" )").attr("width",a+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){n.select(n.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),n.select(n.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(t)});w.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",function(t){return"translate( 300,15 )"}).text(s),w.append("g").attr("class","axis").append("path").attr("class","x").attr("d",function(t){var e=u.left,r=+u.top+150;return"M"+e+" "+r+" L "+(e+300)+" "+r});var y=n.scale.linear().range([150,0]),_=n.svg.axis().scale(y).orient("left").tickFormat(function(t){return n.round(t*n.max(c),0)});if(w.append("g").attr("class","y axis").attr("id","y_"+o).attr("text-anchor","end").attr("transform","translate( "+u.left+","+u.top+")").call(_).select(".domain"),w.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var e=n.select("#y_"+o).node();return"translate("+(+u.left-e.getBoundingClientRect().width-5)+","+(+u.top+e.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),b.append("rect").attr("y",function(t){return 150-t*v}).attr("height",function(t){return t*v}).attr("width",d-1),"hours"==i){b.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+d/2+", 150)"}),b.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, 160 )").text(function(t,e){return p[e].getHours()<10?"0"+String(p[e].getHours()):p[e].getHours()});var M="",k=!1;b.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return p[e].getDate()!=M&&(k?r=20:(r=27,k=!0),M=p[e].getDate()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),M="";var D="";k=!1,b.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text(function(t,e){var r="";return p[e].getDate()!=D&&(r=String(p[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(p[e].getDate()),D=p[e].getDate()),r}).attr("transform",function(t,e){var r=150,a=n.select(this).node().getBBox().width;return p[e].getDate()!=M&&(k?r+=18:(r+=26,k=!0),M=p[e].getDate()),"translate( "+(a+2)+", "+r+" )"})}else if("days"==i){b.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+d/2+", 150)"}),b.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, 160 )").text(function(t,e){return h[e].getDate()<10?"0"+String(h[e].getDate()):h[e].getDate()});var B="",k=!1;b.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return h[e].getMonth()!=B&&(k?r=20:(r=27,k=!0),B=h[e].getMonth()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),B="";var C="";k=!1,b.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text(function(t,e){var r="";return h[e].getMonth()!=C&&(r=String(h[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(h[e].getFullYear()),C=h[e].getMonth()),r}).attr("transform",function(t,e){var r=150,a=n.select(this).node().getBBox().width;return h[e].getMonth()!=B&&(k?r+=18:(r+=26,k=!0),B=h[e].getMonth()),"translate( "+(a+2)+", "+r+" )"})}w.append("g").attr("class","tool_tip").append("rect"),w.select(".tool_tip").append("text"),"jc_dy_chart"!=o&&"jc_hr_chart"!=o||n.select("#"+o).attr("height",m*x).attr("width",f*x).style("cursor","default")},t.create_histogram=function(t,e,r){for(var a=t,o=1.75,i={top:60,right:30,bottom:50,left:60},s=150+i.top+i.bottom,l=300+i.left+i.right,c=n.scale.linear().domain([0,n.max(a)]).range([0,300]),a=n.layout.histogram().bins(c.ticks(20))(a),p=[],g=0;g<a.length;g++)p.push(a[g].length);if(0!=n.max(a))h=150/n.max(p);else var h=1;var u=n.scale.linear().domain([0,n.max(a,function(t){return t.y})]).range([150,0]),d=n.select("#"+e).attr("viewBox","0 0 "+l+" "+s).attr("width",l).attr("height",s).attr("preserveAspectRatio","xMidYMin").on("click",function(){var t=n.select(this).attr("class");t=t.split(" "),n.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",s).attr("width",l),n.select(this).style("cursor","default").transition().duration(750).attr("height",s*o).attr("width",l*o)});d.append("g").append("text").attr("class","title").attr("transform",function(t){return"translate( 300,15 )"}).text(r);var f,x=d.selectAll(".bar").data(a).enter().append("g").attr("class","bar").attr("transform",function(t){return"translate("+(+c(t.x)+ +i.left)+","+(+u(t.y)+ +i.top)+")"}).on("mouseenter",function(t){for(var e=0,r=t.length;r>=1;)r/=10,e++;var a=4*e+10;n.select(n.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(i.left-5)+", "+(150-t.length*h+ +i.top+10)+" )").attr("visibility","visible").text(t.length),n.select(n.event.path[1]).select(".tool_tip").attr("width",a+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+i.left-a)+", "+(150-t.length*h+ +i.top)+" )").attr("width",a+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){n.select(n.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),n.select(n.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")});f=void 0==a[0]?1:c(a[0].dx),x.append("rect").attr("x",1).attr("width",f-1).attr("height",function(t){return 150-u(t.y)});var v=n.svg.axis().scale(c).orient("bottom").tickFormat(function(t){var e=Math.floor(t/60),r=Math.floor(t-60*e);return e<10&&(e="0"+e),r<10&&(r="0"+r),e+":"+r});d.append("g").attr("class","x axis").attr("id","x_"+e).attr("transform","translate( "+i.left+","+(+i.top+150)+")").call(v),d.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=n.select("#x_"+e).node();return"translate("+(+i.left+r.getBoundingClientRect().width/2+30)+","+(+i.top+150+r.getBoundingClientRect().height+10)+")"}).text("ETA - hrs:mins");var m=n.svg.axis().scale(u).orient("left");d.append("g").attr("class","y axis").attr("id","y_"+e).attr("transform","translate( "+i.left+","+i.top+")").call(m),d.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=n.select("#y_"+e).node();return"translate("+(+i.left-r.getBoundingClientRect().width-5)+","+(+i.top+r.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),d.append("g").attr("class","tool_tip").append("rect"),d.select(".tool_tip").append("text")};var n=window.d3});
//# sourceMappingURL=../../maps/reports_webapp/run_stats.js.map
