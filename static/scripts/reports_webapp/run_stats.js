"use strict";function days_in_month(t,e){return new Date(e,t,0).getDate()}function date_by_subtracting_days(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()-e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function date_by_subtracting_hours(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()-e,t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function get_utc_time_hours(){var t=new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),0,0)}function refresh(){window.location.reload(!0)}function create_chart(t,e,r,a){function n(){var t=d3.select(this).attr("class");t=t.split(" "),d3.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",f).attr("width",h),d3.select(this).style("cursor","default").transition().duration(750).attr("height",f*g).attr("width",h*g)}for(var i=t,o=[],s=get_utc_time_hours(),l=0;l<24;l++)o.push(date_by_subtracting_hours(s,l));for(var c=[],s=get_utc_time_hours(),l=0;l<30;l++)c.push(date_by_subtracting_days(s,l));var d={top:60,right:30,bottom:50,left:60},u=0;"hours"==r?u=12.5:"days"==r&&(u=10);var h=300+d.left+d.right,g=1.75;if(0!=d3.max(i))var p=150/d3.max(i);else var p=1;var f=150+d.top+d.bottom;$(".charts").css("height",f*g);var x=d3.select("#"+e).attr("width",h).attr("height",f).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 "+h+" "+f).on("click",n),m=x.selectAll("g").data(i).enter().append("g").attr("transform",function(t,e){return curr_margin=+d.left,curr_margin+=+e*u,"translate("+curr_margin+","+d.top+")"}).on("mouseenter",function(t){for(var e=1,r=t;r>=10;)r/=10,e++;var a=4*e+10;d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(d.left-5)+", "+(150-t*p+ +d.top+10)+" )").attr("visibility","visible").text(t),d3.select(d3.event.path[1]).select(".tool_tip").attr("width",a+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+d.left-a)+", "+(150-t*p+ +d.top)+" )").attr("width",a+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),d3.select(d3.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(t)});x.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",function(t){return"translate( 300,15 )"}).text(a),x.append("g").attr("class","axis").append("path").attr("class","x").attr("d",function(t){var e=d.left,r=+d.top+150;return"M"+e+" "+r+" L "+(e+300)+" "+r});var _=d3.scale.linear().range([150,0]),v=d3.svg.axis().scale(_).orient("left").tickFormat(function(t){return d3.round(t*d3.max(i),0)});if(x.append("g").attr("class","y axis").attr("id","y_"+e).attr("text-anchor","end").attr("transform","translate( "+d.left+","+d.top+")").call(v).select(".domain"),x.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#y_"+e).node();return"translate("+(+d.left-r.getBoundingClientRect().width-5)+","+(+d.top+r.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),m.append("rect").attr("y",function(t){return 150-t*p}).attr("height",function(t){return t*p}).attr("width",u-1),"hours"==r){m.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+u/2+", 150)"}),m.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, 160 )").text(function(t,e){return o[e].getHours()<10?"0"+String(o[e].getHours()):o[e].getHours()});var y="",b=!1;m.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return o[e].getDate()!=y&&(b?r=20:(r=27,b=!0),y=o[e].getDate()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),y="",curr_day_text="",b=!1,m.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text(function(t,e){var r="";return o[e].getDate()!=curr_day_text&&(r=String(o[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(o[e].getDate()),curr_day_text=o[e].getDate()),r}).attr("transform",function(t,e){var r=150,a=d3.select(this).node().getBBox().width;return o[e].getDate()!=y&&(b?r+=18:(r+=26,b=!0),y=o[e].getDate()),"translate( "+(a+2)+", "+r+" )"})}else if("days"==r){m.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+u/2+", 150)"}),m.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, 160 )").text(function(t,e){return c[e].getDate()<10?"0"+String(c[e].getDate()):c[e].getDate()});var w="",b=!1;m.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return c[e].getMonth()!=w&&(b?r=20:(r=27,b=!0),w=c[e].getMonth()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),w="",curr_month_text="",b=!1,m.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text(function(t,e){var r="";return c[e].getMonth()!=curr_month_text&&(r=String(c[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(c[e].getFullYear()),curr_month_text=c[e].getMonth()),r}).attr("transform",function(t,e){var r=150,a=d3.select(this).node().getBBox().width;return c[e].getMonth()!=w&&(b?r+=18:(r+=26,b=!0),w=c[e].getMonth()),"translate( "+(a+2)+", "+r+" )"})}x.append("g").attr("class","tool_tip").append("rect"),x.select(".tool_tip").append("text"),"jc_dy_chart"!=e&&"jc_hr_chart"!=e||d3.select("#"+e).attr("height",f*g).attr("width",h*g).style("cursor","default")}function create_histogram(t,e,r){function a(){var t=d3.select(this).attr("class");t=t.split(" "),d3.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",s).attr("width",l),d3.select(this).style("cursor","default").transition().duration(750).attr("height",s*i).attr("width",l*i)}for(var n=t,i=1.75,o={top:60,right:30,bottom:50,left:60},s=150+o.top+o.bottom,l=300+o.left+o.right,c=d3.scale.linear().domain([0,d3.max(n)]).range([0,300]),n=d3.layout.histogram().bins(c.ticks(20))(n),d=[],u=0;u<n.length;u++)d.push(n[u].length);if(0!=d3.max(n))var h=150/d3.max(d);else var h=1;var g=d3.scale.linear().domain([0,d3.max(n,function(t){return t.y})]).range([150,0]),p=function(t){return hours=Math.floor(t/60),minutes=Math.floor(t-60*hours),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),hours+":"+minutes},f=d3.select("#"+e).attr("viewBox","0 0 "+l+" "+s).attr("width",l).attr("height",s).attr("preserveAspectRatio","xMidYMin").on("click",a);f.append("g").append("text").attr("class","title").attr("transform",function(t){return"translate( 300,15 )"}).text(r);var x,m=f.selectAll(".bar").data(n).enter().append("g").attr("class","bar").attr("transform",function(t){return"translate("+(+c(t.x)+ +o.left)+","+(+g(t.y)+ +o.top)+")"}).on("mouseenter",function(t){for(u=0,size=t.length;size>=1;)size/=10,u++;var e=4*u+10;d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(o.left-5)+", "+(150-t.length*h+ +o.top+10)+" )").attr("visibility","visible").text(t.length),d3.select(d3.event.path[1]).select(".tool_tip").attr("width",e+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+o.left-e)+", "+(150-t.length*h+ +o.top)+" )").attr("width",e+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),d3.select(d3.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")});x=void 0==n[0]?1:c(n[0].dx),m.append("rect").attr("x",1).attr("width",x-1).attr("height",function(t){return 150-g(t.y)});var _=d3.svg.axis().scale(c).orient("bottom").tickFormat(p);f.append("g").attr("class","x axis").attr("id","x_"+e).attr("transform","translate( "+o.left+","+(+o.top+150)+")").call(_),f.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#x_"+e).node();return"translate("+(+o.left+r.getBoundingClientRect().width/2+30)+","+(+o.top+150+r.getBoundingClientRect().height+10)+")"}).text("ETA - hrs:mins");var v=d3.svg.axis().scale(g).orient("left");f.append("g").attr("class","y axis").attr("id","y_"+e).attr("transform","translate( "+o.left+","+o.top+")").call(v),f.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#y_"+e).node();return"translate("+(+o.left-r.getBoundingClientRect().width-5)+","+(+o.top+r.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),f.append("g").attr("class","tool_tip").append("rect"),f.select(".tool_tip").append("text")}
//# sourceMappingURL=../../maps/reports_webapp/run_stats.js.map
