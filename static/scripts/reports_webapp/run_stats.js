"use strict";function days_in_month(t,e){return new Date(e,t,0).getDate()}function date_by_subtracting_days(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()-e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function date_by_subtracting_hours(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()-e,t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function get_utc_time_hours(){var t=new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),0,0)}function refresh(){window.location.reload(!0)}function create_chart(t,e,r,a){for(var n=t,i=[],o=get_utc_time_hours(),s=0;s<24;s++)i.push(date_by_subtracting_hours(o,s));for(var l=[],o=get_utc_time_hours(),s=0;s<30;s++)l.push(date_by_subtracting_days(o,s));var c={top:60,right:30,bottom:50,left:60},d=0;"hours"==r?d=12.5:"days"==r&&(d=10);var u=300+c.left+c.right,h=1.75;if(0!=d3.max(n))g=150/d3.max(n);else var g=1;var p=150+c.top+c.bottom;$(".charts").css("height",p*h);var f=d3.select("#"+e).attr("width",u).attr("height",p).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 "+u+" "+p).on("click",function(){var t=d3.select(this).attr("class");t=t.split(" "),d3.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",p).attr("width",u),d3.select(this).style("cursor","default").transition().duration(750).attr("height",p*h).attr("width",u*h)}),x=f.selectAll("g").data(n).enter().append("g").attr("transform",function(t,e){return curr_margin=+c.left,curr_margin+=+e*d,"translate("+curr_margin+","+c.top+")"}).on("mouseenter",function(t){for(var e=1,r=t;r>=10;)r/=10,e++;var a=4*e+10;d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(c.left-5)+", "+(150-t*g+ +c.top+10)+" )").attr("visibility","visible").text(t),d3.select(d3.event.path[1]).select(".tool_tip").attr("width",a+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+c.left-a)+", "+(150-t*g+ +c.top)+" )").attr("width",a+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),d3.select(d3.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(t)});f.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",function(t){return"translate( 300,15 )"}).text(a),f.append("g").attr("class","axis").append("path").attr("class","x").attr("d",function(t){var e=c.left,r=+c.top+150;return"M"+e+" "+r+" L "+(e+300)+" "+r});var m=d3.scale.linear().range([150,0]),_=d3.svg.axis().scale(m).orient("left").tickFormat(function(t){return d3.round(t*d3.max(n),0)});if(f.append("g").attr("class","y axis").attr("id","y_"+e).attr("text-anchor","end").attr("transform","translate( "+c.left+","+c.top+")").call(_).select(".domain"),f.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#y_"+e).node();return"translate("+(+c.left-r.getBoundingClientRect().width-5)+","+(+c.top+r.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),x.append("rect").attr("y",function(t){return 150-t*g}).attr("height",function(t){return t*g}).attr("width",d-1),"hours"==r){x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+d/2+", 150)"}),x.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, 160 )").text(function(t,e){return i[e].getHours()<10?"0"+String(i[e].getHours()):i[e].getHours()});var v="",y=!1;x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return i[e].getDate()!=v&&(y?r=20:(r=27,y=!0),v=i[e].getDate()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),v="",curr_day_text="",y=!1,x.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text(function(t,e){var r="";return i[e].getDate()!=curr_day_text&&(r=String(i[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(i[e].getDate()),curr_day_text=i[e].getDate()),r}).attr("transform",function(t,e){var r=150,a=d3.select(this).node().getBBox().width;return i[e].getDate()!=v&&(y?r+=18:(r+=26,y=!0),v=i[e].getDate()),"translate( "+(a+2)+", "+r+" )"})}else if("days"==r){x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( "+d/2+", 150)"}),x.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, 160 )").text(function(t,e){return l[e].getDate()<10?"0"+String(l[e].getDate()):l[e].getDate()});var b="",y=!1;x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(t,e){var r=0;return l[e].getMonth()!=b&&(y?r=20:(r=27,y=!0),b=l[e].getMonth()),r}).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",function(t,e){return"translate( 0, 150)"}),b="",curr_month_text="",y=!1,x.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text(function(t,e){var r="";return l[e].getMonth()!=curr_month_text&&(r=String(l[e].toLocaleString("en-us",{month:"long"})),r+=" "+String(l[e].getFullYear()),curr_month_text=l[e].getMonth()),r}).attr("transform",function(t,e){var r=150,a=d3.select(this).node().getBBox().width;return l[e].getMonth()!=b&&(y?r+=18:(r+=26,y=!0),b=l[e].getMonth()),"translate( "+(a+2)+", "+r+" )"})}f.append("g").attr("class","tool_tip").append("rect"),f.select(".tool_tip").append("text"),"jc_dy_chart"!=e&&"jc_hr_chart"!=e||d3.select("#"+e).attr("height",p*h).attr("width",u*h).style("cursor","default")}function create_histogram(t,e,r){for(var a=t,n=1.75,i={top:60,right:30,bottom:50,left:60},o=150+i.top+i.bottom,s=300+i.left+i.right,l=d3.scale.linear().domain([0,d3.max(a)]).range([0,300]),a=d3.layout.histogram().bins(l.ticks(20))(a),c=[],d=0;d<a.length;d++)c.push(a[d].length);if(0!=d3.max(a))u=150/d3.max(c);else var u=1;var h=d3.scale.linear().domain([0,d3.max(a,function(t){return t.y})]).range([150,0]),g=d3.select("#"+e).attr("viewBox","0 0 "+s+" "+o).attr("width",s).attr("height",o).attr("preserveAspectRatio","xMidYMin").on("click",function(){var t=d3.select(this).attr("class");t=t.split(" "),d3.selectAll("."+t[0]).filter("."+t[1]).style("cursor","zoom-in").transition().duration(750).attr("height",o).attr("width",s),d3.select(this).style("cursor","default").transition().duration(750).attr("height",o*n).attr("width",s*n)});g.append("g").append("text").attr("class","title").attr("transform",function(t){return"translate( 300,15 )"}).text(r);var p,f=g.selectAll(".bar").data(a).enter().append("g").attr("class","bar").attr("transform",function(t){return"translate("+(+l(t.x)+ +i.left)+","+(+h(t.y)+ +i.top)+")"}).on("mouseenter",function(t){for(d=0,size=t.length;size>=1;)size/=10,d++;var e=4*d+10;d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("transform","translate( "+(i.left-5)+", "+(150-t.length*u+ +i.top+10)+" )").attr("visibility","visible").text(t.length),d3.select(d3.event.path[1]).select(".tool_tip").attr("width",e+"px").attr("height","15px").select("rect").attr("transform","translate( "+(+i.left-e)+", "+(150-t.length*u+ +i.top)+" )").attr("width",e+"px").attr("height","15px").attr("fill","#ebd9b2")}).on("mouseleave",function(t){d3.select(d3.event.path[1]).select(".tool_tip").select("text").attr("visibility","hidden"),d3.select(d3.event.path[1]).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")});p=void 0==a[0]?1:l(a[0].dx),f.append("rect").attr("x",1).attr("width",p-1).attr("height",function(t){return 150-h(t.y)});var x=d3.svg.axis().scale(l).orient("bottom").tickFormat(function(t){return hours=Math.floor(t/60),minutes=Math.floor(t-60*hours),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),hours+":"+minutes});g.append("g").attr("class","x axis").attr("id","x_"+e).attr("transform","translate( "+i.left+","+(+i.top+150)+")").call(x),g.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#x_"+e).node();return"translate("+(+i.left+r.getBoundingClientRect().width/2+30)+","+(+i.top+150+r.getBoundingClientRect().height+10)+")"}).text("ETA - hrs:mins");var m=d3.svg.axis().scale(h).orient("left");g.append("g").attr("class","y axis").attr("id","y_"+e).attr("transform","translate( "+i.left+","+i.top+")").call(m),g.append("g").append("text").attr("class","ax_title").attr("transform",function(t){var r=d3.select("#y_"+e).node();return"translate("+(+i.left-r.getBoundingClientRect().width-5)+","+(+i.top+r.getBoundingClientRect().height/2-30)+")rotate(-90)"}).text("Number of Jobs"),g.append("g").attr("class","tool_tip").append("rect"),g.select(".tool_tip").append("text")}
//# sourceMappingURL=../../maps/reports_webapp/run_stats.js.map
