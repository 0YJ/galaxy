define(["utils/utils","mvc/ui/ui-misc","mvc/history/options-menu","mvc/history/history-panel-edit-current"],function(a,b,c,d){return Backbone.View.extend({initialize:function(e){this.options=a.merge(e,{}),this.setElement(this._template());var f=c(this.$("#history-options-button"),{anonymous:e.user.valid&&"true"||"false",purgeAllowed:Galaxy.config.allow_user_dataset_purge&&"true"||"false",root:Galaxy.root});Galaxy.historyOptionsMenu=f;var g=new d.CurrentHistoryPanel({el:this.$el,purgeAllowed:Galaxy.config.allow_user_dataset_purge,linkTarget:"galaxy_main",$scrollContainer:function(){return this.$el.parent()}});this.components={header:{title:"History",buttons:[new b.ButtonLink({id:"history-refresh-button",title:"Refresh history",cls:"panel-header-button",icon:"fa fa-refresh",onclick:function(){top.Galaxy&&top.Galaxy.currHistoryPanel&&top.Galaxy.currHistoryPanel.loadCurrentHistory()}})]}},g.connectToQuotaMeter(Galaxy.quotaMeter),g.listenToGalaxy(Galaxy),g.loadCurrentHistory(),Galaxy.currHistoryPanel=g},_template:function(){return'<div id="current-history-panel" class="history-panel"/>'}})});
//# sourceMappingURL=../../../maps/mvc/app/app-panel-history.js.map