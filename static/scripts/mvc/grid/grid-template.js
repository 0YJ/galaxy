define("mvc/grid/grid-template",["exports","utils/utils"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(t);e.default={grid:function(e){var t="";return t=e.embedded?this.grid_header(e)+this.grid_table(e):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'+this.grid_header(e)+'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>'+this.grid_table(e),e.info_text&&(t+='<br><div class="toolParamHelp" style="clear: both;">'+e.info_text+"</div>"),t},grid_table:function(e){return'<form method="post" onsubmit="return false;"><table id="grid-table" class="grid"><thead id="grid-table-header"></thead><tbody id="grid-table-body"></tbody><tfoot id="grid-table-footer"></tfoot></table></form>'},grid_header:function(e){var t='<div class="grid-header">';if(e.embedded||(t+="<h2>"+e.title+"</h2>"),e.global_actions){t+='<ul class="manage-table-actions">';var a=e.global_actions.length>=3;a&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(var r in e.global_actions){var i=e.global_actions[r];t+='<li><a class="action-button use-target" target="'+i.target+'" href="'+i.url_args+'" onclick="return false;" >'+i.label+"</a></li>"}a&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");for(var a in e.columns){var r=e.columns[a];r.visible&&(t+='<th id="'+r.key+'-header">',r.href?t+='<a href="'+r.href+'" class="sort-link" sort_key="'+r.key+'">'+r.label+"</a>":t+=r.label,t+='<span class="sort-arrow">'+r.extra+"</span></th>")}return t+="</tr>"},body:function(e){var t="";0==e.items.length&&(t+='<tr><td colspan="100"><em>No Items</em></td></tr>');for(var a in e.items){var r=e.items[a],i=r.encode_id;t+="<tr ",e.current_item_id==r.id&&(t+='class="current"'),t+=">",e.show_item_checkboxes&&(t+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'+i+'" id="'+i+'" class="grid-row-select-checkbox" /></td>');for(var l in e.columns){var n=e.columns[l];if(n.visible){var s="";n.nowrap&&(s='style="white-space:nowrap;"');var o=r.column_config[n.label],d=o.link,c=o.value,p=o.target;"string"===jQuery.type(c)&&(c=c.replace(/\/\//g,"/"));var u="",f="";n.attach_popup&&(u="grid-"+a+"-popup",f="menubutton",""!=d&&(f+=" split"),f+=" popup"),t+="<td "+s+">",d?(0!=e.operations.length&&(t+='<div id="'+u+'" class="'+f+'" style="float: left;">'),t+='<a class="menubutton-label use-target" target="'+p+'" href="'+d+'" onclick="return false;">'+c+"</a>",0!=e.operations.length&&(t+="</div>")):t+='<div id="'+u+'" class="'+f+'"><label id="'+n.label_id_prefix+i+'" for="'+i+'">'+(c||"")+"</label></div>",t+="</td>"}}t+="</tr>",0}return t},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var a=e.num_page_links,r=e.cur_page_num,i=e.num_pages,l=a/2,n=r-l,s=0;n<=0&&(s=l-(r-(n=1)));var o,d=l+s,c=r+d;0!=(o=c<=i?0:d-((c=i)+1-r))&&(n-=o)<1&&(n=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',n>1&&(t+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var p=n;p<c+1;p++)p==e.cur_page_num?t+='<span class="page-link inactive-link" id="page-link-'+p+'">'+p+"</span>":t+='<span class="page-link" id="page-link-'+p+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+p+'">'+p+"</a></span>";c<i&&(t+='...<span class="page-link" id="page-link-'+i+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+i+'">'+i+"</a></span>"),t+="</span>",t+='<span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span></td></tr>'}if(e.show_item_checkboxes){t+='<tr><input type="hidden" id="operation" name="operation" value=""><td></td><td colspan="100">For <span class="grid-selected-count"></span> selected items: ';for(var u in e.operations)(g=e.operations[u]).allow_multiple&&(t+='<input type="button" value="'+g.label+'" class="operation-button action-button">&nbsp;');t+="</td></tr>"}var f=!1;for(u in e.operations)if(e.operations[u].global_operation){f=!0;break}if(f){t+='<tr><td colspan="100">';for(u in e.operations){var g=e.operations[u];g.global_operation&&(t+='<a class="action-button" href="'+g.global_operation+'">'+g.label+"</a>")}t+="</td></tr>"}return e.legend&&(t+='<tr><td colspan="100">'+e.legend+"</td></tr>"),t},message:function(e){return'<p><div class="'+("success"==e.status?"done":e.status)+'message transient-message">'+_.escape(e.message)+'</div><div style="clear: both"></div></p>'},grid_filters:function(e){var t=e.default_filter_dict,a=e.filters,r="none";e.advanced_search&&(r="block");var i=!1;for(var l in e.columns)if("advanced"==(p=e.columns[l]).filterable){var n=p.key,s=a[n],o=t[n];s&&o&&s!=o&&(r="block"),i=!0}var d="block";"block"==r&&(d="none");var c='<div id="standard-search" style="display: '+d+';"><table><tr><td style="padding: 0;"><table>';for(var l in e.columns)"standard"==(p=e.columns[l]).filterable&&(c+=this.grid_column_filter(e,p));c+="</table></td></tr><tr><td>",i&&(c+='<a href="" class="advanced-search-toggle">Advanced Search</a>'),c+="</td></tr></table></div>",c+='<div id="advanced-search" style="display: '+r+'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="" class="advanced-search-toggle">Close Advanced Search</a></td></tr>';for(var l in e.columns){var p=e.columns[l];"advanced"==p.filterable&&(c+=this.grid_column_filter(e,p))}return c+="</table></div>"},grid_column_filter:function(e,t){e.default_filter_dict;var a=e.filters,r=t.label,i=t.key;"advanced"==t.filterable&&(r=r.toLowerCase());var l="<tr>";if("advanced"==t.filterable&&(l+='<td align="left" style="padding-left: 10px">'+r+":</td>"),l+='<td style="padding-bottom: 1px;">',t.is_text){l+='<form class="text-filter-form" column_key="'+i+'" action="'+e.url+'" method="get" >';for(c in e.columns){var n=e.columns[c],s=a[n.key];s&&"All"!=s&&(n.is_text&&(s=JSON.stringify(s)),l+='<input type="hidden" id="'+n.key+'" name="f-'+n.key+'" value="'+s+'"/>')}l+='<span id="'+i+'-filtering-criteria">';var o=a[i];if(o){var d=jQuery.type(o);if("string"==d&&"All"!=o&&(l+=this.filter_element(i,o)),"array"==d)for(var c in o){var p=o[c],u=o;u=u.slice(c),l+=this.filter_element(i,p)}}l+="</span>";var f="";if("standard"==t.filterable){var g=(f=t.label.toLowerCase()).length;g<20&&(g=20),g+=4}l+='<span class="search-box"><input class="search-box-input" id="input-'+i+'-filter" name="f-'+i+'" type="text" placeholder="'+f+'" size="'+g+'"/><button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;"><i class="fa fa-search"></i></button></span></form>'}else{l+='<span id="'+i+'-filtering-criteria">';var v=!1;for(var b in e.categorical_filters[i]){var h=e.categorical_filters[i][b],_="",m="";for(var k in h)_=k,m=h[k];v&&(l+=" | "),v=!0,(p=a[i])&&h[i]&&p==m?l+='<span class="categorical-filter '+i+'-filter current-filter">'+b+"</span>":l+='<span class="categorical-filter '+i+'-filter"><a href="javascript:void(0);" filter_key="'+_+'" filter_val="'+m+'">'+b+"</a></span>"}l+="</span>"}return l+="</td></tr>"},filter_element:function(e,t){return'<span class="text-filter-val">'+(t=a.default.sanitize(t))+'<a href="javascript:void(0);" filter_key="'+e+'" filter_val="'+t+'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>'}}});
//# sourceMappingURL=../../../maps/mvc/grid/grid-template.js.map
