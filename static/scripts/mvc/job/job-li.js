"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItem=require("mvc/list/list-item"),_listItem2=_interopRequireDefault(_listItem),_datasetList=require("mvc/dataset/dataset-list"),_datasetList2=_interopRequireDefault(_datasetList),_baseMvc=require("mvc/base-mvc"),_baseMvc2=_interopRequireDefault(_baseMvc),_localization=require("utils/localization"),_localization2=_interopRequireDefault(_localization),_super=_listItem2.default.FoldoutListItemView,JobListItemView=_super.extend({className:_super.prototype.className+" job",id:function(){return["job",this.model.get("id")].join("-")},foldoutPanelClass:_datasetList2.default.DatasetList,initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log(this+".initialize:",t),_super.prototype.initialize.call(this,t),this.tool=t.tool||{},this.jobData=t.jobData||{},this.linkTarget=t.linkTarget||"_blank"},_swapNewRender:function(t){return _super.prototype._swapNewRender.call(this,t),this.model.has("state")&&this.$el.addClass("state-"+this.model.get("state")),this.$el},_getFoldoutPanelOptions:function(){var t=_super.prototype._getFoldoutPanelOptions.call(this);return _.extend(t,{collection:this.model.outputCollection,selecting:!1})},_labelParamMap:function(){var t=this.model.get("params"),e={};return _.each(this.tool.inputs,function(a){a.label&&"DataToolParameter"!==a.model_class&&(e[a.label]=t[a.name])}),e},_labelInputMap:function(){var t=this,e={};return _.each(this.jobData.inputs,function(a){var i=t._findToolInput(a.name);i&&(e[i.label]=a)}),e},_findToolInput:function(t){var e=this.tool.inputs,a=_.findWhere(e,{name:t});return a||this._findRepeatToolInput(t,e)},_findRepeatToolInput:function(t,e){e=e||this.tool.inputs;var a=_.find(e,function(e){return 0===t.indexOf(e.name)});if(a)return _.find(a.inputs,function(e){return-1!==t.indexOf(e.name)})},toString:function(){return"JobListItemView("+this.model+")"}});JobListItemView.prototype.templates=function(){_baseMvc2.default.wrapTemplate(['<div class="list-element">','<div class="id"><%- model.id %></div>','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]);var t=_baseMvc2.default.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- view.tool.name %></span>',"</div>",'<div class="subtitle">','<span class="description"><%- view.tool.description %></span','<span class="create-time">'," ",(0,_localization2.default)("Created"),": <%= new Date( job.create_time ).toString() %>, ","</span","</div>","</div>"],"job"),e=_baseMvc2.default.wrapTemplate(['<div class="subtitle">','<span class="description"><%- view.tool.description %></span',"</div>"],"job"),a=_baseMvc2.default.wrapTemplate(['<div class="details">','<div class="params">',"<% _.each( view._labelInputMap(), function( input, label ){ %>",'<div class="input" data-input-name="<%- input.name %>" data-input-id="<%- input.id %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- input.content.name %></span>',"</div>","<% }) %>","<% _.each( view._labelParamMap(), function( param, label ){ %>",'<div class="param" data-input-name="<%- param.name %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- param %></span>',"</div>","<% }) %>","</div>","</div>"],"job");return _.extend({},_super.prototype.templates,{titleBar:t,subtitle:e,details:a})}(),exports.default={JobListItemView:JobListItemView};
//# sourceMappingURL=../../../maps/mvc/job/job-li.js.map
