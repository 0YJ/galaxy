define(["mvc/user/change-user-information","mvc/user/change-password","mvc/user/change-permissions","mvc/user/change-api-key","mvc/user/change-toolbox-filter","mvc/user/change-communication"],function(a,b,c,d,e,f){var g=Backbone.View.extend({initialize:function(){this.setElement("<div/>"),this.render()},render:function(){var g=this;$.getJSON(Galaxy.root+"api/user_preferences",function(h){var i=[];null!==h.id&&(h.remote_user||(i.push({title:"Manage your information (email, address, etc.)",url:"api/user_preferences/get_information",module:a}),i.push({title:"Change your password",url:"api/user_preferences/change_password",module:b})),"galaxy"==h.webapp?(i.push({title:"Change your communication settings",url:"api/user_preferences/change_communication",module:f}),i.push({title:"Change default permissions for new histories",url:"api/user_preferences/change-permissions",module:c}),i.push({title:"Manage your API keys",url:"api/user_preferences/change_api_key",module:d}),i.push({title:"Manage your ToolBox filters",url:"api/user_preferences/change_toolbox_filters",module:e}),h.openid&&!h.remote_user&&i.push({title:"Manage OpenIDs linked to your account",module:null})):(i.push({title:"Manage your API keys",module:d}),i.push({title:"Manage your email alerts",module:null})));var j=$("<div/>").addClass("user-pref");null!==h.id&&(j.append("<h2>User preferences</h2>").append("<p>You are currently logged in as "+h.email+".</p>").append($pages=$("<ul/>")),_.each(i,function(a){$page_link=$('<a target="galaxy_main"> '+a.title+"</a>").on("click",function(){$.getJSON(Galaxy.root+a.url,function(b){j.hide(),b.onclose=function(){j.show()},g.$el.append(new a.module(b).$el)})}),$pages.append($("<li/>").append($page_link))})),g.$el.empty().append(j)})}});return{UserPreferences:g}});
//# sourceMappingURL=../../../maps/mvc/user/user-preferences.js.map