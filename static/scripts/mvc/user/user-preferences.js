define(["mvc/user/change-user-information","mvc/user/change-password","mvc/user/change-permissions","mvc/user/change-api-key","mvc/user/change-toolbox-filter","mvc/user/change-communication"],function(a,b,c,d,e,f){var g=Backbone.View.extend({initialize:function(){this.setElement("<div/>"),this.render()},render:function(){var c=this;$.getJSON(Galaxy.root+"api/user_preferences",function(g){var h=[];null!==g.id&&(g.remote_user||(h.push({title:"Manage your information (email, address, etc.)",url:"api/user_preferences/get_information",module:a}),h.push({title:"Change your password",url:"api/user_preferences/change_password",module:b})),"galaxy"==g.webapp?(h.push({title:"Change your communication settings",url:"api/user_preferences/change_communication",module:f}),h.push({title:"Manage your API keys",url:"api/user_preferences/change_api_key",module:d}),h.push({title:"Manage your ToolBox filters",url:"api/user_preferences/change_toolbox_filters",module:e}),g.openid&&!g.remote_user&&h.push({title:"Manage OpenIDs linked to your account",module:null})):(h.push({title:"Manage your API keys",module:d}),h.push({title:"Manage your email alerts",module:null})));var i=$("<div/>").addClass("user-pref");null!==g.id&&(i.append("<h2>User preferences</h2>").append("<p>You are currently logged in as "+g.email+".</p>").append($pages=$("<ul/>")),_.each(h,function(a){$page_link=$('<a target="galaxy_main"> '+a.title+"</a>").on("click",function(){$.getJSON(Galaxy.root+a.url,function(b){c.$(".user-pref").hide(),b.onclose=function(){c.$(".user-pref").show()},c.$el.append(new a.module(b).$el)})}),$pages.append($("<li/>").append($page_link))})),c.$el.empty().append(i)})}});return{UserPreferences:g}});
//# sourceMappingURL=../../../maps/mvc/user/user-preferences.js.map