define(["mvc/form/form-view","mvc/ui/ui-misc"],function(a,b){var c=Backbone.View.extend({initialize:function(a,b,c){var d=this;this.model=b&&b.model||new Backbone.Model(b),this.form=d._buildForm(b,a,d,c),c.append(this.form.$el)},_buildForm:function(c,d,e,f){return new a({title:"Manage "+c.obj_type+" permissions on "+c.obj_str,icon:"fa-universal-access",inputs:c.role_form,operations:{back:new b.ButtonIcon({icon:"fa-caret-left",tooltip:"Return to user preferences",title:"Preferences",onclick:function(){e.form.$el.remove(),d.showPreferences()}})},onchange:function(){e._savePermissions(e,d,f)}})},_updateForm:function(a,b,c,d){c.form.$el.remove(),c.form=c._buildForm(d,a,c,b),b.append(c.form.$el),c.form.message.update({message:d.message,status:"error"===d.status?"danger":"success"})},_savePermissions:function(a,b,c){var d=a.form.data.create(),e=!1,f=!1,g={};for(var h in d)h.indexOf("actionrole")>0&&null!==d[h]&&(e=!0),(h.indexOf("_in")>0||h.indexOf("_out")>0)&&null!==d[h]&&(f=!0,g[h]=d[h][0]);e&&f&&(g.update_roles=f,$.getJSON(Galaxy.root+"api/user_preferences/set_default_permissions",g,function(d){a._updateForm(b,c,a,d)}))}});return{ChangePermissions:c}});
//# sourceMappingURL=../../../maps/mvc/user/change-permissions.js.map