define(["mvc/form/form-view","mvc/ui/ui-misc","mvc/ui/ui-select"],function(a,b,c){var d=Backbone.View.extend({initialize:function(){this.setElement("<div/>"),this.render()},render:function(){var a=this,d=[];$.getJSON(Galaxy.root+"api/workflows/",function(e){a.$el.empty().append(a._templateHeader());for(var f=0;f<e.length;f++){var g={},h=e[f];g.id=h.id,g.text=h.name,g.update_time=h.update_time,g.workflow_steps=h.latest_workflow_steps,d.push(g)}a.btnNewWorkflow=new b.Button({title:"New Workflow",tooltip:"Create a workflow",icon:"fa-plus-circle",onclick:function(){a.new_workflow()}}),a.btnImportWorkflow=new b.Button({title:"Import Workflow",tooltip:"Import a workflow",icon:"fa-upload",onclick:function(){a.import_workflow()}}),a.$el.append(a.btnNewWorkflow.$el),a.$el.append(a.btnImportWorkflow.$el),d.length>0?(a.selectWorkflows=new c.View({css:"workflow-list",container:a.$(".user-workflows"),data:d,value:d[0].id,onchange:function(b){a.select_workflow(a,b,d)}}),a.$el.append(a.selectWorkflows.$el),a.select_workflow(a,d[0].id,d)):a.$el.append('<div class="wf-nodata"> You have no workflows. </div>')})},select_workflow:function(a,b,c){var d="",e=$(".user-workflows");e.find(".manage-table").remove();for(var f=0;f<c.length;f++){var g=c[f];if(b.toString()===g.id.toString()){d=a._templateWorkflowInfoTable(g),e.append(d);break}}},new_workflow:function(){window.location.href=Galaxy.root+"workflow/create"},import_workflow:function(){},_templateWorkflowInfoTable:function(a){return'<table class="manage-table colored"><tr class="header"><th>Name</th><th># of Steps</th><th>Last Updated Time</th></tr><tr><td class="wf-td">'+a.text+'</td><td class="wf-td">'+a.workflow_steps+'</td><td class="wf-td">'+a.update_time+"</td></tr></table>"},_templateHeader:function(){return'<div class="user-workflows"><div class="page-container"><h2>Your workflows</h2></div></div>'}});return{View:d}});
//# sourceMappingURL=../../../maps/mvc/workflow/workflow.js.map