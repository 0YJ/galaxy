define(["mvc/form/form-view","mvc/ui/ui-misc","mvc/ui/ui-select"],function(a,b,c){var d=Backbone.View.extend({initialize:function(){this.setElement("<div/>"),this.render()},render:function(){var a=this,d=[],e=[],f=Galaxy.root+"api/workflows/",g=Galaxy.user.attributes.username;$.getJSON(f,function(f){a.$el.empty().append(a._templateHeader()),_.each(f,function(a){var b={};b.id=a.id,b.text=a.name,b.update_time=a.update_time,b.workflow_steps=a.latest_workflow_steps,a.owner===g?d.push(b):e.push(b)}),a.btnNewWorkflow=new b.Button({title:"New Workflow",tooltip:"Create a workflow",icon:"fa-plus-circle",onclick:function(){window.location.href=Galaxy.root+"workflow/create"}}),a.btnImportWorkflow=new b.Button({title:"Import Workflow",tooltip:"Import a workflow",icon:"fa-upload",cls:"btn-wf",onclick:function(){window.location.href=Galaxy.root+"workflow/import_workflow"}}),a.btnCongifureWorkflowMenu=new b.Button({title:"Configure menu",tooltip:"Configure your workflow menu",icon:"fa-cog",cls:"btn-wf",onclick:function(){window.location.href=Galaxy.root+"workflow/configure_menu"}}),a.$el.append(a.btnNewWorkflow.$el),a.$el.append(a.btnImportWorkflow.$el),a.$el.append(a.btnCongifureWorkflowMenu.$el),d.length>0?(a.selectWorkflows=new c.View({css:"workflow-list",container:a.$(".user-workflows"),data:d,value:d[0].id,onchange:function(b){a.select_workflow(a,b,d,"user-workflows")}}),a.$el.append(a.selectWorkflows.$el),a.select_workflow(a,d[0].id,d,"user-workflows")):a.$el.append('<div class="wf-nodata"> You have no workflows. </div>'),e.length>0?(a.selectSharedWorkflows=new c.View({css:"workflow-list",container:a.$(".shared-workflows"),data:e,value:e[0].id,onchange:function(b){a.select_workflow(a,b,e,"shared-workflows")}}),a.$el.append(a.selectSharedWorkflows.$el),a.select_workflow(a,e[0].id,e,"shared-workflows")):a.$el.append('<div class="wf-nodata"> No workflows have been shared with you. </div>')})},select_workflow:function(a,b,c,d){_.each(c,function(c){if(b.toString()===c.id.toString()){var e=$("."+d);e.find(".manage-table").remove(),e.append(a._templateWorkflowInfoTable(c))}})},_templateWorkflowInfoTable:function(a){return'<table class="manage-table colored"><tr class="header"><th>Name</th><th># of Steps</th><th>Last Updated Time</th></tr><tr><td class="wf-td"><div class="dropdown"><button class="menubutton" type="button" data-toggle="dropdown">'+_.escape(a.text)+'<span class="caret"></span></button><ul class="dropdown-menu action-dpd"><li><a href="/workflow/editor?id='+a.id+'">Edit</a></li><li><a href="/root?workflow_id='+a.id+'">Run</a></li><li><a href="/workflow/sharing?id='+a.id+'">Share or Download</a></li><li><a href="/workflow/copy?id='+a.id+'">Copy</a></li><li><a href="/workflow/rename?id='+a.id+'">Rename</a></li><li><a href="/workflow/display_by_id?id='+a.id+'">View</a></li><li><a href="/workflow/delete?id='+a.id+'">Delete</a></li></ul></div></td><td class="wf-td">'+a.workflow_steps+'</td><td class="wf-td">'+a.update_time+"</td></tr></table>"},_templateHeader:function(){return'<div class="user-workflows wf"><div class="page-container"><h2>Your workflows</h2></div></div><div class="shared-workflows wf"><div class="page-container"><h2>Workflows shared with you by others</h2></div></div>'}});return{View:d}});
//# sourceMappingURL=../../../maps/mvc/workflow/workflow.js.map