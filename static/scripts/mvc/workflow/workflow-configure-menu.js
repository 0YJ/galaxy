"use strict";define([],function(){return{View:Backbone.View.extend({initialize:function(e){this.setElement("<div/>"),this.render()},render:function(){var e=this;$.getJSON(Galaxy.root+"api/workflows/menu/",function(t){var a=t.workflows,n=t.ids_in_menu,c=null;e.$el.empty().append(e._templateConfigWorkflowHeader()),c=e.$el.find(".configure-workflows"),c.append(e._templateActionButtons()),a.length>0?(c.append(e._templateConfigureWorkflow(e,a,n)),e.save_workflow_menu(e),e.make_checked(e,n),e.register_check_uncheck_all(e)):c.append(e._templateNoWorkflow())})},register_check_uncheck_all:function(e){var t=e.$el.find(".check-all-wf"),a=e.$el.find(".uncheck-all-wf");t.click(function(t){e.check_uncheck_all(e,!0)}),a.click(function(t){e.check_uncheck_all(e,!1)})},check_uncheck_all:function(e,t){$.each(e.$el.find(".wf-config-item"),function(){$(this)[0].checked=t})},make_checked:function(e,t){$.each(e.$el.find(".wf-config-item"),function(){var e=$(this)[0];_.each(t,function(t){parseInt(e.value)===t&&(e.checked=!0)})})},save_workflow_menu:function(e){e.$el.find(".wf-save-menu").click(function(t){var a=[];$.each(e.$el.find(".wf-config-item"),function(){var e=$(this)[0];(e.checked||"true"===e.checked)&&a.push(parseInt(e.value))}),$.ajax({type:"PUT",url:Galaxy.root+"api/workflows/menu/",data:JSON.stringify({workflow_ids:a}),contentType:"application/json"}).done(function(e){window.location=Galaxy.root+"user"})})},_templateActionButtons:function(){return'<ul class="manage-table-actions"><li><a class="fa fa-check-square-o wf-action check-all-wf" title="Select all workflows" href="#"></a></li><li><a class="fa fa-square-o wf-action uncheck-all-wf" title="Unselect all workflows" href="#"></a></li></ul>'},_templateConfigureWorkflow:function(e,t,a){var n="",c="";return n+='<table class="table colored"><thead><tr class="header"><th class="wf-td">Name</th><th class="wf-td">Owner</th><th class="wf-td"># of Steps</th><th class="wf-td">Show in menu</th></tr></thead>',_.each(t,function(t){c=c+'<tr><td class="wf-td">'+_.escape(t.name)+"</td><td>"+(t.owner===Galaxy.user.attributes.username?"You":t.owner)+'</td><td class="wf-td">'+t.number_of_steps+'</td><td class="wf-td">'+e._templateInputCheckbox(e,t,a)+"</td></tr>"}),n=n+'<tbody class="workflow-config-menu">'+c+"</tbody></table>",n=n+'<a class="action-button wf-save-menu wf-action fa fa-floppy-o" href="#" title="Save"><span>Save</span></a><a class="action-button wf-back wf-action fa fa-arrow-left" href="'+Galaxy.root+'user" title="Back to User Preferences"><span>Back to User Preferences</span></a>'},_templateNoWorkflow:function(){return'<div class="wf-nodata"> You do not have any accessible workflows. </div>'},_templateInputCheckbox:function(e,t){return'<input type="checkbox" class="wf-config-item" name="workflow_ids" value="'+t.id+'" />'},_templateConfigWorkflowHeader:function(){return'<div class="page-container"><div class="configure-workflows wf"><h2>Configure workflow menu</h2></div></div>'}})}});
//# sourceMappingURL=../../../maps/mvc/workflow/workflow-configure-menu.js.map
