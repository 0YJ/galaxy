define(["utils/utils"],function(a){var b=Backbone.View.extend({optionsDefault:{id:a.uid(),cls:"ui-select",error_text:"No data available",empty_text:"No selection",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1},initialize:function(b){this.options=a.merge(b,this.optionsDefault),this.setElement(this._template(this.options)),this.$select=this.$el.find(".select"),this.$icon=this.$el.find(".icon"),this.$button=this.$el.find(".button"),this.options.multiple&&(this.$el.addClass("ui-select-multiple"),this.$select.prop("multiple",!0),this.$button.remove()),this.update(this.options.data),void 0!==this.options.value&&this.value(this.options.value),this.options.visible||this.hide(),this.options.wait?this.wait():this.show();var c=this;this.$select.on("change",function(){c._change()}),this.on("change",function(){c._change()})},value:function(a){return void 0!==a&&(null===a&&(a="__null__"),(this.exists(a)||this.options.multiple)&&(this.$select.val(a),this.$select.select2&&this.$select.select2("val",a))),this._getValue()},first:function(){var a=this.$select.find("option").first();return a.length>0?a.val():null},text:function(){return this.$select.find("option:selected").text()},show:function(){this.unwait(),this.$select.show(),this.$el.show()},hide:function(){this.$el.hide()},wait:function(){this.$icon.removeClass(),this.$icon.addClass("fa fa-spinner fa-spin")},unwait:function(){this.$icon.removeClass(),this.$icon.addClass("fa fa-caret-down")},disabled:function(){return this.$select.is(":disabled")},enable:function(){this.$select.prop("disabled",!1)},disable:function(){this.$select.prop("disabled",!0)},add:function(a){this.$select.append(this._templateOption(a)),this._refresh()},del:function(a){this.$select.find("option[value="+a+"]").remove(),this.$select.trigger("change"),this._refresh()},update:function(a){var b=this._getValue();this.$select.find("option").remove(),!this.options.multiple&&this.options.optional&&this.$select.append(this._templateOption({value:"__null__",label:this.options.empty_text}));for(var c in a)this.$select.append(this._templateOption(a[c]));this._refresh(),this.options.searchable&&(this.$select.select2("destroy"),this.$select.select2(),this.$(".select2-input").off("keypress.selectall").on("keypress.selectall",function(a){if(a.ctrlKey||a.metaKey){var b=$(this).parents('div[class*="select2-container"]').attr("id").replace("s2id_",""),c=$("#"+b);if(97==a.which){var d=[];c.find("option").each(function(a,b){d[d.length]=$(b).attr("value")}),c.select2("val",d)}else 120==a.which&&c.select2("val","");$(".select2-drop-mask").click()}})),this.value(b),null===this._getValue()&&this.value(this.first())},setOnChange:function(a){this.options.onchange=a},exists:function(a){return this.$select.find('option[value="'+a+'"]').length>0},_change:function(){this.options.onchange&&this.options.onchange(this._getValue())},_getValue:function(){var b=this.$select.val();return a.validate(b)?b:null},_refresh:function(){var a=this.$select.find("option").length;0==a?(this.disable(),this.$select.empty(),this.$select.append(this._templateOption({value:"__null__",label:this.options.error_text}))):this.enable()},_templateOption:function(a){return'<option value="'+a.value+'">'+a.label+"</option>"},_template:function(a){return'<div id="'+a.id+'" class="'+a.cls+'"><select id="'+a.id+'_select" class="select"/><div class="button"><i class="icon"/></div></div>'}});return{View:b}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-select-default.js.map