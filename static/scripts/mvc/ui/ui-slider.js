define(["utils/utils"],function(a){var b=Backbone.View.extend({initialize:function(b){var c=this;this.model=b&&b.model||new Backbone.Model({id:a.uid(),min:null,max:null,step:null,precise:!1,split:1e4}).set(b),this.setElement(this._template(this.model.attributes)),this.$text=this.$("#text"),this.$slider=this.$("#slider"),this.$slider_text=this.$(".ui-form-slider-text"),void 0!==this.options.value&&this.value(this.options.value);var d=[];this.$text.on("change",function(){c.value($(this).val())}).on("keyup",function(a){d[a.which]=!1,c.options.onchange&&c.options.onchange($(this).val())}).on("keydown",function(a){var b=a.which;d[b]=!0,c.options.is_workflow&&d[16]&&52==b?(c.value("$"),event.preventDefault()):8==b||9==b||13==b||37==b||39==b||b>=48&&57>=b&&!d[16]||b>=96&&105>=b||(190==b||110==b)&&-1==$(this).val().indexOf(".")&&c.options.precise||(189==b||109==b)&&-1==$(this).val().indexOf("-")||c._isParameter($(this).val())||d[91]||d[17]||event.preventDefault()}),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var a=this.model.attributes,b=null!==a.max&&null!==a.min&&a.max>a.min,c=a.step;c||(c=a.precise&&b?(a.max-a.min)/a.split:1),b?(this.$slider.show(),this.$slider.slider({min:a.min,max:a.max,step:c}),this.$slider.on("slide",function(a,b){self.value(b.value)})):(this.$slider.hide(),this.$slide_text.css("width","100%"))},value:function(a){return void 0!==a&&(null===a||""===a||this._isParameter(a)||(isNaN(a)&&(a=0),null!==this.options.max&&(a=Math.min(a,this.options.max)),null!==this.options.min&&(a=Math.max(a,this.options.min))),this.$slider&&this.$slider.slider("value",a),this.$text.val(a),this.options.onchange&&this.options.onchange(a)),this.$text.val()},_isParameter:function(a){return this.options.is_workflow&&"$"===String(a).substring(0,1)},_template:function(a){return'<div id="'+a.id+'" class="ui-form-slider"><input id="text" type="text" class="ui-form-slider-text"/><div id="slider" class="ui-form-slider-element"/></div>'}});return{View:b}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-slider.js.map