define(["utils/utils"],function(a){var b=Backbone.View.extend({initialize:function(b){var c=this;this.visible=!1,this.$nav=null,this.$content=null,this.first_tab=null,this.current_id=null,this.list={},this.options=a.merge(b,{title_new:"",operations:null,onnew:null,max:null,onchange:null}),this.setElement($(this._template(this.options))),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.options.operations&&$.each(this.options.operations,function(a,b){b.$el.prop("id",a),c.$nav.find(".operations").append(b.$el)}),this.options.onnew&&this.$nav.append($(this._template_tab_new(this.options)).tooltip({title:"Add a new tab",placement:"bottom",container:c.$el}).on("click",function(){c.options.onnew()})),this.$el.on("click",function(){$(".tooltip").hide()})},size:function(){return _.size(this.list)},current:function(){return this.$el.find(".tab-pane.active").attr("id")},add:function(a){var b=this,c=a.id,d=$(this._template_tab(a)),e=$("<div/>").attr("id",a.id).addClass("tab-pane");this.list[c]=!0,this.options.onnew?this.$nav.find("#new-tab").before(d):this.$nav.append(d),this.$content.append(e.append(a.$el)),1==this.size()&&(d.addClass("active"),e.addClass("active"),this.first_tab=c),this.options.max&&this.size()>=this.options.max&&this.$el.find("#new-tab").hide(),a.ondel?d.find("#delete").tooltip({title:"Delete this tab",placement:"bottom",container:b.$el}).on("click",function(){a.ondel()}):d.tooltip({title:a.tooltip,placement:"bottom",container:b.$el}),d.on("click",function(d){d.preventDefault(),a.onclick?a.onclick():b.show(c)}),this.current_id||(this.current_id=c)},del:function(a){this.$("#tab-"+a).remove(),this.$("#"+a).remove(),this.first_tab=this.first_tab==a?null:this.first_tab,null!=this.first_tab&&this.show(this.first_tab),this.list[a]&&delete this.list[a],this.size()<this.options.max&&this.$el.find("#new-tab").show()},delRemovable:function(){for(var a in this.list)this.del(a)},show:function(a){this.$el.fadeIn("fast"),this.visible=!0,a&&(this.$("#tab-"+this.current_id).removeClass("active"),this.$("#"+this.current_id).removeClass("active"),this.$("#tab-"+a).addClass("active"),this.$("#"+a).addClass("active"),this.current_id=a),this.options.onchange&&this.options.onchange(a)},hide:function(){this.$el.fadeOut("fast"),this.visible=!1},hideOperation:function(a){this.$nav.find("#"+a).hide()},showOperation:function(a){this.$nav.find("#"+a).show()},setOperation:function(a,b){this.$nav.find("#"+a).off("click").on("click",b)},title:function(a,b){var c=this.$("#tab-title-text-"+a);return b&&c.html(b),c.html()},retitle:function(a){var b=0;for(var c in this.list)this.title(c,++b+": "+a)},_template:function(){return'<div class="ui-tabs tabbable tabs-left"><ul id="tab-navigation" class="tab-navigation nav nav-tabs"><div class="operations" style="float: right; margin-bottom: 4px;"></div></ul><div id="tab-content" class="tab-content"/></div>'},_template_tab:function(a){var b='<li id="tab-'+a.id+'" class="tab-element"><a id="tab-title-link-'+a.id+'" title="" href="#'+a.id+'" data-original-title=""><span id="tab-title-text-'+a.id+'" class="tab-title-text">'+a.title+"</span>";return a.ondel&&(b+='<i id="delete" class="ui-tabs-delete fa fa-minus-circle"/>'),b+="</a></li>"},_template_tab_new:function(a){return'<li id="new-tab"><a href="javascript:void(0);"><i class="ui-tabs-add fa fa-plus-circle"/>'+a.title_new+"</a></li>"}});return{View:b}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-tabs.js.map