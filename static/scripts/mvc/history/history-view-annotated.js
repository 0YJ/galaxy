define(["mvc/history/history-view","mvc/history/hda-li","mvc/history/hdca-li","mvc/base-mvc","utils/localization"],function(a,b,c,d,e){"use strict";var f=a.HistoryView,g=f.extend({className:f.prototype.className+" annotated-history-panel",_buildNewRender:function(){var a=f.prototype._buildNewRender.call(this);return this.renderHistoryAnnotation(a),a},renderHistoryAnnotation:function(a){var b=this.model.get("annotation");b&&a.find(".controls .annotation-display").text(b)},renderItems:function(a){a=a||this.$el,f.prototype.renderItems.call(this,a);var b=$("<tr/>").addClass("headers").append([$("<th/>").text(e("Dataset")),$("<th/>").text(e("Annotation"))]);return b=$("<tbody/>").html(b),a.find("> .list-items").prepend(b),self.views},_renderItemView$el:function(a){var b=_.find(a.el.classList,function(a){return/^state\-/.test(a)}),c=a.model.get("annotation")||"";return $("<tr/>").append([$("<td/>").addClass("contents-container").append(a.render(0).$el).addClass(b?b.replace("-","-color-"):""),$("<td/>").addClass("additional-info").text(c)])},events:_.extend(_.clone(f.prototype.events),{"click tr":function(a){$(a.currentTarget).find(".title-bar").click()},"click .icon-btn":function(a){a.stopPropagation();var b=$(a.currentTarget);b.length&&"dropdown"===b.attr("data-toggle")&&b.dropdown("toggle")}}),_clickSectionLink:function(a){var b=$(a.currentTarget).parent().parent().data("section");this.openSection(b)},toString:function(){return"AnnotatedHistoryView("+(this.model?this.model.get("name"):"")+")"}});return g.prototype.templates=function(){var a=d.wrapTemplate(["<div>",'<div class="controls"></div>','<table class="list-items"></table>','<div class="empty-message infomessagesmall"></div>',"</div>"]),b=d.wrapTemplate(["<% if( section.number === view.model.contents.currentSection ){ %>",'<tbody class="list-items-section current-section" data-section="<%- section.number %>"></tbody>',"<% } else { %>",'<tbody class="list-items-section" data-section="<%- section.number %>">','<tr data-section="<%- section.number %>">','<td><a class="list-items-section-link" href="javascript:void(0)">',"<%- section.first %>  ",e("to")," <%- section.last %>","</a></td>","</tr>","</tbody>","<% } %>"],"section");return _.extend(_.clone(f.prototype.templates),{el:a,listItemsSection:b})}(),{AnnotatedHistoryView:g}});
//# sourceMappingURL=../../../maps/mvc/history/history-view-annotated.js.map