define(["mvc/history/history-model","mvc/history/history-panel-edit","mvc/base-mvc","utils/ajax-queue","ui/mode-button","ui/search-input"],function(){function a(a){return['<form action="">','<label for="copy-modal-title">',_l("Enter a title for the copied history"),":","</label><br />",'<input id="copy-modal-title" class="form-control" style="width: 100%" value="',a.defaultCopyName,'" />',"<br />","<p>",_l("You can make a copy of the history that includes all datasets in the original history"),_l(" or just the active (not deleted) datasets."),"</p>",'<input name="copy-what" type="radio" id="copy-non-deleted" value="copy-non-deleted" checked />','<label for="copy-non-deleted">',_l("Copy only active (not deleted) datasets"),"</label><br />",'<input name="copy-what" type="radio" id="copy-all" value="copy-all" />','<label for="copy-all">',_l("Copy all datasets, including deleted ones"),"</label><br />","</form>"].join("")}function b(a){if(!a){if(!Galaxy.modal.$("#invalid-title").size()){var b=$("<p/>").attr("id","invalid-title").css({color:"red","margin-top":"8px"}).addClass("bg-danger").text(_l("Please enter a valid history title"));Galaxy.modal.$(".modal-body").append(b)}return!1}return a}function c(c,d){function e(a){var b=("copy-all"===Galaxy.modal.$('input[name="copy-what"]:checked').val(),$('<p><span class="fa fa-spinner fa-spin"></span> Copying history...</p>').css({"margin-top":"8px"}));Galaxy.modal.$(".modal-body").children().replaceWith(b),Galaxy.modal.$("button").prop("disabled",!0),c.copy(!0,a,"blah").fail(function(){alert(_l("History could not be copied. Please contact a Galaxy administrator"))}).always(function(){Galaxy.modal.hide()})}function f(){var a=Galaxy.modal.$("#copy-modal-title").val();b(a)&&e(a)}if(d=d||{},!Galaxy||!Galaxy.modal)return c.copy();var g=c.get("name"),h="Copy of '"+g+"'";Galaxy.modal.show(_.extend({title:_l("Copying history")+' "'+g+'"',body:$(a({defaultCopyName:h})),buttons:{Cancel:function(){Galaxy.modal.hide()},Copy:f},closing_events:!0},d)),$("#copy-modal-title").focus().select(),$("#copy-modal-title").on("keydown",function(a){13===a.keyCode&&f()})}return c});
//# sourceMappingURL=../../../maps/mvc/history/copy-dialog.js.map