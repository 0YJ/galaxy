define(["utils/utils","mvc/grid/grid-view"],function(a,b){function c(a){var b=$(a).children(".menubutton-label");return(b.attr("href").match(/id=(\w+)/)||[])[1]}define("copy-dialog-hack",["mvc/history/history-model","mvc/history/copy-dialog"],function(a,b){function c(){console.error(arguments),alert("${_('History could not be fetched. Please contact an administrator')}")}function d(){window.parent&&window.parent.Galaxy&&window.parent.Galaxy.currHistoryPanel&&window.parent.Galaxy.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)}function e(e,f,g){g=g||{};var h=$(this),i=f(this),j=h.data("popupmenu").options,k=j.filter(function(a){return"Copy"===a.html})[0];k.href="javascript:void(0)",k.func=function(e){e.preventDefault();var f=new a.History({id:i});f.fetch().fail(c).done(function(){b(f,g).done(d)})}}return e}),$(function(){function a(){gridView.$(".popup.menubutton").each(function(a){copyDialogHack.call(this,a,c)})}if(!gridView)return void console.warn("no grid");a();var b=gridView.init_grid;gridView.init_grid=function(c){b.call(gridView,c),a()}});var d=Backbone.View.extend({initialize:function(){var b=this;this.setElement($("<div/>")),this.model=new Backbone.Model,a.get({url:Galaxy.root+"history/list",success:function(a){a.dict_format=!0,b.model.set(a),b.render()}})},render:function(){var a=new b(this.model.attributes);this.$el.empty().append(a.$el)}});return{View:d}});
//# sourceMappingURL=../../../maps/mvc/history/history-list.js.map