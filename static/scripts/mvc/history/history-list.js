"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _utils=require("utils/utils"),_utils2=_interopRequireDefault(_utils),_gridView=require("mvc/grid/grid-view"),_gridView2=_interopRequireDefault(_gridView),_historyModel=require("mvc/history/history-model"),_historyModel2=_interopRequireDefault(_historyModel),_copyDialog=require("mvc/history/copy-dialog"),_copyDialog2=_interopRequireDefault(_copyDialog),View=Backbone.View.extend({title:"Histories",initialize:function(e){var i=this;this.setElement($("<div/>")),this.model=new Backbone.Model,_utils2.default.get({url:Galaxy.root+"history/"+e.action_id+"?"+$.param(Galaxy.params),success:function(e){e.dict_format=!0,_.each(e.operations,function(e){"Copy"==e.label&&(e.onclick=function(e){i._showCopyDialog(e)})}),i.model.set(e),i.render()}})},render:function(){var e=new _gridView2.default(this.model.attributes);this.$el.empty().append(e.$el)},_showCopyDialog:function(e){var i=new _historyModel2.default.History({id:e});i.fetch().fail(function(){alert("History could not be fetched. Please contact an administrator")}).done(function(){(0,_copyDialog2.default)(i,{}).done(function(){window.parent&&window.parent.Galaxy&&window.parent.Galaxy.currHistoryPanel&&window.parent.Galaxy.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)})})}});exports.default={View:View};
//# sourceMappingURL=../../../maps/mvc/history/history-list.js.map
