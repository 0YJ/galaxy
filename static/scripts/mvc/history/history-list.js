define(["exports","utils/utils","mvc/grid/grid-view","mvc/history/history-model","mvc/history/copy-dialog"],function(e,t,o,i,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(t),l=a(o),d=a(i),s=a(n),c=Backbone.View.extend({title:"Histories",initialize:function(e){var t=this;this.setElement($("<div/>")),this.model=new Backbone.Model,r.default.get({url:Galaxy.root+"history/"+e.action_id+"?"+$.param(Galaxy.params),success:function(e){e.dict_format=!0,_.each(e.operations,function(e){"Copy"==e.label&&(e.onclick=function(e){t._showCopyDialog(e)})}),t.model.set(e),t.render()}})},render:function(){var e=new l.default(this.model.attributes);this.$el.empty().append(e.$el)},_showCopyDialog:function(e){var t=new d.default.History({id:e});t.fetch().fail(function(){alert("History could not be fetched. Please contact an administrator")}).done(function(){(0,s.default)(t,{}).done(function(){window.parent&&window.parent.Galaxy&&window.parent.Galaxy.currHistoryPanel&&window.parent.Galaxy.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)})})}});e.default={View:c}});
//# sourceMappingURL=../../../maps/mvc/history/history-list.js.map
