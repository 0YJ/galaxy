$.jQTouch=function(t){function e(t){void 0!==window.console&&!0===x.debug&&console.warn(t)}function n(t){"string"==typeof t.selector&&"string"==typeof t.name&&B.push(t)}function a(t){"string"==typeof t.name&&"function"==typeof t.isSupported&&"function"==typeof t.fn&&P.push(t)}function o(t,e){j.unshift({page:t,animation:e,hash:"#"+t.attr("id"),id:t.attr("id")})}function r(t){var n=$(t.target);n.is(Q.join(", "))||(n=$(t.target).closest(Q.join(", "))),n&&n.attr("href")&&!n.isExternalLink()?(e("Need to prevent default click behavior."),t.preventDefault()):e("No need to prevent default click behavior."),$.support.touch?e("Not converting click to a tap event because touch handler is on the job."):(e("Converting click event to a tap event because touch handlers are not present or off."),$(t.target).trigger("tap",t))}function i(t,n,a,r){function i(e){var o=H;$.support.animationEvents&&a&&x.useAnimations?(t.unbind("webkitAnimationEnd",i),t.removeClass(l+" out inmotion"),l&&n.removeClass(l),y.removeClass("animating animating3d"),!0===x.trackScrollPositions&&(n.css("top",-n.data("lastScroll")),setTimeout(function(){n.css("top",0),window.scroll(0,n.data("lastScroll")),$(".scroll",n).each(function(){this.scrollTop=-$(this).data("lastScroll")})},0))):(t.removeClass(l+" out inmotion"),l&&n.removeClass(l),o+=260),setTimeout(function(){n.removeClass("in"),window.scroll(0,0)},o),t.unselect(),n.trigger("pageAnimationEnd",{direction:"in",animation:a,back:r}),t.trigger("pageAnimationEnd",{direction:"out",animation:a,back:r})}if(r=r||!1,void 0===n||0===n.length)return $.fn.unselect(),e("Target element is missing."),!1;if(n.hasClass("current"))return $.fn.unselect(),e("You are already on the page you are trying to navigate to."),!1;if($(":focus").trigger("blur"),t.trigger("pageAnimationStart",{direction:"out",back:r}),n.trigger("pageAnimationStart",{direction:"in",back:r}),$.support.animationEvents&&a&&x.useAnimations){!$.support.transform3d&&a.is3d&&(e("Did not detect support for 3d animations, falling back to "+x.defaultAnimation+"."),a.name=x.defaultAnimation);var l=a.name,c=a.is3d?"animating3d":"";r&&(l=l.replace(/left|right|up|down|in|out/,s)),e("finalAnimationName is "+l+"."),t.bind("webkitAnimationEnd",i),y.addClass("animating "+c);var u=window.pageYOffset;!0===x.trackScrollPositions&&n.css("top",window.pageYOffset-(n.data("lastScroll")||0)),n.addClass(l+" in current"),t.removeClass("current").addClass(l+" out inmotion"),!0===x.trackScrollPositions&&(t.data("lastScroll",u),$(".scroll",t).each(function(){$(this).data("lastScroll",this.scrollTop)}))}else n.addClass("current in"),t.removeClass("current"),i();return E=n,r?j.shift():o(E,a),h(E.attr("id")),!0}function s(t){return{up:"down",down:"up",left:"right",right:"left",in:"out",out:"in"}[t]||t}function l(){j.length<1&&e("History is empty."),1===j.length&&(e("You are on the first panel."),window.history.go(-1));var t=j[0],n=j[1];return i(t.page,n.page,t.animation,!0)?I:(e("Could not go back."),!1)}function c(t,n){var a=j[0].page;if("string"==typeof n)for(var o=0,r=B.length;o<r;o++)if(B[o].name===n){n=B[o];break}if("string"==typeof t){var s=$(t);if(s.length<1)return void m(t,{animation:n});t=s}return i(a,t,n)?I:(e("Could not animate pages."),!1)}function u(t){return location.hash===j[0].hash?(e("We are on the right panel."),!0):""===location.hash?(l(),!0):j[1]&&location.hash===j[1].hash?(l(),!0):(e("Could not find ID in history, just forwarding to DOM element."),void c($(location.hash),x.defaultAnimation))}function d(t){for(var n,a=0,o=B.length;a<o;a++)if(t.is(B[a].selector)){n=B[a];break}return n||(e("Animation could not be found. Using "+x.defaultAnimation+"."),n=x.defaultAnimation),n}function p(t,e){var n=null,a=document.createElement("div");return a.innerHTML=t,$(a).children().each(function(t,e){var a=$(this);a.attr("id")||a.attr("id","page-"+ ++A),$("#"+a.attr("id")).remove(),y.append(a),y.trigger("pageInserted",{page:a}),!a.hasClass("current")&&n||(n=a)}),null!==n&&(c(n,e),n)}function f(){scrollTo(0,0),q=90===Math.abs(window.orientation)?"landscape":"portrait",y.removeClass("portrait landscape").addClass(q).trigger("turn",{orientation:q})}function h(t){x.updateHash&&(location.hash="#"+t.replace(/^#/,""))}function m(t,e){var n={data:null,method:"GET",animation:null,callback:null,$referrer:null},a=$.extend({},n,e);"#"!==t?$.ajax({url:t,data:a.data,type:a.method,success:function(t){var e=p(t,a.animation);e&&("GET"===a.method&&!0===x.cacheGetRequests&&a.$referrer&&a.$referrer.attr("href","#"+e.attr("id")),a.callback&&a.callback(!0))},error:function(t){a.$referrer&&a.$referrer.unselect(),a.callback&&a.callback(!1)}}):a.$referrer&&a.$referrer.unselect()}function g(t,e){$(":focus").trigger("blur"),t.preventDefault();var n="string"==typeof t?$(t).eq(0):t.target?$(t.target):$(t);return!(n.length&&n.is(x.formSelector)&&n.attr("action"))||(m(n.attr("action"),{data:n.serialize(),method:n.attr("method")||"POST",animation:d(n),callback:e}),!1)}function v(t){var n=t.closest("form");return 0!==n.length?(e("About to submit parent form."),n.trigger("submit"),!1):(e("No parent form found."),!0)}function b(){var t,n,a,o,r;return t=document.getElementsByTagName("head")[0],n=document.body,a=document.createElement("style"),a.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#jqt-3dtest{height:3px}}",o=document.createElement("div"),o.id="jqt-3dtest",t.appendChild(a),n.appendChild(o),r=3===o.offsetHeight,a.parentNode.removeChild(a),o.parentNode.removeChild(o),e("Support for 3d transforms: "+r+"."),r}function w(){var t=!1,e=/OS (\d+)(_\d+)* like Mac OS X/i,n=window.navigator.userAgent;return e.test(n)&&(t=e.exec(n)[1]>=5),t}function S(t){var e=$(t.target),n=Q.join(", ");e.is(n)||(e=e.closest(n)),e.length&&e.attr("href")&&e.addClass("active"),e.on($.support.touch?"touchmove":"mousemove",function(){e.removeClass("active")}),e.on("touchend",function(){e.unbind("touchmove mousemove")})}function k(t){if(t.isDefaultPrevented())return!0;var n=$(t.target);if(n.is(Q.join(", "))||(n=n.closest(Q.join(", "))),!n.length||!n.attr("href"))return e("Could not find a link related to tapped element."),!0;for(var a={e:t,$el:n,target:n.attr("target"),hash:n.prop("hash"),href:n.attr("href"),jQTSettings:x},o=0,r=P.length;o<r;o++){var i=P[o];if(i.isSupported(t,a))return i.fn(t,a)}}function C(){a({name:"external-link",isSupported:function(t,e){return e.$el.isExternalLink()},fn:function(t,e){return e.$el.unselect(),!0}}),a({name:"back-selector",isSupported:function(t,e){return e.$el.is(e.jQTSettings.backSelector)},fn:function(t,e){l(e.hash)}}),a({name:"submit-selector",isSupported:function(t,e){return e.$el.is(e.jQTSettings.submitSelector)},fn:function(t,e){v(e.$el)}}),a({name:"webapp",isSupported:function(t,e){return"_webapp"===e.target},fn:function(t,e){return window.location=e.href,!1}}),a({name:"no-op",isSupported:function(t,e){return"#"===e.href},fn:function(t,e){return e.$el.unselect(),!0}}),a({name:"standard",isSupported:function(t,e){return e.hash&&"#"!==e.hash},fn:function(t,e){var n=d(e.$el);return e.$el.addClass("active"),c($(e.hash).data("referrer",e.$el),n,e.$el.hasClass("reverse")),!1}}),a({name:"external",isSupported:function(t,e){return!0},fn:function(t,e){var n=d(e.$el);return e.$el.addClass("loading active"),m(e.$el.attr("href"),{animation:n,callback:function(){e.$el.removeClass("loading"),setTimeout($.fn.unselect,250,e.$el)},$referrer:e.$el}),!1}})}var y,T=$("head"),j=[],A=0,x={},E="",q="portrait",Q=[],I={},H=100,N=$.jQTouch.prototype.extensions,O=$.jQTouch.prototype.tapHandlers,P=[],B=[],D="",G={addGlossToIcon:!0,backSelector:".back, .cancel, .goback",cacheGetRequests:!0,debug:!0,defaultAnimation:"slideleft",fixedViewport:!0,formSelector:"form",fullScreen:!0,fullScreenClass:"fullscreen",icon:null,icon4:null,preloadImages:!1,starter:$(document).ready,startupScreen:null,statusBar:"default",submitSelector:".submit",touchSelector:"a, .touch",trackScrollPositions:!0,updateHash:!0,useAnimations:!0,useFastTouch:!0,useTouchScroll:!0,animations:[{name:"cubeleft",selector:".cubeleft, .cube",is3d:!0},{name:"cuberight",selector:".cuberight",is3d:!0},{name:"dissolve",selector:".dissolve"},{name:"fade",selector:".fade"},{name:"flipleft",selector:".flipleft, .flip",is3d:!0},{name:"flipright",selector:".flipright",is3d:!0},{name:"pop",selector:".pop",is3d:!0},{name:"swapleft",selector:".swapleft, .swap",is3d:!0},{name:"swapright",selector:".swapright",is3d:!0},{name:"slidedown",selector:".slidedown"},{name:"slideright",selector:".slideright"},{name:"slideup",selector:".slideup"},{name:"slideleft",selector:".slideleft, .slide, #jqt > * > ul li a"}]};return x=$.extend({},G,t),function(t){if(x.preloadImages)for(var e=x.preloadImages.length-1;e>=0;e--)(new Image).src=x.preloadImages[e];var n=x.addGlossToIcon?"":"-precomposed";x.icon&&(D+='<link rel="apple-touch-icon'+n+'" href="'+x.icon+'" />'),x.icon4&&(D+='<link rel="apple-touch-icon'+n+'" sizes="114x114" href="'+x.icon4+'" />'),x.startupScreen&&(D+='<link rel="apple-touch-startup-image" href="'+x.startupScreen+'" />'),x.fixedViewport&&(D+='<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>'),x.fullScreen&&(D+='<meta name="apple-mobile-web-app-capable" content="yes" />',x.statusBar&&(D+='<meta name="apple-mobile-web-app-status-bar-style" content="'+x.statusBar+'" />')),D&&T.prepend(D)}(),$.fn.isExternalLink=function(){var t=$(this);return"_blank"===t.attr("target")||"external"===t.attr("rel")||t.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]')},$.fn.makeActive=function(){return $(this).addClass("active")},$.fn.unselect=function(t){t?t.removeClass("active"):$(".active").removeClass("active")},I={addAnimation:n,animations:B,getOrientation:function(){return q},goBack:l,insertPages:p,goTo:c,history:j,settings:x,submitForm:g},x.starter(function(){$.support||($.support={}),$.support.animationEvents=void 0!==window.WebKitAnimationEvent,$.support.touch=void 0!==window.TouchEvent&&window.navigator.userAgent.indexOf("Mobile")>-1&&x.useFastTouch,$.support.transform3d=b(),$.support.ios5=w(),$.support.touch||e("This device does not support touch interaction, or it has been deactivated by the developer. Some features might be unavailable."),$.support.transform3d||e("This device does not support 3d animation. 2d animations will be used instead.");for(var t=0,i=N.length;t<i;t++){var s=N[t];$.isFunction(s)&&$.extend(I,s(I))}for(var l=0,d=O.length;l<d;l++)a(O[l]);C();for(var p=0,m=G.animations.length;p<m;p++){var v=G.animations[p];void 0!==x[v.name+"Selector"]&&(v.selector=x[v.name+"Selector"]),n(v)}Q.push(x.touchSelector),Q.push(x.backSelector),Q.push(x.submitSelector),$(Q.join(", ")).css("-webkit-touch-callout","none");var T=[];0===(y=$("#jqt")).length&&(e('Could not find an element with the id "jqt", so the body id has been set to "jqt". If you are having any problems, wrapping your panels in a div with the id "jqt" might help.'),y=$(document.body).attr("id","jqt")),$.support.transform3d&&T.push("supports3d"),x.useTouchScroll&&($.support.ios5?T.push("touchscroll"):T.push("autoscroll")),x.fullScreenClass&&!0===window.navigator.standalone&&T.push(x.fullScreenClass,x.statusBar),y.addClass(T.join(" ")).bind("click",r).bind("orientationchange",f).bind("submit",g).bind("tap",k).bind($.support.touch?"touchstart":"mousedown",S).trigger("orientationchange"),$(window).bind("hashchange",u);var j=location.hash;h((E=0===$("#jqt > .current").length?$("#jqt > *:first-child").addClass("current"):$("#jqt > .current")).attr("id")),o(E),1===$(j).length&&c(j)}),I},$.jQTouch.prototype.extensions=[],$.jQTouch.prototype.tapHandlers=[],$.jQTouch.addExtension=function(t){$.jQTouch.prototype.extensions.push(t)},$.jQTouch.addTapHandler=function(t){$.jQTouch.prototype.tapHandlers.push(t)};