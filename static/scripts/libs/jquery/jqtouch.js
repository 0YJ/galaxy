(function(){$.jQT=function(){function t(t){var u,c,d,f,h,p,m,g,v,w,b,C,y,k,S,j,T,A;this.tapHandlers=this.tapHandlers.concat([{name:"external-link",isSupported:function(t,e){return g(e.$el)},fn:function(t,e){return e.$el.removeClass("active"),!0}},{name:"back-selector",isSupported:function(t){return function(e,n){return n.$el.is(t.settings.backSelector)}}(this),fn:function(t){return function(e,n){return t.goBack(n.hash),!1}}(this)},{name:"submit-selector",isSupported:function(t){return function(e,n){return n.$el.is(t.settings.submitSelector)}}(this),fn:function(t,e){S(e.$el)}},{name:"webapp",isSupported:function(t,e){return"_webapp"===e.target},fn:function(t,e){return window.location=e.href,!1}},{name:"no-op",isSupported:function(t,e){return"#"===e.href},fn:function(t,e){return e.$el.removeClass("active"),!0}},{name:"standard",isSupported:function(t,e){return e.hash&&"#"!==e.hash},fn:function(t){return function(e,n){var r;return r=f(n.$el),n.$el.addClass("active"),t.goTo($(n.hash).data("referrer",n.$el),r,n.$el.hasClass("reverse")),!1}}(this)},{name:"external",isSupported:function(t,e){return!0},fn:function(t,e){var n;return n=f(e.$el),e.$el.addClass("loading active"),C(e.$el.attr("href"),{animation:n,callback:function(){return e.$el.removeClass("loading"),setTimeout(function(){return e.$el.removeClass("active")},250)},$referrer:e.$el}),!1}}]),this.goTo=function(t,e){var n,r,a,s,l;if(r=i[0].page,"string"==typeof e)for(s=0,l=o.length;s<l;s++)if((n=o[s]).name===e){e=n;break}if("string"==typeof t){if(!(a=$(t)).length)return void C(t,{animation:e});t=a}if(!d(r,t,e))return console.warn("Could not animate pages."),!1},this.goBack=function(t){var e,n,r,o,a,s;if(i.length<1&&console.warn("History is empty."),1===i.length&&(console.warn("You are on the first panel."),window.history.go(-1)),"number"==typeof t)t>0?i.splice(1,t):t<0&&i.splice(1,i.length+t-1);else if(/^#.+/.test(t)){for(e=0,r=a=0,s=i.length;a<s;r=++a)if(i[r].hash===t){e=r;break}i.splice(1,e-1)}if(n=i[0],o=i[1],null!=n&&null!=o)return d(n.page,o.page,n.animation,!0)?void 0:(console.warn("Could not go back."),!1)},this.history=i,p=function(t){return function(e){var n,o,i,a,s,l,u;for(s=0,l=(u=t.settings.preloadImages).length;s<l;s++)o=u[s],(new Image).src=t.settings.preloadImages[o];if(n=[],i=t.settings.addGlossToIcon?"":"-precomposed",t.settings.icon&&n.push('<link rel="apple-touch-icon'+i+'" href="'+t.settings.icon+'">'),t.settings.icon4&&n.push('<link rel="apple-touch-icon'+i+'" sizes="114x114" href="'+t.settings.icon4+'">'),t.settings.startupScreen&&n.push('<link rel="apple-touch-startup-image" href="'+t.settings.startupScreen+'">'),a=[],t.settings.fixedViewport&&a.push("initial-scale=1.0","maximum-scale=1.0","user-scalable=0"),t.settings.minimalUIViewport&&a.push("minimal-ui"),a&&n.push('<meta name="viewport" content="'+a.join(", ")+'">'),t.settings.fullScreen&&(n.push('<meta name="apple-mobile-web-app-capable" content="yes" />'),t.settings.statusBar&&n.push('<meta name="apple-mobile-web-app-status-bar-style" content="'+t.settings.statusBar+'">')),n.length)return r.prepend(n.join(""))}}(this),m=function(t){return function(n,r){var o;if(o=null,$(n).each(function(t,n){var r;if((r=$(this)).attr("id")||r.attr("id","page-"+ ++a),$("#"+r.attr("id")).remove(),e.append(r),e.trigger("pageInserted",{page:r}),r.hasClass("current")||!o)return o=r}),null==o)return!1;t.goTo(o,r)}}(this),u=function(t,e){var n;return n=t.attr("id"),i.unshift({page:t,animation:e,hash:"#"+n,id:n})},c=function(t){var e;(e=$(t.target)).is(l.join(", "))||(e=e.closest(l.join(", "))),e&&e.attr("href")&&!g(e)?(console.warn("Need to prevent default click behavior."),t.preventDefault()):console.warn("No need to prevent default click behavior."),j.touch||(console.warn("Converting click event to a tap event because touch handlers are not present or off."),$(t.target).trigger("tap",t))},h=function(t){return function(e){return location.hash===i[0].hash?(console.log("We are on the right panel."),!0):""===location.hash?(t.goBack(),!0):i[1]&&location.hash===i[1].hash?(t.goBack(),!0):(console.warn("Could not find ID in history, just forwarding to DOM element."),void t.goTo($(location.hash),t.settings.defaultAnimation))}}(this),g=function(t){return"_blank"===t.attr("target")||"external"===t.attr("rel")||t.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]')},f=function(t){return function(e){var n,r,i,a;for(i=0,a=o.length;i<a;i++)if(n=o[i],e.is(n.selector)){r=n;break}return r||(console.warn("Animation could not be found. Using "+t.settings.defaultAnimation+"."),r=t.settings.defaultAnimation),r}}(this),C=function(t){return function(e,n){return n=$.extend({},{data:null,method:"GET",animation:null,$referrer:null},n),"#"!==e.charAt(0)?$.ajax({url:e,data:n.data,type:n.method,success:function(e){var r;if((r=m(e,n.animation))&&"GET"===n.method&&!0===t.settings.cacheGetRequests&&n.$referrer)return n.$referrer.attr("href","#"+r.attr("id"))},error:function(t){if(n.$referrer)return n.$referrer.removeClass("active")}}):n.$referrer?n.$referrer.removeClass("active"):void 0}}(this),j=void 0,y=function(t){return function(){var o,i,a,s,d,f;for(j=$.support||{},$.extend(j,{animationEvents:void 0!==window.WebKitAnimationEvent,touch:void 0!==window.TouchEvent&&window.navigator.userAgent.indexOf("Mobile")>-1&&t.settings.useFastTouch,transform3d:function(){var t,e,n,o,i;return n=r.get(0),t=document.body,i=document.createElement("style"),i.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#jqt-3dtest{height:3px}}",e=document.createElement("div"),e.id="jqt-3dtest",n.appendChild(i),t.appendChild(e),o=3===e.offsetHeight,i.parentNode.removeChild(i),e.parentNode.removeChild(e),console.warn("Support for 3d transforms: "+o+"."),o}}),j.touch||console.warn("This device does not support touch interaction, or it has been deactivated by the developer. Some features might be unavailable."),j.transform3d||console.warn("This device does not support 3d animation. 2d animations will be used instead."),s=0,d=(f=t.extensions).length;s<d;s++)i=f[s],$.isFunction(i)&&$.extend(t,i(t));if(l.push(t.settings.touchSelector.concat(t.settings.backSelector,t.settings.submitSelector)),$(l.join(", ")).css("-webkit-touch-callout","none"),e=$("#jqt"),o=[],e.length||(console.warn('Could not find an element with the id “jqt”, so the body id has been set to "jqt". If you are having any problems, wrapping your panels in a div with the id “jqt” might help.'),e=$(document.body).attr("id","jqt")),j.transform3d&&o.push("supports3d"),o.push(t.settings.useTouchScroll?"touchscroll":"autoscroll"),t.settings.fullScreenClass&&window.navigator.standalone&&o.push(t.settings.fullScreenClass,t.settings.statusBar),e.addClass(o.join(" ")).on("click",c).on("orientationchange",v).on("submit",k).on("tap",T).on(j.touch?"touchstart":"mousedown",A).trigger("orientationchange"),t.settings.updateHash&&$(window).on("hashchange",h),a=location.hash,n=$("#jqt > .current").length?$("#jqt > .current"):$("#jqt > *:first-child").addClass("current"),b(n.attr("id")),u(n),t.settings.updateHash&&$(a).length)return t.goTo(a)}}(this),v=function(){var t;return scrollTo(0,0),t=90===Math.abs(window.orientation)?"landscape":"portrait",e.removeClass("portrait landscape").addClass(t).trigger("turn",{orientation:t})},w=function(t){return{up:"down",down:"up",left:"right",right:"left",in:"out",out:"in"}[t]||t},b=function(t){return function(e){if(t.settings.updateHash)return location.hash="#"+e.replace(/^#/,"")}}(this),k=function(t){return function(e,n){var r;if($(":focus").trigger("blur"),(r="string"==typeof e?$(e).eq(0):e.target?$(e.target):$(e)).length&&r.is(t.settings.formSelector)&&r.attr("action"))return e.preventDefault(),C(r.attr("action"),{data:r.serialize(),method:r.attr("method")||"POST",animation:f(r),callback:n})}}(this),S=function(t){var e;return(e=t.closest("form")).length?(console.warn("About to submit parent form."),e.trigger("submit"),!1):(console.warn("No parent form found."),!0)},T=function(t){return function(e){var n,r,o,i,a,s,u;if(e.isDefaultPrevented())return!0;if(n=$(e.target),i=l.join(","),n.is(i)||(n=n.closest(i)),!n.length||!n.attr("href"))return console.warn("Could not find a link related to tapped element."),!0;for(o={e:e,$el:n,target:n.attr("target"),hash:n.prop("hash"),href:n.attr("href")},a=0,s=(u=t.tapHandlers).length;a<s;a++)if((r=u[a]).isSupported(e,o))return r.fn(e,o)}}(this),A=function(t){var e,n;return e=$(t.target),n=l.join(", "),e.is(n)||(e=e.closest(n)),e.length&&e.attr("href")&&e.addClass("active"),e.on(j.touch?"touchmove":"mousemove",function(){return e.removeClass("active")}),e.on("touchend",function(){return e.off("touchend mouseup"),e.off("touchmove mousemove")})},d=function(t){return function(r,o,a,l){var c,d,f;return null==l&&(l=!1),f=function(n){return j.animationEvents&&a&&t.settings.useAnimations?(r.off("webkitAnimationEnd",f),r.removeClass(c+" out"),c&&o.removeClass(c),e.removeClass("animating animating3d")):(r.removeClass(c+" out"),c&&o.removeClass(c)),setTimeout(function(){return o.removeClass("in"),window.scroll(0,0)},s),r.find(".active").removeClass("active"),o.trigger("pageAnimationEnd",{direction:"in",animation:a,back:l}),r.trigger("pageAnimationEnd",{direction:"out",animation:a,back:l})},o.length?o.hasClass("current")?($(".active").removeClass("active"),console.warn("You are already on the page you are trying to navigate to."),!1):($(":focus").trigger("blur"),r.trigger("pageAnimationStart",{direction:"out",back:l}),o.trigger("pageAnimationStart",{direction:"in",back:l}),j.animationEvents&&a&&t.settings.useAnimations?(c=a.name,d=a.is3d?" animating3d":"",!j.transform3d&&a.is3d&&(console.warn("Did not detect support for 3d animations, falling back to "+t.settings.defaultAnimation+"."),c=t.settings.defaultAnimation,d=""),l&&(c=c.replace(/left|right|up|down|in|out/,w)),null==c&&(c=t.settings.defaultAnimation),console.warn("finalAnimationName:",c),r.on("webkitAnimationEnd",f),e.addClass("animating"+d),o.addClass(c+" in current"),r.removeClass("current").addClass(c+" out")):(o.addClass("current in"),r.removeClass("current"),f()),n=o,l?i.shift():u(n,a),b(n.attr("id")),!0):($(".active").removeClass("active"),console.warn("Target element is missing."),!1)}}(this),this.settings=$.extend({},this.defaults,t),p(),this.settings.starter(y)}var e,n,r,o,i,a,s,l;return t.prototype.extensions=[],t.prototype.animations=[{name:"cubeleft",selector:".cubeleft, .cube",is3d:!0},{name:"cuberight",selector:".cuberight",is3d:!0},{name:"dissolve",selector:".dissolve"},{name:"fade",selector:".fade"},{name:"flipleft",selector:".flipleft, .flip",is3d:!0},{name:"flipright",selector:".flipright",is3d:!0},{name:"pop",selector:".pop",is3d:!0},{name:"swapleft",selector:".swapleft, .swap",is3d:!0},{name:"swapright",selector:".swapright",is3d:!0},{name:"slidedown",selector:".slidedown"},{name:"slideright",selector:".slideright"},{name:"slideup",selector:".slideup"},{name:"slideleft",selector:".slideleft, .slide, #jqt > * > ul li a"}],t.prototype.orientation="portrait",t.prototype.tapHandlers=[],t.prototype.defaults={addGlossToIcon:!0,backSelector:".back, .cancel, .goback",cacheGetRequests:!0,defaultAnimation:"slideleft",fixedViewport:!0,formSelector:"form",fullScreen:!0,fullScreenClass:"fullscreen",icon:null,icon4:null,minimalUIViewport:!0,preloadImages:!1,starter:$(document).ready,startupScreen:null,statusBar:"default",submitSelector:".submit",touchSelector:"a, .touch",updateHash:!0,useAnimations:!0,useFastTouch:!0,useTouchScroll:!0},t.addExtension=function(t){return this.prototype.extensions.push(t)},t.addTapHandler=function(t){if("string"==typeof t.name&&"function"==typeof t.isSupported&&"function"==typeof t.fn)return this.prototype.tapHandlers.push(t)},t.addAnimation=function(t){if("string"==typeof t.selector&&"string"==typeof t.name)return this.animations.push(t)},e=void 0,r=$("head"),o=t.prototype.animations,i=[],a=0,n="",l=[],s=100,t}(),$.jQTouch=$.jQT}).call(this);