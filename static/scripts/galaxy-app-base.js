define(["libs/underscore","libs/backbone/backbone","mvc/user/user-model","utils/metrics-logger","utils/add-logging","utils/localization"],function(a,b,c,d,e,f){function g(a,b){console.debug("GalaxyApp:",a,b);var c=this;return c._init(a||{},b||{})}return console.debug("app-base id",jQuery.id),jQuery.id||(jQuery.id="app-base"),e(g,"GalaxyApp"),g.prototype._init=function(c){var d=this;return a.extend(d,b.Events),d._processOptions(c),d.debug("GalaxyApp.options: ",d.options),d.root=c.root||"/",d._patchGalaxy(window.Galaxy),d._initLogger(c.loggerOptions||{}),d.debug("GalaxyApp.logger: ",d.logger),d._initLocale(),d.debug("GalaxyApp.localize: ",d.localize),d.config=c.config||{},d.debug("GalaxyApp.config: ",d.config),d._initUser(c.user||{}),d.debug("GalaxyApp.user: ",d.user),d._setUpListeners(),d.trigger("ready",d),d},g.prototype.defaultOptions={patchExisting:!0,root:"/"},g.prototype._processOptions=function(a){var b=this,c=b.defaultOptions;b.debug("_processOptions: ",a),b.options={};for(var d in c)c.hasOwnProperty(d)&&(b.options[d]=a.hasOwnProperty(d)?a[d]:c[d]);return b},g.prototype._patchGalaxy=function(a){var b=this;if(b.options.patchExisting&&a){b.debug("found existing Galaxy object:",a);for(var c in a)a.hasOwnProperty(c)&&(b.debug("	 patching in "+c+" to Galaxy"),b[c]=a[c])}},g.prototype._initLogger=function(a){var b=this;return b.debug("_initLogger:",a),b.logger=new d.MetricsLogger(a),b},g.prototype._initLocale=function(a){var b=this;return b.debug("_initLocale:",a),b.localize=f,window._l=b.localize,b},g.prototype._initUser=function(a){var b=this;return b.debug("_initUser:",a),b.user=new c.User(a),b.currUser=b.user,b},g.prototype._setUpListeners=function(){var a=this;return a.lastAjax={},$(document).bind("ajaxSend",function(b,c,d){var e=d.data;try{e=JSON.parse(e)}catch(f){}a.lastAjax={url:location.href.slice(0,-1)+d.url,data:e}}),a},g.prototype.toString=function(){var a=this.user.get("email")||"(anonymous)";return"GalaxyApp("+a+")"},{GalaxyApp:g}});
//# sourceMappingURL=../maps/galaxy-app-base.js.map